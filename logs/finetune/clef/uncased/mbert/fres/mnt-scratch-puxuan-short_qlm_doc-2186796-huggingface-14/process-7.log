00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=7, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-14', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='es')
00:00:15 - Evaluating every 1 epochs ...
00:00:15 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:16 - test has 31 queries ...
00:00:16 - Data reading done ...
00:00:23 - adding 9-th encoder to optimizer...
00:00:23 - adding 10-th encoder to optimizer...
00:00:23 - adding 11-th encoder to optimizer...
00:00:23 - process[7]: training epoch 0 ...
00:00:40 - process[7] - epoch 0 - train iter 540 - 27434.8 words/s - loss: 0.6790
00:00:40 - process[7]: training epoch 1 ...
00:00:57 - process[7] - epoch 1 - train iter 540 - 28752.5 words/s - loss: 0.5621
00:00:57 - process[7]: training epoch 2 ...
00:01:13 - process[7] - epoch 2 - train iter 540 - 29137.2 words/s - loss: 0.5102
00:01:13 - process[7]: training epoch 3 ...
00:01:30 - process[7] - epoch 3 - train iter 540 - 27502.5 words/s - loss: 0.4995
00:01:30 - process[7]: training epoch 4 ...
00:01:46 - process[7] - epoch 4 - train iter 540 - 28886.6 words/s - loss: 0.4819
00:01:46 - process[7]: training epoch 5 ...
00:02:03 - process[7] - epoch 5 - train iter 540 - 28783.0 words/s - loss: 0.4398
00:02:03 - process[7]: training epoch 6 ...
00:02:19 - process[7] - epoch 6 - train iter 540 - 28799.1 words/s - loss: 0.4364
00:02:19 - process[7]: training epoch 7 ...
00:02:36 - process[7] - epoch 7 - train iter 540 - 28912.0 words/s - loss: 0.4228
00:02:36 - process[7]: training epoch 8 ...
00:02:52 - process[7] - epoch 8 - train iter 540 - 28815.2 words/s - loss: 0.3934
00:02:52 - process[7]: training epoch 9 ...
00:03:08 - process[7] - epoch 9 - train iter 540 - 29052.1 words/s - loss: 0.4152
00:03:08 - process[7]: training epoch 10 ...
00:03:24 - process[7] - epoch 10 - train iter 540 - 28864.0 words/s - loss: 0.3858
00:03:24 - process[7]: evaluating epoch 10 on dev ...
00:03:41 - process[7] - dev - epoch 10 - mAP: 0.411 w/ 31 queries
00:03:41 - process[7]: evaluating epoch 10 on test ...
00:03:55 - test set during evaluation: 11460/11458
00:03:55 - process[7] - test - epoch 10 - mAP: 0.444 w/ 31 queries
00:03:55 - process[7]: training epoch 11 ...
00:04:11 - process[7] - epoch 11 - train iter 540 - 29181.4 words/s - loss: 0.3791
00:04:11 - process[7]: evaluating epoch 11 on dev ...
00:04:25 - process[7] - dev - epoch 11 - mAP: 0.408 w/ 31 queries
00:04:25 - process[7]: training epoch 12 ...
00:04:41 - process[7] - epoch 12 - train iter 540 - 29116.9 words/s - loss: 0.3421
00:04:41 - process[7]: evaluating epoch 12 on dev ...
00:04:55 - process[7] - dev - epoch 12 - mAP: 0.404 w/ 31 queries
00:04:55 - process[7]: training epoch 13 ...
00:05:11 - process[7] - epoch 13 - train iter 540 - 29189.3 words/s - loss: 0.3429
00:05:11 - process[7]: evaluating epoch 13 on dev ...
00:05:25 - process[7] - dev - epoch 13 - mAP: 0.421 w/ 31 queries
00:05:26 - process[7]: evaluating epoch 13 on test ...
00:05:39 - test set during evaluation: 11460/11458
00:05:40 - process[7] - test - epoch 13 - mAP: 0.457 w/ 31 queries
00:05:40 - process[7]: training epoch 14 ...
00:05:56 - process[7] - epoch 14 - train iter 540 - 28718.5 words/s - loss: 0.3187
00:05:56 - process[7]: evaluating epoch 14 on dev ...
00:06:10 - process[7] - dev - epoch 14 - mAP: 0.417 w/ 31 queries
00:06:10 - process[7]: training epoch 15 ...
00:06:26 - process[7] - epoch 15 - train iter 540 - 28917.0 words/s - loss: 0.3268
00:06:26 - process[7]: evaluating epoch 15 on dev ...
00:06:40 - process[7] - dev - epoch 15 - mAP: 0.415 w/ 31 queries
00:06:40 - process[7]: training epoch 16 ...
00:06:56 - process[7] - epoch 16 - train iter 540 - 29019.8 words/s - loss: 0.2872
00:06:56 - process[7]: evaluating epoch 16 on dev ...
00:07:10 - process[7] - dev - epoch 16 - mAP: 0.423 w/ 31 queries
00:07:10 - process[7]: evaluating epoch 16 on test ...
00:07:25 - test set during evaluation: 11460/11458
00:07:25 - process[7] - test - epoch 16 - mAP: 0.454 w/ 31 queries
00:07:25 - process[7]: training epoch 17 ...
00:07:42 - process[7] - epoch 17 - train iter 540 - 29049.8 words/s - loss: 0.2923
00:07:42 - process[7]: evaluating epoch 17 on dev ...
00:07:58 - process[7] - dev - epoch 17 - mAP: 0.416 w/ 31 queries
00:07:58 - process[7]: training epoch 18 ...
00:08:14 - process[7] - epoch 18 - train iter 540 - 29071.4 words/s - loss: 0.3060
00:08:14 - process[7]: evaluating epoch 18 on dev ...
00:08:30 - process[7] - dev - epoch 18 - mAP: 0.414 w/ 31 queries
00:08:30 - process[7]: training epoch 19 ...
00:08:46 - process[7] - epoch 19 - train iter 540 - 28853.9 words/s - loss: 0.3010
00:08:46 - process[7]: evaluating epoch 19 on dev ...
00:09:01 - process[7] - dev - epoch 19 - mAP: 0.395 w/ 31 queries
00:09:02 - [fold 1] best test MAP: 0.454 @ epoch 16
00:09:02 - Evaluating every 1 epochs ...
00:09:02 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:09:03 - test has 32 queries ...
00:09:03 - Data reading done ...
00:09:04 - adding 9-th encoder to optimizer...
00:09:04 - adding 10-th encoder to optimizer...
00:09:04 - adding 11-th encoder to optimizer...
00:09:05 - process[7]: training epoch 0 ...
00:09:20 - process[7] - epoch 0 - train iter 492 - 28289.7 words/s - loss: 0.6728
00:09:20 - process[7]: training epoch 1 ...
00:09:35 - process[7] - epoch 1 - train iter 492 - 27981.5 words/s - loss: 0.5261
00:09:35 - process[7]: training epoch 2 ...
00:09:51 - process[7] - epoch 2 - train iter 492 - 28346.9 words/s - loss: 0.5031
00:09:51 - process[7]: training epoch 3 ...
00:10:06 - process[7] - epoch 3 - train iter 492 - 28298.3 words/s - loss: 0.4969
00:10:06 - process[7]: training epoch 4 ...
00:10:21 - process[7] - epoch 4 - train iter 492 - 28389.3 words/s - loss: 0.4670
00:10:21 - process[7]: training epoch 5 ...
00:10:36 - process[7] - epoch 5 - train iter 492 - 28361.4 words/s - loss: 0.4500
00:10:36 - process[7]: training epoch 6 ...
00:10:51 - process[7] - epoch 6 - train iter 492 - 28414.4 words/s - loss: 0.4265
00:10:51 - process[7]: training epoch 7 ...
00:11:06 - process[7] - epoch 7 - train iter 492 - 28482.9 words/s - loss: 0.4162
00:11:06 - process[7]: training epoch 8 ...
00:11:21 - process[7] - epoch 8 - train iter 492 - 28448.6 words/s - loss: 0.4020
00:11:21 - process[7]: training epoch 9 ...
00:11:36 - process[7] - epoch 9 - train iter 492 - 28431.5 words/s - loss: 0.4266
00:11:36 - process[7]: training epoch 10 ...
00:11:51 - process[7] - epoch 10 - train iter 492 - 28557.1 words/s - loss: 0.3841
00:11:51 - process[7]: evaluating epoch 10 on dev ...
00:12:12 - dev set during evaluation: 11460/11458
00:12:12 - process[7] - dev - epoch 10 - mAP: 0.470 w/ 31 queries
00:12:12 - process[7]: evaluating epoch 10 on test ...
00:12:27 - process[7] - test - epoch 10 - mAP: 0.499 w/ 32 queries
00:12:27 - process[7]: training epoch 11 ...
00:12:42 - process[7] - epoch 11 - train iter 492 - 28746.0 words/s - loss: 0.4031
00:12:42 - process[7]: evaluating epoch 11 on dev ...
00:12:57 - dev set during evaluation: 11460/11458
00:12:57 - process[7] - dev - epoch 11 - mAP: 0.441 w/ 31 queries
00:12:57 - process[7]: training epoch 12 ...
00:13:12 - process[7] - epoch 12 - train iter 492 - 28624.5 words/s - loss: 0.3381
00:13:12 - process[7]: evaluating epoch 12 on dev ...
00:13:27 - dev set during evaluation: 11460/11458
00:13:27 - process[7] - dev - epoch 12 - mAP: 0.464 w/ 31 queries
00:13:27 - process[7]: training epoch 13 ...
00:13:42 - process[7] - epoch 13 - train iter 492 - 28230.5 words/s - loss: 0.3649
00:13:42 - process[7]: evaluating epoch 13 on dev ...
00:13:57 - dev set during evaluation: 11460/11458
00:13:57 - process[7] - dev - epoch 13 - mAP: 0.462 w/ 31 queries
00:13:57 - process[7]: training epoch 14 ...
00:14:12 - process[7] - epoch 14 - train iter 492 - 28706.8 words/s - loss: 0.3668
00:14:12 - process[7]: evaluating epoch 14 on dev ...
00:14:26 - dev set during evaluation: 11460/11458
00:14:26 - process[7] - dev - epoch 14 - mAP: 0.466 w/ 31 queries
00:14:26 - process[7]: training epoch 15 ...
00:14:41 - process[7] - epoch 15 - train iter 492 - 28377.0 words/s - loss: 0.3636
00:14:41 - process[7]: evaluating epoch 15 on dev ...
00:14:55 - dev set during evaluation: 11460/11458
00:14:55 - process[7] - dev - epoch 15 - mAP: 0.458 w/ 31 queries
00:14:56 - process[7]: training epoch 16 ...
00:15:11 - process[7] - epoch 16 - train iter 492 - 28179.3 words/s - loss: 0.3267
00:15:11 - process[7]: evaluating epoch 16 on dev ...
00:15:25 - dev set during evaluation: 11460/11458
00:15:25 - process[7] - dev - epoch 16 - mAP: 0.458 w/ 31 queries
00:15:25 - process[7]: training epoch 17 ...
00:15:40 - process[7] - epoch 17 - train iter 492 - 28728.4 words/s - loss: 0.3205
00:15:40 - process[7]: evaluating epoch 17 on dev ...
00:15:54 - dev set during evaluation: 11460/11458
00:15:54 - process[7] - dev - epoch 17 - mAP: 0.450 w/ 31 queries
00:15:54 - process[7]: training epoch 18 ...
00:16:10 - process[7] - epoch 18 - train iter 492 - 28431.9 words/s - loss: 0.3380
00:16:10 - process[7]: evaluating epoch 18 on dev ...
00:16:24 - dev set during evaluation: 11460/11458
00:16:24 - process[7] - dev - epoch 18 - mAP: 0.465 w/ 31 queries
00:16:24 - process[7]: training epoch 19 ...
00:16:39 - process[7] - epoch 19 - train iter 492 - 28583.6 words/s - loss: 0.3218
00:16:39 - process[7]: evaluating epoch 19 on dev ...
00:16:54 - dev set during evaluation: 11460/11458
00:16:54 - process[7] - dev - epoch 19 - mAP: 0.468 w/ 31 queries
00:16:54 - [fold 2] best test MAP: 0.499 @ epoch 10
00:16:54 - Evaluating every 1 epochs ...
00:16:54 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:16:55 - test has 31 queries ...
00:16:55 - Data reading done ...
00:16:56 - adding 9-th encoder to optimizer...
00:16:56 - adding 10-th encoder to optimizer...
00:16:56 - adding 11-th encoder to optimizer...
00:16:57 - process[7]: training epoch 0 ...
00:17:12 - process[7] - epoch 0 - train iter 476 - 28279.1 words/s - loss: 0.6776
00:17:12 - process[7]: training epoch 1 ...
00:17:26 - process[7] - epoch 1 - train iter 476 - 28666.4 words/s - loss: 0.5937
00:17:26 - process[7]: training epoch 2 ...
00:17:40 - process[7] - epoch 2 - train iter 476 - 28421.1 words/s - loss: 0.5188
00:17:40 - process[7]: training epoch 3 ...
00:17:55 - process[7] - epoch 3 - train iter 476 - 28494.5 words/s - loss: 0.5020
00:17:55 - process[7]: training epoch 4 ...
00:18:10 - process[7] - epoch 4 - train iter 476 - 28493.8 words/s - loss: 0.4269
00:18:10 - process[7]: training epoch 5 ...
00:18:25 - process[7] - epoch 5 - train iter 476 - 28022.7 words/s - loss: 0.4431
00:18:25 - process[7]: training epoch 6 ...
00:18:39 - process[7] - epoch 6 - train iter 476 - 28640.8 words/s - loss: 0.4799
00:18:39 - process[7]: training epoch 7 ...
00:18:54 - process[7] - epoch 7 - train iter 476 - 28468.3 words/s - loss: 0.4171
00:18:54 - process[7]: training epoch 8 ...
00:19:08 - process[7] - epoch 8 - train iter 476 - 28637.6 words/s - loss: 0.4053
00:19:08 - process[7]: training epoch 9 ...
00:19:23 - process[7] - epoch 9 - train iter 476 - 28333.4 words/s - loss: 0.3929
00:19:23 - process[7]: training epoch 10 ...
00:19:38 - process[7] - epoch 10 - train iter 476 - 28415.7 words/s - loss: 0.3758
00:19:38 - process[7]: evaluating epoch 10 on dev ...
00:19:57 - process[7] - dev - epoch 10 - mAP: 0.482 w/ 32 queries
00:19:57 - process[7]: evaluating epoch 10 on test ...
00:20:11 - test set during evaluation: 11550/11545
00:20:11 - process[7] - test - epoch 10 - mAP: 0.456 w/ 31 queries
00:20:11 - process[7]: training epoch 11 ...
00:20:26 - process[7] - epoch 11 - train iter 476 - 28614.9 words/s - loss: 0.3875
00:20:26 - process[7]: evaluating epoch 11 on dev ...
00:20:41 - process[7] - dev - epoch 11 - mAP: 0.454 w/ 32 queries
00:20:41 - process[7]: training epoch 12 ...
00:20:56 - process[7] - epoch 12 - train iter 476 - 28297.2 words/s - loss: 0.3630
00:20:56 - process[7]: evaluating epoch 12 on dev ...
00:21:12 - process[7] - dev - epoch 12 - mAP: 0.466 w/ 32 queries
00:21:12 - process[7]: training epoch 13 ...
00:21:26 - process[7] - epoch 13 - train iter 476 - 28618.7 words/s - loss: 0.3565
00:21:26 - process[7]: evaluating epoch 13 on dev ...
00:21:42 - process[7] - dev - epoch 13 - mAP: 0.491 w/ 32 queries
00:21:42 - process[7]: evaluating epoch 13 on test ...
00:21:57 - test set during evaluation: 11550/11545
00:21:57 - process[7] - test - epoch 13 - mAP: 0.470 w/ 31 queries
00:21:57 - process[7]: training epoch 14 ...
00:22:12 - process[7] - epoch 14 - train iter 476 - 29226.7 words/s - loss: 0.3536
00:22:12 - process[7]: evaluating epoch 14 on dev ...
00:22:27 - process[7] - dev - epoch 14 - mAP: 0.475 w/ 32 queries
00:22:27 - process[7]: training epoch 15 ...
00:22:42 - process[7] - epoch 15 - train iter 476 - 28864.6 words/s - loss: 0.3032
00:22:42 - process[7]: evaluating epoch 15 on dev ...
00:22:57 - process[7] - dev - epoch 15 - mAP: 0.491 w/ 32 queries
00:22:57 - process[7]: training epoch 16 ...
00:23:12 - process[7] - epoch 16 - train iter 476 - 28647.6 words/s - loss: 0.3653
00:23:12 - process[7]: evaluating epoch 16 on dev ...
00:23:27 - process[7] - dev - epoch 16 - mAP: 0.477 w/ 32 queries
00:23:27 - process[7]: training epoch 17 ...
00:23:42 - process[7] - epoch 17 - train iter 476 - 28439.1 words/s - loss: 0.3651
00:23:42 - process[7]: evaluating epoch 17 on dev ...
00:23:57 - process[7] - dev - epoch 17 - mAP: 0.488 w/ 32 queries
00:23:57 - process[7]: training epoch 18 ...
00:24:12 - process[7] - epoch 18 - train iter 476 - 28245.6 words/s - loss: 0.3376
00:24:12 - process[7]: evaluating epoch 18 on dev ...
00:24:27 - process[7] - dev - epoch 18 - mAP: 0.499 w/ 32 queries
00:24:27 - process[7]: evaluating epoch 18 on test ...
00:24:41 - test set during evaluation: 11550/11545
00:24:41 - process[7] - test - epoch 18 - mAP: 0.470 w/ 31 queries
00:24:41 - process[7]: training epoch 19 ...
00:24:56 - process[7] - epoch 19 - train iter 476 - 28591.6 words/s - loss: 0.3195
00:24:56 - process[7]: evaluating epoch 19 on dev ...
00:25:11 - process[7] - dev - epoch 19 - mAP: 0.496 w/ 32 queries
00:25:11 - [fold 3] best test MAP: 0.470 @ epoch 18
00:25:11 - Evaluating every 1 epochs ...
00:25:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:13 - test has 31 queries ...
00:25:13 - Data reading done ...
00:25:14 - adding 9-th encoder to optimizer...
00:25:14 - adding 10-th encoder to optimizer...
00:25:14 - adding 11-th encoder to optimizer...
00:25:15 - process[7]: training epoch 0 ...
00:25:28 - process[7] - epoch 0 - train iter 432 - 28568.0 words/s - loss: 0.6883
00:25:28 - process[7]: training epoch 1 ...
00:25:41 - process[7] - epoch 1 - train iter 432 - 28450.8 words/s - loss: 0.6276
00:25:41 - process[7]: training epoch 2 ...
00:25:54 - process[7] - epoch 2 - train iter 432 - 29078.9 words/s - loss: 0.5714
00:25:54 - process[7]: training epoch 3 ...
00:26:08 - process[7] - epoch 3 - train iter 432 - 28730.3 words/s - loss: 0.5063
00:26:08 - process[7]: training epoch 4 ...
00:26:21 - process[7] - epoch 4 - train iter 432 - 28683.8 words/s - loss: 0.4847
00:26:21 - process[7]: training epoch 5 ...
00:26:34 - process[7] - epoch 5 - train iter 432 - 28590.5 words/s - loss: 0.4631
00:26:34 - process[7]: training epoch 6 ...
00:26:48 - process[7] - epoch 6 - train iter 432 - 28570.1 words/s - loss: 0.4281
00:26:48 - process[7]: training epoch 7 ...
00:27:00 - process[7] - epoch 7 - train iter 432 - 28787.9 words/s - loss: 0.4562
00:27:00 - process[7]: training epoch 8 ...
00:27:14 - process[7] - epoch 8 - train iter 432 - 28605.1 words/s - loss: 0.3852
00:27:14 - process[7]: training epoch 9 ...
00:27:27 - process[7] - epoch 9 - train iter 432 - 28552.3 words/s - loss: 0.4211
00:27:27 - process[7]: training epoch 10 ...
00:27:40 - process[7] - epoch 10 - train iter 432 - 28229.1 words/s - loss: 0.4562
00:27:40 - process[7]: evaluating epoch 10 on dev ...
00:27:59 - dev set during evaluation: 11550/11545
00:27:59 - process[7] - dev - epoch 10 - mAP: 0.486 w/ 31 queries
00:27:59 - process[7]: evaluating epoch 10 on test ...
00:28:13 - test set during evaluation: 11320/11315
00:28:13 - process[7] - test - epoch 10 - mAP: 0.545 w/ 31 queries
00:28:13 - process[7]: training epoch 11 ...
00:28:26 - process[7] - epoch 11 - train iter 432 - 28806.8 words/s - loss: 0.3803
00:28:26 - process[7]: evaluating epoch 11 on dev ...
00:28:41 - dev set during evaluation: 11550/11545
00:28:41 - process[7] - dev - epoch 11 - mAP: 0.499 w/ 31 queries
00:28:41 - process[7]: evaluating epoch 11 on test ...
00:28:56 - test set during evaluation: 11320/11315
00:28:56 - process[7] - test - epoch 11 - mAP: 0.547 w/ 31 queries
00:28:56 - process[7]: training epoch 12 ...
00:29:09 - process[7] - epoch 12 - train iter 432 - 28118.8 words/s - loss: 0.3936
00:29:09 - process[7]: evaluating epoch 12 on dev ...
00:29:25 - dev set during evaluation: 11550/11545
00:29:25 - process[7] - dev - epoch 12 - mAP: 0.498 w/ 31 queries
00:29:25 - process[7]: training epoch 13 ...
00:29:38 - process[7] - epoch 13 - train iter 432 - 28536.5 words/s - loss: 0.3794
00:29:38 - process[7]: evaluating epoch 13 on dev ...
00:29:53 - dev set during evaluation: 11550/11545
00:29:53 - process[7] - dev - epoch 13 - mAP: 0.490 w/ 31 queries
00:29:53 - process[7]: training epoch 14 ...
00:30:06 - process[7] - epoch 14 - train iter 432 - 28780.7 words/s - loss: 0.3693
00:30:06 - process[7]: evaluating epoch 14 on dev ...
00:30:21 - dev set during evaluation: 11550/11545
00:30:21 - process[7] - dev - epoch 14 - mAP: 0.495 w/ 31 queries
00:30:21 - process[7]: training epoch 15 ...
00:30:35 - process[7] - epoch 15 - train iter 432 - 28750.7 words/s - loss: 0.3633
00:30:35 - process[7]: evaluating epoch 15 on dev ...
00:30:50 - dev set during evaluation: 11550/11545
00:30:50 - process[7] - dev - epoch 15 - mAP: 0.506 w/ 31 queries
00:30:50 - process[7]: evaluating epoch 15 on test ...
00:31:04 - test set during evaluation: 11320/11315
00:31:04 - process[7] - test - epoch 15 - mAP: 0.530 w/ 31 queries
00:31:04 - process[7]: training epoch 16 ...
00:31:17 - process[7] - epoch 16 - train iter 432 - 28880.0 words/s - loss: 0.3294
00:31:17 - process[7]: evaluating epoch 16 on dev ...
00:31:33 - dev set during evaluation: 11550/11545
00:31:33 - process[7] - dev - epoch 16 - mAP: 0.505 w/ 31 queries
00:31:33 - process[7]: training epoch 17 ...
00:31:46 - process[7] - epoch 17 - train iter 432 - 28740.2 words/s - loss: 0.3754
00:31:46 - process[7]: evaluating epoch 17 on dev ...
00:32:01 - dev set during evaluation: 11550/11545
00:32:01 - process[7] - dev - epoch 17 - mAP: 0.474 w/ 31 queries
00:32:01 - process[7]: training epoch 18 ...
00:32:14 - process[7] - epoch 18 - train iter 432 - 29007.5 words/s - loss: 0.3272
00:32:14 - process[7]: evaluating epoch 18 on dev ...
00:32:30 - dev set during evaluation: 11550/11545
00:32:30 - process[7] - dev - epoch 18 - mAP: 0.484 w/ 31 queries
00:32:30 - process[7]: training epoch 19 ...
00:32:43 - process[7] - epoch 19 - train iter 432 - 29261.7 words/s - loss: 0.3011
00:32:43 - process[7]: evaluating epoch 19 on dev ...
00:32:58 - dev set during evaluation: 11550/11545
00:32:58 - process[7] - dev - epoch 19 - mAP: 0.496 w/ 31 queries
00:32:58 - [fold 4] best test MAP: 0.530 @ epoch 15
00:32:58 - Evaluating every 1 epochs ...
00:32:58 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:33:00 - test has 31 queries ...
00:33:00 - Data reading done ...
00:33:01 - adding 9-th encoder to optimizer...
00:33:01 - adding 10-th encoder to optimizer...
00:33:01 - adding 11-th encoder to optimizer...
00:33:02 - process[7]: training epoch 0 ...
00:33:15 - process[7] - epoch 0 - train iter 437 - 28697.9 words/s - loss: 0.6770
00:33:15 - process[7]: training epoch 1 ...
00:33:29 - process[7] - epoch 1 - train iter 437 - 28704.2 words/s - loss: 0.5873
00:33:29 - process[7]: training epoch 2 ...
00:33:42 - process[7] - epoch 2 - train iter 437 - 28850.5 words/s - loss: 0.5236
00:33:42 - process[7]: training epoch 3 ...
00:33:56 - process[7] - epoch 3 - train iter 437 - 28686.9 words/s - loss: 0.5539
00:33:56 - process[7]: training epoch 4 ...
00:34:09 - process[7] - epoch 4 - train iter 437 - 28670.3 words/s - loss: 0.4995
00:34:09 - process[7]: training epoch 5 ...
00:34:23 - process[7] - epoch 5 - train iter 437 - 28483.7 words/s - loss: 0.4592
00:34:23 - process[7]: training epoch 6 ...
00:34:36 - process[7] - epoch 6 - train iter 437 - 28656.1 words/s - loss: 0.4821
00:34:36 - process[7]: training epoch 7 ...
00:34:50 - process[7] - epoch 7 - train iter 437 - 28811.3 words/s - loss: 0.4408
00:34:50 - process[7]: training epoch 8 ...
00:35:03 - process[7] - epoch 8 - train iter 437 - 28858.2 words/s - loss: 0.4369
00:35:03 - process[7]: training epoch 9 ...
00:35:16 - process[7] - epoch 9 - train iter 437 - 28387.9 words/s - loss: 0.3945
00:35:16 - process[7]: training epoch 10 ...
00:35:30 - process[7] - epoch 10 - train iter 437 - 28649.9 words/s - loss: 0.4091
00:35:30 - process[7]: evaluating epoch 10 on dev ...
00:35:48 - dev set during evaluation: 11320/11315
00:35:48 - process[7] - dev - epoch 10 - mAP: 0.542 w/ 31 queries
00:35:48 - process[7]: evaluating epoch 10 on test ...
00:36:02 - process[7] - test - epoch 10 - mAP: 0.436 w/ 31 queries
00:36:02 - process[7]: training epoch 11 ...
00:36:15 - process[7] - epoch 11 - train iter 437 - 28653.2 words/s - loss: 0.3893
00:36:15 - process[7]: evaluating epoch 11 on dev ...
00:36:30 - dev set during evaluation: 11320/11315
00:36:30 - process[7] - dev - epoch 11 - mAP: 0.542 w/ 31 queries
00:36:30 - process[7]: training epoch 12 ...
00:36:44 - process[7] - epoch 12 - train iter 437 - 28305.5 words/s - loss: 0.3710
00:36:44 - process[7]: evaluating epoch 12 on dev ...
00:36:59 - dev set during evaluation: 11320/11315
00:36:59 - process[7] - dev - epoch 12 - mAP: 0.535 w/ 31 queries
00:36:59 - process[7]: training epoch 13 ...
00:37:12 - process[7] - epoch 13 - train iter 437 - 28418.1 words/s - loss: 0.3731
00:37:12 - process[7]: evaluating epoch 13 on dev ...
00:37:27 - dev set during evaluation: 11320/11315
00:37:27 - process[7] - dev - epoch 13 - mAP: 0.537 w/ 31 queries
00:37:27 - process[7]: training epoch 14 ...
00:37:41 - process[7] - epoch 14 - train iter 437 - 28287.7 words/s - loss: 0.3642
00:37:41 - process[7]: evaluating epoch 14 on dev ...
00:37:55 - dev set during evaluation: 11320/11315
00:37:55 - process[7] - dev - epoch 14 - mAP: 0.538 w/ 31 queries
00:37:55 - process[7]: training epoch 15 ...
00:38:08 - process[7] - epoch 15 - train iter 437 - 28568.5 words/s - loss: 0.2980
00:38:08 - process[7]: evaluating epoch 15 on dev ...
00:38:23 - dev set during evaluation: 11320/11315
00:38:23 - process[7] - dev - epoch 15 - mAP: 0.531 w/ 31 queries
00:38:23 - process[7]: training epoch 16 ...
00:38:37 - process[7] - epoch 16 - train iter 437 - 28401.4 words/s - loss: 0.3454
00:38:37 - process[7]: evaluating epoch 16 on dev ...
00:38:52 - dev set during evaluation: 11320/11315
00:38:52 - process[7] - dev - epoch 16 - mAP: 0.539 w/ 31 queries
00:38:52 - process[7]: training epoch 17 ...
00:39:05 - process[7] - epoch 17 - train iter 437 - 28433.1 words/s - loss: 0.3384
00:39:05 - process[7]: evaluating epoch 17 on dev ...
00:39:20 - dev set during evaluation: 11320/11315
00:39:20 - process[7] - dev - epoch 17 - mAP: 0.523 w/ 31 queries
00:39:20 - process[7]: training epoch 18 ...
00:39:34 - process[7] - epoch 18 - train iter 437 - 28548.5 words/s - loss: 0.3686
00:39:34 - process[7]: evaluating epoch 18 on dev ...
00:39:48 - dev set during evaluation: 11320/11315
00:39:48 - process[7] - dev - epoch 18 - mAP: 0.539 w/ 31 queries
00:39:48 - process[7]: training epoch 19 ...
00:40:02 - process[7] - epoch 19 - train iter 437 - 28534.9 words/s - loss: 0.3590
00:40:02 - process[7]: evaluating epoch 19 on dev ...
00:40:16 - dev set during evaluation: 11320/11315
00:40:16 - process[7] - dev - epoch 19 - mAP: 0.529 w/ 31 queries
00:40:16 - [fold 5] best test MAP: 0.436 @ epoch 10
00:40:16 - [0.4536721022026194, 0.49880758387025254, 0.4702875834783603, 0.530125591492683, 0.4359399052491684]
00:40:16 - [31, 32, 31, 31, 31]
00:40:16 - final MAP: 0.478
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=7, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-14', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='es')
00:00:14 - Evaluating every 1 epochs ...
00:00:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:15 - test has 31 queries ...
00:00:15 - Data reading done ...
00:00:22 - adding 9-th encoder to optimizer...
00:00:22 - adding 10-th encoder to optimizer...
00:00:22 - adding 11-th encoder to optimizer...
00:00:22 - process[7]: training epoch 0 ...
00:00:39 - process[7] - epoch 0 - train iter 540 - 27643.0 words/s - loss: 0.6790
00:00:39 - process[7]: training epoch 1 ...
00:00:55 - process[7] - epoch 1 - train iter 540 - 28645.0 words/s - loss: 0.5621
00:00:55 - process[7]: training epoch 2 ...
00:01:12 - process[7] - epoch 2 - train iter 540 - 28916.1 words/s - loss: 0.5102
00:01:12 - process[7]: training epoch 3 ...
00:01:28 - process[7] - epoch 3 - train iter 540 - 28445.5 words/s - loss: 0.4995
00:01:28 - process[7]: training epoch 4 ...
00:01:45 - process[7] - epoch 4 - train iter 540 - 28493.0 words/s - loss: 0.4819
00:01:45 - process[7]: training epoch 5 ...
00:02:02 - process[7] - epoch 5 - train iter 540 - 28493.6 words/s - loss: 0.4398
00:02:02 - process[7]: training epoch 6 ...
00:02:18 - process[7] - epoch 6 - train iter 540 - 28339.6 words/s - loss: 0.4364
00:02:18 - process[7]: training epoch 7 ...
00:02:35 - process[7] - epoch 7 - train iter 540 - 28588.6 words/s - loss: 0.4228
00:02:35 - process[7]: training epoch 8 ...
00:02:51 - process[7] - epoch 8 - train iter 540 - 28377.4 words/s - loss: 0.3934
00:02:51 - process[7]: training epoch 9 ...
00:03:08 - process[7] - epoch 9 - train iter 540 - 28591.6 words/s - loss: 0.4152
00:03:08 - process[7]: training epoch 10 ...
00:03:24 - process[7] - epoch 10 - train iter 540 - 28360.8 words/s - loss: 0.3858
00:03:24 - process[7]: evaluating epoch 10 on dev ...
00:03:38 - process[7] - dev - epoch 10 - mAP: 0.411 w/ 31 queries
00:03:38 - process[7]: evaluating epoch 10 on test ...
00:03:52 - test set during evaluation: 11460/11458
00:03:52 - process[7] - test - epoch 10 - mAP: 0.444 w/ 31 queries
00:03:52 - process[7]: training epoch 11 ...
00:04:08 - process[7] - epoch 11 - train iter 540 - 28865.1 words/s - loss: 0.3791
00:04:08 - process[7]: evaluating epoch 11 on dev ...
00:04:21 - process[7] - dev - epoch 11 - mAP: 0.408 w/ 31 queries
00:04:22 - process[7]: training epoch 12 ...
00:04:38 - process[7] - epoch 12 - train iter 540 - 28817.7 words/s - loss: 0.3421
00:04:38 - process[7]: evaluating epoch 12 on dev ...
00:04:52 - process[7] - dev - epoch 12 - mAP: 0.404 w/ 31 queries
00:04:52 - process[7]: training epoch 13 ...
00:05:08 - process[7] - epoch 13 - train iter 540 - 28888.4 words/s - loss: 0.3429
00:05:08 - process[7]: evaluating epoch 13 on dev ...
00:05:21 - process[7] - dev - epoch 13 - mAP: 0.421 w/ 31 queries
00:05:21 - process[7]: evaluating epoch 13 on test ...
00:05:35 - test set during evaluation: 11460/11458
00:05:35 - process[7] - test - epoch 13 - mAP: 0.457 w/ 31 queries
00:05:35 - process[7]: training epoch 14 ...
00:05:52 - process[7] - epoch 14 - train iter 540 - 28282.3 words/s - loss: 0.3187
00:05:52 - process[7]: evaluating epoch 14 on dev ...
00:06:05 - process[7] - dev - epoch 14 - mAP: 0.417 w/ 31 queries
00:06:05 - process[7]: training epoch 15 ...
00:06:22 - process[7] - epoch 15 - train iter 540 - 28439.2 words/s - loss: 0.3268
00:06:22 - process[7]: evaluating epoch 15 on dev ...
00:06:35 - process[7] - dev - epoch 15 - mAP: 0.415 w/ 31 queries
00:06:35 - process[7]: training epoch 16 ...
00:06:51 - process[7] - epoch 16 - train iter 540 - 28704.6 words/s - loss: 0.2872
00:06:51 - process[7]: evaluating epoch 16 on dev ...
00:07:05 - process[7] - dev - epoch 16 - mAP: 0.423 w/ 31 queries
00:07:05 - process[7]: evaluating epoch 16 on test ...
00:07:19 - test set during evaluation: 11460/11458
00:07:19 - process[7] - test - epoch 16 - mAP: 0.454 w/ 31 queries
00:07:19 - process[7]: training epoch 17 ...
00:07:35 - process[7] - epoch 17 - train iter 540 - 28717.8 words/s - loss: 0.2923
00:07:35 - process[7]: evaluating epoch 17 on dev ...
00:07:49 - process[7] - dev - epoch 17 - mAP: 0.416 w/ 31 queries
00:07:49 - process[7]: training epoch 18 ...
00:08:05 - process[7] - epoch 18 - train iter 540 - 28636.5 words/s - loss: 0.3060
00:08:05 - process[7]: evaluating epoch 18 on dev ...
00:08:19 - process[7] - dev - epoch 18 - mAP: 0.414 w/ 31 queries
00:08:19 - process[7]: training epoch 19 ...
00:08:35 - process[7] - epoch 19 - train iter 540 - 28444.2 words/s - loss: 0.3010
00:08:35 - process[7]: evaluating epoch 19 on dev ...
00:08:49 - process[7] - dev - epoch 19 - mAP: 0.395 w/ 31 queries
00:08:49 - [fold 1] best test MAP: 0.454 @ epoch 16
00:08:49 - Evaluating every 1 epochs ...
00:08:49 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:08:50 - test has 32 queries ...
00:08:50 - Data reading done ...
00:08:52 - adding 9-th encoder to optimizer...
00:08:52 - adding 10-th encoder to optimizer...
00:08:52 - adding 11-th encoder to optimizer...
00:08:52 - process[7]: training epoch 0 ...
00:09:08 - process[7] - epoch 0 - train iter 492 - 27906.9 words/s - loss: 0.6728
00:09:08 - process[7]: training epoch 1 ...
00:09:23 - process[7] - epoch 1 - train iter 492 - 27611.9 words/s - loss: 0.5261
00:09:23 - process[7]: training epoch 2 ...
00:09:39 - process[7] - epoch 2 - train iter 492 - 27911.8 words/s - loss: 0.5031
00:09:39 - process[7]: training epoch 3 ...
00:09:54 - process[7] - epoch 3 - train iter 492 - 27891.5 words/s - loss: 0.4969
00:09:54 - process[7]: training epoch 4 ...
00:10:09 - process[7] - epoch 4 - train iter 492 - 27993.0 words/s - loss: 0.4670
00:10:09 - process[7]: training epoch 5 ...
00:10:24 - process[7] - epoch 5 - train iter 492 - 27962.8 words/s - loss: 0.4500
00:10:24 - process[7]: training epoch 6 ...
00:10:40 - process[7] - epoch 6 - train iter 492 - 28071.8 words/s - loss: 0.4265
00:10:40 - process[7]: training epoch 7 ...
00:10:55 - process[7] - epoch 7 - train iter 492 - 28119.8 words/s - loss: 0.4162
00:10:55 - process[7]: training epoch 8 ...
00:11:10 - process[7] - epoch 8 - train iter 492 - 27990.9 words/s - loss: 0.4020
00:11:10 - process[7]: training epoch 9 ...
00:11:25 - process[7] - epoch 9 - train iter 492 - 28137.7 words/s - loss: 0.4266
00:11:25 - process[7]: training epoch 10 ...
00:11:40 - process[7] - epoch 10 - train iter 492 - 28246.4 words/s - loss: 0.3841
00:11:40 - process[7]: evaluating epoch 10 on dev ...
00:11:56 - dev set during evaluation: 11460/11458
00:11:56 - process[7] - dev - epoch 10 - mAP: 0.470 w/ 31 queries
00:11:56 - process[7]: evaluating epoch 10 on test ...
00:12:11 - process[7] - test - epoch 10 - mAP: 0.499 w/ 32 queries
00:12:11 - process[7]: training epoch 11 ...
00:12:26 - process[7] - epoch 11 - train iter 492 - 28463.4 words/s - loss: 0.4031
00:12:26 - process[7]: evaluating epoch 11 on dev ...
00:12:40 - dev set during evaluation: 11460/11458
00:12:40 - process[7] - dev - epoch 11 - mAP: 0.441 w/ 31 queries
00:12:40 - process[7]: training epoch 12 ...
00:12:56 - process[7] - epoch 12 - train iter 492 - 28200.3 words/s - loss: 0.3381
00:12:56 - process[7]: evaluating epoch 12 on dev ...
00:13:10 - dev set during evaluation: 11460/11458
00:13:10 - process[7] - dev - epoch 12 - mAP: 0.464 w/ 31 queries
00:13:10 - process[7]: training epoch 13 ...
00:13:25 - process[7] - epoch 13 - train iter 492 - 27636.0 words/s - loss: 0.3649
00:13:25 - process[7]: evaluating epoch 13 on dev ...
00:13:39 - dev set during evaluation: 11460/11458
00:13:39 - process[7] - dev - epoch 13 - mAP: 0.462 w/ 31 queries
00:13:39 - process[7]: training epoch 14 ...
00:13:54 - process[7] - epoch 14 - train iter 492 - 28160.8 words/s - loss: 0.3668
00:13:54 - process[7]: evaluating epoch 14 on dev ...
00:14:09 - dev set during evaluation: 11460/11458
00:14:09 - process[7] - dev - epoch 14 - mAP: 0.466 w/ 31 queries
00:14:09 - process[7]: training epoch 15 ...
00:14:24 - process[7] - epoch 15 - train iter 492 - 28024.2 words/s - loss: 0.3636
00:14:24 - process[7]: evaluating epoch 15 on dev ...
00:14:38 - dev set during evaluation: 11460/11458
00:14:38 - process[7] - dev - epoch 15 - mAP: 0.458 w/ 31 queries
00:14:38 - process[7]: training epoch 16 ...
00:14:53 - process[7] - epoch 16 - train iter 492 - 27911.2 words/s - loss: 0.3267
00:14:53 - process[7]: evaluating epoch 16 on dev ...
00:15:07 - dev set during evaluation: 11460/11458
00:15:07 - process[7] - dev - epoch 16 - mAP: 0.458 w/ 31 queries
00:15:07 - process[7]: training epoch 17 ...
00:15:22 - process[7] - epoch 17 - train iter 492 - 28551.8 words/s - loss: 0.3205
00:15:22 - process[7]: evaluating epoch 17 on dev ...
00:15:37 - dev set during evaluation: 11460/11458
00:15:37 - process[7] - dev - epoch 17 - mAP: 0.450 w/ 31 queries
00:15:37 - process[7]: training epoch 18 ...
00:15:52 - process[7] - epoch 18 - train iter 492 - 28173.4 words/s - loss: 0.3380
00:15:52 - process[7]: evaluating epoch 18 on dev ...
00:16:06 - dev set during evaluation: 11460/11458
00:16:06 - process[7] - dev - epoch 18 - mAP: 0.465 w/ 31 queries
00:16:06 - process[7]: training epoch 19 ...
00:16:21 - process[7] - epoch 19 - train iter 492 - 27980.9 words/s - loss: 0.3218
00:16:21 - process[7]: evaluating epoch 19 on dev ...
00:16:35 - dev set during evaluation: 11460/11458
00:16:35 - process[7] - dev - epoch 19 - mAP: 0.468 w/ 31 queries
00:16:35 - [fold 2] best test MAP: 0.499 @ epoch 10
00:16:35 - Evaluating every 1 epochs ...
00:16:35 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:16:36 - test has 31 queries ...
00:16:36 - Data reading done ...
00:16:38 - adding 9-th encoder to optimizer...
00:16:38 - adding 10-th encoder to optimizer...
00:16:38 - adding 11-th encoder to optimizer...
00:16:39 - process[7]: training epoch 0 ...
00:16:53 - process[7] - epoch 0 - train iter 476 - 27814.8 words/s - loss: 0.6776
00:16:53 - process[7]: training epoch 1 ...
00:17:08 - process[7] - epoch 1 - train iter 476 - 28017.6 words/s - loss: 0.5937
00:17:08 - process[7]: training epoch 2 ...
00:17:23 - process[7] - epoch 2 - train iter 476 - 27502.4 words/s - loss: 0.5188
00:17:23 - process[7]: training epoch 3 ...
00:17:38 - process[7] - epoch 3 - train iter 476 - 27574.0 words/s - loss: 0.5020
00:17:38 - process[7]: training epoch 4 ...
00:17:53 - process[7] - epoch 4 - train iter 476 - 27585.6 words/s - loss: 0.4269
00:17:53 - process[7]: training epoch 5 ...
00:18:09 - process[7] - epoch 5 - train iter 476 - 27160.6 words/s - loss: 0.4431
00:18:09 - process[7]: training epoch 6 ...
00:18:24 - process[7] - epoch 6 - train iter 476 - 27671.6 words/s - loss: 0.4799
00:18:24 - process[7]: training epoch 7 ...
00:18:39 - process[7] - epoch 7 - train iter 476 - 27452.3 words/s - loss: 0.4171
00:18:39 - process[7]: training epoch 8 ...
00:18:54 - process[7] - epoch 8 - train iter 476 - 28121.3 words/s - loss: 0.4053
00:18:54 - process[7]: training epoch 9 ...
00:19:08 - process[7] - epoch 9 - train iter 476 - 27907.1 words/s - loss: 0.3929
00:19:08 - process[7]: training epoch 10 ...
00:19:23 - process[7] - epoch 10 - train iter 476 - 28019.9 words/s - loss: 0.3758
00:19:23 - process[7]: evaluating epoch 10 on dev ...
00:19:38 - process[7] - dev - epoch 10 - mAP: 0.482 w/ 32 queries
00:19:38 - process[7]: evaluating epoch 10 on test ...
00:19:53 - test set during evaluation: 11550/11545
00:19:53 - process[7] - test - epoch 10 - mAP: 0.456 w/ 31 queries
00:19:53 - process[7]: training epoch 11 ...
00:20:08 - process[7] - epoch 11 - train iter 476 - 28153.0 words/s - loss: 0.3875
00:20:08 - process[7]: evaluating epoch 11 on dev ...
00:20:23 - process[7] - dev - epoch 11 - mAP: 0.454 w/ 32 queries
00:20:23 - process[7]: training epoch 12 ...
00:20:38 - process[7] - epoch 12 - train iter 476 - 28086.7 words/s - loss: 0.3630
00:20:38 - process[7]: evaluating epoch 12 on dev ...
00:20:53 - process[7] - dev - epoch 12 - mAP: 0.466 w/ 32 queries
00:20:53 - process[7]: training epoch 13 ...
00:21:07 - process[7] - epoch 13 - train iter 476 - 28513.1 words/s - loss: 0.3565
00:21:07 - process[7]: evaluating epoch 13 on dev ...
00:21:23 - process[7] - dev - epoch 13 - mAP: 0.491 w/ 32 queries
00:21:23 - process[7]: evaluating epoch 13 on test ...
00:21:37 - test set during evaluation: 11550/11545
00:21:37 - process[7] - test - epoch 13 - mAP: 0.470 w/ 31 queries
00:21:37 - process[7]: training epoch 14 ...
00:21:52 - process[7] - epoch 14 - train iter 476 - 28880.4 words/s - loss: 0.3536
00:21:52 - process[7]: evaluating epoch 14 on dev ...
00:22:07 - process[7] - dev - epoch 14 - mAP: 0.475 w/ 32 queries
00:22:07 - process[7]: training epoch 15 ...
00:22:22 - process[7] - epoch 15 - train iter 476 - 28457.5 words/s - loss: 0.3032
00:22:22 - process[7]: evaluating epoch 15 on dev ...
00:22:36 - process[7] - dev - epoch 15 - mAP: 0.491 w/ 32 queries
00:22:36 - process[7]: training epoch 16 ...
00:22:51 - process[7] - epoch 16 - train iter 476 - 28291.5 words/s - loss: 0.3653
00:22:51 - process[7]: evaluating epoch 16 on dev ...
00:23:06 - process[7] - dev - epoch 16 - mAP: 0.477 w/ 32 queries
00:23:06 - process[7]: training epoch 17 ...
00:23:21 - process[7] - epoch 17 - train iter 476 - 28377.8 words/s - loss: 0.3651
00:23:21 - process[7]: evaluating epoch 17 on dev ...
00:23:36 - process[7] - dev - epoch 17 - mAP: 0.488 w/ 32 queries
00:23:36 - process[7]: training epoch 18 ...
00:23:51 - process[7] - epoch 18 - train iter 476 - 27546.6 words/s - loss: 0.3376
00:23:51 - process[7]: evaluating epoch 18 on dev ...
00:24:06 - process[7] - dev - epoch 18 - mAP: 0.499 w/ 32 queries
00:24:06 - process[7]: evaluating epoch 18 on test ...
00:24:20 - test set during evaluation: 11550/11545
00:24:20 - process[7] - test - epoch 18 - mAP: 0.470 w/ 31 queries
00:24:20 - process[7]: training epoch 19 ...
00:24:35 - process[7] - epoch 19 - train iter 476 - 28322.2 words/s - loss: 0.3195
00:24:35 - process[7]: evaluating epoch 19 on dev ...
00:24:50 - process[7] - dev - epoch 19 - mAP: 0.496 w/ 32 queries
00:24:50 - [fold 3] best test MAP: 0.470 @ epoch 18
00:24:50 - Evaluating every 1 epochs ...
00:24:50 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:24:51 - test has 31 queries ...
00:24:51 - Data reading done ...
00:24:53 - adding 9-th encoder to optimizer...
00:24:53 - adding 10-th encoder to optimizer...
00:24:53 - adding 11-th encoder to optimizer...
00:24:53 - process[7]: training epoch 0 ...
00:25:07 - process[7] - epoch 0 - train iter 432 - 28306.7 words/s - loss: 0.6883
00:25:07 - process[7]: training epoch 1 ...
00:25:20 - process[7] - epoch 1 - train iter 432 - 28146.9 words/s - loss: 0.6276
00:25:20 - process[7]: training epoch 2 ...
00:25:34 - process[7] - epoch 2 - train iter 432 - 28892.7 words/s - loss: 0.5714
00:25:34 - process[7]: training epoch 3 ...
00:25:47 - process[7] - epoch 3 - train iter 432 - 28495.6 words/s - loss: 0.5063
00:25:47 - process[7]: training epoch 4 ...
00:26:00 - process[7] - epoch 4 - train iter 432 - 28465.6 words/s - loss: 0.4847
00:26:00 - process[7]: training epoch 5 ...
00:26:14 - process[7] - epoch 5 - train iter 432 - 28337.7 words/s - loss: 0.4631
00:26:14 - process[7]: training epoch 6 ...
00:26:27 - process[7] - epoch 6 - train iter 432 - 28343.2 words/s - loss: 0.4281
00:26:27 - process[7]: training epoch 7 ...
00:26:40 - process[7] - epoch 7 - train iter 432 - 28557.1 words/s - loss: 0.4562
00:26:40 - process[7]: training epoch 8 ...
00:26:54 - process[7] - epoch 8 - train iter 432 - 28275.9 words/s - loss: 0.3852
00:26:54 - process[7]: training epoch 9 ...
00:27:07 - process[7] - epoch 9 - train iter 432 - 28227.1 words/s - loss: 0.4211
00:27:07 - process[7]: training epoch 10 ...
00:27:21 - process[7] - epoch 10 - train iter 432 - 27826.5 words/s - loss: 0.4562
00:27:21 - process[7]: evaluating epoch 10 on dev ...
00:27:37 - dev set during evaluation: 11550/11545
00:27:37 - process[7] - dev - epoch 10 - mAP: 0.486 w/ 31 queries
00:27:37 - process[7]: evaluating epoch 10 on test ...
00:27:51 - test set during evaluation: 11320/11315
00:27:51 - process[7] - test - epoch 10 - mAP: 0.545 w/ 31 queries
00:27:51 - process[7]: training epoch 11 ...
00:28:05 - process[7] - epoch 11 - train iter 432 - 28139.3 words/s - loss: 0.3803
00:28:05 - process[7]: evaluating epoch 11 on dev ...
00:28:20 - dev set during evaluation: 11550/11545
00:28:20 - process[7] - dev - epoch 11 - mAP: 0.499 w/ 31 queries
00:28:20 - process[7]: evaluating epoch 11 on test ...
00:28:34 - test set during evaluation: 11320/11315
00:28:34 - process[7] - test - epoch 11 - mAP: 0.547 w/ 31 queries
00:28:34 - process[7]: training epoch 12 ...
00:28:48 - process[7] - epoch 12 - train iter 432 - 27520.7 words/s - loss: 0.3936
00:28:48 - process[7]: evaluating epoch 12 on dev ...
00:29:02 - dev set during evaluation: 11550/11545
00:29:02 - process[7] - dev - epoch 12 - mAP: 0.498 w/ 31 queries
00:29:02 - process[7]: training epoch 13 ...
00:29:16 - process[7] - epoch 13 - train iter 432 - 28447.9 words/s - loss: 0.3794
00:29:16 - process[7]: evaluating epoch 13 on dev ...
00:29:30 - dev set during evaluation: 11550/11545
00:29:30 - process[7] - dev - epoch 13 - mAP: 0.490 w/ 31 queries
00:29:30 - process[7]: training epoch 14 ...
00:29:44 - process[7] - epoch 14 - train iter 432 - 28477.0 words/s - loss: 0.3693
00:29:44 - process[7]: evaluating epoch 14 on dev ...
00:29:58 - dev set during evaluation: 11550/11545
00:29:58 - process[7] - dev - epoch 14 - mAP: 0.495 w/ 31 queries
00:29:58 - process[7]: training epoch 15 ...
00:30:12 - process[7] - epoch 15 - train iter 432 - 28249.5 words/s - loss: 0.3633
00:30:12 - process[7]: evaluating epoch 15 on dev ...
00:30:26 - dev set during evaluation: 11550/11545
00:30:26 - process[7] - dev - epoch 15 - mAP: 0.506 w/ 31 queries
00:30:26 - process[7]: evaluating epoch 15 on test ...
00:30:41 - test set during evaluation: 11320/11315
00:30:41 - process[7] - test - epoch 15 - mAP: 0.530 w/ 31 queries
00:30:41 - process[7]: training epoch 16 ...
00:30:54 - process[7] - epoch 16 - train iter 432 - 28502.2 words/s - loss: 0.3294
00:30:54 - process[7]: evaluating epoch 16 on dev ...
00:31:09 - dev set during evaluation: 11550/11545
00:31:09 - process[7] - dev - epoch 16 - mAP: 0.505 w/ 31 queries
00:31:09 - process[7]: training epoch 17 ...
00:31:23 - process[7] - epoch 17 - train iter 432 - 28361.8 words/s - loss: 0.3754
00:31:23 - process[7]: evaluating epoch 17 on dev ...
00:31:37 - dev set during evaluation: 11550/11545
00:31:37 - process[7] - dev - epoch 17 - mAP: 0.474 w/ 31 queries
00:31:37 - process[7]: training epoch 18 ...
00:31:51 - process[7] - epoch 18 - train iter 432 - 28721.0 words/s - loss: 0.3272
00:31:51 - process[7]: evaluating epoch 18 on dev ...
00:32:06 - dev set during evaluation: 11550/11545
00:32:06 - process[7] - dev - epoch 18 - mAP: 0.484 w/ 31 queries
00:32:06 - process[7]: training epoch 19 ...
00:32:19 - process[7] - epoch 19 - train iter 432 - 28888.7 words/s - loss: 0.3011
00:32:19 - process[7]: evaluating epoch 19 on dev ...
00:32:33 - dev set during evaluation: 11550/11545
00:32:33 - process[7] - dev - epoch 19 - mAP: 0.496 w/ 31 queries
00:32:33 - [fold 4] best test MAP: 0.530 @ epoch 15
00:32:33 - Evaluating every 1 epochs ...
00:32:33 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:32:35 - test has 31 queries ...
00:32:35 - Data reading done ...
00:32:36 - adding 9-th encoder to optimizer...
00:32:36 - adding 10-th encoder to optimizer...
00:32:36 - adding 11-th encoder to optimizer...
00:32:37 - process[7]: training epoch 0 ...
00:32:51 - process[7] - epoch 0 - train iter 437 - 28383.3 words/s - loss: 0.6770
00:32:51 - process[7]: training epoch 1 ...
00:33:05 - process[7] - epoch 1 - train iter 437 - 28164.7 words/s - loss: 0.5873
00:33:05 - process[7]: training epoch 2 ...
00:33:18 - process[7] - epoch 2 - train iter 437 - 28441.6 words/s - loss: 0.5236
00:33:18 - process[7]: training epoch 3 ...
00:33:32 - process[7] - epoch 3 - train iter 437 - 28248.1 words/s - loss: 0.5539
00:33:32 - process[7]: training epoch 4 ...
00:33:45 - process[7] - epoch 4 - train iter 437 - 28387.7 words/s - loss: 0.4995
00:33:45 - process[7]: training epoch 5 ...
00:33:59 - process[7] - epoch 5 - train iter 437 - 28174.7 words/s - loss: 0.4592
00:33:59 - process[7]: training epoch 6 ...
00:34:13 - process[7] - epoch 6 - train iter 437 - 28343.9 words/s - loss: 0.4821
00:34:13 - process[7]: training epoch 7 ...
00:34:26 - process[7] - epoch 7 - train iter 437 - 28399.8 words/s - loss: 0.4408
00:34:26 - process[7]: training epoch 8 ...
00:34:40 - process[7] - epoch 8 - train iter 437 - 28410.4 words/s - loss: 0.4369
00:34:40 - process[7]: training epoch 9 ...
00:34:54 - process[7] - epoch 9 - train iter 437 - 27926.8 words/s - loss: 0.3945
00:34:54 - process[7]: training epoch 10 ...
00:35:07 - process[7] - epoch 10 - train iter 437 - 28163.9 words/s - loss: 0.4091
00:35:07 - process[7]: evaluating epoch 10 on dev ...
00:35:23 - dev set during evaluation: 11320/11315
00:35:23 - process[7] - dev - epoch 10 - mAP: 0.542 w/ 31 queries
00:35:23 - process[7]: evaluating epoch 10 on test ...
00:35:37 - process[7] - test - epoch 10 - mAP: 0.436 w/ 31 queries
00:35:37 - process[7]: training epoch 11 ...
00:35:51 - process[7] - epoch 11 - train iter 437 - 28357.0 words/s - loss: 0.3893
00:35:51 - process[7]: evaluating epoch 11 on dev ...
00:36:05 - dev set during evaluation: 11320/11315
00:36:05 - process[7] - dev - epoch 11 - mAP: 0.542 w/ 31 queries
00:36:05 - process[7]: training epoch 12 ...
00:36:19 - process[7] - epoch 12 - train iter 437 - 28035.7 words/s - loss: 0.3710
00:36:19 - process[7]: evaluating epoch 12 on dev ...
00:36:33 - dev set during evaluation: 11320/11315
00:36:33 - process[7] - dev - epoch 12 - mAP: 0.535 w/ 31 queries
00:36:33 - process[7]: training epoch 13 ...
00:36:47 - process[7] - epoch 13 - train iter 437 - 28297.1 words/s - loss: 0.3731
00:36:47 - process[7]: evaluating epoch 13 on dev ...
00:37:01 - dev set during evaluation: 11320/11315
00:37:01 - process[7] - dev - epoch 13 - mAP: 0.537 w/ 31 queries
00:37:01 - process[7]: training epoch 14 ...
00:37:15 - process[7] - epoch 14 - train iter 437 - 27827.3 words/s - loss: 0.3642
00:37:15 - process[7]: evaluating epoch 14 on dev ...
00:37:29 - dev set during evaluation: 11320/11315
00:37:29 - process[7] - dev - epoch 14 - mAP: 0.538 w/ 31 queries
00:37:29 - process[7]: training epoch 15 ...
00:37:43 - process[7] - epoch 15 - train iter 437 - 28103.6 words/s - loss: 0.2980
00:37:43 - process[7]: evaluating epoch 15 on dev ...
00:37:57 - dev set during evaluation: 11320/11315
00:37:57 - process[7] - dev - epoch 15 - mAP: 0.531 w/ 31 queries
00:37:57 - process[7]: training epoch 16 ...
00:38:11 - process[7] - epoch 16 - train iter 437 - 28239.5 words/s - loss: 0.3454
00:38:11 - process[7]: evaluating epoch 16 on dev ...
00:38:25 - dev set during evaluation: 11320/11315
00:38:25 - process[7] - dev - epoch 16 - mAP: 0.539 w/ 31 queries
00:38:25 - process[7]: training epoch 17 ...
00:38:39 - process[7] - epoch 17 - train iter 437 - 28116.2 words/s - loss: 0.3384
00:38:39 - process[7]: evaluating epoch 17 on dev ...
00:38:53 - dev set during evaluation: 11320/11315
00:38:53 - process[7] - dev - epoch 17 - mAP: 0.523 w/ 31 queries
00:38:53 - process[7]: training epoch 18 ...
00:39:07 - process[7] - epoch 18 - train iter 437 - 27970.0 words/s - loss: 0.3686
00:39:07 - process[7]: evaluating epoch 18 on dev ...
00:39:22 - dev set during evaluation: 11320/11315
00:39:22 - process[7] - dev - epoch 18 - mAP: 0.539 w/ 31 queries
00:39:22 - process[7]: training epoch 19 ...
00:39:35 - process[7] - epoch 19 - train iter 437 - 28148.4 words/s - loss: 0.3590
00:39:35 - process[7]: evaluating epoch 19 on dev ...
00:39:50 - dev set during evaluation: 11320/11315
00:39:50 - process[7] - dev - epoch 19 - mAP: 0.529 w/ 31 queries
00:39:50 - [fold 5] best test MAP: 0.436 @ epoch 10
00:39:50 - [0.4536721022026194, 0.49880758387025254, 0.4702875834783603, 0.530125591492683, 0.4359399052491684]
00:39:50 - [31, 32, 31, 31, 31]
00:39:50 - final MAP: 0.478
