00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-9', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='es')
00:00:16 - Evaluating every 1 epochs ...
00:00:16 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:17 - test has 31 queries ...
00:00:17 - Data reading done ...
00:00:23 - adding 9-th encoder to optimizer...
00:00:23 - adding 10-th encoder to optimizer...
00:00:23 - adding 11-th encoder to optimizer...
00:00:24 - process[8]: training epoch 0 ...
00:00:41 - process[8] - epoch 0 - train iter 540 - 27350.7 words/s - loss: 0.6794
00:00:41 - process[8]: training epoch 1 ...
00:00:57 - process[8] - epoch 1 - train iter 540 - 28519.4 words/s - loss: 0.6019
00:00:57 - process[8]: training epoch 2 ...
00:01:14 - process[8] - epoch 2 - train iter 540 - 28449.3 words/s - loss: 0.5359
00:01:14 - process[8]: training epoch 3 ...
00:01:30 - process[8] - epoch 3 - train iter 540 - 28131.2 words/s - loss: 0.4850
00:01:30 - process[8]: training epoch 4 ...
00:01:47 - process[8] - epoch 4 - train iter 540 - 28184.7 words/s - loss: 0.4415
00:01:47 - process[8]: training epoch 5 ...
00:02:04 - process[8] - epoch 5 - train iter 540 - 28514.4 words/s - loss: 0.4580
00:02:04 - process[8]: training epoch 6 ...
00:02:20 - process[8] - epoch 6 - train iter 540 - 28543.1 words/s - loss: 0.4123
00:02:20 - process[8]: training epoch 7 ...
00:02:37 - process[8] - epoch 7 - train iter 540 - 28083.6 words/s - loss: 0.4451
00:02:37 - process[8]: training epoch 8 ...
00:02:54 - process[8] - epoch 8 - train iter 540 - 28732.9 words/s - loss: 0.3682
00:02:54 - process[8]: training epoch 9 ...
00:03:10 - process[8] - epoch 9 - train iter 540 - 28580.2 words/s - loss: 0.3935
00:03:10 - process[8]: training epoch 10 ...
00:03:27 - process[8] - epoch 10 - train iter 540 - 28484.5 words/s - loss: 0.3680
00:03:27 - process[8]: evaluating epoch 10 on dev ...
00:03:40 - process[8] - dev - epoch 10 - mAP: 0.409 w/ 31 queries
00:03:40 - process[8]: evaluating epoch 10 on test ...
00:03:54 - test set during evaluation: 11460/11458
00:03:54 - process[8] - test - epoch 10 - mAP: 0.443 w/ 31 queries
00:03:54 - process[8]: training epoch 11 ...
00:04:11 - process[8] - epoch 11 - train iter 540 - 28789.1 words/s - loss: 0.3602
00:04:11 - process[8]: evaluating epoch 11 on dev ...
00:04:24 - process[8] - dev - epoch 11 - mAP: 0.406 w/ 31 queries
00:04:24 - process[8]: training epoch 12 ...
00:04:41 - process[8] - epoch 12 - train iter 540 - 28743.6 words/s - loss: 0.3441
00:04:41 - process[8]: evaluating epoch 12 on dev ...
00:04:54 - process[8] - dev - epoch 12 - mAP: 0.408 w/ 31 queries
00:04:54 - process[8]: training epoch 13 ...
00:05:10 - process[8] - epoch 13 - train iter 540 - 28859.4 words/s - loss: 0.3858
00:05:10 - process[8]: evaluating epoch 13 on dev ...
00:05:24 - process[8] - dev - epoch 13 - mAP: 0.419 w/ 31 queries
00:05:24 - process[8]: evaluating epoch 13 on test ...
00:05:39 - test set during evaluation: 11460/11458
00:05:39 - process[8] - test - epoch 13 - mAP: 0.442 w/ 31 queries
00:05:39 - process[8]: training epoch 14 ...
00:05:56 - process[8] - epoch 14 - train iter 540 - 28569.2 words/s - loss: 0.3470
00:05:56 - process[8]: evaluating epoch 14 on dev ...
00:06:09 - process[8] - dev - epoch 14 - mAP: 0.421 w/ 31 queries
00:06:09 - process[8]: evaluating epoch 14 on test ...
00:06:23 - test set during evaluation: 11460/11458
00:06:23 - process[8] - test - epoch 14 - mAP: 0.453 w/ 31 queries
00:06:23 - process[8]: training epoch 15 ...
00:06:40 - process[8] - epoch 15 - train iter 540 - 28813.2 words/s - loss: 0.3231
00:06:40 - process[8]: evaluating epoch 15 on dev ...
00:06:53 - process[8] - dev - epoch 15 - mAP: 0.402 w/ 31 queries
00:06:53 - process[8]: training epoch 16 ...
00:07:10 - process[8] - epoch 16 - train iter 540 - 28527.3 words/s - loss: 0.3642
00:07:10 - process[8]: evaluating epoch 16 on dev ...
00:07:23 - process[8] - dev - epoch 16 - mAP: 0.409 w/ 31 queries
00:07:23 - process[8]: training epoch 17 ...
00:07:40 - process[8] - epoch 17 - train iter 540 - 28377.8 words/s - loss: 0.3155
00:07:40 - process[8]: evaluating epoch 17 on dev ...
00:07:53 - process[8] - dev - epoch 17 - mAP: 0.410 w/ 31 queries
00:07:53 - process[8]: training epoch 18 ...
00:08:10 - process[8] - epoch 18 - train iter 540 - 28474.1 words/s - loss: 0.3377
00:08:10 - process[8]: evaluating epoch 18 on dev ...
00:08:23 - process[8] - dev - epoch 18 - mAP: 0.429 w/ 31 queries
00:08:23 - process[8]: evaluating epoch 18 on test ...
00:08:37 - test set during evaluation: 11460/11458
00:08:37 - process[8] - test - epoch 18 - mAP: 0.453 w/ 31 queries
00:08:37 - process[8]: training epoch 19 ...
00:08:54 - process[8] - epoch 19 - train iter 540 - 28372.5 words/s - loss: 0.3012
00:08:54 - process[8]: evaluating epoch 19 on dev ...
00:09:07 - process[8] - dev - epoch 19 - mAP: 0.411 w/ 31 queries
00:09:07 - [fold 1] best test MAP: 0.453 @ epoch 18
00:09:07 - Evaluating every 1 epochs ...
00:09:07 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:09:09 - test has 32 queries ...
00:09:09 - Data reading done ...
00:09:10 - adding 9-th encoder to optimizer...
00:09:10 - adding 10-th encoder to optimizer...
00:09:10 - adding 11-th encoder to optimizer...
00:09:11 - process[8]: training epoch 0 ...
00:09:26 - process[8] - epoch 0 - train iter 492 - 27931.2 words/s - loss: 0.6715
00:09:26 - process[8]: training epoch 1 ...
00:09:41 - process[8] - epoch 1 - train iter 492 - 28173.7 words/s - loss: 0.5761
00:09:41 - process[8]: training epoch 2 ...
00:09:57 - process[8] - epoch 2 - train iter 492 - 27816.3 words/s - loss: 0.5106
00:09:57 - process[8]: training epoch 3 ...
00:10:12 - process[8] - epoch 3 - train iter 492 - 27775.9 words/s - loss: 0.4786
00:10:12 - process[8]: training epoch 4 ...
00:10:27 - process[8] - epoch 4 - train iter 492 - 28318.3 words/s - loss: 0.5019
00:10:27 - process[8]: training epoch 5 ...
00:10:42 - process[8] - epoch 5 - train iter 492 - 28010.5 words/s - loss: 0.4507
00:10:42 - process[8]: training epoch 6 ...
00:10:58 - process[8] - epoch 6 - train iter 492 - 28074.8 words/s - loss: 0.4199
00:10:58 - process[8]: training epoch 7 ...
00:11:13 - process[8] - epoch 7 - train iter 492 - 27639.8 words/s - loss: 0.4306
00:11:13 - process[8]: training epoch 8 ...
00:11:29 - process[8] - epoch 8 - train iter 492 - 27911.7 words/s - loss: 0.3883
00:11:29 - process[8]: training epoch 9 ...
00:11:44 - process[8] - epoch 9 - train iter 492 - 27754.7 words/s - loss: 0.3988
00:11:44 - process[8]: training epoch 10 ...
00:12:00 - process[8] - epoch 10 - train iter 492 - 28021.6 words/s - loss: 0.3942
00:12:00 - process[8]: evaluating epoch 10 on dev ...
00:12:13 - dev set during evaluation: 11460/11458
00:12:13 - process[8] - dev - epoch 10 - mAP: 0.455 w/ 31 queries
00:12:13 - process[8]: evaluating epoch 10 on test ...
00:12:28 - process[8] - test - epoch 10 - mAP: 0.522 w/ 32 queries
00:12:28 - process[8]: training epoch 11 ...
00:12:44 - process[8] - epoch 11 - train iter 492 - 27694.0 words/s - loss: 0.3899
00:12:44 - process[8]: evaluating epoch 11 on dev ...
00:12:58 - dev set during evaluation: 11460/11458
00:12:58 - process[8] - dev - epoch 11 - mAP: 0.426 w/ 31 queries
00:12:58 - process[8]: training epoch 12 ...
00:13:13 - process[8] - epoch 12 - train iter 492 - 28164.8 words/s - loss: 0.3815
00:13:13 - process[8]: evaluating epoch 12 on dev ...
00:13:28 - dev set during evaluation: 11460/11458
00:13:28 - process[8] - dev - epoch 12 - mAP: 0.441 w/ 31 queries
00:13:28 - process[8]: training epoch 13 ...
00:13:43 - process[8] - epoch 13 - train iter 492 - 28767.5 words/s - loss: 0.3548
00:13:43 - process[8]: evaluating epoch 13 on dev ...
00:13:58 - dev set during evaluation: 11460/11458
00:13:58 - process[8] - dev - epoch 13 - mAP: 0.435 w/ 31 queries
00:13:58 - process[8]: training epoch 14 ...
00:14:13 - process[8] - epoch 14 - train iter 492 - 28156.4 words/s - loss: 0.3565
00:14:13 - process[8]: evaluating epoch 14 on dev ...
00:14:27 - dev set during evaluation: 11460/11458
00:14:27 - process[8] - dev - epoch 14 - mAP: 0.446 w/ 31 queries
00:14:27 - process[8]: training epoch 15 ...
00:14:42 - process[8] - epoch 15 - train iter 492 - 28326.7 words/s - loss: 0.3627
00:14:42 - process[8]: evaluating epoch 15 on dev ...
00:14:57 - dev set during evaluation: 11460/11458
00:14:57 - process[8] - dev - epoch 15 - mAP: 0.456 w/ 31 queries
00:14:57 - process[8]: evaluating epoch 15 on test ...
00:15:12 - process[8] - test - epoch 15 - mAP: 0.532 w/ 32 queries
00:15:12 - process[8]: training epoch 16 ...
00:15:27 - process[8] - epoch 16 - train iter 492 - 28234.2 words/s - loss: 0.3227
00:15:27 - process[8]: evaluating epoch 16 on dev ...
00:15:41 - dev set during evaluation: 11460/11458
00:15:41 - process[8] - dev - epoch 16 - mAP: 0.443 w/ 31 queries
00:15:41 - process[8]: training epoch 17 ...
00:15:57 - process[8] - epoch 17 - train iter 492 - 27730.3 words/s - loss: 0.3579
00:15:57 - process[8]: evaluating epoch 17 on dev ...
00:16:11 - dev set during evaluation: 11460/11458
00:16:11 - process[8] - dev - epoch 17 - mAP: 0.452 w/ 31 queries
00:16:11 - process[8]: training epoch 18 ...
00:16:26 - process[8] - epoch 18 - train iter 492 - 28005.8 words/s - loss: 0.3464
00:16:26 - process[8]: evaluating epoch 18 on dev ...
00:16:40 - dev set during evaluation: 11460/11458
00:16:40 - process[8] - dev - epoch 18 - mAP: 0.442 w/ 31 queries
00:16:40 - process[8]: training epoch 19 ...
00:16:56 - process[8] - epoch 19 - train iter 492 - 27750.7 words/s - loss: 0.3309
00:16:56 - process[8]: evaluating epoch 19 on dev ...
00:17:10 - dev set during evaluation: 11460/11458
00:17:10 - process[8] - dev - epoch 19 - mAP: 0.443 w/ 31 queries
00:17:10 - [fold 2] best test MAP: 0.532 @ epoch 15
00:17:10 - Evaluating every 1 epochs ...
00:17:10 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:17:11 - test has 31 queries ...
00:17:11 - Data reading done ...
00:17:13 - adding 9-th encoder to optimizer...
00:17:13 - adding 10-th encoder to optimizer...
00:17:13 - adding 11-th encoder to optimizer...
00:17:13 - process[8]: training epoch 0 ...
00:17:28 - process[8] - epoch 0 - train iter 476 - 28231.0 words/s - loss: 0.6780
00:17:28 - process[8]: training epoch 1 ...
00:17:42 - process[8] - epoch 1 - train iter 476 - 28707.9 words/s - loss: 0.6043
00:17:42 - process[8]: training epoch 2 ...
00:17:57 - process[8] - epoch 2 - train iter 476 - 28282.3 words/s - loss: 0.5335
00:17:57 - process[8]: training epoch 3 ...
00:18:11 - process[8] - epoch 3 - train iter 476 - 27930.9 words/s - loss: 0.4797
00:18:11 - process[8]: training epoch 4 ...
00:18:26 - process[8] - epoch 4 - train iter 476 - 28058.3 words/s - loss: 0.4575
00:18:26 - process[8]: training epoch 5 ...
00:18:41 - process[8] - epoch 5 - train iter 476 - 28325.1 words/s - loss: 0.4473
00:18:41 - process[8]: training epoch 6 ...
00:18:56 - process[8] - epoch 6 - train iter 476 - 28249.6 words/s - loss: 0.4318
00:18:56 - process[8]: training epoch 7 ...
00:19:11 - process[8] - epoch 7 - train iter 476 - 27569.5 words/s - loss: 0.4162
00:19:11 - process[8]: training epoch 8 ...
00:19:25 - process[8] - epoch 8 - train iter 476 - 28065.2 words/s - loss: 0.4092
00:19:25 - process[8]: training epoch 9 ...
00:19:40 - process[8] - epoch 9 - train iter 476 - 27936.5 words/s - loss: 0.3720
00:19:40 - process[8]: training epoch 10 ...
00:19:55 - process[8] - epoch 10 - train iter 476 - 27882.3 words/s - loss: 0.3765
00:19:55 - process[8]: evaluating epoch 10 on dev ...
00:20:13 - process[8] - dev - epoch 10 - mAP: 0.469 w/ 32 queries
00:20:13 - process[8]: evaluating epoch 10 on test ...
00:20:27 - test set during evaluation: 11550/11545
00:20:27 - process[8] - test - epoch 10 - mAP: 0.438 w/ 31 queries
00:20:27 - process[8]: training epoch 11 ...
00:20:42 - process[8] - epoch 11 - train iter 476 - 28235.0 words/s - loss: 0.3570
00:20:42 - process[8]: evaluating epoch 11 on dev ...
00:20:57 - process[8] - dev - epoch 11 - mAP: 0.439 w/ 32 queries
00:20:58 - process[8]: training epoch 12 ...
00:21:12 - process[8] - epoch 12 - train iter 476 - 28190.4 words/s - loss: 0.3372
00:21:12 - process[8]: evaluating epoch 12 on dev ...
00:21:28 - process[8] - dev - epoch 12 - mAP: 0.479 w/ 32 queries
00:21:28 - process[8]: evaluating epoch 12 on test ...
00:21:43 - test set during evaluation: 11550/11545
00:21:43 - process[8] - test - epoch 12 - mAP: 0.431 w/ 31 queries
00:21:43 - process[8]: training epoch 13 ...
00:21:58 - process[8] - epoch 13 - train iter 476 - 28184.1 words/s - loss: 0.3540
00:21:58 - process[8]: evaluating epoch 13 on dev ...
00:22:13 - process[8] - dev - epoch 13 - mAP: 0.506 w/ 32 queries
00:22:13 - process[8]: evaluating epoch 13 on test ...
00:22:27 - test set during evaluation: 11550/11545
00:22:28 - process[8] - test - epoch 13 - mAP: 0.467 w/ 31 queries
00:22:28 - process[8]: training epoch 14 ...
00:22:42 - process[8] - epoch 14 - train iter 476 - 27989.0 words/s - loss: 0.3819
00:22:42 - process[8]: evaluating epoch 14 on dev ...
00:22:57 - process[8] - dev - epoch 14 - mAP: 0.472 w/ 32 queries
00:22:57 - process[8]: training epoch 15 ...
00:23:12 - process[8] - epoch 15 - train iter 476 - 28282.9 words/s - loss: 0.3479
00:23:12 - process[8]: evaluating epoch 15 on dev ...
00:23:27 - process[8] - dev - epoch 15 - mAP: 0.487 w/ 32 queries
00:23:27 - process[8]: training epoch 16 ...
00:23:41 - process[8] - epoch 16 - train iter 476 - 28391.3 words/s - loss: 0.3359
00:23:41 - process[8]: evaluating epoch 16 on dev ...
00:23:57 - process[8] - dev - epoch 16 - mAP: 0.477 w/ 32 queries
00:23:57 - process[8]: training epoch 17 ...
00:24:12 - process[8] - epoch 17 - train iter 476 - 28228.4 words/s - loss: 0.3300
00:24:12 - process[8]: evaluating epoch 17 on dev ...
00:24:27 - process[8] - dev - epoch 17 - mAP: 0.485 w/ 32 queries
00:24:27 - process[8]: training epoch 18 ...
00:24:41 - process[8] - epoch 18 - train iter 476 - 28014.8 words/s - loss: 0.3024
00:24:41 - process[8]: evaluating epoch 18 on dev ...
00:24:56 - process[8] - dev - epoch 18 - mAP: 0.495 w/ 32 queries
00:24:56 - process[8]: training epoch 19 ...
00:25:11 - process[8] - epoch 19 - train iter 476 - 28392.6 words/s - loss: 0.3235
00:25:11 - process[8]: evaluating epoch 19 on dev ...
00:25:26 - process[8] - dev - epoch 19 - mAP: 0.493 w/ 32 queries
00:25:26 - [fold 3] best test MAP: 0.467 @ epoch 13
00:25:26 - Evaluating every 1 epochs ...
00:25:26 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:27 - test has 31 queries ...
00:25:27 - Data reading done ...
00:25:29 - adding 9-th encoder to optimizer...
00:25:29 - adding 10-th encoder to optimizer...
00:25:29 - adding 11-th encoder to optimizer...
00:25:29 - process[8]: training epoch 0 ...
00:25:43 - process[8] - epoch 0 - train iter 432 - 28030.1 words/s - loss: 0.6798
00:25:43 - process[8]: training epoch 1 ...
00:25:56 - process[8] - epoch 1 - train iter 432 - 27909.0 words/s - loss: 0.6206
00:25:56 - process[8]: training epoch 2 ...
00:26:09 - process[8] - epoch 2 - train iter 432 - 28158.6 words/s - loss: 0.5519
00:26:09 - process[8]: training epoch 3 ...
00:26:23 - process[8] - epoch 3 - train iter 432 - 28083.8 words/s - loss: 0.5329
00:26:23 - process[8]: training epoch 4 ...
00:26:36 - process[8] - epoch 4 - train iter 432 - 28606.9 words/s - loss: 0.5130
00:26:36 - process[8]: training epoch 5 ...
00:26:50 - process[8] - epoch 5 - train iter 432 - 27899.4 words/s - loss: 0.4954
00:26:50 - process[8]: training epoch 6 ...
00:27:04 - process[8] - epoch 6 - train iter 432 - 28136.0 words/s - loss: 0.4858
00:27:04 - process[8]: training epoch 7 ...
00:27:17 - process[8] - epoch 7 - train iter 432 - 28008.8 words/s - loss: 0.4356
00:27:17 - process[8]: training epoch 8 ...
00:27:31 - process[8] - epoch 8 - train iter 432 - 27826.7 words/s - loss: 0.4138
00:27:31 - process[8]: training epoch 9 ...
00:27:44 - process[8] - epoch 9 - train iter 432 - 28381.1 words/s - loss: 0.4292
00:27:44 - process[8]: training epoch 10 ...
00:27:58 - process[8] - epoch 10 - train iter 432 - 27812.4 words/s - loss: 0.3945
00:27:58 - process[8]: evaluating epoch 10 on dev ...
00:28:14 - dev set during evaluation: 11550/11545
00:28:14 - process[8] - dev - epoch 10 - mAP: 0.482 w/ 31 queries
00:28:14 - process[8]: evaluating epoch 10 on test ...
00:28:29 - test set during evaluation: 11320/11315
00:28:29 - process[8] - test - epoch 10 - mAP: 0.534 w/ 31 queries
00:28:29 - process[8]: training epoch 11 ...
00:28:42 - process[8] - epoch 11 - train iter 432 - 28314.0 words/s - loss: 0.3993
00:28:42 - process[8]: evaluating epoch 11 on dev ...
00:28:57 - dev set during evaluation: 11550/11545
00:28:57 - process[8] - dev - epoch 11 - mAP: 0.503 w/ 31 queries
00:28:57 - process[8]: evaluating epoch 11 on test ...
00:29:12 - test set during evaluation: 11320/11315
00:29:12 - process[8] - test - epoch 11 - mAP: 0.521 w/ 31 queries
00:29:12 - process[8]: training epoch 12 ...
00:29:25 - process[8] - epoch 12 - train iter 432 - 28342.4 words/s - loss: 0.3768
00:29:25 - process[8]: evaluating epoch 12 on dev ...
00:29:40 - dev set during evaluation: 11550/11545
00:29:40 - process[8] - dev - epoch 12 - mAP: 0.489 w/ 31 queries
00:29:40 - process[8]: training epoch 13 ...
00:29:53 - process[8] - epoch 13 - train iter 432 - 28072.5 words/s - loss: 0.3626
00:29:53 - process[8]: evaluating epoch 13 on dev ...
00:30:08 - dev set during evaluation: 11550/11545
00:30:08 - process[8] - dev - epoch 13 - mAP: 0.500 w/ 31 queries
00:30:08 - process[8]: training epoch 14 ...
00:30:21 - process[8] - epoch 14 - train iter 432 - 28157.0 words/s - loss: 0.3515
00:30:21 - process[8]: evaluating epoch 14 on dev ...
00:30:36 - dev set during evaluation: 11550/11545
00:30:36 - process[8] - dev - epoch 14 - mAP: 0.497 w/ 31 queries
00:30:36 - process[8]: training epoch 15 ...
00:30:49 - process[8] - epoch 15 - train iter 432 - 28461.2 words/s - loss: 0.3657
00:30:49 - process[8]: evaluating epoch 15 on dev ...
00:31:04 - dev set during evaluation: 11550/11545
00:31:04 - process[8] - dev - epoch 15 - mAP: 0.492 w/ 31 queries
00:31:04 - process[8]: training epoch 16 ...
00:31:18 - process[8] - epoch 16 - train iter 432 - 28457.0 words/s - loss: 0.3331
00:31:18 - process[8]: evaluating epoch 16 on dev ...
00:31:32 - dev set during evaluation: 11550/11545
00:31:32 - process[8] - dev - epoch 16 - mAP: 0.506 w/ 31 queries
00:31:32 - process[8]: evaluating epoch 16 on test ...
00:31:47 - test set during evaluation: 11320/11315
00:31:47 - process[8] - test - epoch 16 - mAP: 0.543 w/ 31 queries
00:31:47 - process[8]: training epoch 17 ...
00:32:00 - process[8] - epoch 17 - train iter 432 - 28021.4 words/s - loss: 0.3029
00:32:00 - process[8]: evaluating epoch 17 on dev ...
00:32:14 - dev set during evaluation: 11550/11545
00:32:14 - process[8] - dev - epoch 17 - mAP: 0.487 w/ 31 queries
00:32:14 - process[8]: training epoch 18 ...
00:32:28 - process[8] - epoch 18 - train iter 432 - 28075.1 words/s - loss: 0.3323
00:32:28 - process[8]: evaluating epoch 18 on dev ...
00:32:42 - dev set during evaluation: 11550/11545
00:32:42 - process[8] - dev - epoch 18 - mAP: 0.514 w/ 31 queries
00:32:42 - process[8]: evaluating epoch 18 on test ...
00:32:58 - test set during evaluation: 11320/11315
00:32:58 - process[8] - test - epoch 18 - mAP: 0.542 w/ 31 queries
00:32:58 - process[8]: training epoch 19 ...
00:33:11 - process[8] - epoch 19 - train iter 432 - 28604.0 words/s - loss: 0.3221
00:33:11 - process[8]: evaluating epoch 19 on dev ...
00:33:25 - dev set during evaluation: 11550/11545
00:33:25 - process[8] - dev - epoch 19 - mAP: 0.501 w/ 31 queries
00:33:25 - [fold 4] best test MAP: 0.542 @ epoch 18
00:33:25 - Evaluating every 1 epochs ...
00:33:25 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:33:27 - test has 31 queries ...
00:33:27 - Data reading done ...
00:33:28 - adding 9-th encoder to optimizer...
00:33:28 - adding 10-th encoder to optimizer...
00:33:28 - adding 11-th encoder to optimizer...
00:33:29 - process[8]: training epoch 0 ...
00:33:43 - process[8] - epoch 0 - train iter 437 - 27825.3 words/s - loss: 0.6829
00:33:43 - process[8]: training epoch 1 ...
00:33:56 - process[8] - epoch 1 - train iter 437 - 28345.2 words/s - loss: 0.5874
00:33:56 - process[8]: training epoch 2 ...
00:34:10 - process[8] - epoch 2 - train iter 437 - 27818.7 words/s - loss: 0.5567
00:34:10 - process[8]: training epoch 3 ...
00:34:24 - process[8] - epoch 3 - train iter 437 - 28220.6 words/s - loss: 0.5505
00:34:24 - process[8]: training epoch 4 ...
00:34:37 - process[8] - epoch 4 - train iter 437 - 28381.4 words/s - loss: 0.5109
00:34:37 - process[8]: training epoch 5 ...
00:34:51 - process[8] - epoch 5 - train iter 437 - 28305.4 words/s - loss: 0.4926
00:34:51 - process[8]: training epoch 6 ...
00:35:04 - process[8] - epoch 6 - train iter 437 - 28237.4 words/s - loss: 0.5035
00:35:07 - process[8]: training epoch 7 ...
00:35:21 - process[8] - epoch 7 - train iter 437 - 27834.8 words/s - loss: 0.4667
00:35:21 - process[8]: training epoch 8 ...
00:35:35 - process[8] - epoch 8 - train iter 437 - 28562.2 words/s - loss: 0.4713
00:35:35 - process[8]: training epoch 9 ...
00:35:49 - process[8] - epoch 9 - train iter 437 - 27944.4 words/s - loss: 0.4437
00:35:49 - process[8]: training epoch 10 ...
00:36:02 - process[8] - epoch 10 - train iter 437 - 28516.1 words/s - loss: 0.4352
00:36:02 - process[8]: evaluating epoch 10 on dev ...
00:36:17 - dev set during evaluation: 11320/11315
00:36:17 - process[8] - dev - epoch 10 - mAP: 0.532 w/ 31 queries
00:36:17 - process[8]: evaluating epoch 10 on test ...
00:36:31 - process[8] - test - epoch 10 - mAP: 0.429 w/ 31 queries
00:36:31 - process[8]: training epoch 11 ...
00:36:44 - process[8] - epoch 11 - train iter 437 - 28544.5 words/s - loss: 0.4272
00:36:44 - process[8]: evaluating epoch 11 on dev ...
00:36:59 - dev set during evaluation: 11320/11315
00:36:59 - process[8] - dev - epoch 11 - mAP: 0.521 w/ 31 queries
00:36:59 - process[8]: training epoch 12 ...
00:37:12 - process[8] - epoch 12 - train iter 437 - 28517.4 words/s - loss: 0.3949
00:37:12 - process[8]: evaluating epoch 12 on dev ...
00:37:26 - dev set during evaluation: 11320/11315
00:37:26 - process[8] - dev - epoch 12 - mAP: 0.539 w/ 31 queries
00:37:26 - process[8]: evaluating epoch 12 on test ...
00:37:40 - process[8] - test - epoch 12 - mAP: 0.405 w/ 31 queries
00:37:40 - process[8]: training epoch 13 ...
00:37:54 - process[8] - epoch 13 - train iter 437 - 27958.7 words/s - loss: 0.3617
00:37:54 - process[8]: evaluating epoch 13 on dev ...
00:38:08 - dev set during evaluation: 11320/11315
00:38:08 - process[8] - dev - epoch 13 - mAP: 0.538 w/ 31 queries
00:38:08 - process[8]: training epoch 14 ...
00:38:22 - process[8] - epoch 14 - train iter 437 - 27803.6 words/s - loss: 0.3669
00:38:22 - process[8]: evaluating epoch 14 on dev ...
00:38:36 - dev set during evaluation: 11320/11315
00:38:37 - process[8] - dev - epoch 14 - mAP: 0.541 w/ 31 queries
00:38:37 - process[8]: evaluating epoch 14 on test ...
00:38:50 - process[8] - test - epoch 14 - mAP: 0.399 w/ 31 queries
00:38:50 - process[8]: training epoch 15 ...
00:39:04 - process[8] - epoch 15 - train iter 437 - 28008.1 words/s - loss: 0.3552
00:39:04 - process[8]: evaluating epoch 15 on dev ...
00:39:18 - dev set during evaluation: 11320/11315
00:39:18 - process[8] - dev - epoch 15 - mAP: 0.524 w/ 31 queries
00:39:18 - process[8]: training epoch 16 ...
00:39:32 - process[8] - epoch 16 - train iter 437 - 28234.6 words/s - loss: 0.3451
00:39:32 - process[8]: evaluating epoch 16 on dev ...
00:39:46 - dev set during evaluation: 11320/11315
00:39:46 - process[8] - dev - epoch 16 - mAP: 0.543 w/ 31 queries
00:39:46 - process[8]: evaluating epoch 16 on test ...
00:40:00 - process[8] - test - epoch 16 - mAP: 0.417 w/ 31 queries
00:40:00 - process[8]: training epoch 17 ...
00:40:13 - process[8] - epoch 17 - train iter 437 - 28122.3 words/s - loss: 0.3182
00:40:13 - process[8]: evaluating epoch 17 on dev ...
00:40:28 - dev set during evaluation: 11320/11315
00:40:28 - process[8] - dev - epoch 17 - mAP: 0.552 w/ 31 queries
00:40:28 - process[8]: evaluating epoch 17 on test ...
00:40:42 - process[8] - test - epoch 17 - mAP: 0.434 w/ 31 queries
00:40:42 - process[8]: training epoch 18 ...
00:40:55 - process[8] - epoch 18 - train iter 437 - 28019.3 words/s - loss: 0.3703
00:40:55 - process[8]: evaluating epoch 18 on dev ...
00:41:09 - dev set during evaluation: 11320/11315
00:41:09 - process[8] - dev - epoch 18 - mAP: 0.537 w/ 31 queries
00:41:09 - process[8]: training epoch 19 ...
00:41:23 - process[8] - epoch 19 - train iter 437 - 28117.4 words/s - loss: 0.3551
00:41:23 - process[8]: evaluating epoch 19 on dev ...
00:41:37 - dev set during evaluation: 11320/11315
00:41:37 - process[8] - dev - epoch 19 - mAP: 0.531 w/ 31 queries
00:41:37 - [fold 5] best test MAP: 0.434 @ epoch 17
00:41:37 - [0.4528817503602464, 0.531755564034673, 0.46719737927927757, 0.5419501577960971, 0.4335527661539465]
00:41:37 - [31, 32, 31, 31, 31]
00:41:37 - final MAP: 0.486
00:00:04 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-9', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='es')
00:00:12 - Evaluating every 1 epochs ...
00:00:12 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:13 - test has 31 queries ...
00:00:13 - Data reading done ...
00:00:21 - adding 9-th encoder to optimizer...
00:00:21 - adding 10-th encoder to optimizer...
00:00:21 - adding 11-th encoder to optimizer...
00:00:21 - process[8]: training epoch 0 ...
00:00:39 - process[8] - epoch 0 - train iter 540 - 26656.5 words/s - loss: 0.6794
00:00:39 - process[8]: training epoch 1 ...
00:00:56 - process[8] - epoch 1 - train iter 540 - 27802.8 words/s - loss: 0.6019
00:00:56 - process[8]: training epoch 2 ...
00:01:13 - process[8] - epoch 2 - train iter 540 - 27847.5 words/s - loss: 0.5359
00:01:13 - process[8]: training epoch 3 ...
00:01:30 - process[8] - epoch 3 - train iter 540 - 27373.1 words/s - loss: 0.4850
00:01:30 - process[8]: training epoch 4 ...
00:01:47 - process[8] - epoch 4 - train iter 540 - 27686.8 words/s - loss: 0.4415
00:01:47 - process[8]: training epoch 5 ...
00:02:04 - process[8] - epoch 5 - train iter 540 - 27779.6 words/s - loss: 0.4580
00:02:04 - process[8]: training epoch 6 ...
00:02:21 - process[8] - epoch 6 - train iter 540 - 27509.1 words/s - loss: 0.4123
00:02:21 - process[8]: training epoch 7 ...
00:02:38 - process[8] - epoch 7 - train iter 540 - 27212.4 words/s - loss: 0.4451
00:02:38 - process[8]: training epoch 8 ...
00:02:56 - process[8] - epoch 8 - train iter 540 - 27764.3 words/s - loss: 0.3682
00:02:56 - process[8]: training epoch 9 ...
00:03:12 - process[8] - epoch 9 - train iter 540 - 27691.6 words/s - loss: 0.3935
00:03:12 - process[8]: training epoch 10 ...
00:03:30 - process[8] - epoch 10 - train iter 540 - 27532.5 words/s - loss: 0.3680
00:03:30 - process[8]: evaluating epoch 10 on dev ...
00:03:43 - process[8] - dev - epoch 10 - mAP: 0.409 w/ 31 queries
00:03:43 - process[8]: evaluating epoch 10 on test ...
00:03:57 - test set during evaluation: 11460/11458
00:03:57 - process[8] - test - epoch 10 - mAP: 0.443 w/ 31 queries
00:03:57 - process[8]: training epoch 11 ...
00:04:14 - process[8] - epoch 11 - train iter 540 - 28350.3 words/s - loss: 0.3602
00:04:14 - process[8]: evaluating epoch 11 on dev ...
00:04:27 - process[8] - dev - epoch 11 - mAP: 0.406 w/ 31 queries
00:04:27 - process[8]: training epoch 12 ...
00:04:44 - process[8] - epoch 12 - train iter 540 - 28265.5 words/s - loss: 0.3441
00:04:44 - process[8]: evaluating epoch 12 on dev ...
00:04:57 - process[8] - dev - epoch 12 - mAP: 0.408 w/ 31 queries
00:04:57 - process[8]: training epoch 13 ...
00:05:13 - process[8] - epoch 13 - train iter 540 - 28521.7 words/s - loss: 0.3858
00:05:13 - process[8]: evaluating epoch 13 on dev ...
00:05:27 - process[8] - dev - epoch 13 - mAP: 0.419 w/ 31 queries
00:05:27 - process[8]: evaluating epoch 13 on test ...
00:05:41 - test set during evaluation: 11460/11458
00:05:41 - process[8] - test - epoch 13 - mAP: 0.442 w/ 31 queries
00:05:41 - process[8]: training epoch 14 ...
00:05:57 - process[8] - epoch 14 - train iter 540 - 28267.4 words/s - loss: 0.3470
00:05:57 - process[8]: evaluating epoch 14 on dev ...
00:06:13 - process[8] - dev - epoch 14 - mAP: 0.421 w/ 31 queries
00:06:13 - process[8]: evaluating epoch 14 on test ...
00:06:27 - test set during evaluation: 11460/11458
00:06:27 - process[8] - test - epoch 14 - mAP: 0.453 w/ 31 queries
00:06:27 - process[8]: training epoch 15 ...
00:06:44 - process[8] - epoch 15 - train iter 540 - 28362.5 words/s - loss: 0.3231
00:06:44 - process[8]: evaluating epoch 15 on dev ...
00:06:57 - process[8] - dev - epoch 15 - mAP: 0.402 w/ 31 queries
00:06:57 - process[8]: training epoch 16 ...
00:07:14 - process[8] - epoch 16 - train iter 540 - 28001.8 words/s - loss: 0.3642
00:07:14 - process[8]: evaluating epoch 16 on dev ...
00:07:28 - process[8] - dev - epoch 16 - mAP: 0.409 w/ 31 queries
00:07:28 - process[8]: training epoch 17 ...
00:07:45 - process[8] - epoch 17 - train iter 540 - 27827.5 words/s - loss: 0.3155
00:07:45 - process[8]: evaluating epoch 17 on dev ...
00:07:58 - process[8] - dev - epoch 17 - mAP: 0.410 w/ 31 queries
00:07:58 - process[8]: training epoch 18 ...
00:08:15 - process[8] - epoch 18 - train iter 540 - 27889.6 words/s - loss: 0.3377
00:08:15 - process[8]: evaluating epoch 18 on dev ...
00:08:28 - process[8] - dev - epoch 18 - mAP: 0.429 w/ 31 queries
00:08:28 - process[8]: evaluating epoch 18 on test ...
00:08:43 - test set during evaluation: 11460/11458
00:08:43 - process[8] - test - epoch 18 - mAP: 0.453 w/ 31 queries
00:08:43 - process[8]: training epoch 19 ...
00:08:59 - process[8] - epoch 19 - train iter 540 - 28005.2 words/s - loss: 0.3012
00:08:59 - process[8]: evaluating epoch 19 on dev ...
00:09:15 - process[8] - dev - epoch 19 - mAP: 0.411 w/ 31 queries
00:09:15 - [fold 1] best test MAP: 0.453 @ epoch 18
00:09:15 - Evaluating every 1 epochs ...
00:09:15 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:09:17 - test has 32 queries ...
00:09:17 - Data reading done ...
00:09:18 - adding 9-th encoder to optimizer...
00:09:18 - adding 10-th encoder to optimizer...
00:09:18 - adding 11-th encoder to optimizer...
00:09:19 - process[8]: training epoch 0 ...
00:09:35 - process[8] - epoch 0 - train iter 492 - 27452.9 words/s - loss: 0.6715
00:09:35 - process[8]: training epoch 1 ...
00:09:50 - process[8] - epoch 1 - train iter 492 - 27692.5 words/s - loss: 0.5761
00:09:50 - process[8]: training epoch 2 ...
00:10:06 - process[8] - epoch 2 - train iter 492 - 27321.6 words/s - loss: 0.5106
00:10:06 - process[8]: training epoch 3 ...
00:10:22 - process[8] - epoch 3 - train iter 492 - 27264.3 words/s - loss: 0.4786
00:10:22 - process[8]: training epoch 4 ...
00:10:37 - process[8] - epoch 4 - train iter 492 - 27832.6 words/s - loss: 0.5019
00:10:37 - process[8]: training epoch 5 ...
00:10:53 - process[8] - epoch 5 - train iter 492 - 27588.6 words/s - loss: 0.4507
00:10:53 - process[8]: training epoch 6 ...
00:11:08 - process[8] - epoch 6 - train iter 492 - 27715.9 words/s - loss: 0.4199
00:11:08 - process[8]: training epoch 7 ...
00:11:24 - process[8] - epoch 7 - train iter 492 - 27418.1 words/s - loss: 0.4306
00:11:24 - process[8]: training epoch 8 ...
00:11:39 - process[8] - epoch 8 - train iter 492 - 27707.7 words/s - loss: 0.3883
00:11:39 - process[8]: training epoch 9 ...
00:11:55 - process[8] - epoch 9 - train iter 492 - 27505.7 words/s - loss: 0.3988
00:11:55 - process[8]: training epoch 10 ...
00:12:11 - process[8] - epoch 10 - train iter 492 - 27745.9 words/s - loss: 0.3942
00:12:11 - process[8]: evaluating epoch 10 on dev ...
00:12:25 - dev set during evaluation: 11460/11458
00:12:25 - process[8] - dev - epoch 10 - mAP: 0.455 w/ 31 queries
00:12:25 - process[8]: evaluating epoch 10 on test ...
00:12:40 - process[8] - test - epoch 10 - mAP: 0.522 w/ 32 queries
00:12:40 - process[8]: training epoch 11 ...
00:12:55 - process[8] - epoch 11 - train iter 492 - 27272.3 words/s - loss: 0.3899
00:12:55 - process[8]: evaluating epoch 11 on dev ...
00:13:10 - dev set during evaluation: 11460/11458
00:13:10 - process[8] - dev - epoch 11 - mAP: 0.426 w/ 31 queries
00:13:10 - process[8]: training epoch 12 ...
00:13:25 - process[8] - epoch 12 - train iter 492 - 27747.9 words/s - loss: 0.3815
00:13:25 - process[8]: evaluating epoch 12 on dev ...
00:13:39 - dev set during evaluation: 11460/11458
00:13:39 - process[8] - dev - epoch 12 - mAP: 0.441 w/ 31 queries
00:13:39 - process[8]: training epoch 13 ...
00:13:54 - process[8] - epoch 13 - train iter 492 - 28185.4 words/s - loss: 0.3548
00:13:54 - process[8]: evaluating epoch 13 on dev ...
00:14:08 - dev set during evaluation: 11460/11458
00:14:08 - process[8] - dev - epoch 13 - mAP: 0.435 w/ 31 queries
00:14:08 - process[8]: training epoch 14 ...
00:14:24 - process[8] - epoch 14 - train iter 492 - 27716.3 words/s - loss: 0.3565
00:14:24 - process[8]: evaluating epoch 14 on dev ...
00:14:38 - dev set during evaluation: 11460/11458
00:14:38 - process[8] - dev - epoch 14 - mAP: 0.446 w/ 31 queries
00:14:38 - process[8]: training epoch 15 ...
00:14:53 - process[8] - epoch 15 - train iter 492 - 28042.9 words/s - loss: 0.3627
00:14:53 - process[8]: evaluating epoch 15 on dev ...
00:15:08 - dev set during evaluation: 11460/11458
00:15:08 - process[8] - dev - epoch 15 - mAP: 0.456 w/ 31 queries
00:15:08 - process[8]: evaluating epoch 15 on test ...
00:15:23 - process[8] - test - epoch 15 - mAP: 0.532 w/ 32 queries
00:15:23 - process[8]: training epoch 16 ...
00:15:39 - process[8] - epoch 16 - train iter 492 - 27758.4 words/s - loss: 0.3227
00:15:39 - process[8]: evaluating epoch 16 on dev ...
00:15:52 - dev set during evaluation: 11460/11458
00:15:52 - process[8] - dev - epoch 16 - mAP: 0.443 w/ 31 queries
00:15:52 - process[8]: training epoch 17 ...
00:16:08 - process[8] - epoch 17 - train iter 492 - 27479.1 words/s - loss: 0.3579
00:16:08 - process[8]: evaluating epoch 17 on dev ...
00:16:22 - dev set during evaluation: 11460/11458
00:16:22 - process[8] - dev - epoch 17 - mAP: 0.452 w/ 31 queries
00:16:22 - process[8]: training epoch 18 ...
00:16:37 - process[8] - epoch 18 - train iter 492 - 27752.4 words/s - loss: 0.3464
00:16:37 - process[8]: evaluating epoch 18 on dev ...
00:16:51 - dev set during evaluation: 11460/11458
00:16:51 - process[8] - dev - epoch 18 - mAP: 0.442 w/ 31 queries
00:16:51 - process[8]: training epoch 19 ...
00:17:07 - process[8] - epoch 19 - train iter 492 - 27413.4 words/s - loss: 0.3309
00:17:07 - process[8]: evaluating epoch 19 on dev ...
00:17:21 - dev set during evaluation: 11460/11458
00:17:21 - process[8] - dev - epoch 19 - mAP: 0.443 w/ 31 queries
00:17:21 - [fold 2] best test MAP: 0.532 @ epoch 15
00:17:21 - Evaluating every 1 epochs ...
00:17:21 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:17:22 - test has 31 queries ...
00:17:22 - Data reading done ...
00:17:24 - adding 9-th encoder to optimizer...
00:17:24 - adding 10-th encoder to optimizer...
00:17:24 - adding 11-th encoder to optimizer...
00:17:25 - process[8]: training epoch 0 ...
00:17:40 - process[8] - epoch 0 - train iter 476 - 27524.2 words/s - loss: 0.6780
00:17:40 - process[8]: training epoch 1 ...
00:17:55 - process[8] - epoch 1 - train iter 476 - 27854.2 words/s - loss: 0.6043
00:17:55 - process[8]: training epoch 2 ...
00:18:10 - process[8] - epoch 2 - train iter 476 - 27594.2 words/s - loss: 0.5335
00:18:10 - process[8]: training epoch 3 ...
00:18:25 - process[8] - epoch 3 - train iter 476 - 27248.8 words/s - loss: 0.4797
00:18:25 - process[8]: training epoch 4 ...
00:18:40 - process[8] - epoch 4 - train iter 476 - 27549.9 words/s - loss: 0.4575
00:18:40 - process[8]: training epoch 5 ...
00:18:55 - process[8] - epoch 5 - train iter 476 - 27666.0 words/s - loss: 0.4473
00:18:55 - process[8]: training epoch 6 ...
00:19:10 - process[8] - epoch 6 - train iter 476 - 27718.1 words/s - loss: 0.4318
00:19:10 - process[8]: training epoch 7 ...
00:19:25 - process[8] - epoch 7 - train iter 476 - 27382.7 words/s - loss: 0.4162
00:19:25 - process[8]: training epoch 8 ...
00:19:40 - process[8] - epoch 8 - train iter 476 - 27743.0 words/s - loss: 0.4092
00:19:40 - process[8]: training epoch 9 ...
00:19:55 - process[8] - epoch 9 - train iter 476 - 27664.4 words/s - loss: 0.3720
00:19:55 - process[8]: training epoch 10 ...
00:20:10 - process[8] - epoch 10 - train iter 476 - 27642.3 words/s - loss: 0.3765
00:20:10 - process[8]: evaluating epoch 10 on dev ...
00:20:25 - process[8] - dev - epoch 10 - mAP: 0.469 w/ 32 queries
00:20:25 - process[8]: evaluating epoch 10 on test ...
00:20:39 - test set during evaluation: 11550/11545
00:20:39 - process[8] - test - epoch 10 - mAP: 0.438 w/ 31 queries
00:20:39 - process[8]: training epoch 11 ...
00:20:54 - process[8] - epoch 11 - train iter 476 - 28008.6 words/s - loss: 0.3570
00:20:54 - process[8]: evaluating epoch 11 on dev ...
00:21:09 - process[8] - dev - epoch 11 - mAP: 0.439 w/ 32 queries
00:21:09 - process[8]: training epoch 12 ...
00:21:24 - process[8] - epoch 12 - train iter 476 - 27937.2 words/s - loss: 0.3372
00:21:24 - process[8]: evaluating epoch 12 on dev ...
00:21:39 - process[8] - dev - epoch 12 - mAP: 0.479 w/ 32 queries
00:21:39 - process[8]: evaluating epoch 12 on test ...
00:21:54 - test set during evaluation: 11550/11545
00:21:54 - process[8] - test - epoch 12 - mAP: 0.431 w/ 31 queries
00:21:54 - process[8]: training epoch 13 ...
00:22:09 - process[8] - epoch 13 - train iter 476 - 27696.0 words/s - loss: 0.3540
00:22:09 - process[8]: evaluating epoch 13 on dev ...
00:22:24 - process[8] - dev - epoch 13 - mAP: 0.506 w/ 32 queries
00:22:24 - process[8]: evaluating epoch 13 on test ...
00:22:39 - test set during evaluation: 11550/11545
00:22:39 - process[8] - test - epoch 13 - mAP: 0.467 w/ 31 queries
00:22:39 - process[8]: training epoch 14 ...
00:22:54 - process[8] - epoch 14 - train iter 476 - 27518.1 words/s - loss: 0.3819
00:22:54 - process[8]: evaluating epoch 14 on dev ...
00:23:09 - process[8] - dev - epoch 14 - mAP: 0.472 w/ 32 queries
00:23:09 - process[8]: training epoch 15 ...
00:23:24 - process[8] - epoch 15 - train iter 476 - 27960.3 words/s - loss: 0.3479
00:23:24 - process[8]: evaluating epoch 15 on dev ...
00:23:39 - process[8] - dev - epoch 15 - mAP: 0.487 w/ 32 queries
00:23:39 - process[8]: training epoch 16 ...
00:23:54 - process[8] - epoch 16 - train iter 476 - 28029.5 words/s - loss: 0.3359
00:23:54 - process[8]: evaluating epoch 16 on dev ...
00:24:09 - process[8] - dev - epoch 16 - mAP: 0.477 w/ 32 queries
00:24:09 - process[8]: training epoch 17 ...
00:24:24 - process[8] - epoch 17 - train iter 476 - 27835.5 words/s - loss: 0.3300
00:24:24 - process[8]: evaluating epoch 17 on dev ...
00:24:39 - process[8] - dev - epoch 17 - mAP: 0.485 w/ 32 queries
00:24:39 - process[8]: training epoch 18 ...
00:24:54 - process[8] - epoch 18 - train iter 476 - 27696.5 words/s - loss: 0.3024
00:24:54 - process[8]: evaluating epoch 18 on dev ...
00:25:09 - process[8] - dev - epoch 18 - mAP: 0.495 w/ 32 queries
00:25:09 - process[8]: training epoch 19 ...
00:25:24 - process[8] - epoch 19 - train iter 476 - 27786.6 words/s - loss: 0.3235
00:25:24 - process[8]: evaluating epoch 19 on dev ...
00:25:39 - process[8] - dev - epoch 19 - mAP: 0.493 w/ 32 queries
00:25:39 - [fold 3] best test MAP: 0.467 @ epoch 13
00:25:39 - Evaluating every 1 epochs ...
00:25:39 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:41 - test has 31 queries ...
00:25:41 - Data reading done ...
00:25:42 - adding 9-th encoder to optimizer...
00:25:42 - adding 10-th encoder to optimizer...
00:25:42 - adding 11-th encoder to optimizer...
00:25:43 - process[8]: training epoch 0 ...
00:25:56 - process[8] - epoch 0 - train iter 432 - 27851.4 words/s - loss: 0.6798
00:25:56 - process[8]: training epoch 1 ...
00:26:10 - process[8] - epoch 1 - train iter 432 - 27756.9 words/s - loss: 0.6206
00:26:10 - process[8]: training epoch 2 ...
00:26:23 - process[8] - epoch 2 - train iter 432 - 27962.5 words/s - loss: 0.5519
00:26:23 - process[8]: training epoch 3 ...
00:26:37 - process[8] - epoch 3 - train iter 432 - 27876.6 words/s - loss: 0.5329
00:26:37 - process[8]: training epoch 4 ...
00:26:50 - process[8] - epoch 4 - train iter 432 - 28308.8 words/s - loss: 0.5130
00:26:50 - process[8]: training epoch 5 ...
00:27:04 - process[8] - epoch 5 - train iter 432 - 27661.8 words/s - loss: 0.4954
00:27:04 - process[8]: training epoch 6 ...
00:27:18 - process[8] - epoch 6 - train iter 432 - 27982.2 words/s - loss: 0.4858
00:27:18 - process[8]: training epoch 7 ...
00:27:31 - process[8] - epoch 7 - train iter 432 - 27825.1 words/s - loss: 0.4356
00:27:31 - process[8]: training epoch 8 ...
00:27:45 - process[8] - epoch 8 - train iter 432 - 27748.3 words/s - loss: 0.4138
00:27:45 - process[8]: training epoch 9 ...
00:27:58 - process[8] - epoch 9 - train iter 432 - 28119.3 words/s - loss: 0.4292
00:27:58 - process[8]: training epoch 10 ...
00:28:12 - process[8] - epoch 10 - train iter 432 - 27558.8 words/s - loss: 0.3945
00:28:12 - process[8]: evaluating epoch 10 on dev ...
00:28:27 - dev set during evaluation: 11550/11545
00:28:27 - process[8] - dev - epoch 10 - mAP: 0.482 w/ 31 queries
00:28:27 - process[8]: evaluating epoch 10 on test ...
00:28:41 - test set during evaluation: 11320/11315
00:28:41 - process[8] - test - epoch 10 - mAP: 0.534 w/ 31 queries
00:28:41 - process[8]: training epoch 11 ...
00:28:55 - process[8] - epoch 11 - train iter 432 - 27837.1 words/s - loss: 0.3993
00:28:55 - process[8]: evaluating epoch 11 on dev ...
00:29:10 - dev set during evaluation: 11550/11545
00:29:10 - process[8] - dev - epoch 11 - mAP: 0.503 w/ 31 queries
00:29:10 - process[8]: evaluating epoch 11 on test ...
00:29:24 - test set during evaluation: 11320/11315
00:29:24 - process[8] - test - epoch 11 - mAP: 0.521 w/ 31 queries
00:29:24 - process[8]: training epoch 12 ...
00:29:37 - process[8] - epoch 12 - train iter 432 - 28071.0 words/s - loss: 0.3768
00:29:37 - process[8]: evaluating epoch 12 on dev ...
00:29:53 - dev set during evaluation: 11550/11545
00:29:53 - process[8] - dev - epoch 12 - mAP: 0.489 w/ 31 queries
00:29:53 - process[8]: training epoch 13 ...
00:30:06 - process[8] - epoch 13 - train iter 432 - 27739.6 words/s - loss: 0.3626
00:30:06 - process[8]: evaluating epoch 13 on dev ...
00:30:21 - dev set during evaluation: 11550/11545
00:30:21 - process[8] - dev - epoch 13 - mAP: 0.500 w/ 31 queries
00:30:21 - process[8]: training epoch 14 ...
00:30:35 - process[8] - epoch 14 - train iter 432 - 27734.1 words/s - loss: 0.3515
00:30:35 - process[8]: evaluating epoch 14 on dev ...
00:30:49 - dev set during evaluation: 11550/11545
00:30:49 - process[8] - dev - epoch 14 - mAP: 0.497 w/ 31 queries
00:30:49 - process[8]: training epoch 15 ...
00:31:03 - process[8] - epoch 15 - train iter 432 - 28358.8 words/s - loss: 0.3657
00:31:03 - process[8]: evaluating epoch 15 on dev ...
00:31:18 - dev set during evaluation: 11550/11545
00:31:18 - process[8] - dev - epoch 15 - mAP: 0.492 w/ 31 queries
00:31:18 - process[8]: training epoch 16 ...
00:31:31 - process[8] - epoch 16 - train iter 432 - 28158.3 words/s - loss: 0.3331
00:31:31 - process[8]: evaluating epoch 16 on dev ...
00:31:46 - dev set during evaluation: 11550/11545
00:31:46 - process[8] - dev - epoch 16 - mAP: 0.506 w/ 31 queries
00:31:46 - process[8]: evaluating epoch 16 on test ...
00:32:00 - test set during evaluation: 11320/11315
00:32:00 - process[8] - test - epoch 16 - mAP: 0.543 w/ 31 queries
00:32:00 - process[8]: training epoch 17 ...
00:32:14 - process[8] - epoch 17 - train iter 432 - 28002.7 words/s - loss: 0.3029
00:32:14 - process[8]: evaluating epoch 17 on dev ...
00:32:28 - dev set during evaluation: 11550/11545
00:32:28 - process[8] - dev - epoch 17 - mAP: 0.487 w/ 31 queries
00:32:28 - process[8]: training epoch 18 ...
00:32:42 - process[8] - epoch 18 - train iter 432 - 27866.8 words/s - loss: 0.3323
00:32:42 - process[8]: evaluating epoch 18 on dev ...
00:32:57 - dev set during evaluation: 11550/11545
00:32:57 - process[8] - dev - epoch 18 - mAP: 0.514 w/ 31 queries
00:32:57 - process[8]: evaluating epoch 18 on test ...
00:33:11 - test set during evaluation: 11320/11315
00:33:11 - process[8] - test - epoch 18 - mAP: 0.542 w/ 31 queries
00:33:11 - process[8]: training epoch 19 ...
00:33:24 - process[8] - epoch 19 - train iter 432 - 28430.4 words/s - loss: 0.3221
00:33:24 - process[8]: evaluating epoch 19 on dev ...
00:33:39 - dev set during evaluation: 11550/11545
00:33:39 - process[8] - dev - epoch 19 - mAP: 0.501 w/ 31 queries
00:33:39 - [fold 4] best test MAP: 0.542 @ epoch 18
00:33:39 - Evaluating every 1 epochs ...
00:33:39 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:33:40 - test has 31 queries ...
00:33:40 - Data reading done ...
00:33:42 - adding 9-th encoder to optimizer...
00:33:42 - adding 10-th encoder to optimizer...
00:33:42 - adding 11-th encoder to optimizer...
00:33:42 - process[8]: training epoch 0 ...
00:33:56 - process[8] - epoch 0 - train iter 437 - 27417.1 words/s - loss: 0.6829
00:33:56 - process[8]: training epoch 1 ...
00:34:10 - process[8] - epoch 1 - train iter 437 - 28063.0 words/s - loss: 0.5874
00:34:10 - process[8]: training epoch 2 ...
00:34:24 - process[8] - epoch 2 - train iter 437 - 27483.7 words/s - loss: 0.5567
00:34:24 - process[8]: training epoch 3 ...
00:34:38 - process[8] - epoch 3 - train iter 437 - 27946.2 words/s - loss: 0.5505
00:34:38 - process[8]: training epoch 4 ...
00:34:52 - process[8] - epoch 4 - train iter 437 - 27995.6 words/s - loss: 0.5109
00:34:52 - process[8]: training epoch 5 ...
00:35:05 - process[8] - epoch 5 - train iter 437 - 27968.3 words/s - loss: 0.4926
00:35:05 - process[8]: training epoch 6 ...
00:35:19 - process[8] - epoch 6 - train iter 437 - 27853.7 words/s - loss: 0.5035
00:35:19 - process[8]: training epoch 7 ...
00:35:33 - process[8] - epoch 7 - train iter 437 - 27720.8 words/s - loss: 0.4667
00:35:33 - process[8]: training epoch 8 ...
00:35:47 - process[8] - epoch 8 - train iter 437 - 28191.7 words/s - loss: 0.4713
00:35:47 - process[8]: training epoch 9 ...
00:36:01 - process[8] - epoch 9 - train iter 437 - 27848.2 words/s - loss: 0.4437
00:36:01 - process[8]: training epoch 10 ...
00:36:15 - process[8] - epoch 10 - train iter 437 - 28195.4 words/s - loss: 0.4352
00:36:15 - process[8]: evaluating epoch 10 on dev ...
00:36:29 - dev set during evaluation: 11320/11315
00:36:29 - process[8] - dev - epoch 10 - mAP: 0.532 w/ 31 queries
00:36:29 - process[8]: evaluating epoch 10 on test ...
00:36:43 - process[8] - test - epoch 10 - mAP: 0.429 w/ 31 queries
00:36:43 - process[8]: training epoch 11 ...
00:36:56 - process[8] - epoch 11 - train iter 437 - 28079.8 words/s - loss: 0.4272
00:36:56 - process[8]: evaluating epoch 11 on dev ...
00:37:11 - dev set during evaluation: 11320/11315
00:37:11 - process[8] - dev - epoch 11 - mAP: 0.521 w/ 31 queries
00:37:11 - process[8]: training epoch 12 ...
00:37:25 - process[8] - epoch 12 - train iter 437 - 28155.3 words/s - loss: 0.3949
00:37:25 - process[8]: evaluating epoch 12 on dev ...
00:37:39 - dev set during evaluation: 11320/11315
00:37:39 - process[8] - dev - epoch 12 - mAP: 0.539 w/ 31 queries
00:37:39 - process[8]: evaluating epoch 12 on test ...
00:37:53 - process[8] - test - epoch 12 - mAP: 0.405 w/ 31 queries
00:37:53 - process[8]: training epoch 13 ...
00:38:07 - process[8] - epoch 13 - train iter 437 - 27375.0 words/s - loss: 0.3617
00:38:07 - process[8]: evaluating epoch 13 on dev ...
00:38:21 - dev set during evaluation: 11320/11315
00:38:21 - process[8] - dev - epoch 13 - mAP: 0.538 w/ 31 queries
00:38:21 - process[8]: training epoch 14 ...
00:38:35 - process[8] - epoch 14 - train iter 437 - 27181.0 words/s - loss: 0.3669
00:38:35 - process[8]: evaluating epoch 14 on dev ...
00:38:50 - dev set during evaluation: 11320/11315
00:38:50 - process[8] - dev - epoch 14 - mAP: 0.541 w/ 31 queries
00:38:50 - process[8]: evaluating epoch 14 on test ...
00:39:03 - process[8] - test - epoch 14 - mAP: 0.399 w/ 31 queries
00:39:03 - process[8]: training epoch 15 ...
00:39:17 - process[8] - epoch 15 - train iter 437 - 27520.8 words/s - loss: 0.3552
00:39:17 - process[8]: evaluating epoch 15 on dev ...
00:39:32 - dev set during evaluation: 11320/11315
00:39:32 - process[8] - dev - epoch 15 - mAP: 0.524 w/ 31 queries
00:39:32 - process[8]: training epoch 16 ...
00:39:45 - process[8] - epoch 16 - train iter 437 - 27835.7 words/s - loss: 0.3451
00:39:45 - process[8]: evaluating epoch 16 on dev ...
00:40:00 - dev set during evaluation: 11320/11315
00:40:00 - process[8] - dev - epoch 16 - mAP: 0.543 w/ 31 queries
00:40:00 - process[8]: evaluating epoch 16 on test ...
00:40:14 - process[8] - test - epoch 16 - mAP: 0.417 w/ 31 queries
00:40:14 - process[8]: training epoch 17 ...
00:40:27 - process[8] - epoch 17 - train iter 437 - 27815.7 words/s - loss: 0.3182
00:40:27 - process[8]: evaluating epoch 17 on dev ...
00:40:42 - dev set during evaluation: 11320/11315
00:40:42 - process[8] - dev - epoch 17 - mAP: 0.552 w/ 31 queries
00:40:42 - process[8]: evaluating epoch 17 on test ...
00:40:55 - process[8] - test - epoch 17 - mAP: 0.434 w/ 31 queries
00:40:55 - process[8]: training epoch 18 ...
00:41:09 - process[8] - epoch 18 - train iter 437 - 27629.8 words/s - loss: 0.3703
00:41:09 - process[8]: evaluating epoch 18 on dev ...
00:41:23 - dev set during evaluation: 11320/11315
00:41:23 - process[8] - dev - epoch 18 - mAP: 0.537 w/ 31 queries
00:41:23 - process[8]: training epoch 19 ...
00:41:37 - process[8] - epoch 19 - train iter 437 - 28128.7 words/s - loss: 0.3551
00:41:37 - process[8]: evaluating epoch 19 on dev ...
00:41:51 - dev set during evaluation: 11320/11315
00:41:51 - process[8] - dev - epoch 19 - mAP: 0.531 w/ 31 queries
00:41:51 - [fold 5] best test MAP: 0.434 @ epoch 17
00:41:51 - [0.4528817503602464, 0.531755564034673, 0.46719737927927757, 0.5419501577960971, 0.4335527661539465]
00:41:51 - [31, 32, 31, 31, 31]
00:41:51 - final MAP: 0.486
