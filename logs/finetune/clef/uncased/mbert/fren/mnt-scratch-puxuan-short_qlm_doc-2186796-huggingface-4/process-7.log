00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=7, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='en')
00:00:14 - Evaluating every 1 epochs ...
00:00:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:15 - test has 35 queries ...
00:00:15 - Data reading done ...
00:00:22 - adding 9-th encoder to optimizer...
00:00:22 - adding 10-th encoder to optimizer...
00:00:22 - adding 11-th encoder to optimizer...
00:00:22 - process[7]: training epoch 0 ...
00:00:34 - process[7] - epoch 0 - train iter 197 - 14710.2 words/s - loss: 0.6739
00:00:34 - process[7]: training epoch 1 ...
00:00:46 - process[7] - epoch 1 - train iter 197 - 15385.6 words/s - loss: 0.6350
00:00:46 - process[7]: training epoch 2 ...
00:00:56 - process[7] - epoch 2 - train iter 197 - 17894.4 words/s - loss: 0.6505
00:00:56 - process[7]: training epoch 3 ...
00:01:07 - process[7] - epoch 3 - train iter 197 - 16464.0 words/s - loss: 0.5882
00:01:07 - process[7]: training epoch 4 ...
00:01:20 - process[7] - epoch 4 - train iter 197 - 13996.6 words/s - loss: 0.5845
00:01:20 - process[7]: training epoch 5 ...
00:01:32 - process[7] - epoch 5 - train iter 197 - 14847.4 words/s - loss: 0.6020
00:01:32 - process[7]: training epoch 6 ...
00:01:43 - process[7] - epoch 6 - train iter 197 - 16048.3 words/s - loss: 0.5463
00:01:43 - process[7]: training epoch 7 ...
00:01:55 - process[7] - epoch 7 - train iter 197 - 15275.9 words/s - loss: 0.5351
00:01:55 - process[7]: training epoch 8 ...
00:02:06 - process[7] - epoch 8 - train iter 197 - 15160.1 words/s - loss: 0.5612
00:02:06 - process[7]: training epoch 9 ...
00:02:17 - process[7] - epoch 9 - train iter 197 - 16238.6 words/s - loss: 0.5121
00:02:17 - process[7]: training epoch 10 ...
00:02:28 - process[7] - epoch 10 - train iter 197 - 17156.3 words/s - loss: 0.5107
00:02:28 - process[7]: evaluating epoch 10 on dev ...
00:03:13 - dev set during evaluation: 14160/14157
00:03:13 - process[7] - dev - epoch 10 - mAP: 0.360 w/ 35 queries
00:03:13 - process[7]: evaluating epoch 10 on test ...
00:03:54 - test set during evaluation: 14980/14975
00:03:54 - process[7] - test - epoch 10 - mAP: 0.327 w/ 35 queries
00:03:54 - process[7]: training epoch 11 ...
00:04:04 - process[7] - epoch 11 - train iter 197 - 17894.1 words/s - loss: 0.4850
00:04:04 - process[7]: evaluating epoch 11 on dev ...
00:04:51 - dev set during evaluation: 14160/14157
00:04:51 - process[7] - dev - epoch 11 - mAP: 0.355 w/ 35 queries
00:04:51 - process[7]: training epoch 12 ...
00:05:03 - process[7] - epoch 12 - train iter 197 - 14779.5 words/s - loss: 0.4718
00:05:03 - process[7]: evaluating epoch 12 on dev ...
00:05:45 - dev set during evaluation: 14160/14157
00:05:45 - process[7] - dev - epoch 12 - mAP: 0.393 w/ 35 queries
00:05:45 - process[7]: evaluating epoch 12 on test ...
00:06:27 - test set during evaluation: 14980/14975
00:06:27 - process[7] - test - epoch 12 - mAP: 0.373 w/ 35 queries
00:06:27 - process[7]: training epoch 13 ...
00:06:39 - process[7] - epoch 13 - train iter 197 - 14774.8 words/s - loss: 0.4728
00:06:39 - process[7]: evaluating epoch 13 on dev ...
00:07:23 - dev set during evaluation: 14160/14157
00:07:23 - process[7] - dev - epoch 13 - mAP: 0.381 w/ 35 queries
00:07:23 - process[7]: training epoch 14 ...
00:07:35 - process[7] - epoch 14 - train iter 197 - 15454.2 words/s - loss: 0.4677
00:07:35 - process[7]: evaluating epoch 14 on dev ...
00:08:18 - dev set during evaluation: 14160/14157
00:08:18 - process[7] - dev - epoch 14 - mAP: 0.408 w/ 35 queries
00:08:18 - process[7]: evaluating epoch 14 on test ...
00:09:00 - test set during evaluation: 14980/14975
00:09:00 - process[7] - test - epoch 14 - mAP: 0.408 w/ 35 queries
00:09:00 - process[7]: training epoch 15 ...
00:09:10 - process[7] - epoch 15 - train iter 197 - 17020.0 words/s - loss: 0.4325
00:09:10 - process[7]: evaluating epoch 15 on dev ...
00:09:55 - dev set during evaluation: 14160/14157
00:09:55 - process[7] - dev - epoch 15 - mAP: 0.370 w/ 35 queries
00:09:55 - process[7]: training epoch 16 ...
00:10:06 - process[7] - epoch 16 - train iter 197 - 15600.3 words/s - loss: 0.4933
00:10:06 - process[7]: evaluating epoch 16 on dev ...
00:10:50 - dev set during evaluation: 14160/14157
00:10:50 - process[7] - dev - epoch 16 - mAP: 0.375 w/ 35 queries
00:10:50 - process[7]: training epoch 17 ...
00:11:02 - process[7] - epoch 17 - train iter 197 - 14616.9 words/s - loss: 0.4485
00:11:02 - process[7]: evaluating epoch 17 on dev ...
00:11:46 - dev set during evaluation: 14160/14157
00:11:46 - process[7] - dev - epoch 17 - mAP: 0.391 w/ 35 queries
00:11:46 - process[7]: training epoch 18 ...
00:11:58 - process[7] - epoch 18 - train iter 197 - 15232.8 words/s - loss: 0.4255
00:11:58 - process[7]: evaluating epoch 18 on dev ...
00:12:42 - dev set during evaluation: 14160/14157
00:12:42 - process[7] - dev - epoch 18 - mAP: 0.365 w/ 35 queries
00:12:42 - process[7]: training epoch 19 ...
00:12:53 - process[7] - epoch 19 - train iter 197 - 16116.1 words/s - loss: 0.5166
00:12:53 - process[7]: evaluating epoch 19 on dev ...
00:13:38 - dev set during evaluation: 14160/14157
00:13:38 - process[7] - dev - epoch 19 - mAP: 0.374 w/ 35 queries
00:13:38 - [fold 1] best test MAP: 0.408 @ epoch 14
00:13:38 - Evaluating every 1 epochs ...
00:13:38 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:13:39 - test has 36 queries ...
00:13:39 - Data reading done ...
00:13:40 - adding 9-th encoder to optimizer...
00:13:40 - adding 10-th encoder to optimizer...
00:13:40 - adding 11-th encoder to optimizer...
00:13:41 - process[7]: training epoch 0 ...
00:13:51 - process[7] - epoch 0 - train iter 187 - 17465.0 words/s - loss: 0.6781
00:13:51 - process[7]: training epoch 1 ...
00:14:00 - process[7] - epoch 1 - train iter 187 - 17226.9 words/s - loss: 0.6734
00:14:00 - process[7]: training epoch 2 ...
00:14:11 - process[7] - epoch 2 - train iter 187 - 15838.5 words/s - loss: 0.6208
00:14:11 - process[7]: training epoch 3 ...
00:14:20 - process[7] - epoch 3 - train iter 187 - 17598.9 words/s - loss: 0.5959
00:14:20 - process[7]: training epoch 4 ...
00:14:31 - process[7] - epoch 4 - train iter 187 - 16703.5 words/s - loss: 0.5898
00:14:31 - process[7]: training epoch 5 ...
00:14:42 - process[7] - epoch 5 - train iter 187 - 15406.6 words/s - loss: 0.5634
00:14:42 - process[7]: training epoch 6 ...
00:14:52 - process[7] - epoch 6 - train iter 187 - 16244.6 words/s - loss: 0.5611
00:14:52 - process[7]: training epoch 7 ...
00:15:03 - process[7] - epoch 7 - train iter 187 - 16323.7 words/s - loss: 0.5098
00:15:03 - process[7]: training epoch 8 ...
00:15:13 - process[7] - epoch 8 - train iter 187 - 16619.5 words/s - loss: 0.5037
00:15:13 - process[7]: training epoch 9 ...
00:15:24 - process[7] - epoch 9 - train iter 187 - 15099.3 words/s - loss: 0.5053
00:15:24 - process[7]: training epoch 10 ...
00:15:34 - process[7] - epoch 10 - train iter 187 - 16580.4 words/s - loss: 0.4891
00:15:34 - process[7]: evaluating epoch 10 on dev ...
00:16:14 - dev set during evaluation: 14980/14975
00:16:14 - process[7] - dev - epoch 10 - mAP: 0.335 w/ 35 queries
00:16:14 - process[7]: evaluating epoch 10 on test ...
00:16:58 - test set during evaluation: 15300/15294
00:16:58 - process[7] - test - epoch 10 - mAP: 0.344 w/ 36 queries
00:16:58 - process[7]: training epoch 11 ...
00:17:06 - process[7] - epoch 11 - train iter 187 - 20316.5 words/s - loss: 0.5084
00:17:06 - process[7]: evaluating epoch 11 on dev ...
00:17:49 - dev set during evaluation: 14980/14975
00:17:49 - process[7] - dev - epoch 11 - mAP: 0.305 w/ 35 queries
00:17:49 - process[7]: training epoch 12 ...
00:17:58 - process[7] - epoch 12 - train iter 187 - 18908.4 words/s - loss: 0.4985
00:17:58 - process[7]: evaluating epoch 12 on dev ...
00:18:40 - dev set during evaluation: 14980/14975
00:18:40 - process[7] - dev - epoch 12 - mAP: 0.306 w/ 35 queries
00:18:40 - process[7]: training epoch 13 ...
00:18:51 - process[7] - epoch 13 - train iter 187 - 15928.5 words/s - loss: 0.5195
00:18:51 - process[7]: evaluating epoch 13 on dev ...
00:19:31 - dev set during evaluation: 14980/14975
00:19:31 - process[7] - dev - epoch 13 - mAP: 0.325 w/ 35 queries
00:19:31 - process[7]: training epoch 14 ...
00:19:41 - process[7] - epoch 14 - train iter 187 - 17846.0 words/s - loss: 0.4293
00:19:41 - process[7]: evaluating epoch 14 on dev ...
00:20:22 - dev set during evaluation: 14980/14975
00:20:22 - process[7] - dev - epoch 14 - mAP: 0.394 w/ 35 queries
00:20:23 - process[7]: evaluating epoch 14 on test ...
00:21:06 - test set during evaluation: 15300/15294
00:21:06 - process[7] - test - epoch 14 - mAP: 0.352 w/ 36 queries
00:21:06 - process[7]: training epoch 15 ...
00:21:18 - process[7] - epoch 15 - train iter 187 - 14187.5 words/s - loss: 0.4296
00:21:18 - process[7]: evaluating epoch 15 on dev ...
00:21:57 - dev set during evaluation: 14980/14975
00:21:57 - process[7] - dev - epoch 15 - mAP: 0.327 w/ 35 queries
00:21:57 - process[7]: training epoch 16 ...
00:22:08 - process[7] - epoch 16 - train iter 187 - 15298.4 words/s - loss: 0.4577
00:22:08 - process[7]: evaluating epoch 16 on dev ...
00:22:48 - dev set during evaluation: 14980/14975
00:22:48 - process[7] - dev - epoch 16 - mAP: 0.353 w/ 35 queries
00:22:48 - process[7]: training epoch 17 ...
00:23:00 - process[7] - epoch 17 - train iter 187 - 14634.6 words/s - loss: 0.4809
00:23:00 - process[7]: evaluating epoch 17 on dev ...
00:23:39 - dev set during evaluation: 14980/14975
00:23:39 - process[7] - dev - epoch 17 - mAP: 0.336 w/ 35 queries
00:23:39 - process[7]: training epoch 18 ...
00:23:49 - process[7] - epoch 18 - train iter 187 - 16887.8 words/s - loss: 0.4461
00:23:49 - process[7]: evaluating epoch 18 on dev ...
00:24:31 - dev set during evaluation: 14980/14975
00:24:31 - process[7] - dev - epoch 18 - mAP: 0.319 w/ 35 queries
00:24:31 - process[7]: training epoch 19 ...
00:24:40 - process[7] - epoch 19 - train iter 187 - 18107.5 words/s - loss: 0.4574
00:24:40 - process[7]: evaluating epoch 19 on dev ...
00:25:22 - dev set during evaluation: 14980/14975
00:25:22 - process[7] - dev - epoch 19 - mAP: 0.367 w/ 35 queries
00:25:22 - [fold 2] best test MAP: 0.352 @ epoch 14
00:25:22 - Evaluating every 1 epochs ...
00:25:22 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:23 - test has 35 queries ...
00:25:23 - Data reading done ...
00:25:24 - adding 9-th encoder to optimizer...
00:25:24 - adding 10-th encoder to optimizer...
00:25:24 - adding 11-th encoder to optimizer...
00:25:25 - process[7]: training epoch 0 ...
00:25:35 - process[7] - epoch 0 - train iter 196 - 18137.1 words/s - loss: 0.6902
00:25:35 - process[7]: training epoch 1 ...
00:25:46 - process[7] - epoch 1 - train iter 196 - 16334.9 words/s - loss: 0.6685
00:25:46 - process[7]: training epoch 2 ...
00:25:56 - process[7] - epoch 2 - train iter 196 - 17293.9 words/s - loss: 0.6256
00:25:56 - process[7]: training epoch 3 ...
00:26:06 - process[7] - epoch 3 - train iter 196 - 16933.5 words/s - loss: 0.6373
00:26:06 - process[7]: training epoch 4 ...
00:26:16 - process[7] - epoch 4 - train iter 196 - 18346.8 words/s - loss: 0.5624
00:26:16 - process[7]: training epoch 5 ...
00:26:26 - process[7] - epoch 5 - train iter 196 - 17846.3 words/s - loss: 0.5607
00:26:26 - process[7]: training epoch 6 ...
00:26:35 - process[7] - epoch 6 - train iter 196 - 17840.9 words/s - loss: 0.5170
00:26:35 - process[7]: training epoch 7 ...
00:26:44 - process[7] - epoch 7 - train iter 196 - 19229.8 words/s - loss: 0.5291
00:26:44 - process[7]: training epoch 8 ...
00:26:56 - process[7] - epoch 8 - train iter 196 - 15612.9 words/s - loss: 0.4842
00:26:56 - process[7]: training epoch 9 ...
00:27:06 - process[7] - epoch 9 - train iter 196 - 17814.8 words/s - loss: 0.4960
00:27:06 - process[7]: training epoch 10 ...
00:27:16 - process[7] - epoch 10 - train iter 196 - 17370.8 words/s - loss: 0.5243
00:27:16 - process[7]: evaluating epoch 10 on dev ...
00:28:05 - dev set during evaluation: 15300/15294
00:28:05 - process[7] - dev - epoch 10 - mAP: 0.324 w/ 36 queries
00:28:05 - process[7]: evaluating epoch 10 on test ...
00:28:48 - test set during evaluation: 15480/15477
00:28:48 - process[7] - test - epoch 10 - mAP: 0.285 w/ 35 queries
00:28:48 - process[7]: training epoch 11 ...
00:28:58 - process[7] - epoch 11 - train iter 196 - 16305.9 words/s - loss: 0.5204
00:28:58 - process[7]: evaluating epoch 11 on dev ...
00:29:41 - dev set during evaluation: 15300/15294
00:29:41 - process[7] - dev - epoch 11 - mAP: 0.317 w/ 36 queries
00:29:41 - process[7]: training epoch 12 ...
00:29:51 - process[7] - epoch 12 - train iter 196 - 17090.6 words/s - loss: 0.4712
00:29:51 - process[7]: evaluating epoch 12 on dev ...
00:30:33 - dev set during evaluation: 15300/15294
00:30:33 - process[7] - dev - epoch 12 - mAP: 0.308 w/ 36 queries
00:30:33 - process[7]: training epoch 13 ...
00:30:45 - process[7] - epoch 13 - train iter 196 - 16073.7 words/s - loss: 0.5050
00:30:45 - process[7]: evaluating epoch 13 on dev ...
00:31:27 - dev set during evaluation: 15300/15294
00:31:27 - process[7] - dev - epoch 13 - mAP: 0.358 w/ 36 queries
00:31:27 - process[7]: evaluating epoch 13 on test ...
00:32:09 - test set during evaluation: 15480/15477
00:32:09 - process[7] - test - epoch 13 - mAP: 0.334 w/ 35 queries
00:32:09 - process[7]: training epoch 14 ...
00:32:20 - process[7] - epoch 14 - train iter 196 - 15873.1 words/s - loss: 0.4820
00:32:20 - process[7]: evaluating epoch 14 on dev ...
00:33:02 - dev set during evaluation: 15300/15294
00:33:02 - process[7] - dev - epoch 14 - mAP: 0.349 w/ 36 queries
00:33:02 - process[7]: training epoch 15 ...
00:33:12 - process[7] - epoch 15 - train iter 196 - 17462.5 words/s - loss: 0.4872
00:33:12 - process[7]: evaluating epoch 15 on dev ...
00:33:55 - dev set during evaluation: 15300/15294
00:33:55 - process[7] - dev - epoch 15 - mAP: 0.353 w/ 36 queries
00:33:55 - process[7]: training epoch 16 ...
00:34:05 - process[7] - epoch 16 - train iter 196 - 17157.8 words/s - loss: 0.4930
00:34:05 - process[7]: evaluating epoch 16 on dev ...
00:34:47 - dev set during evaluation: 15300/15294
00:34:47 - process[7] - dev - epoch 16 - mAP: 0.394 w/ 36 queries
00:34:47 - process[7]: evaluating epoch 16 on test ...
00:35:29 - test set during evaluation: 15480/15477
00:35:29 - process[7] - test - epoch 16 - mAP: 0.308 w/ 35 queries
00:35:29 - process[7]: training epoch 17 ...
00:35:39 - process[7] - epoch 17 - train iter 196 - 17944.3 words/s - loss: 0.4036
00:35:39 - process[7]: evaluating epoch 17 on dev ...
00:36:22 - dev set during evaluation: 15300/15294
00:36:22 - process[7] - dev - epoch 17 - mAP: 0.386 w/ 36 queries
00:36:22 - process[7]: training epoch 18 ...
00:36:32 - process[7] - epoch 18 - train iter 196 - 18201.9 words/s - loss: 0.4756
00:36:32 - process[7]: evaluating epoch 18 on dev ...
00:37:15 - dev set during evaluation: 15300/15294
00:37:15 - process[7] - dev - epoch 18 - mAP: 0.358 w/ 36 queries
00:37:15 - process[7]: training epoch 19 ...
00:37:25 - process[7] - epoch 19 - train iter 196 - 17707.6 words/s - loss: 0.4447
00:37:25 - process[7]: evaluating epoch 19 on dev ...
00:38:08 - dev set during evaluation: 15300/15294
00:38:08 - process[7] - dev - epoch 19 - mAP: 0.354 w/ 36 queries
00:38:08 - [fold 3] best test MAP: 0.308 @ epoch 16
00:38:08 - Evaluating every 1 epochs ...
00:38:08 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:09 - test has 35 queries ...
00:38:09 - Data reading done ...
00:38:11 - adding 9-th encoder to optimizer...
00:38:11 - adding 10-th encoder to optimizer...
00:38:11 - adding 11-th encoder to optimizer...
00:38:11 - process[7]: training epoch 0 ...
00:38:22 - process[7] - epoch 0 - train iter 207 - 18133.0 words/s - loss: 0.6791
00:38:22 - process[7]: training epoch 1 ...
00:38:34 - process[7] - epoch 1 - train iter 207 - 15196.8 words/s - loss: 0.6507
00:38:34 - process[7]: training epoch 2 ...
00:38:46 - process[7] - epoch 2 - train iter 207 - 15811.7 words/s - loss: 0.6104
00:38:46 - process[7]: training epoch 3 ...
00:38:57 - process[7] - epoch 3 - train iter 207 - 16736.7 words/s - loss: 0.6018
00:38:57 - process[7]: training epoch 4 ...
00:39:09 - process[7] - epoch 4 - train iter 207 - 15808.8 words/s - loss: 0.5530
00:39:09 - process[7]: training epoch 5 ...
00:39:21 - process[7] - epoch 5 - train iter 207 - 16090.7 words/s - loss: 0.5306
00:39:21 - process[7]: training epoch 6 ...
00:39:32 - process[7] - epoch 6 - train iter 207 - 15814.1 words/s - loss: 0.5140
00:39:32 - process[7]: training epoch 7 ...
00:39:44 - process[7] - epoch 7 - train iter 207 - 16272.7 words/s - loss: 0.5158
00:39:44 - process[7]: training epoch 8 ...
00:39:55 - process[7] - epoch 8 - train iter 207 - 16497.5 words/s - loss: 0.5022
00:39:55 - process[7]: training epoch 9 ...
00:40:06 - process[7] - epoch 9 - train iter 207 - 17602.3 words/s - loss: 0.4813
00:40:06 - process[7]: training epoch 10 ...
00:40:17 - process[7] - epoch 10 - train iter 207 - 16871.9 words/s - loss: 0.4889
00:40:17 - process[7]: evaluating epoch 10 on dev ...
00:41:01 - dev set during evaluation: 15480/15477
00:41:01 - process[7] - dev - epoch 10 - mAP: 0.286 w/ 35 queries
00:41:01 - process[7]: evaluating epoch 10 on test ...
00:41:43 - test set during evaluation: 14470/14463
00:41:43 - process[7] - test - epoch 10 - mAP: 0.288 w/ 35 queries
00:41:43 - process[7]: training epoch 11 ...
00:41:55 - process[7] - epoch 11 - train iter 207 - 16471.1 words/s - loss: 0.4068
00:41:55 - process[7]: evaluating epoch 11 on dev ...
00:42:36 - dev set during evaluation: 15480/15477
00:42:36 - process[7] - dev - epoch 11 - mAP: 0.310 w/ 35 queries
00:42:36 - process[7]: evaluating epoch 11 on test ...
00:43:19 - test set during evaluation: 14470/14463
00:43:19 - process[7] - test - epoch 11 - mAP: 0.303 w/ 35 queries
00:43:19 - process[7]: training epoch 12 ...
00:43:30 - process[7] - epoch 12 - train iter 207 - 16275.3 words/s - loss: 0.4746
00:43:30 - process[7]: evaluating epoch 12 on dev ...
00:44:13 - dev set during evaluation: 15480/15477
00:44:13 - process[7] - dev - epoch 12 - mAP: 0.262 w/ 35 queries
00:44:13 - process[7]: training epoch 13 ...
00:44:25 - process[7] - epoch 13 - train iter 207 - 15870.5 words/s - loss: 0.4422
00:44:25 - process[7]: evaluating epoch 13 on dev ...
00:45:07 - dev set during evaluation: 15480/15477
00:45:07 - process[7] - dev - epoch 13 - mAP: 0.269 w/ 35 queries
00:45:07 - process[7]: training epoch 14 ...
00:45:18 - process[7] - epoch 14 - train iter 207 - 16108.3 words/s - loss: 0.4422
00:45:18 - process[7]: evaluating epoch 14 on dev ...
00:46:01 - dev set during evaluation: 15480/15477
00:46:01 - process[7] - dev - epoch 14 - mAP: 0.308 w/ 35 queries
00:46:01 - process[7]: training epoch 15 ...
00:46:11 - process[7] - epoch 15 - train iter 207 - 17792.7 words/s - loss: 0.4372
00:46:11 - process[7]: evaluating epoch 15 on dev ...
00:46:54 - dev set during evaluation: 15480/15477
00:46:54 - process[7] - dev - epoch 15 - mAP: 0.310 w/ 35 queries
00:46:54 - process[7]: training epoch 16 ...
00:47:05 - process[7] - epoch 16 - train iter 207 - 16294.0 words/s - loss: 0.4651
00:47:05 - process[7]: evaluating epoch 16 on dev ...
00:47:48 - dev set during evaluation: 15480/15477
00:47:48 - process[7] - dev - epoch 16 - mAP: 0.303 w/ 35 queries
00:47:48 - process[7]: training epoch 17 ...
00:47:59 - process[7] - epoch 17 - train iter 207 - 17241.8 words/s - loss: 0.4227
00:47:59 - process[7]: evaluating epoch 17 on dev ...
00:48:42 - dev set during evaluation: 15480/15477
00:48:42 - process[7] - dev - epoch 17 - mAP: 0.298 w/ 35 queries
00:48:42 - process[7]: training epoch 18 ...
00:48:53 - process[7] - epoch 18 - train iter 207 - 17924.4 words/s - loss: 0.4037
00:48:53 - process[7]: evaluating epoch 18 on dev ...
00:49:36 - dev set during evaluation: 15480/15477
00:49:36 - process[7] - dev - epoch 18 - mAP: 0.296 w/ 35 queries
00:49:36 - process[7]: training epoch 19 ...
00:49:48 - process[7] - epoch 19 - train iter 207 - 16029.0 words/s - loss: 0.4017
00:49:48 - process[7]: evaluating epoch 19 on dev ...
00:50:30 - dev set during evaluation: 15480/15477
00:50:30 - process[7] - dev - epoch 19 - mAP: 0.305 w/ 35 queries
00:50:30 - [fold 4] best test MAP: 0.303 @ epoch 11
00:50:30 - Evaluating every 1 epochs ...
00:50:30 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:31 - test has 35 queries ...
00:50:31 - Data reading done ...
00:50:33 - adding 9-th encoder to optimizer...
00:50:33 - adding 10-th encoder to optimizer...
00:50:33 - adding 11-th encoder to optimizer...
00:50:33 - process[7]: training epoch 0 ...
00:50:44 - process[7] - epoch 0 - train iter 195 - 16878.6 words/s - loss: 0.6816
00:50:44 - process[7]: training epoch 1 ...
00:50:54 - process[7] - epoch 1 - train iter 195 - 16250.2 words/s - loss: 0.6350
00:50:54 - process[7]: training epoch 2 ...
00:51:04 - process[7] - epoch 2 - train iter 195 - 17025.7 words/s - loss: 0.5992
00:51:04 - process[7]: training epoch 3 ...
00:51:16 - process[7] - epoch 3 - train iter 195 - 15640.5 words/s - loss: 0.6054
00:51:16 - process[7]: training epoch 4 ...
00:51:27 - process[7] - epoch 4 - train iter 195 - 16250.9 words/s - loss: 0.5632
00:51:27 - process[7]: training epoch 5 ...
00:51:37 - process[7] - epoch 5 - train iter 195 - 17345.9 words/s - loss: 0.5262
00:51:37 - process[7]: training epoch 6 ...
00:51:49 - process[7] - epoch 6 - train iter 195 - 14816.5 words/s - loss: 0.5029
00:51:49 - process[7]: training epoch 7 ...
00:52:00 - process[7] - epoch 7 - train iter 195 - 15804.2 words/s - loss: 0.5223
00:52:00 - process[7]: training epoch 8 ...
00:52:09 - process[7] - epoch 8 - train iter 195 - 17644.6 words/s - loss: 0.4639
00:52:09 - process[7]: training epoch 9 ...
00:52:21 - process[7] - epoch 9 - train iter 195 - 15002.9 words/s - loss: 0.5167
00:52:21 - process[7]: training epoch 10 ...
00:52:33 - process[7] - epoch 10 - train iter 195 - 14805.5 words/s - loss: 0.4694
00:52:33 - process[7]: evaluating epoch 10 on dev ...
00:53:16 - dev set during evaluation: 14470/14463
00:53:16 - process[7] - dev - epoch 10 - mAP: 0.254 w/ 35 queries
00:53:16 - process[7]: evaluating epoch 10 on test ...
00:54:02 - test set during evaluation: 14160/14157
00:54:02 - process[7] - test - epoch 10 - mAP: 0.337 w/ 35 queries
00:54:02 - process[7]: training epoch 11 ...
00:54:14 - process[7] - epoch 11 - train iter 195 - 14753.5 words/s - loss: 0.4399
00:54:14 - process[7]: evaluating epoch 11 on dev ...
00:54:57 - dev set during evaluation: 14470/14463
00:54:57 - process[7] - dev - epoch 11 - mAP: 0.274 w/ 35 queries
00:54:57 - process[7]: evaluating epoch 11 on test ...
00:55:42 - test set during evaluation: 14160/14157
00:55:42 - process[7] - test - epoch 11 - mAP: 0.382 w/ 35 queries
00:55:42 - process[7]: training epoch 12 ...
00:55:52 - process[7] - epoch 12 - train iter 195 - 17100.8 words/s - loss: 0.4177
00:55:52 - process[7]: evaluating epoch 12 on dev ...
00:56:35 - dev set during evaluation: 14470/14463
00:56:35 - process[7] - dev - epoch 12 - mAP: 0.292 w/ 35 queries
00:56:35 - process[7]: evaluating epoch 12 on test ...
00:57:20 - test set during evaluation: 14160/14157
00:57:20 - process[7] - test - epoch 12 - mAP: 0.352 w/ 35 queries
00:57:20 - process[7]: training epoch 13 ...
00:57:31 - process[7] - epoch 13 - train iter 195 - 17281.2 words/s - loss: 0.4275
00:57:31 - process[7]: evaluating epoch 13 on dev ...
00:58:14 - dev set during evaluation: 14470/14463
00:58:14 - process[7] - dev - epoch 13 - mAP: 0.262 w/ 35 queries
00:58:14 - process[7]: training epoch 14 ...
00:58:25 - process[7] - epoch 14 - train iter 195 - 15645.4 words/s - loss: 0.4520
00:58:25 - process[7]: evaluating epoch 14 on dev ...
00:59:07 - dev set during evaluation: 14470/14463
00:59:07 - process[7] - dev - epoch 14 - mAP: 0.288 w/ 35 queries
00:59:07 - process[7]: training epoch 15 ...
00:59:18 - process[7] - epoch 15 - train iter 195 - 15801.8 words/s - loss: 0.4546
00:59:18 - process[7]: evaluating epoch 15 on dev ...
01:00:00 - dev set during evaluation: 14470/14463
01:00:00 - process[7] - dev - epoch 15 - mAP: 0.313 w/ 35 queries
01:00:00 - process[7]: evaluating epoch 15 on test ...
01:00:46 - test set during evaluation: 14160/14157
01:00:46 - process[7] - test - epoch 15 - mAP: 0.381 w/ 35 queries
01:00:46 - process[7]: training epoch 16 ...
01:00:56 - process[7] - epoch 16 - train iter 195 - 16610.8 words/s - loss: 0.4480
01:00:56 - process[7]: evaluating epoch 16 on dev ...
01:01:39 - dev set during evaluation: 14470/14463
01:01:39 - process[7] - dev - epoch 16 - mAP: 0.297 w/ 35 queries
01:01:39 - process[7]: training epoch 17 ...
01:01:50 - process[7] - epoch 17 - train iter 195 - 16267.0 words/s - loss: 0.3809
01:01:50 - process[7]: evaluating epoch 17 on dev ...
01:02:33 - dev set during evaluation: 14470/14463
01:02:33 - process[7] - dev - epoch 17 - mAP: 0.318 w/ 35 queries
01:02:33 - process[7]: evaluating epoch 17 on test ...
01:03:18 - test set during evaluation: 14160/14157
01:03:18 - process[7] - test - epoch 17 - mAP: 0.343 w/ 35 queries
01:03:18 - process[7]: training epoch 18 ...
01:03:29 - process[7] - epoch 18 - train iter 195 - 16517.6 words/s - loss: 0.4467
01:03:29 - process[7]: evaluating epoch 18 on dev ...
01:04:11 - dev set during evaluation: 14470/14463
01:04:11 - process[7] - dev - epoch 18 - mAP: 0.291 w/ 35 queries
01:04:11 - process[7]: training epoch 19 ...
01:04:22 - process[7] - epoch 19 - train iter 195 - 15287.3 words/s - loss: 0.4459
01:04:22 - process[7]: evaluating epoch 19 on dev ...
01:05:04 - dev set during evaluation: 14470/14463
01:05:04 - process[7] - dev - epoch 19 - mAP: 0.286 w/ 35 queries
01:05:04 - [fold 5] best test MAP: 0.343 @ epoch 17
01:05:04 - [0.40805535947393345, 0.35240883355518604, 0.30773881994759245, 0.30283387129962264, 0.34257236843894184]
01:05:04 - [35, 36, 35, 35, 35]
01:05:04 - final MAP: 0.343
00:00:07 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=7, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='fr', target_lang='en')
00:00:20 - Evaluating every 1 epochs ...
00:00:20 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:21 - test has 35 queries ...
00:00:21 - Data reading done ...
00:00:28 - adding 9-th encoder to optimizer...
00:00:28 - adding 10-th encoder to optimizer...
00:00:28 - adding 11-th encoder to optimizer...
00:00:29 - process[7]: training epoch 0 ...
00:00:41 - process[7] - epoch 0 - train iter 197 - 14599.4 words/s - loss: 0.6739
00:00:42 - process[7]: training epoch 1 ...
00:00:53 - process[7] - epoch 1 - train iter 197 - 15499.9 words/s - loss: 0.6350
00:00:53 - process[7]: training epoch 2 ...
00:01:03 - process[7] - epoch 2 - train iter 197 - 17980.3 words/s - loss: 0.6505
00:01:03 - process[7]: training epoch 3 ...
00:01:14 - process[7] - epoch 3 - train iter 197 - 16463.7 words/s - loss: 0.5882
00:01:14 - process[7]: training epoch 4 ...
00:01:27 - process[7] - epoch 4 - train iter 197 - 13976.7 words/s - loss: 0.5845
00:01:27 - process[7]: training epoch 5 ...
00:01:39 - process[7] - epoch 5 - train iter 197 - 14789.1 words/s - loss: 0.6020
00:01:39 - process[7]: training epoch 6 ...
00:01:50 - process[7] - epoch 6 - train iter 197 - 16017.5 words/s - loss: 0.5463
00:01:50 - process[7]: training epoch 7 ...
00:02:02 - process[7] - epoch 7 - train iter 197 - 15277.1 words/s - loss: 0.5351
00:02:02 - process[7]: training epoch 8 ...
00:02:13 - process[7] - epoch 8 - train iter 197 - 15156.0 words/s - loss: 0.5612
00:02:13 - process[7]: training epoch 9 ...
00:02:24 - process[7] - epoch 9 - train iter 197 - 16181.2 words/s - loss: 0.5121
00:02:24 - process[7]: training epoch 10 ...
00:02:35 - process[7] - epoch 10 - train iter 197 - 17247.5 words/s - loss: 0.5107
00:02:35 - process[7]: evaluating epoch 10 on dev ...
00:03:19 - dev set during evaluation: 14160/14157
00:03:19 - process[7] - dev - epoch 10 - mAP: 0.360 w/ 35 queries
00:03:19 - process[7]: evaluating epoch 10 on test ...
00:04:00 - test set during evaluation: 14980/14975
00:04:00 - process[7] - test - epoch 10 - mAP: 0.327 w/ 35 queries
00:04:00 - process[7]: training epoch 11 ...
00:04:10 - process[7] - epoch 11 - train iter 197 - 17755.6 words/s - loss: 0.4850
00:04:10 - process[7]: evaluating epoch 11 on dev ...
00:05:03 - dev set during evaluation: 14160/14157
00:05:03 - process[7] - dev - epoch 11 - mAP: 0.355 w/ 35 queries
00:05:03 - process[7]: training epoch 12 ...
00:05:15 - process[7] - epoch 12 - train iter 197 - 14532.1 words/s - loss: 0.4718
00:05:15 - process[7]: evaluating epoch 12 on dev ...
00:05:57 - dev set during evaluation: 14160/14157
00:05:57 - process[7] - dev - epoch 12 - mAP: 0.393 w/ 35 queries
00:05:57 - process[7]: evaluating epoch 12 on test ...
00:06:38 - test set during evaluation: 14980/14975
00:06:38 - process[7] - test - epoch 12 - mAP: 0.373 w/ 35 queries
00:06:38 - process[7]: training epoch 13 ...
00:06:50 - process[7] - epoch 13 - train iter 197 - 14707.3 words/s - loss: 0.4728
00:06:50 - process[7]: evaluating epoch 13 on dev ...
00:07:34 - dev set during evaluation: 14160/14157
00:07:34 - process[7] - dev - epoch 13 - mAP: 0.381 w/ 35 queries
00:07:34 - process[7]: training epoch 14 ...
00:07:46 - process[7] - epoch 14 - train iter 197 - 15422.9 words/s - loss: 0.4677
00:07:46 - process[7]: evaluating epoch 14 on dev ...
00:08:29 - dev set during evaluation: 14160/14157
00:08:29 - process[7] - dev - epoch 14 - mAP: 0.408 w/ 35 queries
00:08:29 - process[7]: evaluating epoch 14 on test ...
00:09:11 - test set during evaluation: 14980/14975
00:09:11 - process[7] - test - epoch 14 - mAP: 0.408 w/ 35 queries
00:09:11 - process[7]: training epoch 15 ...
00:09:21 - process[7] - epoch 15 - train iter 197 - 17008.9 words/s - loss: 0.4325
00:09:21 - process[7]: evaluating epoch 15 on dev ...
00:10:06 - dev set during evaluation: 14160/14157
00:10:06 - process[7] - dev - epoch 15 - mAP: 0.370 w/ 35 queries
00:10:06 - process[7]: training epoch 16 ...
00:10:17 - process[7] - epoch 16 - train iter 197 - 15577.3 words/s - loss: 0.4933
00:10:17 - process[7]: evaluating epoch 16 on dev ...
00:11:01 - dev set during evaluation: 14160/14157
00:11:01 - process[7] - dev - epoch 16 - mAP: 0.375 w/ 35 queries
00:11:01 - process[7]: training epoch 17 ...
00:11:13 - process[7] - epoch 17 - train iter 197 - 14802.1 words/s - loss: 0.4485
00:11:13 - process[7]: evaluating epoch 17 on dev ...
00:11:57 - dev set during evaluation: 14160/14157
00:11:57 - process[7] - dev - epoch 17 - mAP: 0.391 w/ 35 queries
00:11:57 - process[7]: training epoch 18 ...
00:12:09 - process[7] - epoch 18 - train iter 197 - 15152.2 words/s - loss: 0.4255
00:12:09 - process[7]: evaluating epoch 18 on dev ...
00:12:52 - dev set during evaluation: 14160/14157
00:12:52 - process[7] - dev - epoch 18 - mAP: 0.365 w/ 35 queries
00:12:52 - process[7]: training epoch 19 ...
00:13:03 - process[7] - epoch 19 - train iter 197 - 16256.6 words/s - loss: 0.5166
00:13:03 - process[7]: evaluating epoch 19 on dev ...
00:13:48 - dev set during evaluation: 14160/14157
00:13:48 - process[7] - dev - epoch 19 - mAP: 0.374 w/ 35 queries
00:13:48 - [fold 1] best test MAP: 0.408 @ epoch 14
00:13:48 - Evaluating every 1 epochs ...
00:13:48 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:13:49 - test has 36 queries ...
00:13:49 - Data reading done ...
00:13:50 - adding 9-th encoder to optimizer...
00:13:50 - adding 10-th encoder to optimizer...
00:13:50 - adding 11-th encoder to optimizer...
00:13:51 - process[7]: training epoch 0 ...
00:14:00 - process[7] - epoch 0 - train iter 187 - 17375.7 words/s - loss: 0.6781
00:14:00 - process[7]: training epoch 1 ...
00:14:10 - process[7] - epoch 1 - train iter 187 - 17118.9 words/s - loss: 0.6734
00:14:10 - process[7]: training epoch 2 ...
00:14:21 - process[7] - epoch 2 - train iter 187 - 15721.0 words/s - loss: 0.6208
00:14:21 - process[7]: training epoch 3 ...
00:14:31 - process[7] - epoch 3 - train iter 187 - 17566.5 words/s - loss: 0.5959
00:14:31 - process[7]: training epoch 4 ...
00:14:41 - process[7] - epoch 4 - train iter 187 - 16626.8 words/s - loss: 0.5898
00:14:41 - process[7]: training epoch 5 ...
00:14:52 - process[7] - epoch 5 - train iter 187 - 15310.3 words/s - loss: 0.5634
00:14:52 - process[7]: training epoch 6 ...
00:15:02 - process[7] - epoch 6 - train iter 187 - 16165.8 words/s - loss: 0.5611
00:15:02 - process[7]: training epoch 7 ...
00:15:13 - process[7] - epoch 7 - train iter 187 - 16205.4 words/s - loss: 0.5098
00:15:13 - process[7]: training epoch 8 ...
00:15:23 - process[7] - epoch 8 - train iter 187 - 16510.1 words/s - loss: 0.5037
00:15:23 - process[7]: training epoch 9 ...
00:15:35 - process[7] - epoch 9 - train iter 187 - 15009.0 words/s - loss: 0.5053
00:15:35 - process[7]: training epoch 10 ...
00:15:45 - process[7] - epoch 10 - train iter 187 - 16572.5 words/s - loss: 0.4891
00:15:45 - process[7]: evaluating epoch 10 on dev ...
00:16:25 - dev set during evaluation: 14980/14975
00:16:25 - process[7] - dev - epoch 10 - mAP: 0.335 w/ 35 queries
00:16:25 - process[7]: evaluating epoch 10 on test ...
00:17:08 - test set during evaluation: 15300/15294
00:17:08 - process[7] - test - epoch 10 - mAP: 0.344 w/ 36 queries
00:17:08 - process[7]: training epoch 11 ...
00:17:16 - process[7] - epoch 11 - train iter 187 - 20378.2 words/s - loss: 0.5084
00:17:16 - process[7]: evaluating epoch 11 on dev ...
00:17:58 - dev set during evaluation: 14980/14975
00:17:58 - process[7] - dev - epoch 11 - mAP: 0.305 w/ 35 queries
00:17:58 - process[7]: training epoch 12 ...
00:18:07 - process[7] - epoch 12 - train iter 187 - 19130.9 words/s - loss: 0.4985
00:18:07 - process[7]: evaluating epoch 12 on dev ...
00:18:49 - dev set during evaluation: 14980/14975
00:18:49 - process[7] - dev - epoch 12 - mAP: 0.306 w/ 35 queries
00:18:49 - process[7]: training epoch 13 ...
00:19:01 - process[7] - epoch 13 - train iter 187 - 15832.3 words/s - loss: 0.5195
00:19:01 - process[7]: evaluating epoch 13 on dev ...
00:19:42 - dev set during evaluation: 14980/14975
00:19:42 - process[7] - dev - epoch 13 - mAP: 0.325 w/ 35 queries
00:19:42 - process[7]: training epoch 14 ...
00:19:51 - process[7] - epoch 14 - train iter 187 - 17866.1 words/s - loss: 0.4293
00:19:51 - process[7]: evaluating epoch 14 on dev ...
00:20:33 - dev set during evaluation: 14980/14975
00:20:33 - process[7] - dev - epoch 14 - mAP: 0.394 w/ 35 queries
00:20:33 - process[7]: evaluating epoch 14 on test ...
00:21:16 - test set during evaluation: 15300/15294
00:21:16 - process[7] - test - epoch 14 - mAP: 0.352 w/ 36 queries
00:21:16 - process[7]: training epoch 15 ...
00:21:28 - process[7] - epoch 15 - train iter 187 - 14085.6 words/s - loss: 0.4296
00:21:28 - process[7]: evaluating epoch 15 on dev ...
00:22:07 - dev set during evaluation: 14980/14975
00:22:07 - process[7] - dev - epoch 15 - mAP: 0.327 w/ 35 queries
00:22:07 - process[7]: training epoch 16 ...
00:22:19 - process[7] - epoch 16 - train iter 187 - 15284.8 words/s - loss: 0.4577
00:22:19 - process[7]: evaluating epoch 16 on dev ...
00:22:58 - dev set during evaluation: 14980/14975
00:22:58 - process[7] - dev - epoch 16 - mAP: 0.353 w/ 35 queries
00:22:58 - process[7]: training epoch 17 ...
00:23:10 - process[7] - epoch 17 - train iter 187 - 14667.0 words/s - loss: 0.4809
00:23:10 - process[7]: evaluating epoch 17 on dev ...
00:23:49 - dev set during evaluation: 14980/14975
00:23:49 - process[7] - dev - epoch 17 - mAP: 0.336 w/ 35 queries
00:23:49 - process[7]: training epoch 18 ...
00:23:59 - process[7] - epoch 18 - train iter 187 - 16942.3 words/s - loss: 0.4461
00:23:59 - process[7]: evaluating epoch 18 on dev ...
00:24:40 - dev set during evaluation: 14980/14975
00:24:40 - process[7] - dev - epoch 18 - mAP: 0.319 w/ 35 queries
00:24:41 - process[7]: training epoch 19 ...
00:24:50 - process[7] - epoch 19 - train iter 187 - 18151.9 words/s - loss: 0.4574
00:24:50 - process[7]: evaluating epoch 19 on dev ...
00:25:32 - dev set during evaluation: 14980/14975
00:25:32 - process[7] - dev - epoch 19 - mAP: 0.367 w/ 35 queries
00:25:32 - [fold 2] best test MAP: 0.352 @ epoch 14
00:25:32 - Evaluating every 1 epochs ...
00:25:32 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:33 - test has 35 queries ...
00:25:33 - Data reading done ...
00:25:34 - adding 9-th encoder to optimizer...
00:25:34 - adding 10-th encoder to optimizer...
00:25:34 - adding 11-th encoder to optimizer...
00:25:35 - process[7]: training epoch 0 ...
00:25:45 - process[7] - epoch 0 - train iter 196 - 18125.7 words/s - loss: 0.6902
00:25:45 - process[7]: training epoch 1 ...
00:25:56 - process[7] - epoch 1 - train iter 196 - 16275.2 words/s - loss: 0.6685
00:25:56 - process[7]: training epoch 2 ...
00:26:06 - process[7] - epoch 2 - train iter 196 - 17282.2 words/s - loss: 0.6256
00:26:06 - process[7]: training epoch 3 ...
00:26:16 - process[7] - epoch 3 - train iter 196 - 16873.1 words/s - loss: 0.6373
00:26:16 - process[7]: training epoch 4 ...
00:26:26 - process[7] - epoch 4 - train iter 196 - 18383.9 words/s - loss: 0.5624
00:26:26 - process[7]: training epoch 5 ...
00:26:36 - process[7] - epoch 5 - train iter 196 - 17813.1 words/s - loss: 0.5607
00:26:36 - process[7]: training epoch 6 ...
00:26:45 - process[7] - epoch 6 - train iter 196 - 17834.8 words/s - loss: 0.5170
00:26:45 - process[7]: training epoch 7 ...
00:26:54 - process[7] - epoch 7 - train iter 196 - 19255.2 words/s - loss: 0.5291
00:26:54 - process[7]: training epoch 8 ...
00:27:06 - process[7] - epoch 8 - train iter 196 - 15540.9 words/s - loss: 0.4842
00:27:06 - process[7]: training epoch 9 ...
00:27:16 - process[7] - epoch 9 - train iter 196 - 17827.2 words/s - loss: 0.4960
00:27:16 - process[7]: training epoch 10 ...
00:27:26 - process[7] - epoch 10 - train iter 196 - 17342.1 words/s - loss: 0.5243
00:27:26 - process[7]: evaluating epoch 10 on dev ...
00:28:14 - dev set during evaluation: 15300/15294
00:28:14 - process[7] - dev - epoch 10 - mAP: 0.324 w/ 36 queries
00:28:14 - process[7]: evaluating epoch 10 on test ...
00:28:57 - test set during evaluation: 15480/15477
00:28:57 - process[7] - test - epoch 10 - mAP: 0.285 w/ 35 queries
00:28:57 - process[7]: training epoch 11 ...
00:29:07 - process[7] - epoch 11 - train iter 196 - 16264.3 words/s - loss: 0.5204
00:29:07 - process[7]: evaluating epoch 11 on dev ...
00:29:52 - dev set during evaluation: 15300/15294
00:29:52 - process[7] - dev - epoch 11 - mAP: 0.317 w/ 36 queries
00:29:52 - process[7]: training epoch 12 ...
00:30:02 - process[7] - epoch 12 - train iter 196 - 17072.6 words/s - loss: 0.4712
00:30:02 - process[7]: evaluating epoch 12 on dev ...
00:30:45 - dev set during evaluation: 15300/15294
00:30:45 - process[7] - dev - epoch 12 - mAP: 0.308 w/ 36 queries
00:30:45 - process[7]: training epoch 13 ...
00:30:56 - process[7] - epoch 13 - train iter 196 - 16183.1 words/s - loss: 0.5050
00:30:56 - process[7]: evaluating epoch 13 on dev ...
00:31:38 - dev set during evaluation: 15300/15294
00:31:38 - process[7] - dev - epoch 13 - mAP: 0.358 w/ 36 queries
00:31:38 - process[7]: evaluating epoch 13 on test ...
00:32:20 - test set during evaluation: 15480/15477
00:32:20 - process[7] - test - epoch 13 - mAP: 0.334 w/ 35 queries
00:32:20 - process[7]: training epoch 14 ...
00:32:32 - process[7] - epoch 14 - train iter 196 - 15748.3 words/s - loss: 0.4820
00:32:32 - process[7]: evaluating epoch 14 on dev ...
00:33:14 - dev set during evaluation: 15300/15294
00:33:14 - process[7] - dev - epoch 14 - mAP: 0.349 w/ 36 queries
00:33:14 - process[7]: training epoch 15 ...
00:33:24 - process[7] - epoch 15 - train iter 196 - 17503.2 words/s - loss: 0.4872
00:33:24 - process[7]: evaluating epoch 15 on dev ...
00:34:08 - dev set during evaluation: 15300/15294
00:34:08 - process[7] - dev - epoch 15 - mAP: 0.353 w/ 36 queries
00:34:08 - process[7]: training epoch 16 ...
00:34:18 - process[7] - epoch 16 - train iter 196 - 17119.1 words/s - loss: 0.4930
00:34:18 - process[7]: evaluating epoch 16 on dev ...
00:35:01 - dev set during evaluation: 15300/15294
00:35:01 - process[7] - dev - epoch 16 - mAP: 0.394 w/ 36 queries
00:35:01 - process[7]: evaluating epoch 16 on test ...
00:35:43 - test set during evaluation: 15480/15477
00:35:43 - process[7] - test - epoch 16 - mAP: 0.308 w/ 35 queries
00:35:43 - process[7]: training epoch 17 ...
00:35:53 - process[7] - epoch 17 - train iter 196 - 17954.3 words/s - loss: 0.4036
00:35:53 - process[7]: evaluating epoch 17 on dev ...
00:36:36 - dev set during evaluation: 15300/15294
00:36:36 - process[7] - dev - epoch 17 - mAP: 0.386 w/ 36 queries
00:36:36 - process[7]: training epoch 18 ...
00:36:46 - process[7] - epoch 18 - train iter 196 - 18144.2 words/s - loss: 0.4756
00:36:46 - process[7]: evaluating epoch 18 on dev ...
00:37:29 - dev set during evaluation: 15300/15294
00:37:29 - process[7] - dev - epoch 18 - mAP: 0.358 w/ 36 queries
00:37:29 - process[7]: training epoch 19 ...
00:37:39 - process[7] - epoch 19 - train iter 196 - 17807.8 words/s - loss: 0.4447
00:37:39 - process[7]: evaluating epoch 19 on dev ...
00:38:22 - dev set during evaluation: 15300/15294
00:38:22 - process[7] - dev - epoch 19 - mAP: 0.354 w/ 36 queries
00:38:22 - [fold 3] best test MAP: 0.308 @ epoch 16
00:38:22 - Evaluating every 1 epochs ...
00:38:22 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:23 - test has 35 queries ...
00:38:23 - Data reading done ...
00:38:24 - adding 9-th encoder to optimizer...
00:38:24 - adding 10-th encoder to optimizer...
00:38:24 - adding 11-th encoder to optimizer...
00:38:25 - process[7]: training epoch 0 ...
00:38:35 - process[7] - epoch 0 - train iter 207 - 18176.3 words/s - loss: 0.6791
00:38:35 - process[7]: training epoch 1 ...
00:38:47 - process[7] - epoch 1 - train iter 207 - 15217.4 words/s - loss: 0.6507
00:38:47 - process[7]: training epoch 2 ...
00:38:59 - process[7] - epoch 2 - train iter 207 - 15834.8 words/s - loss: 0.6104
00:38:59 - process[7]: training epoch 3 ...
00:39:10 - process[7] - epoch 3 - train iter 207 - 16691.1 words/s - loss: 0.6018
00:39:10 - process[7]: training epoch 4 ...
00:39:22 - process[7] - epoch 4 - train iter 207 - 15800.3 words/s - loss: 0.5530
00:39:22 - process[7]: training epoch 5 ...
00:39:34 - process[7] - epoch 5 - train iter 207 - 16046.5 words/s - loss: 0.5306
00:39:34 - process[7]: training epoch 6 ...
00:39:46 - process[7] - epoch 6 - train iter 207 - 15769.3 words/s - loss: 0.5140
00:39:46 - process[7]: training epoch 7 ...
00:39:57 - process[7] - epoch 7 - train iter 207 - 16241.9 words/s - loss: 0.5158
00:39:57 - process[7]: training epoch 8 ...
00:40:08 - process[7] - epoch 8 - train iter 207 - 16402.3 words/s - loss: 0.5022
00:40:08 - process[7]: training epoch 9 ...
00:40:19 - process[7] - epoch 9 - train iter 207 - 17556.1 words/s - loss: 0.4813
00:40:19 - process[7]: training epoch 10 ...
00:40:30 - process[7] - epoch 10 - train iter 207 - 16818.3 words/s - loss: 0.4889
00:40:30 - process[7]: evaluating epoch 10 on dev ...
00:41:12 - dev set during evaluation: 15480/15477
00:41:12 - process[7] - dev - epoch 10 - mAP: 0.286 w/ 35 queries
00:41:12 - process[7]: evaluating epoch 10 on test ...
00:41:55 - test set during evaluation: 14470/14463
00:41:55 - process[7] - test - epoch 10 - mAP: 0.288 w/ 35 queries
00:41:55 - process[7]: training epoch 11 ...
00:42:06 - process[7] - epoch 11 - train iter 207 - 16423.2 words/s - loss: 0.4068
00:42:06 - process[7]: evaluating epoch 11 on dev ...
00:42:47 - dev set during evaluation: 15480/15477
00:42:47 - process[7] - dev - epoch 11 - mAP: 0.310 w/ 35 queries
00:42:47 - process[7]: evaluating epoch 11 on test ...
00:43:29 - test set during evaluation: 14470/14463
00:43:29 - process[7] - test - epoch 11 - mAP: 0.303 w/ 35 queries
00:43:29 - process[7]: training epoch 12 ...
00:43:41 - process[7] - epoch 12 - train iter 207 - 16337.6 words/s - loss: 0.4746
00:43:41 - process[7]: evaluating epoch 12 on dev ...
00:44:22 - dev set during evaluation: 15480/15477
00:44:22 - process[7] - dev - epoch 12 - mAP: 0.262 w/ 35 queries
00:44:22 - process[7]: training epoch 13 ...
00:44:34 - process[7] - epoch 13 - train iter 207 - 15758.0 words/s - loss: 0.4422
00:44:34 - process[7]: evaluating epoch 13 on dev ...
00:45:15 - dev set during evaluation: 15480/15477
00:45:15 - process[7] - dev - epoch 13 - mAP: 0.269 w/ 35 queries
00:45:15 - process[7]: training epoch 14 ...
00:45:27 - process[7] - epoch 14 - train iter 207 - 16048.5 words/s - loss: 0.4422
00:45:27 - process[7]: evaluating epoch 14 on dev ...
00:46:09 - dev set during evaluation: 15480/15477
00:46:09 - process[7] - dev - epoch 14 - mAP: 0.308 w/ 35 queries
00:46:09 - process[7]: training epoch 15 ...
00:46:19 - process[7] - epoch 15 - train iter 207 - 17699.7 words/s - loss: 0.4372
00:46:19 - process[7]: evaluating epoch 15 on dev ...
00:47:01 - dev set during evaluation: 15480/15477
00:47:01 - process[7] - dev - epoch 15 - mAP: 0.310 w/ 35 queries
00:47:01 - process[7]: training epoch 16 ...
00:47:12 - process[7] - epoch 16 - train iter 207 - 16206.7 words/s - loss: 0.4651
00:47:12 - process[7]: evaluating epoch 16 on dev ...
00:47:54 - dev set during evaluation: 15480/15477
00:47:54 - process[7] - dev - epoch 16 - mAP: 0.303 w/ 35 queries
00:47:54 - process[7]: training epoch 17 ...
00:48:06 - process[7] - epoch 17 - train iter 207 - 17223.9 words/s - loss: 0.4227
00:48:06 - process[7]: evaluating epoch 17 on dev ...
00:48:49 - dev set during evaluation: 15480/15477
00:48:49 - process[7] - dev - epoch 17 - mAP: 0.298 w/ 35 queries
00:48:49 - process[7]: training epoch 18 ...
00:48:59 - process[7] - epoch 18 - train iter 207 - 18017.8 words/s - loss: 0.4037
00:48:59 - process[7]: evaluating epoch 18 on dev ...
00:49:42 - dev set during evaluation: 15480/15477
00:49:42 - process[7] - dev - epoch 18 - mAP: 0.296 w/ 35 queries
00:49:42 - process[7]: training epoch 19 ...
00:49:54 - process[7] - epoch 19 - train iter 207 - 16050.6 words/s - loss: 0.4017
00:49:54 - process[7]: evaluating epoch 19 on dev ...
00:50:35 - dev set during evaluation: 15480/15477
00:50:35 - process[7] - dev - epoch 19 - mAP: 0.305 w/ 35 queries
00:50:35 - [fold 4] best test MAP: 0.303 @ epoch 11
00:50:35 - Evaluating every 1 epochs ...
00:50:35 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:36 - test has 35 queries ...
00:50:36 - Data reading done ...
00:50:37 - adding 9-th encoder to optimizer...
00:50:37 - adding 10-th encoder to optimizer...
00:50:37 - adding 11-th encoder to optimizer...
00:50:38 - process[7]: training epoch 0 ...
00:50:48 - process[7] - epoch 0 - train iter 195 - 16838.6 words/s - loss: 0.6816
00:50:48 - process[7]: training epoch 1 ...
00:50:59 - process[7] - epoch 1 - train iter 195 - 16212.1 words/s - loss: 0.6350
00:50:59 - process[7]: training epoch 2 ...
00:51:09 - process[7] - epoch 2 - train iter 195 - 17015.6 words/s - loss: 0.5992
00:51:09 - process[7]: training epoch 3 ...
00:51:20 - process[7] - epoch 3 - train iter 195 - 15546.4 words/s - loss: 0.6054
00:51:20 - process[7]: training epoch 4 ...
00:51:31 - process[7] - epoch 4 - train iter 195 - 16188.2 words/s - loss: 0.5632
00:51:31 - process[7]: training epoch 5 ...
00:51:42 - process[7] - epoch 5 - train iter 195 - 17341.9 words/s - loss: 0.5262
00:51:42 - process[7]: training epoch 6 ...
00:51:53 - process[7] - epoch 6 - train iter 195 - 14923.8 words/s - loss: 0.5029
00:51:53 - process[7]: training epoch 7 ...
00:52:04 - process[7] - epoch 7 - train iter 195 - 15926.6 words/s - loss: 0.5223
00:52:04 - process[7]: training epoch 8 ...
00:52:14 - process[7] - epoch 8 - train iter 195 - 17654.6 words/s - loss: 0.4639
00:52:14 - process[7]: training epoch 9 ...
00:52:26 - process[7] - epoch 9 - train iter 195 - 14993.2 words/s - loss: 0.5167
00:52:26 - process[7]: training epoch 10 ...
00:52:37 - process[7] - epoch 10 - train iter 195 - 14793.7 words/s - loss: 0.4694
00:52:37 - process[7]: evaluating epoch 10 on dev ...
00:53:22 - dev set during evaluation: 14470/14463
00:53:22 - process[7] - dev - epoch 10 - mAP: 0.254 w/ 35 queries
00:53:22 - process[7]: evaluating epoch 10 on test ...
00:54:07 - test set during evaluation: 14160/14157
00:54:07 - process[7] - test - epoch 10 - mAP: 0.337 w/ 35 queries
00:54:07 - process[7]: training epoch 11 ...
00:54:19 - process[7] - epoch 11 - train iter 195 - 14671.8 words/s - loss: 0.4399
00:54:19 - process[7]: evaluating epoch 11 on dev ...
00:55:02 - dev set during evaluation: 14470/14463
00:55:02 - process[7] - dev - epoch 11 - mAP: 0.274 w/ 35 queries
00:55:02 - process[7]: evaluating epoch 11 on test ...
00:55:47 - test set during evaluation: 14160/14157
00:55:47 - process[7] - test - epoch 11 - mAP: 0.382 w/ 35 queries
00:55:47 - process[7]: training epoch 12 ...
00:55:57 - process[7] - epoch 12 - train iter 195 - 17073.5 words/s - loss: 0.4177
00:55:57 - process[7]: evaluating epoch 12 on dev ...
00:56:39 - dev set during evaluation: 14470/14463
00:56:39 - process[7] - dev - epoch 12 - mAP: 0.292 w/ 35 queries
00:56:39 - process[7]: evaluating epoch 12 on test ...
00:57:24 - test set during evaluation: 14160/14157
00:57:24 - process[7] - test - epoch 12 - mAP: 0.352 w/ 35 queries
00:57:24 - process[7]: training epoch 13 ...
00:57:34 - process[7] - epoch 13 - train iter 195 - 17347.9 words/s - loss: 0.4275
00:57:34 - process[7]: evaluating epoch 13 on dev ...
00:58:17 - dev set during evaluation: 14470/14463
00:58:17 - process[7] - dev - epoch 13 - mAP: 0.262 w/ 35 queries
00:58:17 - process[7]: training epoch 14 ...
00:58:28 - process[7] - epoch 14 - train iter 195 - 15718.3 words/s - loss: 0.4520
00:58:28 - process[7]: evaluating epoch 14 on dev ...
00:59:11 - dev set during evaluation: 14470/14463
00:59:11 - process[7] - dev - epoch 14 - mAP: 0.288 w/ 35 queries
00:59:11 - process[7]: training epoch 15 ...
00:59:22 - process[7] - epoch 15 - train iter 195 - 15795.9 words/s - loss: 0.4546
00:59:22 - process[7]: evaluating epoch 15 on dev ...
01:00:03 - dev set during evaluation: 14470/14463
01:00:03 - process[7] - dev - epoch 15 - mAP: 0.313 w/ 35 queries
01:00:03 - process[7]: evaluating epoch 15 on test ...
01:00:48 - test set during evaluation: 14160/14157
01:00:48 - process[7] - test - epoch 15 - mAP: 0.381 w/ 35 queries
01:00:48 - process[7]: training epoch 16 ...
01:00:59 - process[7] - epoch 16 - train iter 195 - 16600.7 words/s - loss: 0.4480
01:00:59 - process[7]: evaluating epoch 16 on dev ...
01:01:42 - dev set during evaluation: 14470/14463
01:01:42 - process[7] - dev - epoch 16 - mAP: 0.297 w/ 35 queries
01:01:42 - process[7]: training epoch 17 ...
01:01:53 - process[7] - epoch 17 - train iter 195 - 16232.9 words/s - loss: 0.3809
01:01:53 - process[7]: evaluating epoch 17 on dev ...
01:02:35 - dev set during evaluation: 14470/14463
01:02:35 - process[7] - dev - epoch 17 - mAP: 0.318 w/ 35 queries
01:02:35 - process[7]: evaluating epoch 17 on test ...
01:03:20 - test set during evaluation: 14160/14157
01:03:20 - process[7] - test - epoch 17 - mAP: 0.343 w/ 35 queries
01:03:20 - process[7]: training epoch 18 ...
01:03:31 - process[7] - epoch 18 - train iter 195 - 16421.7 words/s - loss: 0.4467
01:03:31 - process[7]: evaluating epoch 18 on dev ...
01:04:13 - dev set during evaluation: 14470/14463
01:04:13 - process[7] - dev - epoch 18 - mAP: 0.291 w/ 35 queries
01:04:13 - process[7]: training epoch 19 ...
01:04:25 - process[7] - epoch 19 - train iter 195 - 15304.1 words/s - loss: 0.4459
01:04:25 - process[7]: evaluating epoch 19 on dev ...
01:05:06 - dev set during evaluation: 14470/14463
01:05:06 - process[7] - dev - epoch 19 - mAP: 0.286 w/ 35 queries
01:05:06 - [fold 5] best test MAP: 0.343 @ epoch 17
01:05:06 - [0.40805535947393345, 0.35240883355518604, 0.30773881994759245, 0.30283387129962264, 0.34257236843894184]
01:05:06 - [35, 36, 35, 35, 35]
01:05:06 - final MAP: 0.343
