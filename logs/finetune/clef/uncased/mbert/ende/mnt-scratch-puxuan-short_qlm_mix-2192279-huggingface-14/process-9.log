00:00:04 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=9, model_path='/mnt/scratch/puxuan/short_qlm_mix/2192279/huggingface-14', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='de')
00:00:22 - Evaluating every 1 epochs ...
00:00:22 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:23 - test has 38 queries ...
00:00:23 - Data reading done ...
00:00:30 - adding 9-th encoder to optimizer...
00:00:30 - adding 10-th encoder to optimizer...
00:00:30 - adding 11-th encoder to optimizer...
00:00:31 - process[9]: training epoch 0 ...
00:00:48 - process[9] - epoch 0 - train iter 423 - 19084.9 words/s - loss: 0.6330
00:00:48 - process[9]: training epoch 1 ...
00:01:04 - process[9] - epoch 1 - train iter 423 - 20846.4 words/s - loss: 0.5303
00:01:04 - process[9]: training epoch 2 ...
00:01:20 - process[9] - epoch 2 - train iter 423 - 20837.3 words/s - loss: 0.5068
00:01:20 - process[9]: training epoch 3 ...
00:01:36 - process[9] - epoch 3 - train iter 423 - 21582.9 words/s - loss: 0.5056
00:01:36 - process[9]: training epoch 4 ...
00:01:52 - process[9] - epoch 4 - train iter 423 - 20436.7 words/s - loss: 0.4753
00:01:52 - process[9]: training epoch 5 ...
00:02:09 - process[9] - epoch 5 - train iter 423 - 19720.6 words/s - loss: 0.4439
00:02:09 - process[9]: training epoch 6 ...
00:02:25 - process[9] - epoch 6 - train iter 423 - 20494.4 words/s - loss: 0.4511
00:02:25 - process[9]: training epoch 7 ...
00:02:41 - process[9] - epoch 7 - train iter 423 - 20778.8 words/s - loss: 0.4531
00:02:41 - process[9]: training epoch 8 ...
00:02:57 - process[9] - epoch 8 - train iter 423 - 20568.2 words/s - loss: 0.4225
00:02:57 - process[9]: training epoch 9 ...
00:03:14 - process[9] - epoch 9 - train iter 423 - 20607.3 words/s - loss: 0.4259
00:03:14 - process[9]: training epoch 10 ...
00:03:29 - process[9] - epoch 10 - train iter 423 - 21361.9 words/s - loss: 0.4083
00:03:29 - process[9]: evaluating epoch 10 on dev ...
00:04:04 - dev set during evaluation: 13890/13887
00:04:04 - process[9] - dev - epoch 10 - mAP: 0.489 w/ 38 queries
00:04:04 - process[9]: evaluating epoch 10 on test ...
00:04:34 - test set during evaluation: 15580/15574
00:04:34 - process[9] - test - epoch 10 - mAP: 0.412 w/ 38 queries
00:04:34 - process[9]: training epoch 11 ...
00:04:51 - process[9] - epoch 11 - train iter 423 - 20487.3 words/s - loss: 0.4183
00:04:51 - process[9]: evaluating epoch 11 on dev ...
00:05:19 - dev set during evaluation: 13890/13887
00:05:19 - process[9] - dev - epoch 11 - mAP: 0.459 w/ 38 queries
00:05:19 - process[9]: training epoch 12 ...
00:05:37 - process[9] - epoch 12 - train iter 423 - 18634.4 words/s - loss: 0.4310
00:05:37 - process[9]: evaluating epoch 12 on dev ...
00:06:05 - dev set during evaluation: 13890/13887
00:06:05 - process[9] - dev - epoch 12 - mAP: 0.481 w/ 38 queries
00:06:05 - process[9]: training epoch 13 ...
00:06:22 - process[9] - epoch 13 - train iter 423 - 20787.3 words/s - loss: 0.3812
00:06:22 - process[9]: evaluating epoch 13 on dev ...
00:06:51 - dev set during evaluation: 13890/13887
00:06:51 - process[9] - dev - epoch 13 - mAP: 0.467 w/ 38 queries
00:06:51 - process[9]: training epoch 14 ...
00:07:06 - process[9] - epoch 14 - train iter 423 - 21597.8 words/s - loss: 0.4059
00:07:06 - process[9]: evaluating epoch 14 on dev ...
00:07:36 - dev set during evaluation: 13890/13887
00:07:36 - process[9] - dev - epoch 14 - mAP: 0.474 w/ 38 queries
00:07:36 - process[9]: training epoch 15 ...
00:07:53 - process[9] - epoch 15 - train iter 423 - 20132.9 words/s - loss: 0.3843
00:07:53 - process[9]: evaluating epoch 15 on dev ...
00:08:22 - dev set during evaluation: 13890/13887
00:08:22 - process[9] - dev - epoch 15 - mAP: 0.475 w/ 38 queries
00:08:22 - process[9]: training epoch 16 ...
00:08:39 - process[9] - epoch 16 - train iter 423 - 19760.4 words/s - loss: 0.4039
00:08:39 - process[9]: evaluating epoch 16 on dev ...
00:09:07 - dev set during evaluation: 13890/13887
00:09:07 - process[9] - dev - epoch 16 - mAP: 0.485 w/ 38 queries
00:09:07 - process[9]: training epoch 17 ...
00:09:23 - process[9] - epoch 17 - train iter 423 - 20089.2 words/s - loss: 0.3915
00:09:23 - process[9]: evaluating epoch 17 on dev ...
00:09:52 - dev set during evaluation: 13890/13887
00:09:52 - process[9] - dev - epoch 17 - mAP: 0.468 w/ 38 queries
00:09:52 - process[9]: training epoch 18 ...
00:10:09 - process[9] - epoch 18 - train iter 423 - 19771.6 words/s - loss: 0.4012
00:10:09 - process[9]: evaluating epoch 18 on dev ...
00:10:38 - dev set during evaluation: 13890/13887
00:10:38 - process[9] - dev - epoch 18 - mAP: 0.477 w/ 38 queries
00:10:38 - process[9]: training epoch 19 ...
00:10:54 - process[9] - epoch 19 - train iter 423 - 20641.8 words/s - loss: 0.4097
00:10:54 - process[9]: evaluating epoch 19 on dev ...
00:11:23 - dev set during evaluation: 13890/13887
00:11:23 - process[9] - dev - epoch 19 - mAP: 0.468 w/ 38 queries
00:11:23 - [fold 1] best test MAP: 0.412 @ epoch 10
00:11:23 - Evaluating every 1 epochs ...
00:11:23 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:11:24 - test has 39 queries ...
00:11:24 - Data reading done ...
00:11:25 - adding 9-th encoder to optimizer...
00:11:25 - adding 10-th encoder to optimizer...
00:11:25 - adding 11-th encoder to optimizer...
00:11:26 - process[9]: training epoch 0 ...
00:11:43 - process[9] - epoch 0 - train iter 386 - 17060.7 words/s - loss: 0.6602
00:11:43 - process[9]: training epoch 1 ...
00:12:00 - process[9] - epoch 1 - train iter 386 - 17768.1 words/s - loss: 0.5479
00:12:00 - process[9]: training epoch 2 ...
00:12:19 - process[9] - epoch 2 - train iter 386 - 16231.3 words/s - loss: 0.5006
00:12:19 - process[9]: training epoch 3 ...
00:12:37 - process[9] - epoch 3 - train iter 386 - 16366.5 words/s - loss: 0.4878
00:12:37 - process[9]: training epoch 4 ...
00:12:55 - process[9] - epoch 4 - train iter 386 - 17384.9 words/s - loss: 0.4864
00:12:55 - process[9]: training epoch 5 ...
00:13:13 - process[9] - epoch 5 - train iter 386 - 16221.7 words/s - loss: 0.4524
00:13:13 - process[9]: training epoch 6 ...
00:13:33 - process[9] - epoch 6 - train iter 386 - 15037.5 words/s - loss: 0.4300
00:13:33 - process[9]: training epoch 7 ...
00:13:51 - process[9] - epoch 7 - train iter 386 - 17333.1 words/s - loss: 0.4272
00:13:51 - process[9]: training epoch 8 ...
00:14:07 - process[9] - epoch 8 - train iter 386 - 17752.2 words/s - loss: 0.4440
00:14:07 - process[9]: training epoch 9 ...
00:14:23 - process[9] - epoch 9 - train iter 386 - 18717.1 words/s - loss: 0.4116
00:14:23 - process[9]: training epoch 10 ...
00:14:41 - process[9] - epoch 10 - train iter 386 - 16738.1 words/s - loss: 0.4118
00:14:41 - process[9]: evaluating epoch 10 on dev ...
00:15:21 - dev set during evaluation: 15580/15574
00:15:21 - process[9] - dev - epoch 10 - mAP: 0.405 w/ 38 queries
00:15:21 - process[9]: evaluating epoch 10 on test ...
00:15:54 - test set during evaluation: 14340/14338
00:15:54 - process[9] - test - epoch 10 - mAP: 0.516 w/ 39 queries
00:15:54 - process[9]: training epoch 11 ...
00:16:11 - process[9] - epoch 11 - train iter 386 - 17757.6 words/s - loss: 0.4002
00:16:11 - process[9]: evaluating epoch 11 on dev ...
00:16:50 - dev set during evaluation: 15580/15574
00:16:50 - process[9] - dev - epoch 11 - mAP: 0.398 w/ 38 queries
00:16:50 - process[9]: training epoch 12 ...
00:17:07 - process[9] - epoch 12 - train iter 386 - 17915.6 words/s - loss: 0.4004
00:17:07 - process[9]: evaluating epoch 12 on dev ...
00:17:44 - dev set during evaluation: 15580/15574
00:17:44 - process[9] - dev - epoch 12 - mAP: 0.400 w/ 38 queries
00:17:44 - process[9]: training epoch 13 ...
00:18:04 - process[9] - epoch 13 - train iter 386 - 15370.4 words/s - loss: 0.4338
00:18:04 - process[9]: evaluating epoch 13 on dev ...
00:18:38 - dev set during evaluation: 15580/15574
00:18:38 - process[9] - dev - epoch 13 - mAP: 0.391 w/ 38 queries
00:18:38 - process[9]: training epoch 14 ...
00:18:56 - process[9] - epoch 14 - train iter 386 - 16985.6 words/s - loss: 0.4075
00:18:56 - process[9]: evaluating epoch 14 on dev ...
00:19:33 - dev set during evaluation: 15580/15574
00:19:33 - process[9] - dev - epoch 14 - mAP: 0.392 w/ 38 queries
00:19:33 - process[9]: training epoch 15 ...
00:19:52 - process[9] - epoch 15 - train iter 386 - 16069.7 words/s - loss: 0.4144
00:19:52 - process[9]: evaluating epoch 15 on dev ...
00:20:28 - dev set during evaluation: 15580/15574
00:20:28 - process[9] - dev - epoch 15 - mAP: 0.413 w/ 38 queries
00:20:28 - process[9]: evaluating epoch 15 on test ...
00:21:00 - test set during evaluation: 14340/14338
00:21:00 - process[9] - test - epoch 15 - mAP: 0.521 w/ 39 queries
00:21:00 - process[9]: training epoch 16 ...
00:21:18 - process[9] - epoch 16 - train iter 386 - 16760.9 words/s - loss: 0.3682
00:21:18 - process[9]: evaluating epoch 16 on dev ...
00:21:55 - dev set during evaluation: 15580/15574
00:21:55 - process[9] - dev - epoch 16 - mAP: 0.394 w/ 38 queries
00:21:55 - process[9]: training epoch 17 ...
00:22:14 - process[9] - epoch 17 - train iter 386 - 15410.5 words/s - loss: 0.3912
00:22:14 - process[9]: evaluating epoch 17 on dev ...
00:22:49 - dev set during evaluation: 15580/15574
00:22:49 - process[9] - dev - epoch 17 - mAP: 0.384 w/ 38 queries
00:22:49 - process[9]: training epoch 18 ...
00:23:06 - process[9] - epoch 18 - train iter 386 - 16493.8 words/s - loss: 0.3983
00:23:06 - process[9]: evaluating epoch 18 on dev ...
00:23:43 - dev set during evaluation: 15580/15574
00:23:43 - process[9] - dev - epoch 18 - mAP: 0.378 w/ 38 queries
00:23:43 - process[9]: training epoch 19 ...
00:24:02 - process[9] - epoch 19 - train iter 386 - 16421.7 words/s - loss: 0.3664
00:24:02 - process[9]: evaluating epoch 19 on dev ...
00:24:37 - dev set during evaluation: 15580/15574
00:24:37 - process[9] - dev - epoch 19 - mAP: 0.379 w/ 38 queries
00:24:37 - [fold 2] best test MAP: 0.521 @ epoch 15
00:24:37 - Evaluating every 1 epochs ...
00:24:37 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:24:38 - test has 39 queries ...
00:24:38 - Data reading done ...
00:24:40 - adding 9-th encoder to optimizer...
00:24:40 - adding 10-th encoder to optimizer...
00:24:40 - adding 11-th encoder to optimizer...
00:24:40 - process[9]: training epoch 0 ...
00:24:58 - process[9] - epoch 0 - train iter 360 - 15697.1 words/s - loss: 0.6685
00:24:58 - process[9]: training epoch 1 ...
00:25:16 - process[9] - epoch 1 - train iter 360 - 16562.3 words/s - loss: 0.5102
00:25:16 - process[9]: training epoch 2 ...
00:25:31 - process[9] - epoch 2 - train iter 360 - 17692.7 words/s - loss: 0.5080
00:25:31 - process[9]: training epoch 3 ...
00:25:48 - process[9] - epoch 3 - train iter 360 - 16772.4 words/s - loss: 0.4907
00:25:48 - process[9]: training epoch 4 ...
00:26:06 - process[9] - epoch 4 - train iter 360 - 16159.4 words/s - loss: 0.4685
00:26:06 - process[9]: training epoch 5 ...
00:26:25 - process[9] - epoch 5 - train iter 360 - 14769.3 words/s - loss: 0.4658
00:26:25 - process[9]: training epoch 6 ...
00:26:42 - process[9] - epoch 6 - train iter 360 - 17384.6 words/s - loss: 0.4717
00:26:42 - process[9]: training epoch 7 ...
00:26:59 - process[9] - epoch 7 - train iter 360 - 16751.5 words/s - loss: 0.4579
00:26:59 - process[9]: training epoch 8 ...
00:27:16 - process[9] - epoch 8 - train iter 360 - 16771.2 words/s - loss: 0.4275
00:27:16 - process[9]: training epoch 9 ...
00:27:33 - process[9] - epoch 9 - train iter 360 - 16528.5 words/s - loss: 0.4036
00:27:33 - process[9]: training epoch 10 ...
00:27:50 - process[9] - epoch 10 - train iter 360 - 15827.1 words/s - loss: 0.4667
00:27:50 - process[9]: evaluating epoch 10 on dev ...
00:28:33 - dev set during evaluation: 14340/14338
00:28:33 - process[9] - dev - epoch 10 - mAP: 0.520 w/ 39 queries
00:28:33 - process[9]: evaluating epoch 10 on test ...
00:29:01 - test set during evaluation: 11710/11707
00:29:01 - process[9] - test - epoch 10 - mAP: 0.521 w/ 39 queries
00:29:01 - process[9]: training epoch 11 ...
00:29:21 - process[9] - epoch 11 - train iter 360 - 14611.7 words/s - loss: 0.4324
00:29:21 - process[9]: evaluating epoch 11 on dev ...
00:29:53 - dev set during evaluation: 14340/14338
00:29:53 - process[9] - dev - epoch 11 - mAP: 0.513 w/ 39 queries
00:29:53 - process[9]: training epoch 12 ...
00:30:10 - process[9] - epoch 12 - train iter 360 - 16628.7 words/s - loss: 0.4363
00:30:10 - process[9]: evaluating epoch 12 on dev ...
00:30:43 - dev set during evaluation: 14340/14338
00:30:43 - process[9] - dev - epoch 12 - mAP: 0.531 w/ 39 queries
00:30:43 - process[9]: evaluating epoch 12 on test ...
00:31:12 - test set during evaluation: 11710/11707
00:31:12 - process[9] - test - epoch 12 - mAP: 0.504 w/ 39 queries
00:31:12 - process[9]: training epoch 13 ...
00:31:28 - process[9] - epoch 13 - train iter 360 - 17044.7 words/s - loss: 0.4226
00:31:28 - process[9]: evaluating epoch 13 on dev ...
00:32:01 - dev set during evaluation: 14340/14338
00:32:01 - process[9] - dev - epoch 13 - mAP: 0.526 w/ 39 queries
00:32:01 - process[9]: training epoch 14 ...
00:32:18 - process[9] - epoch 14 - train iter 360 - 17101.5 words/s - loss: 0.4253
00:32:18 - process[9]: evaluating epoch 14 on dev ...
00:32:53 - dev set during evaluation: 14340/14338
00:32:53 - process[9] - dev - epoch 14 - mAP: 0.537 w/ 39 queries
00:32:53 - process[9]: evaluating epoch 14 on test ...
00:33:21 - test set during evaluation: 11710/11707
00:33:21 - process[9] - test - epoch 14 - mAP: 0.508 w/ 39 queries
00:33:21 - process[9]: training epoch 15 ...
00:33:38 - process[9] - epoch 15 - train iter 360 - 16625.7 words/s - loss: 0.4144
00:33:38 - process[9]: evaluating epoch 15 on dev ...
00:34:10 - dev set during evaluation: 14340/14338
00:34:11 - process[9] - dev - epoch 15 - mAP: 0.539 w/ 39 queries
00:34:11 - process[9]: evaluating epoch 15 on test ...
00:34:39 - test set during evaluation: 11710/11707
00:34:39 - process[9] - test - epoch 15 - mAP: 0.505 w/ 39 queries
00:34:39 - process[9]: training epoch 16 ...
00:34:57 - process[9] - epoch 16 - train iter 360 - 16128.9 words/s - loss: 0.4162
00:34:57 - process[9]: evaluating epoch 16 on dev ...
00:35:30 - dev set during evaluation: 14340/14338
00:35:30 - process[9] - dev - epoch 16 - mAP: 0.519 w/ 39 queries
00:35:30 - process[9]: training epoch 17 ...
00:35:47 - process[9] - epoch 17 - train iter 360 - 16248.5 words/s - loss: 0.3668
00:35:47 - process[9]: evaluating epoch 17 on dev ...
00:36:21 - dev set during evaluation: 14340/14338
00:36:21 - process[9] - dev - epoch 17 - mAP: 0.505 w/ 39 queries
00:36:21 - process[9]: training epoch 18 ...
00:36:39 - process[9] - epoch 18 - train iter 360 - 15723.5 words/s - loss: 0.3382
00:36:39 - process[9]: evaluating epoch 18 on dev ...
00:37:13 - dev set during evaluation: 14340/14338
00:37:13 - process[9] - dev - epoch 18 - mAP: 0.538 w/ 39 queries
00:37:13 - process[9]: training epoch 19 ...
00:37:32 - process[9] - epoch 19 - train iter 360 - 15063.9 words/s - loss: 0.3886
00:37:32 - process[9]: evaluating epoch 19 on dev ...
00:38:04 - dev set during evaluation: 14340/14338
00:38:04 - process[9] - dev - epoch 19 - mAP: 0.521 w/ 39 queries
00:38:04 - [fold 3] best test MAP: 0.505 @ epoch 15
00:38:04 - Evaluating every 1 epochs ...
00:38:04 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:05 - test has 38 queries ...
00:38:05 - Data reading done ...
00:38:06 - adding 9-th encoder to optimizer...
00:38:06 - adding 10-th encoder to optimizer...
00:38:06 - adding 11-th encoder to optimizer...
00:38:07 - process[9]: training epoch 0 ...
00:38:25 - process[9] - epoch 0 - train iter 404 - 17584.1 words/s - loss: 0.6373
00:38:25 - process[9]: training epoch 1 ...
00:38:44 - process[9] - epoch 1 - train iter 404 - 17211.8 words/s - loss: 0.5201
00:38:44 - process[9]: training epoch 2 ...
00:39:02 - process[9] - epoch 2 - train iter 404 - 17659.5 words/s - loss: 0.5179
00:39:02 - process[9]: training epoch 3 ...
00:39:20 - process[9] - epoch 3 - train iter 404 - 17227.2 words/s - loss: 0.4859
00:39:20 - process[9]: training epoch 4 ...
00:39:39 - process[9] - epoch 4 - train iter 404 - 17084.8 words/s - loss: 0.4879
00:39:39 - process[9]: training epoch 5 ...
00:39:56 - process[9] - epoch 5 - train iter 404 - 18174.6 words/s - loss: 0.4674
00:39:56 - process[9]: training epoch 6 ...
00:40:14 - process[9] - epoch 6 - train iter 404 - 17643.0 words/s - loss: 0.4593
00:40:14 - process[9]: training epoch 7 ...
00:40:33 - process[9] - epoch 7 - train iter 404 - 16992.5 words/s - loss: 0.4343
00:40:33 - process[9]: training epoch 8 ...
00:40:51 - process[9] - epoch 8 - train iter 404 - 18046.5 words/s - loss: 0.4062
00:40:51 - process[9]: training epoch 9 ...
00:41:08 - process[9] - epoch 9 - train iter 404 - 17801.8 words/s - loss: 0.4141
00:41:08 - process[9]: training epoch 10 ...
00:41:27 - process[9] - epoch 10 - train iter 404 - 16979.1 words/s - loss: 0.4232
00:41:27 - process[9]: evaluating epoch 10 on dev ...
00:41:54 - dev set during evaluation: 11710/11707
00:41:54 - process[9] - dev - epoch 10 - mAP: 0.491 w/ 39 queries
00:41:54 - process[9]: evaluating epoch 10 on test ...
00:42:21 - test set during evaluation: 13490/13483
00:42:21 - process[9] - test - epoch 10 - mAP: 0.481 w/ 38 queries
00:42:21 - process[9]: training epoch 11 ...
00:42:39 - process[9] - epoch 11 - train iter 404 - 18106.8 words/s - loss: 0.4091
00:42:39 - process[9]: evaluating epoch 11 on dev ...
00:43:08 - dev set during evaluation: 11710/11707
00:43:08 - process[9] - dev - epoch 11 - mAP: 0.488 w/ 39 queries
00:43:08 - process[9]: training epoch 12 ...
00:43:27 - process[9] - epoch 12 - train iter 404 - 16524.3 words/s - loss: 0.4422
00:43:27 - process[9]: evaluating epoch 12 on dev ...
00:43:54 - dev set during evaluation: 11710/11707
00:43:54 - process[9] - dev - epoch 12 - mAP: 0.490 w/ 39 queries
00:43:54 - process[9]: training epoch 13 ...
00:44:11 - process[9] - epoch 13 - train iter 404 - 18249.4 words/s - loss: 0.4280
00:44:11 - process[9]: evaluating epoch 13 on dev ...
00:44:38 - dev set during evaluation: 11710/11707
00:44:38 - process[9] - dev - epoch 13 - mAP: 0.496 w/ 39 queries
00:44:38 - process[9]: evaluating epoch 13 on test ...
00:45:05 - test set during evaluation: 13490/13483
00:45:05 - process[9] - test - epoch 13 - mAP: 0.519 w/ 38 queries
00:45:05 - process[9]: training epoch 14 ...
00:45:27 - process[9] - epoch 14 - train iter 404 - 14713.4 words/s - loss: 0.3995
00:45:27 - process[9]: evaluating epoch 14 on dev ...
00:45:56 - dev set during evaluation: 11710/11707
00:45:56 - process[9] - dev - epoch 14 - mAP: 0.495 w/ 39 queries
00:45:56 - process[9]: training epoch 15 ...
00:46:15 - process[9] - epoch 15 - train iter 404 - 16795.0 words/s - loss: 0.4063
00:46:15 - process[9]: evaluating epoch 15 on dev ...
00:46:41 - dev set during evaluation: 11710/11707
00:46:41 - process[9] - dev - epoch 15 - mAP: 0.510 w/ 39 queries
00:46:41 - process[9]: evaluating epoch 15 on test ...
00:47:08 - test set during evaluation: 13490/13483
00:47:08 - process[9] - test - epoch 15 - mAP: 0.489 w/ 38 queries
00:47:08 - process[9]: training epoch 16 ...
00:47:25 - process[9] - epoch 16 - train iter 404 - 18579.6 words/s - loss: 0.3589
00:47:25 - process[9]: evaluating epoch 16 on dev ...
00:47:53 - dev set during evaluation: 11710/11707
00:47:53 - process[9] - dev - epoch 16 - mAP: 0.506 w/ 39 queries
00:47:53 - process[9]: training epoch 17 ...
00:48:12 - process[9] - epoch 17 - train iter 404 - 16313.4 words/s - loss: 0.3658
00:48:12 - process[9]: evaluating epoch 17 on dev ...
00:48:39 - dev set during evaluation: 11710/11707
00:48:39 - process[9] - dev - epoch 17 - mAP: 0.507 w/ 39 queries
00:48:39 - process[9]: training epoch 18 ...
00:48:57 - process[9] - epoch 18 - train iter 404 - 16834.2 words/s - loss: 0.3710
00:48:57 - process[9]: evaluating epoch 18 on dev ...
00:49:24 - dev set during evaluation: 11710/11707
00:49:24 - process[9] - dev - epoch 18 - mAP: 0.504 w/ 39 queries
00:49:24 - process[9]: training epoch 19 ...
00:49:41 - process[9] - epoch 19 - train iter 404 - 18002.1 words/s - loss: 0.3896
00:49:41 - process[9]: evaluating epoch 19 on dev ...
00:50:08 - dev set during evaluation: 11710/11707
00:50:08 - process[9] - dev - epoch 19 - mAP: 0.513 w/ 39 queries
00:50:08 - process[9]: evaluating epoch 19 on test ...
00:50:35 - test set during evaluation: 13490/13483
00:50:35 - process[9] - test - epoch 19 - mAP: 0.472 w/ 38 queries
00:50:35 - [fold 4] best test MAP: 0.472 @ epoch 19
00:50:35 - Evaluating every 1 epochs ...
00:50:35 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:36 - test has 38 queries ...
00:50:36 - Data reading done ...
00:50:37 - adding 9-th encoder to optimizer...
00:50:37 - adding 10-th encoder to optimizer...
00:50:37 - adding 11-th encoder to optimizer...
00:50:38 - process[9]: training epoch 0 ...
00:50:57 - process[9] - epoch 0 - train iter 444 - 18251.2 words/s - loss: 0.6635
00:50:57 - process[9]: training epoch 1 ...
00:51:15 - process[9] - epoch 1 - train iter 444 - 19532.0 words/s - loss: 0.5449
00:51:15 - process[9]: training epoch 2 ...
00:51:33 - process[9] - epoch 2 - train iter 444 - 19421.9 words/s - loss: 0.5097
00:51:33 - process[9]: training epoch 3 ...
00:51:52 - process[9] - epoch 3 - train iter 444 - 18635.9 words/s - loss: 0.5333
00:51:52 - process[9]: training epoch 4 ...
00:52:11 - process[9] - epoch 4 - train iter 444 - 19092.9 words/s - loss: 0.5125
00:52:11 - process[9]: training epoch 5 ...
00:52:28 - process[9] - epoch 5 - train iter 444 - 19841.5 words/s - loss: 0.4801
00:52:28 - process[9]: training epoch 6 ...
00:52:47 - process[9] - epoch 6 - train iter 444 - 18748.1 words/s - loss: 0.4884
00:52:47 - process[9]: training epoch 7 ...
00:53:06 - process[9] - epoch 7 - train iter 444 - 18121.5 words/s - loss: 0.4525
00:53:06 - process[9]: training epoch 8 ...
00:53:25 - process[9] - epoch 8 - train iter 444 - 18619.3 words/s - loss: 0.4623
00:53:25 - process[9]: training epoch 9 ...
00:53:44 - process[9] - epoch 9 - train iter 444 - 18809.1 words/s - loss: 0.4509
00:53:44 - process[9]: training epoch 10 ...
00:54:01 - process[9] - epoch 10 - train iter 444 - 19889.1 words/s - loss: 0.4428
00:54:01 - process[9]: evaluating epoch 10 on dev ...
00:54:33 - dev set during evaluation: 13490/13483
00:54:33 - process[9] - dev - epoch 10 - mAP: 0.507 w/ 38 queries
00:54:33 - process[9]: evaluating epoch 10 on test ...
00:55:05 - test set during evaluation: 13890/13887
00:55:05 - process[9] - test - epoch 10 - mAP: 0.469 w/ 38 queries
00:55:05 - process[9]: training epoch 11 ...
00:55:23 - process[9] - epoch 11 - train iter 444 - 19307.2 words/s - loss: 0.4403
00:55:23 - process[9]: evaluating epoch 11 on dev ...
00:55:52 - dev set during evaluation: 13490/13483
00:55:52 - process[9] - dev - epoch 11 - mAP: 0.468 w/ 38 queries
00:55:52 - process[9]: training epoch 12 ...
00:56:12 - process[9] - epoch 12 - train iter 444 - 17887.5 words/s - loss: 0.4357
00:56:12 - process[9]: evaluating epoch 12 on dev ...
00:56:38 - dev set during evaluation: 13490/13483
00:56:38 - process[9] - dev - epoch 12 - mAP: 0.465 w/ 38 queries
00:56:38 - process[9]: training epoch 13 ...
00:56:58 - process[9] - epoch 13 - train iter 444 - 18068.1 words/s - loss: 0.3876
00:56:58 - process[9]: evaluating epoch 13 on dev ...
00:57:26 - dev set during evaluation: 13490/13483
00:57:26 - process[9] - dev - epoch 13 - mAP: 0.505 w/ 38 queries
00:57:26 - process[9]: training epoch 14 ...
00:57:46 - process[9] - epoch 14 - train iter 444 - 17680.0 words/s - loss: 0.4053
00:57:46 - process[9]: evaluating epoch 14 on dev ...
00:58:13 - dev set during evaluation: 13490/13483
00:58:13 - process[9] - dev - epoch 14 - mAP: 0.475 w/ 38 queries
00:58:13 - process[9]: training epoch 15 ...
00:58:34 - process[9] - epoch 15 - train iter 444 - 16884.8 words/s - loss: 0.4066
00:58:34 - process[9]: evaluating epoch 15 on dev ...
00:59:01 - dev set during evaluation: 13490/13483
00:59:01 - process[9] - dev - epoch 15 - mAP: 0.497 w/ 38 queries
00:59:01 - process[9]: training epoch 16 ...
00:59:19 - process[9] - epoch 16 - train iter 444 - 19357.1 words/s - loss: 0.3856
00:59:19 - process[9]: evaluating epoch 16 on dev ...
00:59:48 - dev set during evaluation: 13490/13483
00:59:48 - process[9] - dev - epoch 16 - mAP: 0.472 w/ 38 queries
00:59:48 - process[9]: training epoch 17 ...
01:00:08 - process[9] - epoch 17 - train iter 444 - 18136.7 words/s - loss: 0.3943
01:00:08 - process[9]: evaluating epoch 17 on dev ...
01:00:35 - dev set during evaluation: 13490/13483
01:00:35 - process[9] - dev - epoch 17 - mAP: 0.490 w/ 38 queries
01:00:35 - process[9]: training epoch 18 ...
01:00:54 - process[9] - epoch 18 - train iter 444 - 18720.2 words/s - loss: 0.4148
01:00:54 - process[9]: evaluating epoch 18 on dev ...
01:01:21 - dev set during evaluation: 13490/13483
01:01:21 - process[9] - dev - epoch 18 - mAP: 0.458 w/ 38 queries
01:01:21 - process[9]: training epoch 19 ...
01:01:40 - process[9] - epoch 19 - train iter 444 - 19094.9 words/s - loss: 0.3893
01:01:40 - process[9]: evaluating epoch 19 on dev ...
01:02:08 - dev set during evaluation: 13490/13483
01:02:08 - process[9] - dev - epoch 19 - mAP: 0.486 w/ 38 queries
01:02:08 - [fold 5] best test MAP: 0.469 @ epoch 10
01:02:08 - [0.4122968783611108, 0.521235058918088, 0.504806553861309, 0.47181324904753186, 0.4685896547168986]
01:02:08 - [38, 39, 39, 38, 38]
01:02:08 - final MAP: 0.476
00:00:05 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=9, model_path='/mnt/scratch/puxuan/short_qlm_mix/2192279/huggingface-14', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='de')
00:00:26 - Evaluating every 1 epochs ...
00:00:26 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:27 - test has 38 queries ...
00:00:27 - Data reading done ...
00:00:33 - adding 9-th encoder to optimizer...
00:00:33 - adding 10-th encoder to optimizer...
00:00:33 - adding 11-th encoder to optimizer...
00:00:34 - process[9]: training epoch 0 ...
00:00:51 - process[9] - epoch 0 - train iter 423 - 18953.5 words/s - loss: 0.6330
00:00:51 - process[9]: training epoch 1 ...
00:01:08 - process[9] - epoch 1 - train iter 423 - 20634.9 words/s - loss: 0.5303
00:01:08 - process[9]: training epoch 2 ...
00:01:24 - process[9] - epoch 2 - train iter 423 - 20632.2 words/s - loss: 0.5068
00:01:24 - process[9]: training epoch 3 ...
00:01:40 - process[9] - epoch 3 - train iter 423 - 21372.7 words/s - loss: 0.5056
00:01:40 - process[9]: training epoch 4 ...
00:01:56 - process[9] - epoch 4 - train iter 423 - 20229.4 words/s - loss: 0.4753
00:01:56 - process[9]: training epoch 5 ...
00:02:14 - process[9] - epoch 5 - train iter 423 - 19499.1 words/s - loss: 0.4439
00:02:14 - process[9]: training epoch 6 ...
00:02:30 - process[9] - epoch 6 - train iter 423 - 20331.9 words/s - loss: 0.4511
00:02:30 - process[9]: training epoch 7 ...
00:02:46 - process[9] - epoch 7 - train iter 423 - 20776.2 words/s - loss: 0.4531
00:02:46 - process[9]: training epoch 8 ...
00:03:02 - process[9] - epoch 8 - train iter 423 - 20405.7 words/s - loss: 0.4225
00:03:02 - process[9]: training epoch 9 ...
00:03:18 - process[9] - epoch 9 - train iter 423 - 20433.0 words/s - loss: 0.4259
00:03:18 - process[9]: training epoch 10 ...
00:03:34 - process[9] - epoch 10 - train iter 423 - 21205.6 words/s - loss: 0.4083
00:03:34 - process[9]: evaluating epoch 10 on dev ...
00:04:05 - dev set during evaluation: 13890/13887
00:04:05 - process[9] - dev - epoch 10 - mAP: 0.489 w/ 38 queries
00:04:05 - process[9]: evaluating epoch 10 on test ...
00:04:35 - test set during evaluation: 15580/15574
00:04:35 - process[9] - test - epoch 10 - mAP: 0.412 w/ 38 queries
00:04:35 - process[9]: training epoch 11 ...
00:04:51 - process[9] - epoch 11 - train iter 423 - 20244.1 words/s - loss: 0.4183
00:04:51 - process[9]: evaluating epoch 11 on dev ...
00:05:20 - dev set during evaluation: 13890/13887
00:05:20 - process[9] - dev - epoch 11 - mAP: 0.459 w/ 38 queries
00:05:20 - process[9]: training epoch 12 ...
00:05:37 - process[9] - epoch 12 - train iter 423 - 18562.6 words/s - loss: 0.4310
00:05:37 - process[9]: evaluating epoch 12 on dev ...
00:06:05 - dev set during evaluation: 13890/13887
00:06:05 - process[9] - dev - epoch 12 - mAP: 0.481 w/ 38 queries
00:06:05 - process[9]: training epoch 13 ...
00:06:21 - process[9] - epoch 13 - train iter 423 - 20773.9 words/s - loss: 0.3812
00:06:21 - process[9]: evaluating epoch 13 on dev ...
00:06:50 - dev set during evaluation: 13890/13887
00:06:50 - process[9] - dev - epoch 13 - mAP: 0.467 w/ 38 queries
00:06:50 - process[9]: training epoch 14 ...
00:07:06 - process[9] - epoch 14 - train iter 423 - 21396.6 words/s - loss: 0.4059
00:07:06 - process[9]: evaluating epoch 14 on dev ...
00:07:35 - dev set during evaluation: 13890/13887
00:07:35 - process[9] - dev - epoch 14 - mAP: 0.474 w/ 38 queries
00:07:35 - process[9]: training epoch 15 ...
00:07:52 - process[9] - epoch 15 - train iter 423 - 20096.6 words/s - loss: 0.3843
00:07:52 - process[9]: evaluating epoch 15 on dev ...
00:08:21 - dev set during evaluation: 13890/13887
00:08:21 - process[9] - dev - epoch 15 - mAP: 0.475 w/ 38 queries
00:08:21 - process[9]: training epoch 16 ...
00:08:38 - process[9] - epoch 16 - train iter 423 - 19747.7 words/s - loss: 0.4039
00:08:38 - process[9]: evaluating epoch 16 on dev ...
00:09:06 - dev set during evaluation: 13890/13887
00:09:06 - process[9] - dev - epoch 16 - mAP: 0.485 w/ 38 queries
00:09:06 - process[9]: training epoch 17 ...
00:09:22 - process[9] - epoch 17 - train iter 423 - 20169.2 words/s - loss: 0.3915
00:09:22 - process[9]: evaluating epoch 17 on dev ...
00:09:51 - dev set during evaluation: 13890/13887
00:09:51 - process[9] - dev - epoch 17 - mAP: 0.468 w/ 38 queries
00:09:51 - process[9]: training epoch 18 ...
00:10:08 - process[9] - epoch 18 - train iter 423 - 19708.9 words/s - loss: 0.4012
00:10:08 - process[9]: evaluating epoch 18 on dev ...
00:10:36 - dev set during evaluation: 13890/13887
00:10:36 - process[9] - dev - epoch 18 - mAP: 0.477 w/ 38 queries
00:10:36 - process[9]: training epoch 19 ...
00:10:52 - process[9] - epoch 19 - train iter 423 - 20590.9 words/s - loss: 0.4097
00:10:52 - process[9]: evaluating epoch 19 on dev ...
00:11:20 - dev set during evaluation: 13890/13887
00:11:20 - process[9] - dev - epoch 19 - mAP: 0.468 w/ 38 queries
00:11:20 - [fold 1] best test MAP: 0.412 @ epoch 10
00:11:20 - Evaluating every 1 epochs ...
00:11:20 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:11:21 - test has 39 queries ...
00:11:21 - Data reading done ...
00:11:23 - adding 9-th encoder to optimizer...
00:11:23 - adding 10-th encoder to optimizer...
00:11:23 - adding 11-th encoder to optimizer...
00:11:23 - process[9]: training epoch 0 ...
00:11:41 - process[9] - epoch 0 - train iter 386 - 17008.4 words/s - loss: 0.6602
00:11:41 - process[9]: training epoch 1 ...
00:11:58 - process[9] - epoch 1 - train iter 386 - 17791.4 words/s - loss: 0.5479
00:11:58 - process[9]: training epoch 2 ...
00:12:17 - process[9] - epoch 2 - train iter 386 - 16288.6 words/s - loss: 0.5006
00:12:17 - process[9]: training epoch 3 ...
00:12:35 - process[9] - epoch 3 - train iter 386 - 16319.8 words/s - loss: 0.4878
00:12:35 - process[9]: training epoch 4 ...
00:12:52 - process[9] - epoch 4 - train iter 386 - 17454.3 words/s - loss: 0.4864
00:12:52 - process[9]: training epoch 5 ...
00:13:11 - process[9] - epoch 5 - train iter 386 - 16229.0 words/s - loss: 0.4524
00:13:11 - process[9]: training epoch 6 ...
00:13:31 - process[9] - epoch 6 - train iter 386 - 15041.6 words/s - loss: 0.4300
00:13:31 - process[9]: training epoch 7 ...
00:13:49 - process[9] - epoch 7 - train iter 386 - 17327.4 words/s - loss: 0.4272
00:13:49 - process[9]: training epoch 8 ...
00:14:05 - process[9] - epoch 8 - train iter 386 - 17734.8 words/s - loss: 0.4440
00:14:05 - process[9]: training epoch 9 ...
00:14:21 - process[9] - epoch 9 - train iter 386 - 18726.6 words/s - loss: 0.4116
00:14:21 - process[9]: training epoch 10 ...
00:14:39 - process[9] - epoch 10 - train iter 386 - 16726.5 words/s - loss: 0.4118
00:14:39 - process[9]: evaluating epoch 10 on dev ...
00:15:21 - dev set during evaluation: 15580/15574
00:15:21 - process[9] - dev - epoch 10 - mAP: 0.405 w/ 38 queries
00:15:21 - process[9]: evaluating epoch 10 on test ...
00:15:53 - test set during evaluation: 14340/14338
00:15:53 - process[9] - test - epoch 10 - mAP: 0.516 w/ 39 queries
00:15:53 - process[9]: training epoch 11 ...
00:16:10 - process[9] - epoch 11 - train iter 386 - 17779.1 words/s - loss: 0.4002
00:16:10 - process[9]: evaluating epoch 11 on dev ...
00:16:52 - dev set during evaluation: 15580/15574
00:16:52 - process[9] - dev - epoch 11 - mAP: 0.398 w/ 38 queries
00:16:52 - process[9]: training epoch 12 ...
00:17:09 - process[9] - epoch 12 - train iter 386 - 17847.6 words/s - loss: 0.4004
00:17:09 - process[9]: evaluating epoch 12 on dev ...
00:17:46 - dev set during evaluation: 15580/15574
00:17:46 - process[9] - dev - epoch 12 - mAP: 0.400 w/ 38 queries
00:17:46 - process[9]: training epoch 13 ...
00:18:06 - process[9] - epoch 13 - train iter 386 - 15419.5 words/s - loss: 0.4338
00:18:06 - process[9]: evaluating epoch 13 on dev ...
00:18:41 - dev set during evaluation: 15580/15574
00:18:41 - process[9] - dev - epoch 13 - mAP: 0.391 w/ 38 queries
00:18:41 - process[9]: training epoch 14 ...
00:18:59 - process[9] - epoch 14 - train iter 386 - 16976.4 words/s - loss: 0.4075
00:18:59 - process[9]: evaluating epoch 14 on dev ...
00:19:36 - dev set during evaluation: 15580/15574
00:19:36 - process[9] - dev - epoch 14 - mAP: 0.392 w/ 38 queries
00:19:36 - process[9]: training epoch 15 ...
00:19:55 - process[9] - epoch 15 - train iter 386 - 15931.4 words/s - loss: 0.4144
00:19:55 - process[9]: evaluating epoch 15 on dev ...
00:20:34 - dev set during evaluation: 15580/15574
00:20:34 - process[9] - dev - epoch 15 - mAP: 0.413 w/ 38 queries
00:20:34 - process[9]: evaluating epoch 15 on test ...
00:21:07 - test set during evaluation: 14340/14338
00:21:07 - process[9] - test - epoch 15 - mAP: 0.521 w/ 39 queries
00:21:07 - process[9]: training epoch 16 ...
00:21:25 - process[9] - epoch 16 - train iter 386 - 16822.9 words/s - loss: 0.3682
00:21:25 - process[9]: evaluating epoch 16 on dev ...
00:22:01 - dev set during evaluation: 15580/15574
00:22:01 - process[9] - dev - epoch 16 - mAP: 0.394 w/ 38 queries
00:22:01 - process[9]: training epoch 17 ...
00:22:20 - process[9] - epoch 17 - train iter 386 - 15496.3 words/s - loss: 0.3912
00:22:20 - process[9]: evaluating epoch 17 on dev ...
00:22:54 - dev set during evaluation: 15580/15574
00:22:54 - process[9] - dev - epoch 17 - mAP: 0.384 w/ 38 queries
00:22:54 - process[9]: training epoch 18 ...
00:23:12 - process[9] - epoch 18 - train iter 386 - 16240.4 words/s - loss: 0.3983
00:23:12 - process[9]: evaluating epoch 18 on dev ...
00:23:50 - dev set during evaluation: 15580/15574
00:23:50 - process[9] - dev - epoch 18 - mAP: 0.378 w/ 38 queries
00:23:50 - process[9]: training epoch 19 ...
00:24:09 - process[9] - epoch 19 - train iter 386 - 16298.5 words/s - loss: 0.3664
00:24:09 - process[9]: evaluating epoch 19 on dev ...
00:24:44 - dev set during evaluation: 15580/15574
00:24:44 - process[9] - dev - epoch 19 - mAP: 0.379 w/ 38 queries
00:24:44 - [fold 2] best test MAP: 0.521 @ epoch 15
00:24:44 - Evaluating every 1 epochs ...
00:24:44 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:24:45 - test has 39 queries ...
00:24:45 - Data reading done ...
00:24:46 - adding 9-th encoder to optimizer...
00:24:46 - adding 10-th encoder to optimizer...
00:24:46 - adding 11-th encoder to optimizer...
00:24:47 - process[9]: training epoch 0 ...
00:25:05 - process[9] - epoch 0 - train iter 360 - 15660.3 words/s - loss: 0.6685
00:25:05 - process[9]: training epoch 1 ...
00:25:22 - process[9] - epoch 1 - train iter 360 - 16458.8 words/s - loss: 0.5102
00:25:22 - process[9]: training epoch 2 ...
00:25:38 - process[9] - epoch 2 - train iter 360 - 17566.8 words/s - loss: 0.5080
00:25:38 - process[9]: training epoch 3 ...
00:25:55 - process[9] - epoch 3 - train iter 360 - 16638.1 words/s - loss: 0.4907
00:25:55 - process[9]: training epoch 4 ...
00:26:13 - process[9] - epoch 4 - train iter 360 - 16019.6 words/s - loss: 0.4685
00:26:13 - process[9]: training epoch 5 ...
00:26:33 - process[9] - epoch 5 - train iter 360 - 14641.9 words/s - loss: 0.4658
00:26:33 - process[9]: training epoch 6 ...
00:26:49 - process[9] - epoch 6 - train iter 360 - 17272.4 words/s - loss: 0.4717
00:26:49 - process[9]: training epoch 7 ...
00:27:06 - process[9] - epoch 7 - train iter 360 - 16650.6 words/s - loss: 0.4579
00:27:06 - process[9]: training epoch 8 ...
00:27:23 - process[9] - epoch 8 - train iter 360 - 16577.7 words/s - loss: 0.4275
00:27:23 - process[9]: training epoch 9 ...
00:27:40 - process[9] - epoch 9 - train iter 360 - 16402.4 words/s - loss: 0.4036
00:27:40 - process[9]: training epoch 10 ...
00:27:58 - process[9] - epoch 10 - train iter 360 - 15689.3 words/s - loss: 0.4667
00:27:58 - process[9]: evaluating epoch 10 on dev ...
00:28:40 - dev set during evaluation: 14340/14338
00:28:40 - process[9] - dev - epoch 10 - mAP: 0.520 w/ 39 queries
00:28:40 - process[9]: evaluating epoch 10 on test ...
00:29:09 - test set during evaluation: 11710/11707
00:29:09 - process[9] - test - epoch 10 - mAP: 0.521 w/ 39 queries
00:29:09 - process[9]: training epoch 11 ...
00:29:28 - process[9] - epoch 11 - train iter 360 - 14505.8 words/s - loss: 0.4324
00:29:28 - process[9]: evaluating epoch 11 on dev ...
00:30:00 - dev set during evaluation: 14340/14338
00:30:00 - process[9] - dev - epoch 11 - mAP: 0.513 w/ 39 queries
00:30:00 - process[9]: training epoch 12 ...
00:30:17 - process[9] - epoch 12 - train iter 360 - 16502.9 words/s - loss: 0.4363
00:30:17 - process[9]: evaluating epoch 12 on dev ...
00:30:50 - dev set during evaluation: 14340/14338
00:30:50 - process[9] - dev - epoch 12 - mAP: 0.531 w/ 39 queries
00:30:50 - process[9]: evaluating epoch 12 on test ...
00:31:19 - test set during evaluation: 11710/11707
00:31:19 - process[9] - test - epoch 12 - mAP: 0.504 w/ 39 queries
00:31:19 - process[9]: training epoch 13 ...
00:31:36 - process[9] - epoch 13 - train iter 360 - 16848.3 words/s - loss: 0.4226
00:31:36 - process[9]: evaluating epoch 13 on dev ...
00:32:09 - dev set during evaluation: 14340/14338
00:32:09 - process[9] - dev - epoch 13 - mAP: 0.526 w/ 39 queries
00:32:09 - process[9]: training epoch 14 ...
00:32:26 - process[9] - epoch 14 - train iter 360 - 16925.3 words/s - loss: 0.4253
00:32:26 - process[9]: evaluating epoch 14 on dev ...
00:33:01 - dev set during evaluation: 14340/14338
00:33:01 - process[9] - dev - epoch 14 - mAP: 0.537 w/ 39 queries
00:33:01 - process[9]: evaluating epoch 14 on test ...
00:33:29 - test set during evaluation: 11710/11707
00:33:29 - process[9] - test - epoch 14 - mAP: 0.508 w/ 39 queries
00:33:29 - process[9]: training epoch 15 ...
00:33:46 - process[9] - epoch 15 - train iter 360 - 16777.8 words/s - loss: 0.4144
00:33:46 - process[9]: evaluating epoch 15 on dev ...
00:34:18 - dev set during evaluation: 14340/14338
00:34:18 - process[9] - dev - epoch 15 - mAP: 0.539 w/ 39 queries
00:34:18 - process[9]: evaluating epoch 15 on test ...
00:34:47 - test set during evaluation: 11710/11707
00:34:47 - process[9] - test - epoch 15 - mAP: 0.505 w/ 39 queries
00:34:47 - process[9]: training epoch 16 ...
00:35:05 - process[9] - epoch 16 - train iter 360 - 16075.5 words/s - loss: 0.4162
00:35:05 - process[9]: evaluating epoch 16 on dev ...
00:35:39 - dev set during evaluation: 14340/14338
00:35:39 - process[9] - dev - epoch 16 - mAP: 0.519 w/ 39 queries
00:35:39 - process[9]: training epoch 17 ...
00:35:56 - process[9] - epoch 17 - train iter 360 - 16293.9 words/s - loss: 0.3668
00:35:56 - process[9]: evaluating epoch 17 on dev ...
00:36:29 - dev set during evaluation: 14340/14338
00:36:29 - process[9] - dev - epoch 17 - mAP: 0.505 w/ 39 queries
00:36:29 - process[9]: training epoch 18 ...
00:36:47 - process[9] - epoch 18 - train iter 360 - 15666.2 words/s - loss: 0.3382
00:36:47 - process[9]: evaluating epoch 18 on dev ...
00:37:21 - dev set during evaluation: 14340/14338
00:37:21 - process[9] - dev - epoch 18 - mAP: 0.538 w/ 39 queries
00:37:21 - process[9]: training epoch 19 ...
00:37:40 - process[9] - epoch 19 - train iter 360 - 14990.1 words/s - loss: 0.3886
00:37:40 - process[9]: evaluating epoch 19 on dev ...
00:38:12 - dev set during evaluation: 14340/14338
00:38:12 - process[9] - dev - epoch 19 - mAP: 0.521 w/ 39 queries
00:38:12 - [fold 3] best test MAP: 0.505 @ epoch 15
00:38:12 - Evaluating every 1 epochs ...
00:38:12 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:14 - test has 38 queries ...
00:38:14 - Data reading done ...
00:38:15 - adding 9-th encoder to optimizer...
00:38:15 - adding 10-th encoder to optimizer...
00:38:15 - adding 11-th encoder to optimizer...
00:38:16 - process[9]: training epoch 0 ...
00:38:34 - process[9] - epoch 0 - train iter 404 - 17556.1 words/s - loss: 0.6373
00:38:34 - process[9]: training epoch 1 ...
00:38:53 - process[9] - epoch 1 - train iter 404 - 17149.0 words/s - loss: 0.5201
00:38:53 - process[9]: training epoch 2 ...
00:39:11 - process[9] - epoch 2 - train iter 404 - 17634.9 words/s - loss: 0.5179
00:39:11 - process[9]: training epoch 3 ...
00:39:29 - process[9] - epoch 3 - train iter 404 - 17168.4 words/s - loss: 0.4859
00:39:29 - process[9]: training epoch 4 ...
00:39:48 - process[9] - epoch 4 - train iter 404 - 17085.8 words/s - loss: 0.4879
00:39:48 - process[9]: training epoch 5 ...
00:40:05 - process[9] - epoch 5 - train iter 404 - 18145.7 words/s - loss: 0.4674
00:40:05 - process[9]: training epoch 6 ...
00:40:23 - process[9] - epoch 6 - train iter 404 - 17619.5 words/s - loss: 0.4593
00:40:23 - process[9]: training epoch 7 ...
00:40:42 - process[9] - epoch 7 - train iter 404 - 17001.2 words/s - loss: 0.4343
00:40:42 - process[9]: training epoch 8 ...
00:41:00 - process[9] - epoch 8 - train iter 404 - 18054.3 words/s - loss: 0.4062
00:41:00 - process[9]: training epoch 9 ...
00:41:17 - process[9] - epoch 9 - train iter 404 - 17782.3 words/s - loss: 0.4141
00:41:17 - process[9]: training epoch 10 ...
00:41:36 - process[9] - epoch 10 - train iter 404 - 17031.7 words/s - loss: 0.4232
00:41:36 - process[9]: evaluating epoch 10 on dev ...
00:42:02 - dev set during evaluation: 11710/11707
00:42:02 - process[9] - dev - epoch 10 - mAP: 0.491 w/ 39 queries
00:42:02 - process[9]: evaluating epoch 10 on test ...
00:42:29 - test set during evaluation: 13490/13483
00:42:29 - process[9] - test - epoch 10 - mAP: 0.481 w/ 38 queries
00:42:29 - process[9]: training epoch 11 ...
00:42:47 - process[9] - epoch 11 - train iter 404 - 17886.5 words/s - loss: 0.4091
00:42:47 - process[9]: evaluating epoch 11 on dev ...
00:43:15 - dev set during evaluation: 11710/11707
00:43:15 - process[9] - dev - epoch 11 - mAP: 0.488 w/ 39 queries
00:43:15 - process[9]: training epoch 12 ...
00:43:35 - process[9] - epoch 12 - train iter 404 - 16414.7 words/s - loss: 0.4422
00:43:35 - process[9]: evaluating epoch 12 on dev ...
00:44:01 - dev set during evaluation: 11710/11707
00:44:01 - process[9] - dev - epoch 12 - mAP: 0.490 w/ 39 queries
00:44:01 - process[9]: training epoch 13 ...
00:44:18 - process[9] - epoch 13 - train iter 404 - 17965.5 words/s - loss: 0.4280
00:44:18 - process[9]: evaluating epoch 13 on dev ...
00:44:45 - dev set during evaluation: 11710/11707
00:44:46 - process[9] - dev - epoch 13 - mAP: 0.496 w/ 39 queries
00:44:46 - process[9]: evaluating epoch 13 on test ...
00:45:13 - test set during evaluation: 13490/13483
00:45:13 - process[9] - test - epoch 13 - mAP: 0.519 w/ 38 queries
00:45:13 - process[9]: training epoch 14 ...
00:45:33 - process[9] - epoch 14 - train iter 404 - 16078.6 words/s - loss: 0.3995
00:45:33 - process[9]: evaluating epoch 14 on dev ...
00:45:59 - dev set during evaluation: 11710/11707
00:45:59 - process[9] - dev - epoch 14 - mAP: 0.495 w/ 39 queries
00:45:59 - process[9]: training epoch 15 ...
00:46:18 - process[9] - epoch 15 - train iter 404 - 16701.3 words/s - loss: 0.4063
00:46:18 - process[9]: evaluating epoch 15 on dev ...
00:46:44 - dev set during evaluation: 11710/11707
00:46:44 - process[9] - dev - epoch 15 - mAP: 0.510 w/ 39 queries
00:46:45 - process[9]: evaluating epoch 15 on test ...
00:47:12 - test set during evaluation: 13490/13483
00:47:12 - process[9] - test - epoch 15 - mAP: 0.489 w/ 38 queries
00:47:12 - process[9]: training epoch 16 ...
00:47:29 - process[9] - epoch 16 - train iter 404 - 18506.4 words/s - loss: 0.3589
00:47:29 - process[9]: evaluating epoch 16 on dev ...
00:47:57 - dev set during evaluation: 11710/11707
00:47:57 - process[9] - dev - epoch 16 - mAP: 0.506 w/ 39 queries
00:47:57 - process[9]: training epoch 17 ...
00:48:16 - process[9] - epoch 17 - train iter 404 - 16324.1 words/s - loss: 0.3658
00:48:16 - process[9]: evaluating epoch 17 on dev ...
00:48:42 - dev set during evaluation: 11710/11707
00:48:42 - process[9] - dev - epoch 17 - mAP: 0.507 w/ 39 queries
00:48:42 - process[9]: training epoch 18 ...
00:49:01 - process[9] - epoch 18 - train iter 404 - 16865.2 words/s - loss: 0.3710
00:49:01 - process[9]: evaluating epoch 18 on dev ...
00:49:27 - dev set during evaluation: 11710/11707
00:49:27 - process[9] - dev - epoch 18 - mAP: 0.504 w/ 39 queries
00:49:27 - process[9]: training epoch 19 ...
00:49:45 - process[9] - epoch 19 - train iter 404 - 18187.4 words/s - loss: 0.3896
00:49:45 - process[9]: evaluating epoch 19 on dev ...
00:50:11 - dev set during evaluation: 11710/11707
00:50:11 - process[9] - dev - epoch 19 - mAP: 0.513 w/ 39 queries
00:50:11 - process[9]: evaluating epoch 19 on test ...
00:50:39 - test set during evaluation: 13490/13483
00:50:39 - process[9] - test - epoch 19 - mAP: 0.472 w/ 38 queries
00:50:39 - [fold 4] best test MAP: 0.472 @ epoch 19
00:50:39 - Evaluating every 1 epochs ...
00:50:39 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:40 - test has 38 queries ...
00:50:40 - Data reading done ...
00:50:42 - adding 9-th encoder to optimizer...
00:50:42 - adding 10-th encoder to optimizer...
00:50:42 - adding 11-th encoder to optimizer...
00:50:42 - process[9]: training epoch 0 ...
00:51:02 - process[9] - epoch 0 - train iter 444 - 18050.0 words/s - loss: 0.6635
00:51:02 - process[9]: training epoch 1 ...
00:51:20 - process[9] - epoch 1 - train iter 444 - 19370.8 words/s - loss: 0.5449
00:51:20 - process[9]: training epoch 2 ...
00:51:38 - process[9] - epoch 2 - train iter 444 - 19251.9 words/s - loss: 0.5097
00:51:38 - process[9]: training epoch 3 ...
00:51:57 - process[9] - epoch 3 - train iter 444 - 18421.3 words/s - loss: 0.5333
00:51:57 - process[9]: training epoch 4 ...
00:52:16 - process[9] - epoch 4 - train iter 444 - 18892.0 words/s - loss: 0.5125
00:52:16 - process[9]: training epoch 5 ...
00:52:34 - process[9] - epoch 5 - train iter 444 - 19697.8 words/s - loss: 0.4801
00:52:34 - process[9]: training epoch 6 ...
00:52:53 - process[9] - epoch 6 - train iter 444 - 18588.5 words/s - loss: 0.4884
00:52:53 - process[9]: training epoch 7 ...
00:53:12 - process[9] - epoch 7 - train iter 444 - 17979.6 words/s - loss: 0.4525
00:53:12 - process[9]: training epoch 8 ...
00:53:31 - process[9] - epoch 8 - train iter 444 - 18448.5 words/s - loss: 0.4623
00:53:31 - process[9]: training epoch 9 ...
00:53:50 - process[9] - epoch 9 - train iter 444 - 18675.7 words/s - loss: 0.4509
00:53:50 - process[9]: training epoch 10 ...
00:54:08 - process[9] - epoch 10 - train iter 444 - 19690.1 words/s - loss: 0.4428
00:54:08 - process[9]: evaluating epoch 10 on dev ...
00:54:36 - dev set during evaluation: 13490/13483
00:54:36 - process[9] - dev - epoch 10 - mAP: 0.507 w/ 38 queries
00:54:36 - process[9]: evaluating epoch 10 on test ...
00:55:08 - test set during evaluation: 13890/13887
00:55:08 - process[9] - test - epoch 10 - mAP: 0.469 w/ 38 queries
00:55:08 - process[9]: training epoch 11 ...
00:55:27 - process[9] - epoch 11 - train iter 444 - 19025.1 words/s - loss: 0.4403
00:55:27 - process[9]: evaluating epoch 11 on dev ...
00:55:56 - dev set during evaluation: 13490/13483
00:55:56 - process[9] - dev - epoch 11 - mAP: 0.468 w/ 38 queries
00:55:56 - process[9]: training epoch 12 ...
00:56:16 - process[9] - epoch 12 - train iter 444 - 17820.6 words/s - loss: 0.4357
00:56:16 - process[9]: evaluating epoch 12 on dev ...
00:56:43 - dev set during evaluation: 13490/13483
00:56:43 - process[9] - dev - epoch 12 - mAP: 0.465 w/ 38 queries
00:56:43 - process[9]: training epoch 13 ...
00:57:02 - process[9] - epoch 13 - train iter 444 - 18005.5 words/s - loss: 0.3876
00:57:02 - process[9]: evaluating epoch 13 on dev ...
00:57:29 - dev set during evaluation: 13490/13483
00:57:29 - process[9] - dev - epoch 13 - mAP: 0.505 w/ 38 queries
00:57:29 - process[9]: training epoch 14 ...
00:57:49 - process[9] - epoch 14 - train iter 444 - 17657.4 words/s - loss: 0.4053
00:57:49 - process[9]: evaluating epoch 14 on dev ...
00:58:17 - dev set during evaluation: 13490/13483
00:58:17 - process[9] - dev - epoch 14 - mAP: 0.475 w/ 38 queries
00:58:17 - process[9]: training epoch 15 ...
00:58:36 - process[9] - epoch 15 - train iter 444 - 18427.8 words/s - loss: 0.4066
00:58:36 - process[9]: evaluating epoch 15 on dev ...
00:59:02 - dev set during evaluation: 13490/13483
00:59:02 - process[9] - dev - epoch 15 - mAP: 0.497 w/ 38 queries
00:59:02 - process[9]: training epoch 16 ...
00:59:21 - process[9] - epoch 16 - train iter 444 - 19348.6 words/s - loss: 0.3856
00:59:21 - process[9]: evaluating epoch 16 on dev ...
00:59:49 - dev set during evaluation: 13490/13483
00:59:49 - process[9] - dev - epoch 16 - mAP: 0.472 w/ 38 queries
00:59:49 - process[9]: training epoch 17 ...
01:00:09 - process[9] - epoch 17 - train iter 444 - 17952.9 words/s - loss: 0.3943
01:00:09 - process[9]: evaluating epoch 17 on dev ...
01:00:36 - dev set during evaluation: 13490/13483
01:00:36 - process[9] - dev - epoch 17 - mAP: 0.490 w/ 38 queries
01:00:36 - process[9]: training epoch 18 ...
01:00:55 - process[9] - epoch 18 - train iter 444 - 18475.2 words/s - loss: 0.4148
01:00:55 - process[9]: evaluating epoch 18 on dev ...
01:01:22 - dev set during evaluation: 13490/13483
01:01:22 - process[9] - dev - epoch 18 - mAP: 0.458 w/ 38 queries
01:01:22 - process[9]: training epoch 19 ...
01:01:41 - process[9] - epoch 19 - train iter 444 - 18818.8 words/s - loss: 0.3893
01:01:41 - process[9]: evaluating epoch 19 on dev ...
01:02:09 - dev set during evaluation: 13490/13483
01:02:09 - process[9] - dev - epoch 19 - mAP: 0.486 w/ 38 queries
01:02:09 - [fold 5] best test MAP: 0.469 @ epoch 10
01:02:09 - [0.4122968783611108, 0.521235058918088, 0.504806553861309, 0.47181324904753186, 0.4685896547168986]
01:02:09 - [38, 39, 39, 38, 38]
01:02:09 - final MAP: 0.476
