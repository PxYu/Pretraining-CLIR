00:00:05 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='de')
00:00:16 - Evaluating every 1 epochs ...
00:00:16 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:18 - test has 38 queries ...
00:00:18 - Data reading done ...
00:00:25 - adding 9-th encoder to optimizer...
00:00:25 - adding 10-th encoder to optimizer...
00:00:25 - adding 11-th encoder to optimizer...
00:00:25 - process[8]: training epoch 0 ...
00:00:42 - process[8] - epoch 0 - train iter 423 - 20240.6 words/s - loss: 0.5938
00:00:42 - process[8]: training epoch 1 ...
00:00:59 - process[8] - epoch 1 - train iter 423 - 20110.8 words/s - loss: 0.5409
00:00:59 - process[8]: training epoch 2 ...
00:01:15 - process[8] - epoch 2 - train iter 423 - 20945.0 words/s - loss: 0.5190
00:01:15 - process[8]: training epoch 3 ...
00:01:30 - process[8] - epoch 3 - train iter 423 - 21726.6 words/s - loss: 0.5097
00:01:30 - process[8]: training epoch 4 ...
00:01:48 - process[8] - epoch 4 - train iter 423 - 19422.7 words/s - loss: 0.4652
00:01:48 - process[8]: training epoch 5 ...
00:02:03 - process[8] - epoch 5 - train iter 423 - 21788.8 words/s - loss: 0.4621
00:02:03 - process[8]: training epoch 6 ...
00:02:18 - process[8] - epoch 6 - train iter 423 - 21571.3 words/s - loss: 0.4202
00:02:18 - process[8]: training epoch 7 ...
00:02:34 - process[8] - epoch 7 - train iter 423 - 21016.2 words/s - loss: 0.4524
00:02:34 - process[8]: training epoch 8 ...
00:02:51 - process[8] - epoch 8 - train iter 423 - 19853.7 words/s - loss: 0.4324
00:02:51 - process[8]: training epoch 9 ...
00:03:07 - process[8] - epoch 9 - train iter 423 - 20303.0 words/s - loss: 0.4197
00:03:07 - process[8]: training epoch 10 ...
00:03:23 - process[8] - epoch 10 - train iter 423 - 20670.9 words/s - loss: 0.4358
00:03:23 - process[8]: evaluating epoch 10 on dev ...
00:03:55 - dev set during evaluation: 13890/13887
00:03:55 - process[8] - dev - epoch 10 - mAP: 0.442 w/ 38 queries
00:03:55 - process[8]: evaluating epoch 10 on test ...
00:04:25 - test set during evaluation: 15580/15574
00:04:25 - process[8] - test - epoch 10 - mAP: 0.391 w/ 38 queries
00:04:25 - process[8]: training epoch 11 ...
00:04:40 - process[8] - epoch 11 - train iter 423 - 22247.1 words/s - loss: 0.4332
00:04:40 - process[8]: evaluating epoch 11 on dev ...
00:05:09 - dev set during evaluation: 13890/13887
00:05:09 - process[8] - dev - epoch 11 - mAP: 0.425 w/ 38 queries
00:05:09 - process[8]: training epoch 12 ...
00:05:26 - process[8] - epoch 12 - train iter 423 - 19653.1 words/s - loss: 0.4140
00:05:26 - process[8]: evaluating epoch 12 on dev ...
00:05:55 - dev set during evaluation: 13890/13887
00:05:55 - process[8] - dev - epoch 12 - mAP: 0.455 w/ 38 queries
00:05:55 - process[8]: evaluating epoch 12 on test ...
00:06:25 - test set during evaluation: 15580/15574
00:06:25 - process[8] - test - epoch 12 - mAP: 0.394 w/ 38 queries
00:06:25 - process[8]: training epoch 13 ...
00:06:41 - process[8] - epoch 13 - train iter 423 - 20516.3 words/s - loss: 0.3853
00:06:41 - process[8]: evaluating epoch 13 on dev ...
00:07:10 - dev set during evaluation: 13890/13887
00:07:10 - process[8] - dev - epoch 13 - mAP: 0.444 w/ 38 queries
00:07:10 - process[8]: training epoch 14 ...
00:07:27 - process[8] - epoch 14 - train iter 423 - 19309.8 words/s - loss: 0.4276
00:07:27 - process[8]: evaluating epoch 14 on dev ...
00:07:55 - dev set during evaluation: 13890/13887
00:07:55 - process[8] - dev - epoch 14 - mAP: 0.437 w/ 38 queries
00:07:55 - process[8]: training epoch 15 ...
00:08:11 - process[8] - epoch 15 - train iter 423 - 20922.2 words/s - loss: 0.4132
00:08:11 - process[8]: evaluating epoch 15 on dev ...
00:08:41 - dev set during evaluation: 13890/13887
00:08:41 - process[8] - dev - epoch 15 - mAP: 0.445 w/ 38 queries
00:08:41 - process[8]: training epoch 16 ...
00:08:56 - process[8] - epoch 16 - train iter 423 - 22035.0 words/s - loss: 0.4011
00:08:56 - process[8]: evaluating epoch 16 on dev ...
00:09:25 - dev set during evaluation: 13890/13887
00:09:25 - process[8] - dev - epoch 16 - mAP: 0.474 w/ 38 queries
00:09:25 - process[8]: evaluating epoch 16 on test ...
00:09:55 - test set during evaluation: 15580/15574
00:09:55 - process[8] - test - epoch 16 - mAP: 0.410 w/ 38 queries
00:09:55 - process[8]: training epoch 17 ...
00:10:11 - process[8] - epoch 17 - train iter 423 - 20856.6 words/s - loss: 0.3682
00:10:11 - process[8]: evaluating epoch 17 on dev ...
00:10:41 - dev set during evaluation: 13890/13887
00:10:41 - process[8] - dev - epoch 17 - mAP: 0.456 w/ 38 queries
00:10:41 - process[8]: training epoch 18 ...
00:10:57 - process[8] - epoch 18 - train iter 423 - 20534.6 words/s - loss: 0.3716
00:10:57 - process[8]: evaluating epoch 18 on dev ...
00:11:26 - dev set during evaluation: 13890/13887
00:11:26 - process[8] - dev - epoch 18 - mAP: 0.448 w/ 38 queries
00:11:26 - process[8]: training epoch 19 ...
00:11:42 - process[8] - epoch 19 - train iter 423 - 20861.1 words/s - loss: 0.4055
00:11:42 - process[8]: evaluating epoch 19 on dev ...
00:12:11 - dev set during evaluation: 13890/13887
00:12:11 - process[8] - dev - epoch 19 - mAP: 0.462 w/ 38 queries
00:12:11 - [fold 1] best test MAP: 0.410 @ epoch 16
00:12:11 - Evaluating every 1 epochs ...
00:12:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:12 - test has 39 queries ...
00:12:12 - Data reading done ...
00:12:13 - adding 9-th encoder to optimizer...
00:12:13 - adding 10-th encoder to optimizer...
00:12:13 - adding 11-th encoder to optimizer...
00:12:14 - process[8]: training epoch 0 ...
00:12:31 - process[8] - epoch 0 - train iter 386 - 17297.0 words/s - loss: 0.5985
00:12:31 - process[8]: training epoch 1 ...
00:12:49 - process[8] - epoch 1 - train iter 386 - 17194.0 words/s - loss: 0.5329
00:12:49 - process[8]: training epoch 2 ...
00:13:05 - process[8] - epoch 2 - train iter 386 - 18068.3 words/s - loss: 0.4998
00:13:05 - process[8]: training epoch 3 ...
00:13:23 - process[8] - epoch 3 - train iter 386 - 17125.2 words/s - loss: 0.4851
00:13:23 - process[8]: training epoch 4 ...
00:13:42 - process[8] - epoch 4 - train iter 386 - 15574.0 words/s - loss: 0.4383
00:13:42 - process[8]: training epoch 5 ...
00:14:01 - process[8] - epoch 5 - train iter 386 - 16250.5 words/s - loss: 0.4357
00:14:01 - process[8]: training epoch 6 ...
00:14:19 - process[8] - epoch 6 - train iter 386 - 16808.2 words/s - loss: 0.4334
00:14:19 - process[8]: training epoch 7 ...
00:14:37 - process[8] - epoch 7 - train iter 386 - 16047.8 words/s - loss: 0.4726
00:14:37 - process[8]: training epoch 8 ...
00:14:55 - process[8] - epoch 8 - train iter 386 - 16867.4 words/s - loss: 0.4247
00:14:55 - process[8]: training epoch 9 ...
00:15:13 - process[8] - epoch 9 - train iter 386 - 16980.6 words/s - loss: 0.4264
00:15:13 - process[8]: training epoch 10 ...
00:15:30 - process[8] - epoch 10 - train iter 386 - 17057.9 words/s - loss: 0.4080
00:15:30 - process[8]: evaluating epoch 10 on dev ...
00:16:09 - dev set during evaluation: 15580/15574
00:16:09 - process[8] - dev - epoch 10 - mAP: 0.402 w/ 38 queries
00:16:09 - process[8]: evaluating epoch 10 on test ...
00:16:42 - test set during evaluation: 14340/14338
00:16:42 - process[8] - test - epoch 10 - mAP: 0.511 w/ 39 queries
00:16:42 - process[8]: training epoch 11 ...
00:17:00 - process[8] - epoch 11 - train iter 386 - 16878.4 words/s - loss: 0.4035
00:17:00 - process[8]: evaluating epoch 11 on dev ...
00:17:36 - dev set during evaluation: 15580/15574
00:17:36 - process[8] - dev - epoch 11 - mAP: 0.381 w/ 38 queries
00:17:36 - process[8]: training epoch 12 ...
00:17:54 - process[8] - epoch 12 - train iter 386 - 16455.3 words/s - loss: 0.3679
00:17:54 - process[8]: evaluating epoch 12 on dev ...
00:18:29 - dev set during evaluation: 15580/15574
00:18:29 - process[8] - dev - epoch 12 - mAP: 0.388 w/ 38 queries
00:18:29 - process[8]: training epoch 13 ...
00:18:47 - process[8] - epoch 13 - train iter 386 - 17241.2 words/s - loss: 0.4069
00:18:47 - process[8]: evaluating epoch 13 on dev ...
00:19:23 - dev set during evaluation: 15580/15574
00:19:23 - process[8] - dev - epoch 13 - mAP: 0.391 w/ 38 queries
00:19:23 - process[8]: training epoch 14 ...
00:19:42 - process[8] - epoch 14 - train iter 386 - 16134.1 words/s - loss: 0.3700
00:19:42 - process[8]: evaluating epoch 14 on dev ...
00:20:18 - dev set during evaluation: 15580/15574
00:20:18 - process[8] - dev - epoch 14 - mAP: 0.375 w/ 38 queries
00:20:18 - process[8]: training epoch 15 ...
00:20:36 - process[8] - epoch 15 - train iter 386 - 16502.0 words/s - loss: 0.4179
00:20:36 - process[8]: evaluating epoch 15 on dev ...
00:21:12 - dev set during evaluation: 15580/15574
00:21:12 - process[8] - dev - epoch 15 - mAP: 0.389 w/ 38 queries
00:21:12 - process[8]: training epoch 16 ...
00:21:31 - process[8] - epoch 16 - train iter 386 - 15825.9 words/s - loss: 0.3689
00:21:31 - process[8]: evaluating epoch 16 on dev ...
00:22:06 - dev set during evaluation: 15580/15574
00:22:06 - process[8] - dev - epoch 16 - mAP: 0.359 w/ 38 queries
00:22:06 - process[8]: training epoch 17 ...
00:22:25 - process[8] - epoch 17 - train iter 386 - 15785.3 words/s - loss: 0.3690
00:22:25 - process[8]: evaluating epoch 17 on dev ...
00:23:00 - dev set during evaluation: 15580/15574
00:23:00 - process[8] - dev - epoch 17 - mAP: 0.378 w/ 38 queries
00:23:00 - process[8]: training epoch 18 ...
00:23:17 - process[8] - epoch 18 - train iter 386 - 18147.5 words/s - loss: 0.4055
00:23:17 - process[8]: evaluating epoch 18 on dev ...
00:23:54 - dev set during evaluation: 15580/15574
00:23:54 - process[8] - dev - epoch 18 - mAP: 0.387 w/ 38 queries
00:23:54 - process[8]: training epoch 19 ...
00:24:12 - process[8] - epoch 19 - train iter 386 - 16365.7 words/s - loss: 0.3948
00:24:12 - process[8]: evaluating epoch 19 on dev ...
00:24:47 - dev set during evaluation: 15580/15574
00:24:47 - process[8] - dev - epoch 19 - mAP: 0.384 w/ 38 queries
00:24:47 - [fold 2] best test MAP: 0.511 @ epoch 10
00:24:47 - Evaluating every 1 epochs ...
00:24:47 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:24:48 - test has 39 queries ...
00:24:48 - Data reading done ...
00:24:50 - adding 9-th encoder to optimizer...
00:24:50 - adding 10-th encoder to optimizer...
00:24:50 - adding 11-th encoder to optimizer...
00:24:51 - process[8]: training epoch 0 ...
00:25:07 - process[8] - epoch 0 - train iter 360 - 17124.7 words/s - loss: 0.6097
00:25:07 - process[8]: training epoch 1 ...
00:25:24 - process[8] - epoch 1 - train iter 360 - 16426.7 words/s - loss: 0.5446
00:25:24 - process[8]: training epoch 2 ...
00:25:42 - process[8] - epoch 2 - train iter 360 - 15918.3 words/s - loss: 0.4937
00:25:42 - process[8]: training epoch 3 ...
00:26:01 - process[8] - epoch 3 - train iter 360 - 15109.6 words/s - loss: 0.5221
00:26:01 - process[8]: training epoch 4 ...
00:26:19 - process[8] - epoch 4 - train iter 360 - 15946.6 words/s - loss: 0.5155
00:26:19 - process[8]: training epoch 5 ...
00:26:35 - process[8] - epoch 5 - train iter 360 - 17504.7 words/s - loss: 0.4715
00:26:35 - process[8]: training epoch 6 ...
00:26:52 - process[8] - epoch 6 - train iter 360 - 16143.4 words/s - loss: 0.4295
00:26:52 - process[8]: training epoch 7 ...
00:27:10 - process[8] - epoch 7 - train iter 360 - 16089.6 words/s - loss: 0.4630
00:27:10 - process[8]: training epoch 8 ...
00:27:26 - process[8] - epoch 8 - train iter 360 - 17129.9 words/s - loss: 0.4186
00:27:26 - process[8]: training epoch 9 ...
00:27:42 - process[8] - epoch 9 - train iter 360 - 17746.2 words/s - loss: 0.3986
00:27:42 - process[8]: training epoch 10 ...
00:28:02 - process[8] - epoch 10 - train iter 360 - 14385.8 words/s - loss: 0.4439
00:28:02 - process[8]: evaluating epoch 10 on dev ...
00:28:42 - dev set during evaluation: 14340/14338
00:28:42 - process[8] - dev - epoch 10 - mAP: 0.506 w/ 39 queries
00:28:42 - process[8]: evaluating epoch 10 on test ...
00:29:11 - test set during evaluation: 11710/11707
00:29:11 - process[8] - test - epoch 10 - mAP: 0.504 w/ 39 queries
00:29:11 - process[8]: training epoch 11 ...
00:29:27 - process[8] - epoch 11 - train iter 360 - 17893.3 words/s - loss: 0.4178
00:29:27 - process[8]: evaluating epoch 11 on dev ...
00:30:02 - dev set during evaluation: 14340/14338
00:30:02 - process[8] - dev - epoch 11 - mAP: 0.508 w/ 39 queries
00:30:02 - process[8]: evaluating epoch 11 on test ...
00:30:31 - test set during evaluation: 11710/11707
00:30:31 - process[8] - test - epoch 11 - mAP: 0.498 w/ 39 queries
00:30:31 - process[8]: training epoch 12 ...
00:30:49 - process[8] - epoch 12 - train iter 360 - 16792.9 words/s - loss: 0.4347
00:30:49 - process[8]: evaluating epoch 12 on dev ...
00:31:21 - dev set during evaluation: 14340/14338
00:31:21 - process[8] - dev - epoch 12 - mAP: 0.527 w/ 39 queries
00:31:21 - process[8]: evaluating epoch 12 on test ...
00:31:50 - test set during evaluation: 11710/11707
00:31:50 - process[8] - test - epoch 12 - mAP: 0.509 w/ 39 queries
00:31:50 - process[8]: training epoch 13 ...
00:32:07 - process[8] - epoch 13 - train iter 360 - 16167.2 words/s - loss: 0.3819
00:32:07 - process[8]: evaluating epoch 13 on dev ...
00:32:40 - dev set during evaluation: 14340/14338
00:32:40 - process[8] - dev - epoch 13 - mAP: 0.521 w/ 39 queries
00:32:40 - process[8]: training epoch 14 ...
00:32:58 - process[8] - epoch 14 - train iter 360 - 16362.6 words/s - loss: 0.4430
00:32:58 - process[8]: evaluating epoch 14 on dev ...
00:33:31 - dev set during evaluation: 14340/14338
00:33:31 - process[8] - dev - epoch 14 - mAP: 0.509 w/ 39 queries
00:33:31 - process[8]: training epoch 15 ...
00:33:48 - process[8] - epoch 15 - train iter 360 - 15803.0 words/s - loss: 0.3896
00:33:48 - process[8]: evaluating epoch 15 on dev ...
00:34:20 - dev set during evaluation: 14340/14338
00:34:20 - process[8] - dev - epoch 15 - mAP: 0.519 w/ 39 queries
00:34:20 - process[8]: training epoch 16 ...
00:34:36 - process[8] - epoch 16 - train iter 360 - 17919.7 words/s - loss: 0.3703
00:34:36 - process[8]: evaluating epoch 16 on dev ...
00:35:11 - dev set during evaluation: 14340/14338
00:35:11 - process[8] - dev - epoch 16 - mAP: 0.521 w/ 39 queries
00:35:11 - process[8]: training epoch 17 ...
00:35:26 - process[8] - epoch 17 - train iter 360 - 17873.8 words/s - loss: 0.3962
00:35:26 - process[8]: evaluating epoch 17 on dev ...
00:36:02 - dev set during evaluation: 14340/14338
00:36:02 - process[8] - dev - epoch 17 - mAP: 0.508 w/ 39 queries
00:36:02 - process[8]: training epoch 18 ...
00:36:20 - process[8] - epoch 18 - train iter 360 - 15522.0 words/s - loss: 0.3998
00:36:20 - process[8]: evaluating epoch 18 on dev ...
00:36:55 - dev set during evaluation: 14340/14338
00:36:55 - process[8] - dev - epoch 18 - mAP: 0.514 w/ 39 queries
00:36:55 - process[8]: training epoch 19 ...
00:37:13 - process[8] - epoch 19 - train iter 360 - 15999.4 words/s - loss: 0.3485
00:37:13 - process[8]: evaluating epoch 19 on dev ...
00:37:45 - dev set during evaluation: 14340/14338
00:37:45 - process[8] - dev - epoch 19 - mAP: 0.497 w/ 39 queries
00:37:45 - [fold 3] best test MAP: 0.509 @ epoch 12
00:37:45 - Evaluating every 1 epochs ...
00:37:45 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:37:47 - test has 38 queries ...
00:37:47 - Data reading done ...
00:37:48 - adding 9-th encoder to optimizer...
00:37:48 - adding 10-th encoder to optimizer...
00:37:48 - adding 11-th encoder to optimizer...
00:37:49 - process[8]: training epoch 0 ...
00:38:08 - process[8] - epoch 0 - train iter 404 - 16623.0 words/s - loss: 0.6252
00:38:08 - process[8]: training epoch 1 ...
00:38:26 - process[8] - epoch 1 - train iter 404 - 17065.0 words/s - loss: 0.5470
00:38:26 - process[8]: training epoch 2 ...
00:38:43 - process[8] - epoch 2 - train iter 404 - 18595.8 words/s - loss: 0.5397
00:38:43 - process[8]: training epoch 3 ...
00:39:01 - process[8] - epoch 3 - train iter 404 - 18561.7 words/s - loss: 0.4995
00:39:01 - process[8]: training epoch 4 ...
00:39:19 - process[8] - epoch 4 - train iter 404 - 17240.2 words/s - loss: 0.4671
00:39:19 - process[8]: training epoch 5 ...
00:39:38 - process[8] - epoch 5 - train iter 404 - 16776.9 words/s - loss: 0.4541
00:39:38 - process[8]: training epoch 6 ...
00:39:55 - process[8] - epoch 6 - train iter 404 - 18066.1 words/s - loss: 0.4610
00:39:55 - process[8]: training epoch 7 ...
00:40:13 - process[8] - epoch 7 - train iter 404 - 17526.5 words/s - loss: 0.4496
00:40:13 - process[8]: training epoch 8 ...
00:40:31 - process[8] - epoch 8 - train iter 404 - 18296.0 words/s - loss: 0.4357
00:40:31 - process[8]: training epoch 9 ...
00:40:49 - process[8] - epoch 9 - train iter 404 - 18108.6 words/s - loss: 0.4236
00:40:49 - process[8]: training epoch 10 ...
00:41:06 - process[8] - epoch 10 - train iter 404 - 18484.0 words/s - loss: 0.4245
00:41:06 - process[8]: evaluating epoch 10 on dev ...
00:41:33 - dev set during evaluation: 11710/11707
00:41:33 - process[8] - dev - epoch 10 - mAP: 0.475 w/ 39 queries
00:41:33 - process[8]: evaluating epoch 10 on test ...
00:42:01 - test set during evaluation: 13490/13483
00:42:01 - process[8] - test - epoch 10 - mAP: 0.471 w/ 38 queries
00:42:01 - process[8]: training epoch 11 ...
00:42:20 - process[8] - epoch 11 - train iter 404 - 16686.1 words/s - loss: 0.4336
00:42:20 - process[8]: evaluating epoch 11 on dev ...
00:42:47 - dev set during evaluation: 11710/11707
00:42:47 - process[8] - dev - epoch 11 - mAP: 0.456 w/ 39 queries
00:42:47 - process[8]: training epoch 12 ...
00:43:04 - process[8] - epoch 12 - train iter 404 - 18889.7 words/s - loss: 0.4461
00:43:04 - process[8]: evaluating epoch 12 on dev ...
00:43:32 - dev set during evaluation: 11710/11707
00:43:32 - process[8] - dev - epoch 12 - mAP: 0.496 w/ 39 queries
00:43:32 - process[8]: evaluating epoch 12 on test ...
00:44:00 - test set during evaluation: 13490/13483
00:44:00 - process[8] - test - epoch 12 - mAP: 0.494 w/ 38 queries
00:44:00 - process[8]: training epoch 13 ...
00:44:19 - process[8] - epoch 13 - train iter 404 - 16708.5 words/s - loss: 0.3920
00:44:19 - process[8]: evaluating epoch 13 on dev ...
00:44:45 - dev set during evaluation: 11710/11707
00:44:45 - process[8] - dev - epoch 13 - mAP: 0.493 w/ 39 queries
00:44:45 - process[8]: training epoch 14 ...
00:45:02 - process[8] - epoch 14 - train iter 404 - 17878.2 words/s - loss: 0.4090
00:45:02 - process[8]: evaluating epoch 14 on dev ...
00:45:30 - dev set during evaluation: 11710/11707
00:45:30 - process[8] - dev - epoch 14 - mAP: 0.498 w/ 39 queries
00:45:30 - process[8]: evaluating epoch 14 on test ...
00:45:58 - test set during evaluation: 13490/13483
00:45:58 - process[8] - test - epoch 14 - mAP: 0.469 w/ 38 queries
00:45:58 - process[8]: training epoch 15 ...
00:46:16 - process[8] - epoch 15 - train iter 404 - 17012.3 words/s - loss: 0.3784
00:46:16 - process[8]: evaluating epoch 15 on dev ...
00:46:43 - dev set during evaluation: 11710/11707
00:46:43 - process[8] - dev - epoch 15 - mAP: 0.509 w/ 39 queries
00:46:43 - process[8]: evaluating epoch 15 on test ...
00:47:10 - test set during evaluation: 13490/13483
00:47:10 - process[8] - test - epoch 15 - mAP: 0.485 w/ 38 queries
00:47:10 - process[8]: training epoch 16 ...
00:47:30 - process[8] - epoch 16 - train iter 404 - 16166.9 words/s - loss: 0.3985
00:47:30 - process[8]: evaluating epoch 16 on dev ...
00:47:56 - dev set during evaluation: 11710/11707
00:47:56 - process[8] - dev - epoch 16 - mAP: 0.488 w/ 39 queries
00:47:56 - process[8]: training epoch 17 ...
00:48:14 - process[8] - epoch 17 - train iter 404 - 17662.8 words/s - loss: 0.3855
00:48:14 - process[8]: evaluating epoch 17 on dev ...
00:48:41 - dev set during evaluation: 11710/11707
00:48:41 - process[8] - dev - epoch 17 - mAP: 0.501 w/ 39 queries
00:48:41 - process[8]: training epoch 18 ...
00:48:57 - process[8] - epoch 18 - train iter 404 - 19214.4 words/s - loss: 0.3487
00:48:57 - process[8]: evaluating epoch 18 on dev ...
00:49:26 - dev set during evaluation: 11710/11707
00:49:26 - process[8] - dev - epoch 18 - mAP: 0.506 w/ 39 queries
00:49:26 - process[8]: training epoch 19 ...
00:49:44 - process[8] - epoch 19 - train iter 404 - 17086.4 words/s - loss: 0.3845
00:49:44 - process[8]: evaluating epoch 19 on dev ...
00:50:11 - dev set during evaluation: 11710/11707
00:50:11 - process[8] - dev - epoch 19 - mAP: 0.503 w/ 39 queries
00:50:11 - [fold 4] best test MAP: 0.485 @ epoch 15
00:50:11 - Evaluating every 1 epochs ...
00:50:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:12 - test has 38 queries ...
00:50:12 - Data reading done ...
00:50:13 - adding 9-th encoder to optimizer...
00:50:13 - adding 10-th encoder to optimizer...
00:50:13 - adding 11-th encoder to optimizer...
00:50:14 - process[8]: training epoch 0 ...
00:50:32 - process[8] - epoch 0 - train iter 444 - 18895.3 words/s - loss: 0.6328
00:50:32 - process[8]: training epoch 1 ...
00:50:49 - process[8] - epoch 1 - train iter 444 - 20291.3 words/s - loss: 0.5388
00:50:49 - process[8]: training epoch 2 ...
00:51:08 - process[8] - epoch 2 - train iter 444 - 19256.2 words/s - loss: 0.5483
00:51:08 - process[8]: training epoch 3 ...
00:51:27 - process[8] - epoch 3 - train iter 444 - 19325.5 words/s - loss: 0.5054
00:51:27 - process[8]: training epoch 4 ...
00:51:46 - process[8] - epoch 4 - train iter 444 - 18049.7 words/s - loss: 0.5029
00:51:46 - process[8]: training epoch 5 ...
00:52:04 - process[8] - epoch 5 - train iter 444 - 19172.4 words/s - loss: 0.4873
00:52:04 - process[8]: training epoch 6 ...
00:52:23 - process[8] - epoch 6 - train iter 444 - 18869.1 words/s - loss: 0.4760
00:52:23 - process[8]: training epoch 7 ...
00:52:41 - process[8] - epoch 7 - train iter 444 - 19438.0 words/s - loss: 0.4626
00:52:41 - process[8]: training epoch 8 ...
00:52:59 - process[8] - epoch 8 - train iter 444 - 19580.3 words/s - loss: 0.4174
00:52:59 - process[8]: training epoch 9 ...
00:53:17 - process[8] - epoch 9 - train iter 444 - 19423.9 words/s - loss: 0.4588
00:53:17 - process[8]: training epoch 10 ...
00:53:35 - process[8] - epoch 10 - train iter 444 - 19539.3 words/s - loss: 0.4360
00:53:35 - process[8]: evaluating epoch 10 on dev ...
00:54:09 - dev set during evaluation: 13490/13483
00:54:09 - process[8] - dev - epoch 10 - mAP: 0.484 w/ 38 queries
00:54:09 - process[8]: evaluating epoch 10 on test ...
00:54:41 - test set during evaluation: 13890/13887
00:54:41 - process[8] - test - epoch 10 - mAP: 0.480 w/ 38 queries
00:54:41 - process[8]: training epoch 11 ...
00:55:01 - process[8] - epoch 11 - train iter 444 - 17440.2 words/s - loss: 0.4227
00:55:01 - process[8]: evaluating epoch 11 on dev ...
00:55:28 - dev set during evaluation: 13490/13483
00:55:28 - process[8] - dev - epoch 11 - mAP: 0.480 w/ 38 queries
00:55:28 - process[8]: training epoch 12 ...
00:55:46 - process[8] - epoch 12 - train iter 444 - 19997.2 words/s - loss: 0.4186
00:55:46 - process[8]: evaluating epoch 12 on dev ...
00:56:14 - dev set during evaluation: 13490/13483
00:56:14 - process[8] - dev - epoch 12 - mAP: 0.457 w/ 38 queries
00:56:14 - process[8]: training epoch 13 ...
00:56:33 - process[8] - epoch 13 - train iter 444 - 19008.7 words/s - loss: 0.4403
00:56:33 - process[8]: evaluating epoch 13 on dev ...
00:57:00 - dev set during evaluation: 13490/13483
00:57:00 - process[8] - dev - epoch 13 - mAP: 0.430 w/ 38 queries
00:57:00 - process[8]: training epoch 14 ...
00:57:19 - process[8] - epoch 14 - train iter 444 - 18241.2 words/s - loss: 0.4531
00:57:19 - process[8]: evaluating epoch 14 on dev ...
00:57:47 - dev set during evaluation: 13490/13483
00:57:47 - process[8] - dev - epoch 14 - mAP: 0.481 w/ 38 queries
00:57:47 - process[8]: training epoch 15 ...
00:58:05 - process[8] - epoch 15 - train iter 444 - 19741.0 words/s - loss: 0.3975
00:58:05 - process[8]: evaluating epoch 15 on dev ...
00:58:33 - dev set during evaluation: 13490/13483
00:58:33 - process[8] - dev - epoch 15 - mAP: 0.476 w/ 38 queries
00:58:33 - process[8]: training epoch 16 ...
00:58:52 - process[8] - epoch 16 - train iter 444 - 19532.2 words/s - loss: 0.3992
00:58:52 - process[8]: evaluating epoch 16 on dev ...
00:59:21 - dev set during evaluation: 13490/13483
00:59:21 - process[8] - dev - epoch 16 - mAP: 0.466 w/ 38 queries
00:59:21 - process[8]: training epoch 17 ...
00:59:39 - process[8] - epoch 17 - train iter 444 - 19413.1 words/s - loss: 0.3723
00:59:39 - process[8]: evaluating epoch 17 on dev ...
01:00:07 - dev set during evaluation: 13490/13483
01:00:07 - process[8] - dev - epoch 17 - mAP: 0.471 w/ 38 queries
01:00:07 - process[8]: training epoch 18 ...
01:00:25 - process[8] - epoch 18 - train iter 444 - 19999.8 words/s - loss: 0.3815
01:00:25 - process[8]: evaluating epoch 18 on dev ...
01:00:54 - dev set during evaluation: 13490/13483
01:00:54 - process[8] - dev - epoch 18 - mAP: 0.470 w/ 38 queries
01:00:54 - process[8]: training epoch 19 ...
01:01:13 - process[8] - epoch 19 - train iter 444 - 18554.4 words/s - loss: 0.3563
01:01:13 - process[8]: evaluating epoch 19 on dev ...
01:01:41 - dev set during evaluation: 13490/13483
01:01:41 - process[8] - dev - epoch 19 - mAP: 0.479 w/ 38 queries
01:01:41 - [fold 5] best test MAP: 0.480 @ epoch 10
01:01:41 - [0.410257981628757, 0.5107940353954925, 0.5093044629100162, 0.48539238320475747, 0.4796698239336447]
01:01:41 - [38, 39, 39, 38, 38]
01:01:41 - final MAP: 0.479
00:00:07 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='de')
00:00:17 - Evaluating every 1 epochs ...
00:00:17 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:18 - test has 38 queries ...
00:00:18 - Data reading done ...
00:00:25 - adding 9-th encoder to optimizer...
00:00:25 - adding 10-th encoder to optimizer...
00:00:25 - adding 11-th encoder to optimizer...
00:00:25 - process[8]: training epoch 0 ...
00:00:42 - process[8] - epoch 0 - train iter 423 - 19857.4 words/s - loss: 0.5938
00:00:42 - process[8]: training epoch 1 ...
00:00:59 - process[8] - epoch 1 - train iter 423 - 19844.6 words/s - loss: 0.5409
00:00:59 - process[8]: training epoch 2 ...
00:01:16 - process[8] - epoch 2 - train iter 423 - 20635.0 words/s - loss: 0.5190
00:01:16 - process[8]: training epoch 3 ...
00:01:31 - process[8] - epoch 3 - train iter 423 - 21484.3 words/s - loss: 0.5097
00:01:31 - process[8]: training epoch 4 ...
00:01:49 - process[8] - epoch 4 - train iter 423 - 19310.7 words/s - loss: 0.4652
00:01:49 - process[8]: training epoch 5 ...
00:02:04 - process[8] - epoch 5 - train iter 423 - 21566.2 words/s - loss: 0.4621
00:02:04 - process[8]: training epoch 6 ...
00:02:19 - process[8] - epoch 6 - train iter 423 - 21394.7 words/s - loss: 0.4202
00:02:19 - process[8]: training epoch 7 ...
00:02:36 - process[8] - epoch 7 - train iter 423 - 20811.3 words/s - loss: 0.4524
00:02:36 - process[8]: training epoch 8 ...
00:02:52 - process[8] - epoch 8 - train iter 423 - 19758.1 words/s - loss: 0.4324
00:02:52 - process[8]: training epoch 9 ...
00:03:09 - process[8] - epoch 9 - train iter 423 - 20169.2 words/s - loss: 0.4197
00:03:09 - process[8]: training epoch 10 ...
00:03:25 - process[8] - epoch 10 - train iter 423 - 20549.2 words/s - loss: 0.4358
00:03:25 - process[8]: evaluating epoch 10 on dev ...
00:03:56 - dev set during evaluation: 13890/13887
00:03:56 - process[8] - dev - epoch 10 - mAP: 0.442 w/ 38 queries
00:03:56 - process[8]: evaluating epoch 10 on test ...
00:04:26 - test set during evaluation: 15580/15574
00:04:26 - process[8] - test - epoch 10 - mAP: 0.391 w/ 38 queries
00:04:26 - process[8]: training epoch 11 ...
00:04:41 - process[8] - epoch 11 - train iter 423 - 22096.7 words/s - loss: 0.4332
00:04:41 - process[8]: evaluating epoch 11 on dev ...
00:05:12 - dev set during evaluation: 13890/13887
00:05:12 - process[8] - dev - epoch 11 - mAP: 0.425 w/ 38 queries
00:05:12 - process[8]: training epoch 12 ...
00:05:29 - process[8] - epoch 12 - train iter 423 - 19622.1 words/s - loss: 0.4140
00:05:29 - process[8]: evaluating epoch 12 on dev ...
00:05:57 - dev set during evaluation: 13890/13887
00:05:57 - process[8] - dev - epoch 12 - mAP: 0.455 w/ 38 queries
00:05:57 - process[8]: evaluating epoch 12 on test ...
00:06:27 - test set during evaluation: 15580/15574
00:06:27 - process[8] - test - epoch 12 - mAP: 0.394 w/ 38 queries
00:06:27 - process[8]: training epoch 13 ...
00:06:43 - process[8] - epoch 13 - train iter 423 - 20570.8 words/s - loss: 0.3853
00:06:43 - process[8]: evaluating epoch 13 on dev ...
00:07:12 - dev set during evaluation: 13890/13887
00:07:12 - process[8] - dev - epoch 13 - mAP: 0.444 w/ 38 queries
00:07:12 - process[8]: training epoch 14 ...
00:07:29 - process[8] - epoch 14 - train iter 423 - 19339.7 words/s - loss: 0.4276
00:07:29 - process[8]: evaluating epoch 14 on dev ...
00:07:58 - dev set during evaluation: 13890/13887
00:07:58 - process[8] - dev - epoch 14 - mAP: 0.437 w/ 38 queries
00:07:58 - process[8]: training epoch 15 ...
00:08:14 - process[8] - epoch 15 - train iter 423 - 20929.2 words/s - loss: 0.4132
00:08:14 - process[8]: evaluating epoch 15 on dev ...
00:08:44 - dev set during evaluation: 13890/13887
00:08:44 - process[8] - dev - epoch 15 - mAP: 0.445 w/ 38 queries
00:08:44 - process[8]: training epoch 16 ...
00:08:59 - process[8] - epoch 16 - train iter 423 - 21868.1 words/s - loss: 0.4011
00:08:59 - process[8]: evaluating epoch 16 on dev ...
00:09:29 - dev set during evaluation: 13890/13887
00:09:29 - process[8] - dev - epoch 16 - mAP: 0.474 w/ 38 queries
00:09:29 - process[8]: evaluating epoch 16 on test ...
00:09:59 - test set during evaluation: 15580/15574
00:09:59 - process[8] - test - epoch 16 - mAP: 0.410 w/ 38 queries
00:09:59 - process[8]: training epoch 17 ...
00:10:14 - process[8] - epoch 17 - train iter 423 - 20800.6 words/s - loss: 0.3682
00:10:14 - process[8]: evaluating epoch 17 on dev ...
00:10:44 - dev set during evaluation: 13890/13887
00:10:44 - process[8] - dev - epoch 17 - mAP: 0.456 w/ 38 queries
00:10:44 - process[8]: training epoch 18 ...
00:11:00 - process[8] - epoch 18 - train iter 423 - 20409.2 words/s - loss: 0.3716
00:11:00 - process[8]: evaluating epoch 18 on dev ...
00:11:29 - dev set during evaluation: 13890/13887
00:11:29 - process[8] - dev - epoch 18 - mAP: 0.448 w/ 38 queries
00:11:29 - process[8]: training epoch 19 ...
00:11:45 - process[8] - epoch 19 - train iter 423 - 20915.8 words/s - loss: 0.4055
00:11:45 - process[8]: evaluating epoch 19 on dev ...
00:12:14 - dev set during evaluation: 13890/13887
00:12:14 - process[8] - dev - epoch 19 - mAP: 0.462 w/ 38 queries
00:12:14 - [fold 1] best test MAP: 0.410 @ epoch 16
00:12:14 - Evaluating every 1 epochs ...
00:12:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:15 - test has 39 queries ...
00:12:15 - Data reading done ...
00:12:17 - adding 9-th encoder to optimizer...
00:12:17 - adding 10-th encoder to optimizer...
00:12:17 - adding 11-th encoder to optimizer...
00:12:17 - process[8]: training epoch 0 ...
00:12:35 - process[8] - epoch 0 - train iter 386 - 17134.4 words/s - loss: 0.5985
00:12:35 - process[8]: training epoch 1 ...
00:12:52 - process[8] - epoch 1 - train iter 386 - 17148.3 words/s - loss: 0.5329
00:12:52 - process[8]: training epoch 2 ...
00:13:09 - process[8] - epoch 2 - train iter 386 - 18018.1 words/s - loss: 0.4998
00:13:09 - process[8]: training epoch 3 ...
00:13:26 - process[8] - epoch 3 - train iter 386 - 16985.3 words/s - loss: 0.4851
00:13:26 - process[8]: training epoch 4 ...
00:13:46 - process[8] - epoch 4 - train iter 386 - 15506.8 words/s - loss: 0.4383
00:13:46 - process[8]: training epoch 5 ...
00:14:05 - process[8] - epoch 5 - train iter 386 - 16201.6 words/s - loss: 0.4357
00:14:05 - process[8]: training epoch 6 ...
00:14:22 - process[8] - epoch 6 - train iter 386 - 16711.5 words/s - loss: 0.4334
00:14:22 - process[8]: training epoch 7 ...
00:14:41 - process[8] - epoch 7 - train iter 386 - 16107.9 words/s - loss: 0.4726
00:14:41 - process[8]: training epoch 8 ...
00:14:59 - process[8] - epoch 8 - train iter 386 - 16836.0 words/s - loss: 0.4247
00:14:59 - process[8]: training epoch 9 ...
00:15:17 - process[8] - epoch 9 - train iter 386 - 17024.2 words/s - loss: 0.4264
00:15:17 - process[8]: training epoch 10 ...
00:15:34 - process[8] - epoch 10 - train iter 386 - 17137.0 words/s - loss: 0.4080
00:15:34 - process[8]: evaluating epoch 10 on dev ...
00:16:14 - dev set during evaluation: 15580/15574
00:16:14 - process[8] - dev - epoch 10 - mAP: 0.402 w/ 38 queries
00:16:14 - process[8]: evaluating epoch 10 on test ...
00:16:47 - test set during evaluation: 14340/14338
00:16:47 - process[8] - test - epoch 10 - mAP: 0.511 w/ 39 queries
00:16:47 - process[8]: training epoch 11 ...
00:17:05 - process[8] - epoch 11 - train iter 386 - 16706.7 words/s - loss: 0.4035
00:17:05 - process[8]: evaluating epoch 11 on dev ...
00:17:41 - dev set during evaluation: 15580/15574
00:17:41 - process[8] - dev - epoch 11 - mAP: 0.381 w/ 38 queries
00:17:41 - process[8]: training epoch 12 ...
00:17:59 - process[8] - epoch 12 - train iter 386 - 16467.4 words/s - loss: 0.3679
00:17:59 - process[8]: evaluating epoch 12 on dev ...
00:18:34 - dev set during evaluation: 15580/15574
00:18:34 - process[8] - dev - epoch 12 - mAP: 0.388 w/ 38 queries
00:18:34 - process[8]: training epoch 13 ...
00:18:52 - process[8] - epoch 13 - train iter 386 - 17170.1 words/s - loss: 0.4069
00:18:52 - process[8]: evaluating epoch 13 on dev ...
00:19:29 - dev set during evaluation: 15580/15574
00:19:29 - process[8] - dev - epoch 13 - mAP: 0.391 w/ 38 queries
00:19:29 - process[8]: training epoch 14 ...
00:19:48 - process[8] - epoch 14 - train iter 386 - 16141.3 words/s - loss: 0.3700
00:19:48 - process[8]: evaluating epoch 14 on dev ...
00:20:23 - dev set during evaluation: 15580/15574
00:20:23 - process[8] - dev - epoch 14 - mAP: 0.375 w/ 38 queries
00:20:23 - process[8]: training epoch 15 ...
00:20:42 - process[8] - epoch 15 - train iter 386 - 16340.5 words/s - loss: 0.4179
00:20:42 - process[8]: evaluating epoch 15 on dev ...
00:21:17 - dev set during evaluation: 15580/15574
00:21:17 - process[8] - dev - epoch 15 - mAP: 0.389 w/ 38 queries
00:21:17 - process[8]: training epoch 16 ...
00:21:37 - process[8] - epoch 16 - train iter 386 - 15826.8 words/s - loss: 0.3689
00:21:37 - process[8]: evaluating epoch 16 on dev ...
00:22:11 - dev set during evaluation: 15580/15574
00:22:11 - process[8] - dev - epoch 16 - mAP: 0.359 w/ 38 queries
00:22:11 - process[8]: training epoch 17 ...
00:22:29 - process[8] - epoch 17 - train iter 386 - 15986.1 words/s - loss: 0.3690
00:22:29 - process[8]: evaluating epoch 17 on dev ...
00:23:05 - dev set during evaluation: 15580/15574
00:23:05 - process[8] - dev - epoch 17 - mAP: 0.378 w/ 38 queries
00:23:05 - process[8]: training epoch 18 ...
00:23:21 - process[8] - epoch 18 - train iter 386 - 18063.6 words/s - loss: 0.4055
00:23:21 - process[8]: evaluating epoch 18 on dev ...
00:23:59 - dev set during evaluation: 15580/15574
00:23:59 - process[8] - dev - epoch 18 - mAP: 0.387 w/ 38 queries
00:23:59 - process[8]: training epoch 19 ...
00:24:17 - process[8] - epoch 19 - train iter 386 - 16362.8 words/s - loss: 0.3948
00:24:17 - process[8]: evaluating epoch 19 on dev ...
00:24:53 - dev set during evaluation: 15580/15574
00:24:53 - process[8] - dev - epoch 19 - mAP: 0.384 w/ 38 queries
00:24:53 - [fold 2] best test MAP: 0.511 @ epoch 10
00:24:53 - Evaluating every 1 epochs ...
00:24:53 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:24:54 - test has 39 queries ...
00:24:54 - Data reading done ...
00:24:56 - adding 9-th encoder to optimizer...
00:24:56 - adding 10-th encoder to optimizer...
00:24:56 - adding 11-th encoder to optimizer...
00:24:56 - process[8]: training epoch 0 ...
00:25:13 - process[8] - epoch 0 - train iter 360 - 17173.2 words/s - loss: 0.6097
00:25:13 - process[8]: training epoch 1 ...
00:25:30 - process[8] - epoch 1 - train iter 360 - 16360.6 words/s - loss: 0.5446
00:25:30 - process[8]: training epoch 2 ...
00:25:48 - process[8] - epoch 2 - train iter 360 - 15761.5 words/s - loss: 0.4937
00:25:48 - process[8]: training epoch 3 ...
00:26:07 - process[8] - epoch 3 - train iter 360 - 14989.5 words/s - loss: 0.5221
00:26:07 - process[8]: training epoch 4 ...
00:26:25 - process[8] - epoch 4 - train iter 360 - 15831.4 words/s - loss: 0.5155
00:26:25 - process[8]: training epoch 5 ...
00:26:41 - process[8] - epoch 5 - train iter 360 - 17396.9 words/s - loss: 0.4715
00:26:41 - process[8]: training epoch 6 ...
00:26:59 - process[8] - epoch 6 - train iter 360 - 16033.5 words/s - loss: 0.4295
00:26:59 - process[8]: training epoch 7 ...
00:27:16 - process[8] - epoch 7 - train iter 360 - 15982.6 words/s - loss: 0.4630
00:27:16 - process[8]: training epoch 8 ...
00:27:33 - process[8] - epoch 8 - train iter 360 - 17103.3 words/s - loss: 0.4186
00:27:33 - process[8]: training epoch 9 ...
00:27:49 - process[8] - epoch 9 - train iter 360 - 17642.4 words/s - loss: 0.3986
00:27:49 - process[8]: training epoch 10 ...
00:28:08 - process[8] - epoch 10 - train iter 360 - 14236.0 words/s - loss: 0.4439
00:28:08 - process[8]: evaluating epoch 10 on dev ...
00:28:50 - dev set during evaluation: 14340/14338
00:28:50 - process[8] - dev - epoch 10 - mAP: 0.506 w/ 39 queries
00:28:50 - process[8]: evaluating epoch 10 on test ...
00:29:19 - test set during evaluation: 11710/11707
00:29:19 - process[8] - test - epoch 10 - mAP: 0.504 w/ 39 queries
00:29:19 - process[8]: training epoch 11 ...
00:29:34 - process[8] - epoch 11 - train iter 360 - 17806.1 words/s - loss: 0.4178
00:29:34 - process[8]: evaluating epoch 11 on dev ...
00:30:10 - dev set during evaluation: 14340/14338
00:30:10 - process[8] - dev - epoch 11 - mAP: 0.508 w/ 39 queries
00:30:10 - process[8]: evaluating epoch 11 on test ...
00:30:39 - test set during evaluation: 11710/11707
00:30:39 - process[8] - test - epoch 11 - mAP: 0.498 w/ 39 queries
00:30:39 - process[8]: training epoch 12 ...
00:30:57 - process[8] - epoch 12 - train iter 360 - 16523.5 words/s - loss: 0.4347
00:30:57 - process[8]: evaluating epoch 12 on dev ...
00:31:29 - dev set during evaluation: 14340/14338
00:31:29 - process[8] - dev - epoch 12 - mAP: 0.527 w/ 39 queries
00:31:29 - process[8]: evaluating epoch 12 on test ...
00:31:58 - test set during evaluation: 11710/11707
00:31:58 - process[8] - test - epoch 12 - mAP: 0.509 w/ 39 queries
00:31:58 - process[8]: training epoch 13 ...
00:32:15 - process[8] - epoch 13 - train iter 360 - 16200.0 words/s - loss: 0.3819
00:32:15 - process[8]: evaluating epoch 13 on dev ...
00:32:48 - dev set during evaluation: 14340/14338
00:32:48 - process[8] - dev - epoch 13 - mAP: 0.521 w/ 39 queries
00:32:48 - process[8]: training epoch 14 ...
00:33:05 - process[8] - epoch 14 - train iter 360 - 16207.9 words/s - loss: 0.4430
00:33:05 - process[8]: evaluating epoch 14 on dev ...
00:33:38 - dev set during evaluation: 14340/14338
00:33:38 - process[8] - dev - epoch 14 - mAP: 0.509 w/ 39 queries
00:33:38 - process[8]: training epoch 15 ...
00:33:56 - process[8] - epoch 15 - train iter 360 - 15711.4 words/s - loss: 0.3896
00:33:56 - process[8]: evaluating epoch 15 on dev ...
00:34:28 - dev set during evaluation: 14340/14338
00:34:28 - process[8] - dev - epoch 15 - mAP: 0.519 w/ 39 queries
00:34:28 - process[8]: training epoch 16 ...
00:34:43 - process[8] - epoch 16 - train iter 360 - 17747.7 words/s - loss: 0.3703
00:34:43 - process[8]: evaluating epoch 16 on dev ...
00:35:18 - dev set during evaluation: 14340/14338
00:35:18 - process[8] - dev - epoch 16 - mAP: 0.521 w/ 39 queries
00:35:18 - process[8]: training epoch 17 ...
00:35:34 - process[8] - epoch 17 - train iter 360 - 17647.5 words/s - loss: 0.3962
00:35:34 - process[8]: evaluating epoch 17 on dev ...
00:36:10 - dev set during evaluation: 14340/14338
00:36:10 - process[8] - dev - epoch 17 - mAP: 0.508 w/ 39 queries
00:36:10 - process[8]: training epoch 18 ...
00:36:28 - process[8] - epoch 18 - train iter 360 - 15347.1 words/s - loss: 0.3998
00:36:28 - process[8]: evaluating epoch 18 on dev ...
00:37:02 - dev set during evaluation: 14340/14338
00:37:02 - process[8] - dev - epoch 18 - mAP: 0.514 w/ 39 queries
00:37:02 - process[8]: training epoch 19 ...
00:37:20 - process[8] - epoch 19 - train iter 360 - 15691.9 words/s - loss: 0.3485
00:37:20 - process[8]: evaluating epoch 19 on dev ...
00:37:53 - dev set during evaluation: 14340/14338
00:37:53 - process[8] - dev - epoch 19 - mAP: 0.497 w/ 39 queries
00:37:53 - [fold 3] best test MAP: 0.509 @ epoch 12
00:37:53 - Evaluating every 1 epochs ...
00:37:53 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:37:54 - test has 38 queries ...
00:37:54 - Data reading done ...
00:37:56 - adding 9-th encoder to optimizer...
00:37:56 - adding 10-th encoder to optimizer...
00:37:56 - adding 11-th encoder to optimizer...
00:37:56 - process[8]: training epoch 0 ...
00:38:16 - process[8] - epoch 0 - train iter 404 - 16525.6 words/s - loss: 0.6252
00:38:16 - process[8]: training epoch 1 ...
00:38:34 - process[8] - epoch 1 - train iter 404 - 17112.1 words/s - loss: 0.5470
00:38:34 - process[8]: training epoch 2 ...
00:38:51 - process[8] - epoch 2 - train iter 404 - 18593.5 words/s - loss: 0.5397
00:38:51 - process[8]: training epoch 3 ...
00:39:08 - process[8] - epoch 3 - train iter 404 - 18470.2 words/s - loss: 0.4995
00:39:08 - process[8]: training epoch 4 ...
00:39:27 - process[8] - epoch 4 - train iter 404 - 17256.4 words/s - loss: 0.4671
00:39:27 - process[8]: training epoch 5 ...
00:39:45 - process[8] - epoch 5 - train iter 404 - 16774.3 words/s - loss: 0.4541
00:39:45 - process[8]: training epoch 6 ...
00:40:03 - process[8] - epoch 6 - train iter 404 - 17997.2 words/s - loss: 0.4610
00:40:03 - process[8]: training epoch 7 ...
00:40:21 - process[8] - epoch 7 - train iter 404 - 17433.3 words/s - loss: 0.4496
00:40:21 - process[8]: training epoch 8 ...
00:40:39 - process[8] - epoch 8 - train iter 404 - 18203.2 words/s - loss: 0.4357
00:40:39 - process[8]: training epoch 9 ...
00:40:57 - process[8] - epoch 9 - train iter 404 - 18045.3 words/s - loss: 0.4236
00:40:57 - process[8]: training epoch 10 ...
00:41:14 - process[8] - epoch 10 - train iter 404 - 18402.1 words/s - loss: 0.4245
00:41:14 - process[8]: evaluating epoch 10 on dev ...
00:41:46 - dev set during evaluation: 11710/11707
00:41:46 - process[8] - dev - epoch 10 - mAP: 0.475 w/ 39 queries
00:41:46 - process[8]: evaluating epoch 10 on test ...
00:42:13 - test set during evaluation: 13490/13483
00:42:13 - process[8] - test - epoch 10 - mAP: 0.471 w/ 38 queries
00:42:13 - process[8]: training epoch 11 ...
00:42:32 - process[8] - epoch 11 - train iter 404 - 16649.9 words/s - loss: 0.4336
00:42:32 - process[8]: evaluating epoch 11 on dev ...
00:42:59 - dev set during evaluation: 11710/11707
00:42:59 - process[8] - dev - epoch 11 - mAP: 0.456 w/ 39 queries
00:42:59 - process[8]: training epoch 12 ...
00:43:16 - process[8] - epoch 12 - train iter 404 - 18913.2 words/s - loss: 0.4461
00:43:16 - process[8]: evaluating epoch 12 on dev ...
00:43:44 - dev set during evaluation: 11710/11707
00:43:44 - process[8] - dev - epoch 12 - mAP: 0.496 w/ 39 queries
00:43:44 - process[8]: evaluating epoch 12 on test ...
00:44:11 - test set during evaluation: 13490/13483
00:44:11 - process[8] - test - epoch 12 - mAP: 0.494 w/ 38 queries
00:44:11 - process[8]: training epoch 13 ...
00:44:30 - process[8] - epoch 13 - train iter 404 - 16649.6 words/s - loss: 0.3920
00:44:30 - process[8]: evaluating epoch 13 on dev ...
00:44:56 - dev set during evaluation: 11710/11707
00:44:56 - process[8] - dev - epoch 13 - mAP: 0.493 w/ 39 queries
00:44:56 - process[8]: training epoch 14 ...
00:45:14 - process[8] - epoch 14 - train iter 404 - 17951.4 words/s - loss: 0.4090
00:45:14 - process[8]: evaluating epoch 14 on dev ...
00:45:42 - dev set during evaluation: 11710/11707
00:45:42 - process[8] - dev - epoch 14 - mAP: 0.498 w/ 39 queries
00:45:42 - process[8]: evaluating epoch 14 on test ...
00:46:09 - test set during evaluation: 13490/13483
00:46:09 - process[8] - test - epoch 14 - mAP: 0.469 w/ 38 queries
00:46:09 - process[8]: training epoch 15 ...
00:46:27 - process[8] - epoch 15 - train iter 404 - 16964.6 words/s - loss: 0.3784
00:46:27 - process[8]: evaluating epoch 15 on dev ...
00:46:54 - dev set during evaluation: 11710/11707
00:46:54 - process[8] - dev - epoch 15 - mAP: 0.509 w/ 39 queries
00:46:54 - process[8]: evaluating epoch 15 on test ...
00:47:21 - test set during evaluation: 13490/13483
00:47:21 - process[8] - test - epoch 15 - mAP: 0.485 w/ 38 queries
00:47:21 - process[8]: training epoch 16 ...
00:47:41 - process[8] - epoch 16 - train iter 404 - 16256.7 words/s - loss: 0.3985
00:47:41 - process[8]: evaluating epoch 16 on dev ...
00:48:06 - dev set during evaluation: 11710/11707
00:48:06 - process[8] - dev - epoch 16 - mAP: 0.488 w/ 39 queries
00:48:06 - process[8]: training epoch 17 ...
00:48:25 - process[8] - epoch 17 - train iter 404 - 17577.5 words/s - loss: 0.3855
00:48:25 - process[8]: evaluating epoch 17 on dev ...
00:48:52 - dev set during evaluation: 11710/11707
00:48:52 - process[8] - dev - epoch 17 - mAP: 0.501 w/ 39 queries
00:48:52 - process[8]: training epoch 18 ...
00:49:08 - process[8] - epoch 18 - train iter 404 - 19321.0 words/s - loss: 0.3487
00:49:08 - process[8]: evaluating epoch 18 on dev ...
00:49:37 - dev set during evaluation: 11710/11707
00:49:37 - process[8] - dev - epoch 18 - mAP: 0.506 w/ 39 queries
00:49:37 - process[8]: training epoch 19 ...
00:49:55 - process[8] - epoch 19 - train iter 404 - 17177.2 words/s - loss: 0.3845
00:49:55 - process[8]: evaluating epoch 19 on dev ...
00:50:22 - dev set during evaluation: 11710/11707
00:50:22 - process[8] - dev - epoch 19 - mAP: 0.503 w/ 39 queries
00:50:22 - [fold 4] best test MAP: 0.485 @ epoch 15
00:50:22 - Evaluating every 1 epochs ...
00:50:22 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:23 - test has 38 queries ...
00:50:23 - Data reading done ...
00:50:24 - adding 9-th encoder to optimizer...
00:50:24 - adding 10-th encoder to optimizer...
00:50:24 - adding 11-th encoder to optimizer...
00:50:25 - process[8]: training epoch 0 ...
00:50:43 - process[8] - epoch 0 - train iter 444 - 18716.7 words/s - loss: 0.6328
00:50:43 - process[8]: training epoch 1 ...
00:51:01 - process[8] - epoch 1 - train iter 444 - 20179.6 words/s - loss: 0.5388
00:51:01 - process[8]: training epoch 2 ...
00:51:19 - process[8] - epoch 2 - train iter 444 - 19183.3 words/s - loss: 0.5483
00:51:19 - process[8]: training epoch 3 ...
00:51:38 - process[8] - epoch 3 - train iter 444 - 19206.1 words/s - loss: 0.5054
00:51:38 - process[8]: training epoch 4 ...
00:51:57 - process[8] - epoch 4 - train iter 444 - 18025.2 words/s - loss: 0.5029
00:51:57 - process[8]: training epoch 5 ...
00:52:16 - process[8] - epoch 5 - train iter 444 - 19134.0 words/s - loss: 0.4873
00:52:16 - process[8]: training epoch 6 ...
00:52:34 - process[8] - epoch 6 - train iter 444 - 18823.3 words/s - loss: 0.4760
00:52:34 - process[8]: training epoch 7 ...
00:52:52 - process[8] - epoch 7 - train iter 444 - 19416.2 words/s - loss: 0.4626
00:52:52 - process[8]: training epoch 8 ...
00:53:11 - process[8] - epoch 8 - train iter 444 - 19512.1 words/s - loss: 0.4174
00:53:11 - process[8]: training epoch 9 ...
00:53:29 - process[8] - epoch 9 - train iter 444 - 19428.2 words/s - loss: 0.4588
00:53:29 - process[8]: training epoch 10 ...
00:53:46 - process[8] - epoch 10 - train iter 444 - 19433.7 words/s - loss: 0.4360
00:53:46 - process[8]: evaluating epoch 10 on dev ...
00:54:20 - dev set during evaluation: 13490/13483
00:54:20 - process[8] - dev - epoch 10 - mAP: 0.484 w/ 38 queries
00:54:20 - process[8]: evaluating epoch 10 on test ...
00:54:52 - test set during evaluation: 13890/13887
00:54:52 - process[8] - test - epoch 10 - mAP: 0.480 w/ 38 queries
00:54:52 - process[8]: training epoch 11 ...
00:55:12 - process[8] - epoch 11 - train iter 444 - 17339.6 words/s - loss: 0.4227
00:55:12 - process[8]: evaluating epoch 11 on dev ...
00:55:39 - dev set during evaluation: 13490/13483
00:55:39 - process[8] - dev - epoch 11 - mAP: 0.480 w/ 38 queries
00:55:39 - process[8]: training epoch 12 ...
00:55:57 - process[8] - epoch 12 - train iter 444 - 20013.9 words/s - loss: 0.4186
00:55:57 - process[8]: evaluating epoch 12 on dev ...
00:56:26 - dev set during evaluation: 13490/13483
00:56:26 - process[8] - dev - epoch 12 - mAP: 0.457 w/ 38 queries
00:56:26 - process[8]: training epoch 13 ...
00:56:44 - process[8] - epoch 13 - train iter 444 - 18921.6 words/s - loss: 0.4403
00:56:44 - process[8]: evaluating epoch 13 on dev ...
00:57:12 - dev set during evaluation: 13490/13483
00:57:12 - process[8] - dev - epoch 13 - mAP: 0.430 w/ 38 queries
00:57:12 - process[8]: training epoch 14 ...
00:57:31 - process[8] - epoch 14 - train iter 444 - 18178.7 words/s - loss: 0.4531
00:57:31 - process[8]: evaluating epoch 14 on dev ...
00:58:00 - dev set during evaluation: 13490/13483
00:58:00 - process[8] - dev - epoch 14 - mAP: 0.481 w/ 38 queries
00:58:00 - process[8]: training epoch 15 ...
00:58:18 - process[8] - epoch 15 - train iter 444 - 19663.2 words/s - loss: 0.3975
00:58:18 - process[8]: evaluating epoch 15 on dev ...
00:58:48 - dev set during evaluation: 13490/13483
00:58:48 - process[8] - dev - epoch 15 - mAP: 0.476 w/ 38 queries
00:58:48 - process[8]: training epoch 16 ...
00:59:06 - process[8] - epoch 16 - train iter 444 - 19458.7 words/s - loss: 0.3992
00:59:06 - process[8]: evaluating epoch 16 on dev ...
00:59:36 - dev set during evaluation: 13490/13483
00:59:36 - process[8] - dev - epoch 16 - mAP: 0.466 w/ 38 queries
00:59:36 - process[8]: training epoch 17 ...
00:59:54 - process[8] - epoch 17 - train iter 444 - 19381.7 words/s - loss: 0.3723
00:59:54 - process[8]: evaluating epoch 17 on dev ...
01:00:22 - dev set during evaluation: 13490/13483
01:00:22 - process[8] - dev - epoch 17 - mAP: 0.471 w/ 38 queries
01:00:22 - process[8]: training epoch 18 ...
01:00:40 - process[8] - epoch 18 - train iter 444 - 19919.8 words/s - loss: 0.3815
01:00:40 - process[8]: evaluating epoch 18 on dev ...
01:01:09 - dev set during evaluation: 13490/13483
01:01:09 - process[8] - dev - epoch 18 - mAP: 0.470 w/ 38 queries
01:01:09 - process[8]: training epoch 19 ...
01:01:28 - process[8] - epoch 19 - train iter 444 - 18431.2 words/s - loss: 0.3563
01:01:28 - process[8]: evaluating epoch 19 on dev ...
01:01:56 - dev set during evaluation: 13490/13483
01:01:56 - process[8] - dev - epoch 19 - mAP: 0.479 w/ 38 queries
01:01:56 - [fold 5] best test MAP: 0.480 @ epoch 10
01:01:56 - [0.410257981628757, 0.5107940353954925, 0.5093044629100162, 0.48539238320475747, 0.4796698239336447]
01:01:56 - [38, 39, 39, 38, 38]
01:01:56 - final MAP: 0.479
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='de')
00:00:21 - Evaluating every 1 epochs ...
00:00:21 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:22 - test has 38 queries ...
00:00:22 - Data reading done ...
00:00:29 - adding 9-th encoder to optimizer...
00:00:29 - adding 10-th encoder to optimizer...
00:00:29 - adding 11-th encoder to optimizer...
00:00:30 - process[8]: training epoch 0 ...
00:00:47 - process[8] - epoch 0 - train iter 423 - 19733.7 words/s - loss: 0.5938
00:00:47 - process[8]: training epoch 1 ...
00:01:04 - process[8] - epoch 1 - train iter 423 - 19685.1 words/s - loss: 0.5409
00:01:04 - process[8]: training epoch 2 ...
00:01:20 - process[8] - epoch 2 - train iter 423 - 20514.6 words/s - loss: 0.5190
00:01:20 - process[8]: training epoch 3 ...
00:01:36 - process[8] - epoch 3 - train iter 423 - 21307.9 words/s - loss: 0.5097
00:01:36 - process[8]: training epoch 4 ...
00:01:54 - process[8] - epoch 4 - train iter 423 - 19200.3 words/s - loss: 0.4652
00:01:54 - process[8]: training epoch 5 ...
00:02:09 - process[8] - epoch 5 - train iter 423 - 21524.2 words/s - loss: 0.4621
00:02:09 - process[8]: training epoch 6 ...
00:02:24 - process[8] - epoch 6 - train iter 423 - 21370.7 words/s - loss: 0.4202
00:02:24 - process[8]: training epoch 7 ...
00:02:41 - process[8] - epoch 7 - train iter 423 - 20729.3 words/s - loss: 0.4524
00:02:41 - process[8]: training epoch 8 ...
00:02:57 - process[8] - epoch 8 - train iter 423 - 19608.9 words/s - loss: 0.4324
00:02:57 - process[8]: training epoch 9 ...
00:03:14 - process[8] - epoch 9 - train iter 423 - 20097.7 words/s - loss: 0.4197
00:03:14 - process[8]: training epoch 10 ...
00:03:30 - process[8] - epoch 10 - train iter 423 - 20399.4 words/s - loss: 0.4358
00:03:30 - process[8]: evaluating epoch 10 on dev ...
00:04:01 - dev set during evaluation: 13890/13887
00:04:01 - process[8] - dev - epoch 10 - mAP: 0.442 w/ 38 queries
00:04:01 - process[8]: evaluating epoch 10 on test ...
00:04:30 - test set during evaluation: 15580/15574
00:04:30 - process[8] - test - epoch 10 - mAP: 0.391 w/ 38 queries
00:04:30 - process[8]: training epoch 11 ...
00:04:46 - process[8] - epoch 11 - train iter 423 - 22033.9 words/s - loss: 0.4332
00:04:46 - process[8]: evaluating epoch 11 on dev ...
00:05:16 - dev set during evaluation: 13890/13887
00:05:16 - process[8] - dev - epoch 11 - mAP: 0.425 w/ 38 queries
00:05:16 - process[8]: training epoch 12 ...
00:05:33 - process[8] - epoch 12 - train iter 423 - 19597.2 words/s - loss: 0.4140
00:05:33 - process[8]: evaluating epoch 12 on dev ...
00:06:01 - dev set during evaluation: 13890/13887
00:06:01 - process[8] - dev - epoch 12 - mAP: 0.455 w/ 38 queries
00:06:01 - process[8]: evaluating epoch 12 on test ...
00:06:31 - test set during evaluation: 15580/15574
00:06:31 - process[8] - test - epoch 12 - mAP: 0.394 w/ 38 queries
00:06:31 - process[8]: training epoch 13 ...
00:06:47 - process[8] - epoch 13 - train iter 423 - 20580.4 words/s - loss: 0.3853
00:06:47 - process[8]: evaluating epoch 13 on dev ...
00:07:16 - dev set during evaluation: 13890/13887
00:07:16 - process[8] - dev - epoch 13 - mAP: 0.444 w/ 38 queries
00:07:16 - process[8]: training epoch 14 ...
00:07:33 - process[8] - epoch 14 - train iter 423 - 19337.7 words/s - loss: 0.4276
00:07:33 - process[8]: evaluating epoch 14 on dev ...
00:08:03 - dev set during evaluation: 13890/13887
00:08:03 - process[8] - dev - epoch 14 - mAP: 0.437 w/ 38 queries
00:08:03 - process[8]: training epoch 15 ...
00:08:19 - process[8] - epoch 15 - train iter 423 - 20728.2 words/s - loss: 0.4132
00:08:30 - process[8]: evaluating epoch 15 on dev ...
00:08:59 - dev set during evaluation: 13890/13887
00:08:59 - process[8] - dev - epoch 15 - mAP: 0.445 w/ 38 queries
00:08:59 - process[8]: training epoch 16 ...
00:09:14 - process[8] - epoch 16 - train iter 423 - 21885.6 words/s - loss: 0.4011
00:09:14 - process[8]: evaluating epoch 16 on dev ...
00:09:43 - dev set during evaluation: 13890/13887
00:09:43 - process[8] - dev - epoch 16 - mAP: 0.474 w/ 38 queries
00:09:43 - process[8]: evaluating epoch 16 on test ...
00:10:13 - test set during evaluation: 15580/15574
00:10:13 - process[8] - test - epoch 16 - mAP: 0.410 w/ 38 queries
00:10:13 - process[8]: training epoch 17 ...
00:10:29 - process[8] - epoch 17 - train iter 423 - 20818.7 words/s - loss: 0.3682
00:10:29 - process[8]: evaluating epoch 17 on dev ...
00:10:58 - dev set during evaluation: 13890/13887
00:10:58 - process[8] - dev - epoch 17 - mAP: 0.456 w/ 38 queries
00:10:58 - process[8]: training epoch 18 ...
00:11:14 - process[8] - epoch 18 - train iter 423 - 20473.7 words/s - loss: 0.3716
00:11:14 - process[8]: evaluating epoch 18 on dev ...
00:11:50 - dev set during evaluation: 13890/13887
00:11:50 - process[8] - dev - epoch 18 - mAP: 0.448 w/ 38 queries
00:11:50 - process[8]: training epoch 19 ...
00:12:06 - process[8] - epoch 19 - train iter 423 - 20904.7 words/s - loss: 0.4055
00:12:06 - process[8]: evaluating epoch 19 on dev ...
00:12:35 - dev set during evaluation: 13890/13887
00:12:35 - process[8] - dev - epoch 19 - mAP: 0.462 w/ 38 queries
00:12:35 - [fold 1] best test MAP: 0.410 @ epoch 16
00:12:35 - Evaluating every 1 epochs ...
00:12:35 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:36 - test has 39 queries ...
00:12:36 - Data reading done ...
00:12:37 - adding 9-th encoder to optimizer...
00:12:37 - adding 10-th encoder to optimizer...
00:12:37 - adding 11-th encoder to optimizer...
00:12:38 - process[8]: training epoch 0 ...
00:12:55 - process[8] - epoch 0 - train iter 386 - 17335.5 words/s - loss: 0.5985
00:12:55 - process[8]: training epoch 1 ...
00:13:13 - process[8] - epoch 1 - train iter 386 - 17219.7 words/s - loss: 0.5329
00:13:13 - process[8]: training epoch 2 ...
00:13:29 - process[8] - epoch 2 - train iter 386 - 18044.8 words/s - loss: 0.4998
00:13:29 - process[8]: training epoch 3 ...
00:13:47 - process[8] - epoch 3 - train iter 386 - 17021.4 words/s - loss: 0.4851
00:13:47 - process[8]: training epoch 4 ...
00:14:06 - process[8] - epoch 4 - train iter 386 - 15520.9 words/s - loss: 0.4383
00:14:06 - process[8]: training epoch 5 ...
00:14:25 - process[8] - epoch 5 - train iter 386 - 16175.9 words/s - loss: 0.4357
00:14:25 - process[8]: training epoch 6 ...
00:14:43 - process[8] - epoch 6 - train iter 386 - 16949.2 words/s - loss: 0.4334
00:14:43 - process[8]: training epoch 7 ...
00:15:01 - process[8] - epoch 7 - train iter 386 - 16074.6 words/s - loss: 0.4726
00:15:01 - process[8]: training epoch 8 ...
00:15:19 - process[8] - epoch 8 - train iter 386 - 16878.1 words/s - loss: 0.4247
00:15:19 - process[8]: training epoch 9 ...
00:15:37 - process[8] - epoch 9 - train iter 386 - 16981.9 words/s - loss: 0.4264
00:15:37 - process[8]: training epoch 10 ...
00:15:54 - process[8] - epoch 10 - train iter 386 - 17080.2 words/s - loss: 0.4080
00:15:54 - process[8]: evaluating epoch 10 on dev ...
00:16:37 - dev set during evaluation: 15580/15574
00:16:37 - process[8] - dev - epoch 10 - mAP: 0.402 w/ 38 queries
00:16:37 - process[8]: evaluating epoch 10 on test ...
00:17:09 - test set during evaluation: 14340/14338
00:17:09 - process[8] - test - epoch 10 - mAP: 0.511 w/ 39 queries
00:17:09 - process[8]: training epoch 11 ...
00:17:28 - process[8] - epoch 11 - train iter 386 - 16652.2 words/s - loss: 0.4035
00:17:28 - process[8]: evaluating epoch 11 on dev ...
00:18:04 - dev set during evaluation: 15580/15574
00:18:04 - process[8] - dev - epoch 11 - mAP: 0.381 w/ 38 queries
00:18:04 - process[8]: training epoch 12 ...
00:18:22 - process[8] - epoch 12 - train iter 386 - 16331.6 words/s - loss: 0.3679
00:18:22 - process[8]: evaluating epoch 12 on dev ...
00:18:57 - dev set during evaluation: 15580/15574
00:18:57 - process[8] - dev - epoch 12 - mAP: 0.388 w/ 38 queries
00:18:58 - process[8]: training epoch 13 ...
00:19:15 - process[8] - epoch 13 - train iter 386 - 17047.7 words/s - loss: 0.4069
00:19:15 - process[8]: evaluating epoch 13 on dev ...
00:19:52 - dev set during evaluation: 15580/15574
00:19:52 - process[8] - dev - epoch 13 - mAP: 0.391 w/ 38 queries
00:19:52 - process[8]: training epoch 14 ...
00:20:11 - process[8] - epoch 14 - train iter 386 - 15834.0 words/s - loss: 0.3700
00:20:11 - process[8]: evaluating epoch 14 on dev ...
00:20:46 - dev set during evaluation: 15580/15574
00:20:46 - process[8] - dev - epoch 14 - mAP: 0.375 w/ 38 queries
00:20:46 - process[8]: training epoch 15 ...
00:21:05 - process[8] - epoch 15 - train iter 386 - 16424.2 words/s - loss: 0.4179
00:21:05 - process[8]: evaluating epoch 15 on dev ...
00:21:42 - dev set during evaluation: 15580/15574
00:21:42 - process[8] - dev - epoch 15 - mAP: 0.389 w/ 38 queries
00:21:42 - process[8]: training epoch 16 ...
00:22:01 - process[8] - epoch 16 - train iter 386 - 15800.6 words/s - loss: 0.3689
00:22:01 - process[8]: evaluating epoch 16 on dev ...
00:22:35 - dev set during evaluation: 15580/15574
00:22:35 - process[8] - dev - epoch 16 - mAP: 0.359 w/ 38 queries
00:22:35 - process[8]: training epoch 17 ...
00:22:54 - process[8] - epoch 17 - train iter 386 - 15995.9 words/s - loss: 0.3690
00:22:54 - process[8]: evaluating epoch 17 on dev ...
00:23:31 - dev set during evaluation: 15580/15574
00:23:31 - process[8] - dev - epoch 17 - mAP: 0.378 w/ 38 queries
00:23:31 - process[8]: training epoch 18 ...
00:23:48 - process[8] - epoch 18 - train iter 386 - 18051.3 words/s - loss: 0.4055
00:23:48 - process[8]: evaluating epoch 18 on dev ...
00:24:28 - dev set during evaluation: 15580/15574
00:24:28 - process[8] - dev - epoch 18 - mAP: 0.387 w/ 38 queries
00:24:28 - process[8]: training epoch 19 ...
00:24:46 - process[8] - epoch 19 - train iter 386 - 16482.5 words/s - loss: 0.3948
00:24:46 - process[8]: evaluating epoch 19 on dev ...
00:25:23 - dev set during evaluation: 15580/15574
00:25:23 - process[8] - dev - epoch 19 - mAP: 0.384 w/ 38 queries
00:25:23 - [fold 2] best test MAP: 0.511 @ epoch 10
00:25:23 - Evaluating every 1 epochs ...
00:25:23 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:24 - test has 39 queries ...
00:25:24 - Data reading done ...
00:25:26 - adding 9-th encoder to optimizer...
00:25:26 - adding 10-th encoder to optimizer...
00:25:26 - adding 11-th encoder to optimizer...
00:25:26 - process[8]: training epoch 0 ...
00:25:43 - process[8] - epoch 0 - train iter 360 - 17014.6 words/s - loss: 0.6097
00:25:43 - process[8]: training epoch 1 ...
00:26:00 - process[8] - epoch 1 - train iter 360 - 16380.6 words/s - loss: 0.5446
00:26:00 - process[8]: training epoch 2 ...
00:26:18 - process[8] - epoch 2 - train iter 360 - 15866.4 words/s - loss: 0.4937
00:26:18 - process[8]: training epoch 3 ...
00:26:37 - process[8] - epoch 3 - train iter 360 - 15102.5 words/s - loss: 0.5221
00:26:37 - process[8]: training epoch 4 ...
00:26:55 - process[8] - epoch 4 - train iter 360 - 15967.2 words/s - loss: 0.5155
00:26:55 - process[8]: training epoch 5 ...
00:27:11 - process[8] - epoch 5 - train iter 360 - 17534.6 words/s - loss: 0.4715
00:27:11 - process[8]: training epoch 6 ...
00:27:28 - process[8] - epoch 6 - train iter 360 - 16178.3 words/s - loss: 0.4295
00:27:28 - process[8]: training epoch 7 ...
00:27:46 - process[8] - epoch 7 - train iter 360 - 16155.4 words/s - loss: 0.4630
00:27:46 - process[8]: training epoch 8 ...
00:28:02 - process[8] - epoch 8 - train iter 360 - 17238.8 words/s - loss: 0.4186
00:28:02 - process[8]: training epoch 9 ...
00:28:18 - process[8] - epoch 9 - train iter 360 - 17697.6 words/s - loss: 0.3986
00:28:18 - process[8]: training epoch 10 ...
00:28:37 - process[8] - epoch 10 - train iter 360 - 14336.3 words/s - loss: 0.4439
00:28:37 - process[8]: evaluating epoch 10 on dev ...
00:29:20 - dev set during evaluation: 14340/14338
00:29:20 - process[8] - dev - epoch 10 - mAP: 0.506 w/ 39 queries
00:29:20 - process[8]: evaluating epoch 10 on test ...
00:29:50 - test set during evaluation: 11710/11707
00:29:50 - process[8] - test - epoch 10 - mAP: 0.504 w/ 39 queries
00:29:50 - process[8]: training epoch 11 ...
00:30:06 - process[8] - epoch 11 - train iter 360 - 17752.9 words/s - loss: 0.4178
00:30:06 - process[8]: evaluating epoch 11 on dev ...
00:30:41 - dev set during evaluation: 14340/14338
00:30:41 - process[8] - dev - epoch 11 - mAP: 0.508 w/ 39 queries
00:30:41 - process[8]: evaluating epoch 11 on test ...
00:31:10 - test set during evaluation: 11710/11707
00:31:10 - process[8] - test - epoch 11 - mAP: 0.498 w/ 39 queries
00:31:10 - process[8]: training epoch 12 ...
00:31:28 - process[8] - epoch 12 - train iter 360 - 16590.6 words/s - loss: 0.4347
00:31:28 - process[8]: evaluating epoch 12 on dev ...
00:32:00 - dev set during evaluation: 14340/14338
00:32:00 - process[8] - dev - epoch 12 - mAP: 0.527 w/ 39 queries
00:32:00 - process[8]: evaluating epoch 12 on test ...
00:32:30 - test set during evaluation: 11710/11707
00:32:30 - process[8] - test - epoch 12 - mAP: 0.509 w/ 39 queries
00:32:30 - process[8]: training epoch 13 ...
00:32:47 - process[8] - epoch 13 - train iter 360 - 16051.4 words/s - loss: 0.3819
00:32:47 - process[8]: evaluating epoch 13 on dev ...
00:33:20 - dev set during evaluation: 14340/14338
00:33:20 - process[8] - dev - epoch 13 - mAP: 0.521 w/ 39 queries
00:33:20 - process[8]: training epoch 14 ...
00:33:38 - process[8] - epoch 14 - train iter 360 - 15945.7 words/s - loss: 0.4430
00:33:38 - process[8]: evaluating epoch 14 on dev ...
00:34:10 - dev set during evaluation: 14340/14338
00:34:10 - process[8] - dev - epoch 14 - mAP: 0.509 w/ 39 queries
00:34:10 - process[8]: training epoch 15 ...
00:34:28 - process[8] - epoch 15 - train iter 360 - 15627.5 words/s - loss: 0.3896
00:34:28 - process[8]: evaluating epoch 15 on dev ...
00:35:00 - dev set during evaluation: 14340/14338
00:35:00 - process[8] - dev - epoch 15 - mAP: 0.519 w/ 39 queries
00:35:00 - process[8]: training epoch 16 ...
00:35:16 - process[8] - epoch 16 - train iter 360 - 17722.9 words/s - loss: 0.3703
00:35:16 - process[8]: evaluating epoch 16 on dev ...
00:35:51 - dev set during evaluation: 14340/14338
00:35:51 - process[8] - dev - epoch 16 - mAP: 0.521 w/ 39 queries
00:35:51 - process[8]: training epoch 17 ...
00:36:07 - process[8] - epoch 17 - train iter 360 - 17726.2 words/s - loss: 0.3962
00:36:07 - process[8]: evaluating epoch 17 on dev ...
00:36:43 - dev set during evaluation: 14340/14338
00:36:43 - process[8] - dev - epoch 17 - mAP: 0.508 w/ 39 queries
00:36:43 - process[8]: training epoch 18 ...
00:37:01 - process[8] - epoch 18 - train iter 360 - 15289.7 words/s - loss: 0.3998
00:37:01 - process[8]: evaluating epoch 18 on dev ...
00:37:35 - dev set during evaluation: 14340/14338
00:37:35 - process[8] - dev - epoch 18 - mAP: 0.514 w/ 39 queries
00:37:35 - process[8]: training epoch 19 ...
00:37:53 - process[8] - epoch 19 - train iter 360 - 15818.7 words/s - loss: 0.3485
00:37:53 - process[8]: evaluating epoch 19 on dev ...
00:38:26 - dev set during evaluation: 14340/14338
00:38:26 - process[8] - dev - epoch 19 - mAP: 0.497 w/ 39 queries
00:38:26 - [fold 3] best test MAP: 0.509 @ epoch 12
00:38:26 - Evaluating every 1 epochs ...
00:38:26 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:27 - test has 38 queries ...
00:38:27 - Data reading done ...
00:38:29 - adding 9-th encoder to optimizer...
00:38:29 - adding 10-th encoder to optimizer...
00:38:29 - adding 11-th encoder to optimizer...
00:38:30 - process[8]: training epoch 0 ...
00:38:49 - process[8] - epoch 0 - train iter 404 - 16357.1 words/s - loss: 0.6252
00:38:49 - process[8]: training epoch 1 ...
00:39:08 - process[8] - epoch 1 - train iter 404 - 16840.1 words/s - loss: 0.5470
00:39:08 - process[8]: training epoch 2 ...
00:39:25 - process[8] - epoch 2 - train iter 404 - 18424.9 words/s - loss: 0.5397
00:39:25 - process[8]: training epoch 3 ...
00:39:43 - process[8] - epoch 3 - train iter 404 - 18357.7 words/s - loss: 0.4995
00:39:43 - process[8]: training epoch 4 ...
00:40:01 - process[8] - epoch 4 - train iter 404 - 17173.7 words/s - loss: 0.4671
00:40:01 - process[8]: training epoch 5 ...
00:40:20 - process[8] - epoch 5 - train iter 404 - 16670.9 words/s - loss: 0.4541
00:40:20 - process[8]: training epoch 6 ...
00:40:37 - process[8] - epoch 6 - train iter 404 - 17843.7 words/s - loss: 0.4610
00:40:37 - process[8]: training epoch 7 ...
00:40:56 - process[8] - epoch 7 - train iter 404 - 17359.6 words/s - loss: 0.4496
00:40:56 - process[8]: training epoch 8 ...
00:41:13 - process[8] - epoch 8 - train iter 404 - 18090.4 words/s - loss: 0.4357
00:41:13 - process[8]: training epoch 9 ...
00:41:32 - process[8] - epoch 9 - train iter 404 - 17888.7 words/s - loss: 0.4236
00:41:32 - process[8]: training epoch 10 ...
00:41:49 - process[8] - epoch 10 - train iter 404 - 18334.0 words/s - loss: 0.4245
00:41:49 - process[8]: evaluating epoch 10 on dev ...
00:42:17 - dev set during evaluation: 11710/11707
00:42:17 - process[8] - dev - epoch 10 - mAP: 0.475 w/ 39 queries
00:42:17 - process[8]: evaluating epoch 10 on test ...
00:42:44 - test set during evaluation: 13490/13483
00:42:44 - process[8] - test - epoch 10 - mAP: 0.471 w/ 38 queries
00:42:44 - process[8]: training epoch 11 ...
00:43:03 - process[8] - epoch 11 - train iter 404 - 16629.9 words/s - loss: 0.4336
00:43:03 - process[8]: evaluating epoch 11 on dev ...
00:43:32 - dev set during evaluation: 11710/11707
00:43:32 - process[8] - dev - epoch 11 - mAP: 0.456 w/ 39 queries
00:43:32 - process[8]: training epoch 12 ...
00:43:49 - process[8] - epoch 12 - train iter 404 - 18868.4 words/s - loss: 0.4461
00:43:49 - process[8]: evaluating epoch 12 on dev ...
00:44:18 - dev set during evaluation: 11710/11707
00:44:18 - process[8] - dev - epoch 12 - mAP: 0.496 w/ 39 queries
00:44:18 - process[8]: evaluating epoch 12 on test ...
00:44:45 - test set during evaluation: 13490/13483
00:44:45 - process[8] - test - epoch 12 - mAP: 0.494 w/ 38 queries
00:44:45 - process[8]: training epoch 13 ...
00:45:04 - process[8] - epoch 13 - train iter 404 - 16596.5 words/s - loss: 0.3920
00:45:04 - process[8]: evaluating epoch 13 on dev ...
00:45:30 - dev set during evaluation: 11710/11707
00:45:30 - process[8] - dev - epoch 13 - mAP: 0.493 w/ 39 queries
00:45:30 - process[8]: training epoch 14 ...
00:45:47 - process[8] - epoch 14 - train iter 404 - 17911.0 words/s - loss: 0.4090
00:45:47 - process[8]: evaluating epoch 14 on dev ...
00:46:15 - dev set during evaluation: 11710/11707
00:46:15 - process[8] - dev - epoch 14 - mAP: 0.498 w/ 39 queries
00:46:15 - process[8]: evaluating epoch 14 on test ...
00:46:43 - test set during evaluation: 13490/13483
00:46:43 - process[8] - test - epoch 14 - mAP: 0.469 w/ 38 queries
00:46:43 - process[8]: training epoch 15 ...
00:47:02 - process[8] - epoch 15 - train iter 404 - 16973.0 words/s - loss: 0.3784
00:47:02 - process[8]: evaluating epoch 15 on dev ...
00:47:29 - dev set during evaluation: 11710/11707
00:47:29 - process[8] - dev - epoch 15 - mAP: 0.509 w/ 39 queries
00:47:29 - process[8]: evaluating epoch 15 on test ...
00:47:56 - test set during evaluation: 13490/13483
00:47:56 - process[8] - test - epoch 15 - mAP: 0.485 w/ 38 queries
00:47:56 - process[8]: training epoch 16 ...
00:48:16 - process[8] - epoch 16 - train iter 404 - 16069.0 words/s - loss: 0.3985
00:48:16 - process[8]: evaluating epoch 16 on dev ...
00:48:42 - dev set during evaluation: 11710/11707
00:48:42 - process[8] - dev - epoch 16 - mAP: 0.488 w/ 39 queries
00:48:42 - process[8]: training epoch 17 ...
00:49:01 - process[8] - epoch 17 - train iter 404 - 17356.2 words/s - loss: 0.3855
00:49:01 - process[8]: evaluating epoch 17 on dev ...
00:49:28 - dev set during evaluation: 11710/11707
00:49:28 - process[8] - dev - epoch 17 - mAP: 0.501 w/ 39 queries
00:49:28 - process[8]: training epoch 18 ...
00:49:44 - process[8] - epoch 18 - train iter 404 - 19336.7 words/s - loss: 0.3487
00:49:44 - process[8]: evaluating epoch 18 on dev ...
00:50:13 - dev set during evaluation: 11710/11707
00:50:13 - process[8] - dev - epoch 18 - mAP: 0.506 w/ 39 queries
00:50:13 - process[8]: training epoch 19 ...
00:50:32 - process[8] - epoch 19 - train iter 404 - 16980.3 words/s - loss: 0.3845
00:50:32 - process[8]: evaluating epoch 19 on dev ...
00:50:58 - dev set during evaluation: 11710/11707
00:50:58 - process[8] - dev - epoch 19 - mAP: 0.503 w/ 39 queries
00:50:58 - [fold 4] best test MAP: 0.485 @ epoch 15
00:50:58 - Evaluating every 1 epochs ...
00:50:58 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:59 - test has 38 queries ...
00:50:59 - Data reading done ...
00:51:01 - adding 9-th encoder to optimizer...
00:51:01 - adding 10-th encoder to optimizer...
00:51:01 - adding 11-th encoder to optimizer...
00:51:01 - process[8]: training epoch 0 ...
00:51:20 - process[8] - epoch 0 - train iter 444 - 18795.2 words/s - loss: 0.6328
00:51:20 - process[8]: training epoch 1 ...
00:51:37 - process[8] - epoch 1 - train iter 444 - 20194.2 words/s - loss: 0.5388
00:51:37 - process[8]: training epoch 2 ...
00:51:55 - process[8] - epoch 2 - train iter 444 - 19184.4 words/s - loss: 0.5483
00:51:55 - process[8]: training epoch 3 ...
00:52:14 - process[8] - epoch 3 - train iter 444 - 19196.4 words/s - loss: 0.5054
00:52:14 - process[8]: training epoch 4 ...
00:52:34 - process[8] - epoch 4 - train iter 444 - 17709.6 words/s - loss: 0.5029
00:52:34 - process[8]: training epoch 5 ...
00:52:52 - process[8] - epoch 5 - train iter 444 - 19130.1 words/s - loss: 0.4873
00:52:52 - process[8]: training epoch 6 ...
00:53:11 - process[8] - epoch 6 - train iter 444 - 18885.4 words/s - loss: 0.4760
00:53:11 - process[8]: training epoch 7 ...
00:53:29 - process[8] - epoch 7 - train iter 444 - 19523.7 words/s - loss: 0.4626
00:53:29 - process[8]: training epoch 8 ...
00:53:47 - process[8] - epoch 8 - train iter 444 - 19581.0 words/s - loss: 0.4174
00:53:47 - process[8]: training epoch 9 ...
00:54:05 - process[8] - epoch 9 - train iter 444 - 19487.4 words/s - loss: 0.4588
00:54:05 - process[8]: training epoch 10 ...
00:54:22 - process[8] - epoch 10 - train iter 444 - 19543.7 words/s - loss: 0.4360
00:54:22 - process[8]: evaluating epoch 10 on dev ...
00:54:55 - dev set during evaluation: 13490/13483
00:54:55 - process[8] - dev - epoch 10 - mAP: 0.484 w/ 38 queries
00:54:55 - process[8]: evaluating epoch 10 on test ...
00:55:27 - test set during evaluation: 13890/13887
00:55:27 - process[8] - test - epoch 10 - mAP: 0.480 w/ 38 queries
00:55:27 - process[8]: training epoch 11 ...
00:55:48 - process[8] - epoch 11 - train iter 444 - 17408.0 words/s - loss: 0.4227
00:55:48 - process[8]: evaluating epoch 11 on dev ...
00:56:16 - dev set during evaluation: 13490/13483
00:56:16 - process[8] - dev - epoch 11 - mAP: 0.480 w/ 38 queries
00:56:16 - process[8]: training epoch 12 ...
00:56:33 - process[8] - epoch 12 - train iter 444 - 20015.4 words/s - loss: 0.4186
00:56:33 - process[8]: evaluating epoch 12 on dev ...
00:57:02 - dev set during evaluation: 13490/13483
00:57:02 - process[8] - dev - epoch 12 - mAP: 0.457 w/ 38 queries
00:57:02 - process[8]: training epoch 13 ...
00:57:21 - process[8] - epoch 13 - train iter 444 - 18917.4 words/s - loss: 0.4403
00:57:21 - process[8]: evaluating epoch 13 on dev ...
00:57:48 - dev set during evaluation: 13490/13483
00:57:48 - process[8] - dev - epoch 13 - mAP: 0.430 w/ 38 queries
00:57:48 - process[8]: training epoch 14 ...
00:58:07 - process[8] - epoch 14 - train iter 444 - 18140.3 words/s - loss: 0.4531
00:58:07 - process[8]: evaluating epoch 14 on dev ...
00:58:36 - dev set during evaluation: 13490/13483
00:58:36 - process[8] - dev - epoch 14 - mAP: 0.481 w/ 38 queries
00:58:36 - process[8]: training epoch 15 ...
00:58:54 - process[8] - epoch 15 - train iter 444 - 19576.3 words/s - loss: 0.3975
00:58:54 - process[8]: evaluating epoch 15 on dev ...
00:59:22 - dev set during evaluation: 13490/13483
00:59:22 - process[8] - dev - epoch 15 - mAP: 0.476 w/ 38 queries
00:59:22 - process[8]: training epoch 16 ...
00:59:40 - process[8] - epoch 16 - train iter 444 - 19320.2 words/s - loss: 0.3992
00:59:40 - process[8]: evaluating epoch 16 on dev ...
01:00:09 - dev set during evaluation: 13490/13483
01:00:09 - process[8] - dev - epoch 16 - mAP: 0.466 w/ 38 queries
01:00:09 - process[8]: training epoch 17 ...
01:00:27 - process[8] - epoch 17 - train iter 444 - 19415.0 words/s - loss: 0.3723
01:00:27 - process[8]: evaluating epoch 17 on dev ...
01:00:55 - dev set during evaluation: 13490/13483
01:00:55 - process[8] - dev - epoch 17 - mAP: 0.471 w/ 38 queries
01:00:56 - process[8]: training epoch 18 ...
01:01:13 - process[8] - epoch 18 - train iter 444 - 19961.2 words/s - loss: 0.3815
01:01:13 - process[8]: evaluating epoch 18 on dev ...
01:01:42 - dev set during evaluation: 13490/13483
01:01:42 - process[8] - dev - epoch 18 - mAP: 0.470 w/ 38 queries
01:01:42 - process[8]: training epoch 19 ...
01:02:01 - process[8] - epoch 19 - train iter 444 - 18575.2 words/s - loss: 0.3563
01:02:01 - process[8]: evaluating epoch 19 on dev ...
01:02:29 - dev set during evaluation: 13490/13483
01:02:29 - process[8] - dev - epoch 19 - mAP: 0.479 w/ 38 queries
01:02:29 - [fold 5] best test MAP: 0.480 @ epoch 10
01:02:29 - [0.410257981628757, 0.5107940353954925, 0.5093044629100162, 0.48539238320475747, 0.4796698239336447]
01:02:29 - [38, 39, 39, 38, 38]
01:02:29 - final MAP: 0.479
