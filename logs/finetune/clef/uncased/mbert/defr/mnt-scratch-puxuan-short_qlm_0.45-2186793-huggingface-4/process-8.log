00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='de', target_lang='fr')
00:00:16 - Evaluating every 1 epochs ...
00:00:16 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:16 - test has 37 queries ...
00:00:16 - Data reading done ...
00:00:23 - adding 9-th encoder to optimizer...
00:00:23 - adding 10-th encoder to optimizer...
00:00:23 - adding 11-th encoder to optimizer...
00:00:24 - process[8]: training epoch 0 ...
00:00:34 - process[8] - epoch 0 - train iter 241 - 19074.8 words/s - loss: 0.6219
00:00:34 - process[8]: training epoch 1 ...
00:00:43 - process[8] - epoch 1 - train iter 241 - 21376.7 words/s - loss: 0.6141
00:00:43 - process[8]: training epoch 2 ...
00:00:53 - process[8] - epoch 2 - train iter 241 - 20742.9 words/s - loss: 0.5738
00:00:53 - process[8]: training epoch 3 ...
00:01:02 - process[8] - epoch 3 - train iter 241 - 22352.6 words/s - loss: 0.5852
00:01:02 - process[8]: training epoch 4 ...
00:01:10 - process[8] - epoch 4 - train iter 241 - 22619.4 words/s - loss: 0.5501
00:01:10 - process[8]: training epoch 5 ...
00:01:19 - process[8] - epoch 5 - train iter 241 - 21934.6 words/s - loss: 0.5488
00:01:19 - process[8]: training epoch 6 ...
00:01:29 - process[8] - epoch 6 - train iter 241 - 20592.1 words/s - loss: 0.4920
00:01:29 - process[8]: training epoch 7 ...
00:01:37 - process[8] - epoch 7 - train iter 241 - 21661.6 words/s - loss: 0.4948
00:01:37 - process[8]: training epoch 8 ...
00:01:46 - process[8] - epoch 8 - train iter 241 - 22309.7 words/s - loss: 0.4670
00:01:46 - process[8]: training epoch 9 ...
00:01:55 - process[8] - epoch 9 - train iter 241 - 22290.7 words/s - loss: 0.5036
00:01:55 - process[8]: training epoch 10 ...
00:02:04 - process[8] - epoch 10 - train iter 241 - 22216.3 words/s - loss: 0.4612
00:02:04 - process[8]: evaluating epoch 10 on dev ...
00:02:24 - process[8] - dev - epoch 10 - mAP: 0.407 w/ 37 queries
00:02:24 - process[8]: evaluating epoch 10 on test ...
00:02:43 - test set during evaluation: 11380/11372
00:02:43 - process[8] - test - epoch 10 - mAP: 0.521 w/ 37 queries
00:02:43 - process[8]: training epoch 11 ...
00:02:53 - process[8] - epoch 11 - train iter 241 - 20609.2 words/s - loss: 0.5050
00:02:53 - process[8]: evaluating epoch 11 on dev ...
00:03:11 - process[8] - dev - epoch 11 - mAP: 0.375 w/ 37 queries
00:03:11 - process[8]: training epoch 12 ...
00:03:21 - process[8] - epoch 12 - train iter 241 - 20219.3 words/s - loss: 0.4546
00:03:21 - process[8]: evaluating epoch 12 on dev ...
00:03:38 - process[8] - dev - epoch 12 - mAP: 0.391 w/ 37 queries
00:03:38 - process[8]: training epoch 13 ...
00:03:47 - process[8] - epoch 13 - train iter 241 - 22073.7 words/s - loss: 0.4245
00:03:47 - process[8]: evaluating epoch 13 on dev ...
00:04:06 - process[8] - dev - epoch 13 - mAP: 0.408 w/ 37 queries
00:04:06 - process[8]: evaluating epoch 13 on test ...
00:04:25 - test set during evaluation: 11380/11372
00:04:25 - process[8] - test - epoch 13 - mAP: 0.535 w/ 37 queries
00:04:25 - process[8]: training epoch 14 ...
00:04:34 - process[8] - epoch 14 - train iter 241 - 21520.3 words/s - loss: 0.4606
00:04:34 - process[8]: evaluating epoch 14 on dev ...
00:04:53 - process[8] - dev - epoch 14 - mAP: 0.399 w/ 37 queries
00:04:53 - process[8]: training epoch 15 ...
00:05:02 - process[8] - epoch 15 - train iter 241 - 22448.2 words/s - loss: 0.4530
00:05:02 - process[8]: evaluating epoch 15 on dev ...
00:05:21 - process[8] - dev - epoch 15 - mAP: 0.414 w/ 37 queries
00:05:21 - process[8]: evaluating epoch 15 on test ...
00:05:40 - test set during evaluation: 11380/11372
00:05:40 - process[8] - test - epoch 15 - mAP: 0.530 w/ 37 queries
00:05:40 - process[8]: training epoch 16 ...
00:05:48 - process[8] - epoch 16 - train iter 241 - 22958.5 words/s - loss: 0.4350
00:05:48 - process[8]: evaluating epoch 16 on dev ...
00:06:08 - process[8] - dev - epoch 16 - mAP: 0.392 w/ 37 queries
00:06:08 - process[8]: training epoch 17 ...
00:06:17 - process[8] - epoch 17 - train iter 241 - 22717.8 words/s - loss: 0.4181
00:06:17 - process[8]: evaluating epoch 17 on dev ...
00:06:35 - process[8] - dev - epoch 17 - mAP: 0.411 w/ 37 queries
00:06:35 - process[8]: training epoch 18 ...
00:06:44 - process[8] - epoch 18 - train iter 241 - 20776.6 words/s - loss: 0.4639
00:06:44 - process[8]: evaluating epoch 18 on dev ...
00:07:02 - process[8] - dev - epoch 18 - mAP: 0.414 w/ 37 queries
00:07:02 - process[8]: training epoch 19 ...
00:07:11 - process[8] - epoch 19 - train iter 241 - 21882.6 words/s - loss: 0.3927
00:07:11 - process[8]: evaluating epoch 19 on dev ...
00:07:30 - process[8] - dev - epoch 19 - mAP: 0.412 w/ 37 queries
00:07:30 - [fold 1] best test MAP: 0.530 @ epoch 15
00:07:30 - Evaluating every 1 epochs ...
00:07:30 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:07:30 - test has 37 queries ...
00:07:30 - Data reading done ...
00:07:32 - adding 9-th encoder to optimizer...
00:07:32 - adding 10-th encoder to optimizer...
00:07:32 - adding 11-th encoder to optimizer...
00:07:32 - process[8]: training epoch 0 ...
00:07:43 - process[8] - epoch 0 - train iter 276 - 21237.6 words/s - loss: 0.6184
00:07:43 - process[8]: training epoch 1 ...
00:07:54 - process[8] - epoch 1 - train iter 276 - 20217.4 words/s - loss: 0.5830
00:07:54 - process[8]: training epoch 2 ...
00:08:06 - process[8] - epoch 2 - train iter 276 - 19098.7 words/s - loss: 0.5633
00:08:06 - process[8]: training epoch 3 ...
00:08:16 - process[8] - epoch 3 - train iter 276 - 22388.1 words/s - loss: 0.5613
00:08:16 - process[8]: training epoch 4 ...
00:08:26 - process[8] - epoch 4 - train iter 276 - 21273.4 words/s - loss: 0.5476
00:08:26 - process[8]: training epoch 5 ...
00:08:36 - process[8] - epoch 5 - train iter 276 - 22122.2 words/s - loss: 0.4963
00:08:36 - process[8]: training epoch 6 ...
00:08:47 - process[8] - epoch 6 - train iter 276 - 21635.6 words/s - loss: 0.5190
00:08:47 - process[8]: training epoch 7 ...
00:08:57 - process[8] - epoch 7 - train iter 276 - 21289.8 words/s - loss: 0.4923
00:08:57 - process[8]: training epoch 8 ...
00:09:08 - process[8] - epoch 8 - train iter 276 - 20537.9 words/s - loss: 0.4893
00:09:08 - process[8]: training epoch 9 ...
00:09:18 - process[8] - epoch 9 - train iter 276 - 21068.2 words/s - loss: 0.4578
00:09:18 - process[8]: training epoch 10 ...
00:09:29 - process[8] - epoch 10 - train iter 276 - 20999.0 words/s - loss: 0.4180
00:09:29 - process[8]: evaluating epoch 10 on dev ...
00:09:52 - dev set during evaluation: 11380/11372
00:09:52 - process[8] - dev - epoch 10 - mAP: 0.460 w/ 37 queries
00:09:52 - process[8]: evaluating epoch 10 on test ...
00:10:10 - process[8] - test - epoch 10 - mAP: 0.346 w/ 37 queries
00:10:10 - process[8]: training epoch 11 ...
00:10:21 - process[8] - epoch 11 - train iter 276 - 21273.7 words/s - loss: 0.4857
00:10:21 - process[8]: evaluating epoch 11 on dev ...
00:10:40 - dev set during evaluation: 11380/11372
00:10:40 - process[8] - dev - epoch 11 - mAP: 0.469 w/ 37 queries
00:10:40 - process[8]: evaluating epoch 11 on test ...
00:10:58 - process[8] - test - epoch 11 - mAP: 0.388 w/ 37 queries
00:10:58 - process[8]: training epoch 12 ...
00:11:08 - process[8] - epoch 12 - train iter 276 - 21192.2 words/s - loss: 0.4806
00:11:08 - process[8]: evaluating epoch 12 on dev ...
00:11:27 - dev set during evaluation: 11380/11372
00:11:27 - process[8] - dev - epoch 12 - mAP: 0.471 w/ 37 queries
00:11:28 - process[8]: evaluating epoch 12 on test ...
00:11:45 - process[8] - test - epoch 12 - mAP: 0.370 w/ 37 queries
00:11:45 - process[8]: training epoch 13 ...
00:11:56 - process[8] - epoch 13 - train iter 276 - 22077.4 words/s - loss: 0.4147
00:11:56 - process[8]: evaluating epoch 13 on dev ...
00:12:16 - dev set during evaluation: 11380/11372
00:12:16 - process[8] - dev - epoch 13 - mAP: 0.493 w/ 37 queries
00:12:16 - process[8]: evaluating epoch 13 on test ...
00:12:34 - process[8] - test - epoch 13 - mAP: 0.384 w/ 37 queries
00:12:34 - process[8]: training epoch 14 ...
00:12:44 - process[8] - epoch 14 - train iter 276 - 22521.7 words/s - loss: 0.4217
00:12:44 - process[8]: evaluating epoch 14 on dev ...
00:13:04 - dev set during evaluation: 11380/11372
00:13:04 - process[8] - dev - epoch 14 - mAP: 0.471 w/ 37 queries
00:13:04 - process[8]: training epoch 15 ...
00:13:15 - process[8] - epoch 15 - train iter 276 - 20916.5 words/s - loss: 0.4141
00:13:15 - process[8]: evaluating epoch 15 on dev ...
00:13:34 - dev set during evaluation: 11380/11372
00:13:34 - process[8] - dev - epoch 15 - mAP: 0.523 w/ 37 queries
00:13:34 - process[8]: evaluating epoch 15 on test ...
00:13:52 - process[8] - test - epoch 15 - mAP: 0.396 w/ 37 queries
00:13:52 - process[8]: training epoch 16 ...
00:14:02 - process[8] - epoch 16 - train iter 276 - 21378.6 words/s - loss: 0.4063
00:14:02 - process[8]: evaluating epoch 16 on dev ...
00:14:22 - dev set during evaluation: 11380/11372
00:14:22 - process[8] - dev - epoch 16 - mAP: 0.511 w/ 37 queries
00:14:22 - process[8]: training epoch 17 ...
00:14:32 - process[8] - epoch 17 - train iter 276 - 20943.3 words/s - loss: 0.4380
00:14:32 - process[8]: evaluating epoch 17 on dev ...
00:14:51 - dev set during evaluation: 11380/11372
00:14:51 - process[8] - dev - epoch 17 - mAP: 0.503 w/ 37 queries
00:14:51 - process[8]: training epoch 18 ...
00:15:02 - process[8] - epoch 18 - train iter 276 - 21367.2 words/s - loss: 0.4537
00:15:02 - process[8]: evaluating epoch 18 on dev ...
00:15:22 - dev set during evaluation: 11380/11372
00:15:22 - process[8] - dev - epoch 18 - mAP: 0.493 w/ 37 queries
00:15:22 - process[8]: training epoch 19 ...
00:15:33 - process[8] - epoch 19 - train iter 276 - 21249.6 words/s - loss: 0.3933
00:15:33 - process[8]: evaluating epoch 19 on dev ...
00:15:52 - dev set during evaluation: 11380/11372
00:15:52 - process[8] - dev - epoch 19 - mAP: 0.477 w/ 37 queries
00:15:52 - [fold 2] best test MAP: 0.396 @ epoch 15
00:15:52 - Evaluating every 1 epochs ...
00:15:52 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:15:53 - test has 37 queries ...
00:15:53 - Data reading done ...
00:15:54 - adding 9-th encoder to optimizer...
00:15:54 - adding 10-th encoder to optimizer...
00:15:54 - adding 11-th encoder to optimizer...
00:15:55 - process[8]: training epoch 0 ...
00:16:04 - process[8] - epoch 0 - train iter 240 - 20633.8 words/s - loss: 0.6286
00:16:04 - process[8]: training epoch 1 ...
00:16:13 - process[8] - epoch 1 - train iter 240 - 21351.4 words/s - loss: 0.5609
00:16:13 - process[8]: training epoch 2 ...
00:16:22 - process[8] - epoch 2 - train iter 240 - 20757.3 words/s - loss: 0.5930
00:16:22 - process[8]: training epoch 3 ...
00:16:32 - process[8] - epoch 3 - train iter 240 - 20254.4 words/s - loss: 0.5815
00:16:32 - process[8]: training epoch 4 ...
00:16:41 - process[8] - epoch 4 - train iter 240 - 22422.5 words/s - loss: 0.5367
00:16:41 - process[8]: training epoch 5 ...
00:16:50 - process[8] - epoch 5 - train iter 240 - 21972.6 words/s - loss: 0.5152
00:16:50 - process[8]: training epoch 6 ...
00:16:58 - process[8] - epoch 6 - train iter 240 - 21388.3 words/s - loss: 0.5196
00:16:58 - process[8]: training epoch 7 ...
00:17:07 - process[8] - epoch 7 - train iter 240 - 21294.0 words/s - loss: 0.5106
00:17:07 - process[8]: training epoch 8 ...
00:17:16 - process[8] - epoch 8 - train iter 240 - 21631.7 words/s - loss: 0.4820
00:17:16 - process[8]: training epoch 9 ...
00:17:25 - process[8] - epoch 9 - train iter 240 - 21143.6 words/s - loss: 0.5114
00:17:25 - process[8]: training epoch 10 ...
00:17:34 - process[8] - epoch 10 - train iter 240 - 22145.4 words/s - loss: 0.4442
00:17:34 - process[8]: evaluating epoch 10 on dev ...
00:17:55 - process[8] - dev - epoch 10 - mAP: 0.392 w/ 37 queries
00:17:55 - process[8]: evaluating epoch 10 on test ...
00:18:16 - test set during evaluation: 11210/11201
00:18:16 - process[8] - test - epoch 10 - mAP: 0.431 w/ 37 queries
00:18:16 - process[8]: training epoch 11 ...
00:18:25 - process[8] - epoch 11 - train iter 240 - 19747.8 words/s - loss: 0.4600
00:18:25 - process[8]: evaluating epoch 11 on dev ...
00:18:43 - process[8] - dev - epoch 11 - mAP: 0.373 w/ 37 queries
00:18:43 - process[8]: training epoch 12 ...
00:18:52 - process[8] - epoch 12 - train iter 240 - 20860.3 words/s - loss: 0.4462
00:18:52 - process[8]: evaluating epoch 12 on dev ...
00:19:10 - process[8] - dev - epoch 12 - mAP: 0.377 w/ 37 queries
00:19:10 - process[8]: training epoch 13 ...
00:19:18 - process[8] - epoch 13 - train iter 240 - 22319.1 words/s - loss: 0.4429
00:19:18 - process[8]: evaluating epoch 13 on dev ...
00:19:37 - process[8] - dev - epoch 13 - mAP: 0.396 w/ 37 queries
00:19:37 - process[8]: evaluating epoch 13 on test ...
00:19:57 - test set during evaluation: 11210/11201
00:19:57 - process[8] - test - epoch 13 - mAP: 0.421 w/ 37 queries
00:19:57 - process[8]: training epoch 14 ...
00:20:06 - process[8] - epoch 14 - train iter 240 - 21622.1 words/s - loss: 0.4360
00:20:06 - process[8]: evaluating epoch 14 on dev ...
00:20:25 - process[8] - dev - epoch 14 - mAP: 0.382 w/ 37 queries
00:20:25 - process[8]: training epoch 15 ...
00:20:34 - process[8] - epoch 15 - train iter 240 - 21865.2 words/s - loss: 0.4240
00:20:34 - process[8]: evaluating epoch 15 on dev ...
00:20:52 - process[8] - dev - epoch 15 - mAP: 0.368 w/ 37 queries
00:20:52 - process[8]: training epoch 16 ...
00:21:01 - process[8] - epoch 16 - train iter 240 - 20521.3 words/s - loss: 0.4542
00:21:01 - process[8]: evaluating epoch 16 on dev ...
00:21:19 - process[8] - dev - epoch 16 - mAP: 0.387 w/ 37 queries
00:21:19 - process[8]: training epoch 17 ...
00:21:28 - process[8] - epoch 17 - train iter 240 - 21401.9 words/s - loss: 0.3975
00:21:28 - process[8]: evaluating epoch 17 on dev ...
00:21:45 - process[8] - dev - epoch 17 - mAP: 0.400 w/ 37 queries
00:21:45 - process[8]: evaluating epoch 17 on test ...
00:22:05 - test set during evaluation: 11210/11201
00:22:05 - process[8] - test - epoch 17 - mAP: 0.427 w/ 37 queries
00:22:05 - process[8]: training epoch 18 ...
00:22:14 - process[8] - epoch 18 - train iter 240 - 21471.1 words/s - loss: 0.3587
00:22:14 - process[8]: evaluating epoch 18 on dev ...
00:22:32 - process[8] - dev - epoch 18 - mAP: 0.404 w/ 37 queries
00:22:32 - process[8]: evaluating epoch 18 on test ...
00:22:52 - test set during evaluation: 11210/11201
00:22:52 - process[8] - test - epoch 18 - mAP: 0.439 w/ 37 queries
00:22:52 - process[8]: training epoch 19 ...
00:23:01 - process[8] - epoch 19 - train iter 240 - 22252.4 words/s - loss: 0.3851
00:23:01 - process[8]: evaluating epoch 19 on dev ...
00:23:19 - process[8] - dev - epoch 19 - mAP: 0.406 w/ 37 queries
00:23:19 - process[8]: evaluating epoch 19 on test ...
00:23:38 - test set during evaluation: 11210/11201
00:23:38 - process[8] - test - epoch 19 - mAP: 0.429 w/ 37 queries
00:23:38 - [fold 3] best test MAP: 0.429 @ epoch 19
00:23:38 - Evaluating every 1 epochs ...
00:23:38 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:23:39 - test has 37 queries ...
00:23:39 - Data reading done ...
00:23:40 - adding 9-th encoder to optimizer...
00:23:40 - adding 10-th encoder to optimizer...
00:23:40 - adding 11-th encoder to optimizer...
00:23:41 - process[8]: training epoch 0 ...
00:23:50 - process[8] - epoch 0 - train iter 231 - 21170.3 words/s - loss: 0.6676
00:23:50 - process[8]: training epoch 1 ...
00:23:58 - process[8] - epoch 1 - train iter 231 - 22147.3 words/s - loss: 0.6261
00:23:58 - process[8]: training epoch 2 ...
00:24:06 - process[8] - epoch 2 - train iter 231 - 22112.6 words/s - loss: 0.5440
00:24:06 - process[8]: training epoch 3 ...
00:24:15 - process[8] - epoch 3 - train iter 231 - 22059.2 words/s - loss: 0.5052
00:24:15 - process[8]: training epoch 4 ...
00:24:23 - process[8] - epoch 4 - train iter 231 - 22493.3 words/s - loss: 0.5443
00:24:23 - process[8]: training epoch 5 ...
00:24:32 - process[8] - epoch 5 - train iter 231 - 21041.8 words/s - loss: 0.5442
00:24:32 - process[8]: training epoch 6 ...
00:24:40 - process[8] - epoch 6 - train iter 231 - 21508.9 words/s - loss: 0.5200
00:24:40 - process[8]: training epoch 7 ...
00:24:48 - process[8] - epoch 7 - train iter 231 - 23059.1 words/s - loss: 0.4448
00:24:48 - process[8]: training epoch 8 ...
00:24:56 - process[8] - epoch 8 - train iter 231 - 21885.2 words/s - loss: 0.4721
00:24:56 - process[8]: training epoch 9 ...
00:25:05 - process[8] - epoch 9 - train iter 231 - 21098.2 words/s - loss: 0.4132
00:25:05 - process[8]: training epoch 10 ...
00:25:13 - process[8] - epoch 10 - train iter 231 - 22734.6 words/s - loss: 0.4628
00:25:13 - process[8]: evaluating epoch 10 on dev ...
00:25:39 - dev set during evaluation: 11210/11201
00:25:39 - process[8] - dev - epoch 10 - mAP: 0.410 w/ 37 queries
00:25:39 - process[8]: evaluating epoch 10 on test ...
00:25:57 - test set during evaluation: 10640/10633
00:25:57 - process[8] - test - epoch 10 - mAP: 0.307 w/ 37 queries
00:25:57 - process[8]: training epoch 11 ...
00:26:06 - process[8] - epoch 11 - train iter 231 - 21339.1 words/s - loss: 0.4894
00:26:06 - process[8]: evaluating epoch 11 on dev ...
00:26:26 - dev set during evaluation: 11210/11201
00:26:26 - process[8] - dev - epoch 11 - mAP: 0.428 w/ 37 queries
00:26:26 - process[8]: evaluating epoch 11 on test ...
00:26:45 - test set during evaluation: 10640/10633
00:26:45 - process[8] - test - epoch 11 - mAP: 0.324 w/ 37 queries
00:26:45 - process[8]: training epoch 12 ...
00:26:53 - process[8] - epoch 12 - train iter 231 - 21867.4 words/s - loss: 0.4612
00:26:53 - process[8]: evaluating epoch 12 on dev ...
00:27:14 - dev set during evaluation: 11210/11201
00:27:14 - process[8] - dev - epoch 12 - mAP: 0.426 w/ 37 queries
00:27:14 - process[8]: training epoch 13 ...
00:27:22 - process[8] - epoch 13 - train iter 231 - 22900.2 words/s - loss: 0.5121
00:27:22 - process[8]: evaluating epoch 13 on dev ...
00:27:43 - dev set during evaluation: 11210/11201
00:27:43 - process[8] - dev - epoch 13 - mAP: 0.398 w/ 37 queries
00:27:43 - process[8]: training epoch 14 ...
00:27:52 - process[8] - epoch 14 - train iter 231 - 21192.7 words/s - loss: 0.4183
00:27:52 - process[8]: evaluating epoch 14 on dev ...
00:28:11 - dev set during evaluation: 11210/11201
00:28:11 - process[8] - dev - epoch 14 - mAP: 0.431 w/ 37 queries
00:28:11 - process[8]: evaluating epoch 14 on test ...
00:28:29 - test set during evaluation: 10640/10633
00:28:29 - process[8] - test - epoch 14 - mAP: 0.301 w/ 37 queries
00:28:29 - process[8]: training epoch 15 ...
00:28:38 - process[8] - epoch 15 - train iter 231 - 20023.1 words/s - loss: 0.4457
00:28:38 - process[8]: evaluating epoch 15 on dev ...
00:28:58 - dev set during evaluation: 11210/11201
00:28:58 - process[8] - dev - epoch 15 - mAP: 0.404 w/ 37 queries
00:28:58 - process[8]: training epoch 16 ...
00:29:06 - process[8] - epoch 16 - train iter 231 - 22363.6 words/s - loss: 0.4085
00:29:06 - process[8]: evaluating epoch 16 on dev ...
00:29:26 - dev set during evaluation: 11210/11201
00:29:26 - process[8] - dev - epoch 16 - mAP: 0.423 w/ 37 queries
00:29:26 - process[8]: training epoch 17 ...
00:29:35 - process[8] - epoch 17 - train iter 231 - 20866.5 words/s - loss: 0.4186
00:29:35 - process[8]: evaluating epoch 17 on dev ...
00:29:55 - dev set during evaluation: 11210/11201
00:29:55 - process[8] - dev - epoch 17 - mAP: 0.434 w/ 37 queries
00:29:55 - process[8]: evaluating epoch 17 on test ...
00:30:15 - test set during evaluation: 10640/10633
00:30:15 - process[8] - test - epoch 17 - mAP: 0.329 w/ 37 queries
00:30:15 - process[8]: training epoch 18 ...
00:30:24 - process[8] - epoch 18 - train iter 231 - 21019.5 words/s - loss: 0.3669
00:30:24 - process[8]: evaluating epoch 18 on dev ...
00:30:45 - dev set during evaluation: 11210/11201
00:30:45 - process[8] - dev - epoch 18 - mAP: 0.433 w/ 37 queries
00:30:45 - process[8]: training epoch 19 ...
00:30:53 - process[8] - epoch 19 - train iter 231 - 22411.6 words/s - loss: 0.3980
00:30:53 - process[8]: evaluating epoch 19 on dev ...
00:31:13 - dev set during evaluation: 11210/11201
00:31:13 - process[8] - dev - epoch 19 - mAP: 0.393 w/ 37 queries
00:31:13 - [fold 4] best test MAP: 0.329 @ epoch 17
00:31:13 - Evaluating every 1 epochs ...
00:31:13 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:31:14 - test has 37 queries ...
00:31:14 - Data reading done ...
00:31:15 - adding 9-th encoder to optimizer...
00:31:15 - adding 10-th encoder to optimizer...
00:31:15 - adding 11-th encoder to optimizer...
00:31:16 - process[8]: training epoch 0 ...
00:31:24 - process[8] - epoch 0 - train iter 235 - 22340.8 words/s - loss: 0.6492
00:31:24 - process[8]: training epoch 1 ...
00:31:33 - process[8] - epoch 1 - train iter 235 - 21617.8 words/s - loss: 0.5747
00:31:33 - process[8]: training epoch 2 ...
00:31:42 - process[8] - epoch 2 - train iter 235 - 21767.0 words/s - loss: 0.5829
00:31:42 - process[8]: training epoch 3 ...
00:31:51 - process[8] - epoch 3 - train iter 235 - 21660.3 words/s - loss: 0.5515
00:31:51 - process[8]: training epoch 4 ...
00:32:00 - process[8] - epoch 4 - train iter 235 - 21929.4 words/s - loss: 0.4954
00:32:00 - process[8]: training epoch 5 ...
00:32:09 - process[8] - epoch 5 - train iter 235 - 21266.8 words/s - loss: 0.5548
00:32:09 - process[8]: training epoch 6 ...
00:32:19 - process[8] - epoch 6 - train iter 235 - 20494.4 words/s - loss: 0.5134
00:32:19 - process[8]: training epoch 7 ...
00:32:27 - process[8] - epoch 7 - train iter 235 - 22091.8 words/s - loss: 0.4989
00:32:27 - process[8]: training epoch 8 ...
00:32:36 - process[8] - epoch 8 - train iter 235 - 21799.6 words/s - loss: 0.5113
00:32:36 - process[8]: training epoch 9 ...
00:32:45 - process[8] - epoch 9 - train iter 235 - 21858.8 words/s - loss: 0.4740
00:32:45 - process[8]: training epoch 10 ...
00:32:53 - process[8] - epoch 10 - train iter 235 - 22158.4 words/s - loss: 0.4639
00:32:53 - process[8]: evaluating epoch 10 on dev ...
00:33:17 - dev set during evaluation: 10640/10633
00:33:17 - process[8] - dev - epoch 10 - mAP: 0.327 w/ 37 queries
00:33:17 - process[8]: evaluating epoch 10 on test ...
00:33:36 - process[8] - test - epoch 10 - mAP: 0.386 w/ 37 queries
00:33:36 - process[8]: training epoch 11 ...
00:33:45 - process[8] - epoch 11 - train iter 235 - 22112.2 words/s - loss: 0.4608
00:33:45 - process[8]: evaluating epoch 11 on dev ...
00:34:03 - dev set during evaluation: 10640/10633
00:34:03 - process[8] - dev - epoch 11 - mAP: 0.332 w/ 37 queries
00:34:03 - process[8]: evaluating epoch 11 on test ...
00:34:22 - process[8] - test - epoch 11 - mAP: 0.386 w/ 37 queries
00:34:22 - process[8]: training epoch 12 ...
00:34:31 - process[8] - epoch 12 - train iter 235 - 22245.5 words/s - loss: 0.4273
00:34:31 - process[8]: evaluating epoch 12 on dev ...
00:34:49 - dev set during evaluation: 10640/10633
00:34:49 - process[8] - dev - epoch 12 - mAP: 0.316 w/ 37 queries
00:34:49 - process[8]: training epoch 13 ...
00:34:58 - process[8] - epoch 13 - train iter 235 - 20943.5 words/s - loss: 0.4885
00:34:58 - process[8]: evaluating epoch 13 on dev ...
00:35:16 - dev set during evaluation: 10640/10633
00:35:16 - process[8] - dev - epoch 13 - mAP: 0.297 w/ 37 queries
00:35:16 - process[8]: training epoch 14 ...
00:35:25 - process[8] - epoch 14 - train iter 235 - 21521.2 words/s - loss: 0.4579
00:35:25 - process[8]: evaluating epoch 14 on dev ...
00:35:43 - dev set during evaluation: 10640/10633
00:35:43 - process[8] - dev - epoch 14 - mAP: 0.340 w/ 37 queries
00:35:43 - process[8]: evaluating epoch 14 on test ...
00:36:03 - process[8] - test - epoch 14 - mAP: 0.398 w/ 37 queries
00:36:03 - process[8]: training epoch 15 ...
00:36:11 - process[8] - epoch 15 - train iter 235 - 21516.6 words/s - loss: 0.4330
00:36:11 - process[8]: evaluating epoch 15 on dev ...
00:36:29 - dev set during evaluation: 10640/10633
00:36:29 - process[8] - dev - epoch 15 - mAP: 0.352 w/ 37 queries
00:36:29 - process[8]: evaluating epoch 15 on test ...
00:36:48 - process[8] - test - epoch 15 - mAP: 0.387 w/ 37 queries
00:36:48 - process[8]: training epoch 16 ...
00:36:57 - process[8] - epoch 16 - train iter 235 - 21498.9 words/s - loss: 0.4056
00:36:57 - process[8]: evaluating epoch 16 on dev ...
00:37:16 - dev set during evaluation: 10640/10633
00:37:16 - process[8] - dev - epoch 16 - mAP: 0.317 w/ 37 queries
00:37:16 - process[8]: training epoch 17 ...
00:37:25 - process[8] - epoch 17 - train iter 235 - 21792.1 words/s - loss: 0.4440
00:37:25 - process[8]: evaluating epoch 17 on dev ...
00:37:43 - dev set during evaluation: 10640/10633
00:37:43 - process[8] - dev - epoch 17 - mAP: 0.331 w/ 37 queries
00:37:43 - process[8]: training epoch 18 ...
00:37:51 - process[8] - epoch 18 - train iter 235 - 22780.4 words/s - loss: 0.4057
00:37:51 - process[8]: evaluating epoch 18 on dev ...
00:38:10 - dev set during evaluation: 10640/10633
00:38:10 - process[8] - dev - epoch 18 - mAP: 0.354 w/ 37 queries
00:38:10 - process[8]: evaluating epoch 18 on test ...
00:38:29 - process[8] - test - epoch 18 - mAP: 0.371 w/ 37 queries
00:38:29 - process[8]: training epoch 19 ...
00:38:38 - process[8] - epoch 19 - train iter 235 - 21040.3 words/s - loss: 0.4066
00:38:38 - process[8]: evaluating epoch 19 on dev ...
00:38:56 - dev set during evaluation: 10640/10633
00:38:56 - process[8] - dev - epoch 19 - mAP: 0.341 w/ 37 queries
00:38:56 - [fold 5] best test MAP: 0.371 @ epoch 18
00:38:56 - [0.5295391634869694, 0.39620442277311707, 0.4291130668613744, 0.3291683649468855, 0.3710066231708611]
00:38:56 - [37, 37, 37, 37, 37]
00:38:56 - final MAP: 0.411
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='de', target_lang='fr')
00:00:21 - Evaluating every 1 epochs ...
00:00:21 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:21 - test has 37 queries ...
00:00:21 - Data reading done ...
00:00:28 - adding 9-th encoder to optimizer...
00:00:28 - adding 10-th encoder to optimizer...
00:00:28 - adding 11-th encoder to optimizer...
00:00:28 - process[8]: training epoch 0 ...
00:00:39 - process[8] - epoch 0 - train iter 241 - 18963.2 words/s - loss: 0.6219
00:00:39 - process[8]: training epoch 1 ...
00:00:48 - process[8] - epoch 1 - train iter 241 - 21181.4 words/s - loss: 0.6141
00:00:48 - process[8]: training epoch 2 ...
00:00:58 - process[8] - epoch 2 - train iter 241 - 20621.4 words/s - loss: 0.5738
00:00:58 - process[8]: training epoch 3 ...
00:01:06 - process[8] - epoch 3 - train iter 241 - 22241.9 words/s - loss: 0.5852
00:01:06 - process[8]: training epoch 4 ...
00:01:15 - process[8] - epoch 4 - train iter 241 - 22482.7 words/s - loss: 0.5501
00:01:15 - process[8]: training epoch 5 ...
00:01:24 - process[8] - epoch 5 - train iter 241 - 21861.3 words/s - loss: 0.5488
00:01:24 - process[8]: training epoch 6 ...
00:01:34 - process[8] - epoch 6 - train iter 241 - 20462.3 words/s - loss: 0.4920
00:01:34 - process[8]: training epoch 7 ...
00:01:42 - process[8] - epoch 7 - train iter 241 - 21497.1 words/s - loss: 0.4948
00:01:42 - process[8]: training epoch 8 ...
00:01:51 - process[8] - epoch 8 - train iter 241 - 22219.7 words/s - loss: 0.4670
00:01:51 - process[8]: training epoch 9 ...
00:02:00 - process[8] - epoch 9 - train iter 241 - 22104.5 words/s - loss: 0.5036
00:02:00 - process[8]: training epoch 10 ...
00:02:09 - process[8] - epoch 10 - train iter 241 - 22064.5 words/s - loss: 0.4612
00:02:09 - process[8]: evaluating epoch 10 on dev ...
00:02:29 - process[8] - dev - epoch 10 - mAP: 0.407 w/ 37 queries
00:02:29 - process[8]: evaluating epoch 10 on test ...
00:02:49 - test set during evaluation: 11380/11372
00:02:49 - process[8] - test - epoch 10 - mAP: 0.521 w/ 37 queries
00:02:49 - process[8]: training epoch 11 ...
00:02:59 - process[8] - epoch 11 - train iter 241 - 20564.8 words/s - loss: 0.5050
00:02:59 - process[8]: evaluating epoch 11 on dev ...
00:03:20 - process[8] - dev - epoch 11 - mAP: 0.375 w/ 37 queries
00:03:20 - process[8]: training epoch 12 ...
00:03:29 - process[8] - epoch 12 - train iter 241 - 20247.1 words/s - loss: 0.4546
00:03:29 - process[8]: evaluating epoch 12 on dev ...
00:03:47 - process[8] - dev - epoch 12 - mAP: 0.391 w/ 37 queries
00:03:47 - process[8]: training epoch 13 ...
00:03:58 - process[8] - epoch 13 - train iter 241 - 18524.7 words/s - loss: 0.4245
00:03:58 - process[8]: evaluating epoch 13 on dev ...
00:04:15 - process[8] - dev - epoch 13 - mAP: 0.408 w/ 37 queries
00:04:15 - process[8]: evaluating epoch 13 on test ...
00:04:34 - test set during evaluation: 11380/11372
00:04:35 - process[8] - test - epoch 13 - mAP: 0.535 w/ 37 queries
00:04:35 - process[8]: training epoch 14 ...
00:04:43 - process[8] - epoch 14 - train iter 241 - 22016.2 words/s - loss: 0.4606
00:04:43 - process[8]: evaluating epoch 14 on dev ...
00:05:04 - process[8] - dev - epoch 14 - mAP: 0.399 w/ 37 queries
00:05:04 - process[8]: training epoch 15 ...
00:05:13 - process[8] - epoch 15 - train iter 241 - 22673.9 words/s - loss: 0.4530
00:05:13 - process[8]: evaluating epoch 15 on dev ...
00:05:32 - process[8] - dev - epoch 15 - mAP: 0.414 w/ 37 queries
00:05:32 - process[8]: evaluating epoch 15 on test ...
00:05:50 - test set during evaluation: 11380/11372
00:05:50 - process[8] - test - epoch 15 - mAP: 0.530 w/ 37 queries
00:05:50 - process[8]: training epoch 16 ...
00:06:00 - process[8] - epoch 16 - train iter 241 - 20973.6 words/s - loss: 0.4350
00:06:00 - process[8]: evaluating epoch 16 on dev ...
00:06:19 - process[8] - dev - epoch 16 - mAP: 0.392 w/ 37 queries
00:06:19 - process[8]: training epoch 17 ...
00:06:27 - process[8] - epoch 17 - train iter 241 - 22455.0 words/s - loss: 0.4181
00:06:27 - process[8]: evaluating epoch 17 on dev ...
00:06:46 - process[8] - dev - epoch 17 - mAP: 0.411 w/ 37 queries
00:06:46 - process[8]: training epoch 18 ...
00:06:55 - process[8] - epoch 18 - train iter 241 - 20607.2 words/s - loss: 0.4639
00:06:55 - process[8]: evaluating epoch 18 on dev ...
00:07:13 - process[8] - dev - epoch 18 - mAP: 0.414 w/ 37 queries
00:07:13 - process[8]: training epoch 19 ...
00:07:23 - process[8] - epoch 19 - train iter 241 - 22009.0 words/s - loss: 0.3927
00:07:23 - process[8]: evaluating epoch 19 on dev ...
00:07:41 - process[8] - dev - epoch 19 - mAP: 0.412 w/ 37 queries
00:07:41 - [fold 1] best test MAP: 0.530 @ epoch 15
00:07:41 - Evaluating every 1 epochs ...
00:07:41 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:07:42 - test has 37 queries ...
00:07:42 - Data reading done ...
00:07:43 - adding 9-th encoder to optimizer...
00:07:43 - adding 10-th encoder to optimizer...
00:07:43 - adding 11-th encoder to optimizer...
00:07:44 - process[8]: training epoch 0 ...
00:07:54 - process[8] - epoch 0 - train iter 276 - 21426.7 words/s - loss: 0.6184
00:07:54 - process[8]: training epoch 1 ...
00:08:05 - process[8] - epoch 1 - train iter 276 - 20381.0 words/s - loss: 0.5830
00:08:05 - process[8]: training epoch 2 ...
00:08:17 - process[8] - epoch 2 - train iter 276 - 19234.9 words/s - loss: 0.5633
00:08:17 - process[8]: training epoch 3 ...
00:08:27 - process[8] - epoch 3 - train iter 276 - 22539.8 words/s - loss: 0.5613
00:08:27 - process[8]: training epoch 4 ...
00:08:38 - process[8] - epoch 4 - train iter 276 - 21387.5 words/s - loss: 0.5476
00:08:38 - process[8]: training epoch 5 ...
00:08:47 - process[8] - epoch 5 - train iter 276 - 22280.0 words/s - loss: 0.4963
00:08:47 - process[8]: training epoch 6 ...
00:08:58 - process[8] - epoch 6 - train iter 276 - 21764.8 words/s - loss: 0.5190
00:08:58 - process[8]: training epoch 7 ...
00:09:08 - process[8] - epoch 7 - train iter 276 - 21386.5 words/s - loss: 0.4923
00:09:08 - process[8]: training epoch 8 ...
00:09:19 - process[8] - epoch 8 - train iter 276 - 20681.4 words/s - loss: 0.4893
00:09:19 - process[8]: training epoch 9 ...
00:09:29 - process[8] - epoch 9 - train iter 276 - 21244.6 words/s - loss: 0.4578
00:09:29 - process[8]: training epoch 10 ...
00:09:40 - process[8] - epoch 10 - train iter 276 - 21178.2 words/s - loss: 0.4180
00:09:40 - process[8]: evaluating epoch 10 on dev ...
00:10:06 - dev set during evaluation: 11380/11372
00:10:06 - process[8] - dev - epoch 10 - mAP: 0.460 w/ 37 queries
00:10:06 - process[8]: evaluating epoch 10 on test ...
00:10:23 - process[8] - test - epoch 10 - mAP: 0.346 w/ 37 queries
00:10:23 - process[8]: training epoch 11 ...
00:10:34 - process[8] - epoch 11 - train iter 276 - 21179.3 words/s - loss: 0.4857
00:10:34 - process[8]: evaluating epoch 11 on dev ...
00:10:54 - dev set during evaluation: 11380/11372
00:10:54 - process[8] - dev - epoch 11 - mAP: 0.469 w/ 37 queries
00:10:54 - process[8]: evaluating epoch 11 on test ...
00:11:12 - process[8] - test - epoch 11 - mAP: 0.388 w/ 37 queries
00:11:12 - process[8]: training epoch 12 ...
00:11:22 - process[8] - epoch 12 - train iter 276 - 21194.4 words/s - loss: 0.4806
00:11:22 - process[8]: evaluating epoch 12 on dev ...
00:11:40 - dev set during evaluation: 11380/11372
00:11:40 - process[8] - dev - epoch 12 - mAP: 0.471 w/ 37 queries
00:11:40 - process[8]: evaluating epoch 12 on test ...
00:11:58 - process[8] - test - epoch 12 - mAP: 0.370 w/ 37 queries
00:11:58 - process[8]: training epoch 13 ...
00:12:08 - process[8] - epoch 13 - train iter 276 - 22075.7 words/s - loss: 0.4147
00:12:08 - process[8]: evaluating epoch 13 on dev ...
00:12:27 - dev set during evaluation: 11380/11372
00:12:27 - process[8] - dev - epoch 13 - mAP: 0.493 w/ 37 queries
00:12:27 - process[8]: evaluating epoch 13 on test ...
00:12:45 - process[8] - test - epoch 13 - mAP: 0.384 w/ 37 queries
00:12:45 - process[8]: training epoch 14 ...
00:12:55 - process[8] - epoch 14 - train iter 276 - 22576.7 words/s - loss: 0.4217
00:12:55 - process[8]: evaluating epoch 14 on dev ...
00:13:15 - dev set during evaluation: 11380/11372
00:13:15 - process[8] - dev - epoch 14 - mAP: 0.471 w/ 37 queries
00:13:15 - process[8]: training epoch 15 ...
00:13:26 - process[8] - epoch 15 - train iter 276 - 20978.0 words/s - loss: 0.4141
00:13:26 - process[8]: evaluating epoch 15 on dev ...
00:13:44 - dev set during evaluation: 11380/11372
00:13:44 - process[8] - dev - epoch 15 - mAP: 0.523 w/ 37 queries
00:13:44 - process[8]: evaluating epoch 15 on test ...
00:14:01 - process[8] - test - epoch 15 - mAP: 0.396 w/ 37 queries
00:14:01 - process[8]: training epoch 16 ...
00:14:11 - process[8] - epoch 16 - train iter 276 - 21407.3 words/s - loss: 0.4063
00:14:11 - process[8]: evaluating epoch 16 on dev ...
00:14:30 - dev set during evaluation: 11380/11372
00:14:30 - process[8] - dev - epoch 16 - mAP: 0.511 w/ 37 queries
00:14:30 - process[8]: training epoch 17 ...
00:14:41 - process[8] - epoch 17 - train iter 276 - 19943.9 words/s - loss: 0.4380
00:14:41 - process[8]: evaluating epoch 17 on dev ...
00:15:00 - dev set during evaluation: 11380/11372
00:15:00 - process[8] - dev - epoch 17 - mAP: 0.503 w/ 37 queries
00:15:00 - process[8]: training epoch 18 ...
00:15:12 - process[8] - epoch 18 - train iter 276 - 20047.6 words/s - loss: 0.4537
00:15:12 - process[8]: evaluating epoch 18 on dev ...
00:15:30 - dev set during evaluation: 11380/11372
00:15:30 - process[8] - dev - epoch 18 - mAP: 0.493 w/ 37 queries
00:15:30 - process[8]: training epoch 19 ...
00:15:40 - process[8] - epoch 19 - train iter 276 - 21272.9 words/s - loss: 0.3933
00:15:40 - process[8]: evaluating epoch 19 on dev ...
00:16:00 - dev set during evaluation: 11380/11372
00:16:00 - process[8] - dev - epoch 19 - mAP: 0.477 w/ 37 queries
00:16:00 - [fold 2] best test MAP: 0.396 @ epoch 15
00:16:00 - Evaluating every 1 epochs ...
00:16:00 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:16:01 - test has 37 queries ...
00:16:01 - Data reading done ...
00:16:02 - adding 9-th encoder to optimizer...
00:16:02 - adding 10-th encoder to optimizer...
00:16:02 - adding 11-th encoder to optimizer...
00:16:02 - process[8]: training epoch 0 ...
00:16:12 - process[8] - epoch 0 - train iter 240 - 20748.0 words/s - loss: 0.6286
00:16:12 - process[8]: training epoch 1 ...
00:16:21 - process[8] - epoch 1 - train iter 240 - 21400.5 words/s - loss: 0.5609
00:16:21 - process[8]: training epoch 2 ...
00:16:30 - process[8] - epoch 2 - train iter 240 - 20794.1 words/s - loss: 0.5930
00:16:30 - process[8]: training epoch 3 ...
00:16:40 - process[8] - epoch 3 - train iter 240 - 20291.8 words/s - loss: 0.5815
00:16:40 - process[8]: training epoch 4 ...
00:16:49 - process[8] - epoch 4 - train iter 240 - 22506.5 words/s - loss: 0.5367
00:16:49 - process[8]: training epoch 5 ...
00:16:57 - process[8] - epoch 5 - train iter 240 - 21978.1 words/s - loss: 0.5152
00:16:57 - process[8]: training epoch 6 ...
00:17:06 - process[8] - epoch 6 - train iter 240 - 21465.1 words/s - loss: 0.5196
00:17:06 - process[8]: training epoch 7 ...
00:17:15 - process[8] - epoch 7 - train iter 240 - 21339.6 words/s - loss: 0.5106
00:17:15 - process[8]: training epoch 8 ...
00:17:24 - process[8] - epoch 8 - train iter 240 - 21639.3 words/s - loss: 0.4820
00:17:24 - process[8]: training epoch 9 ...
00:17:33 - process[8] - epoch 9 - train iter 240 - 21184.2 words/s - loss: 0.5114
00:17:33 - process[8]: training epoch 10 ...
00:17:41 - process[8] - epoch 10 - train iter 240 - 22200.8 words/s - loss: 0.4442
00:17:41 - process[8]: evaluating epoch 10 on dev ...
00:18:00 - process[8] - dev - epoch 10 - mAP: 0.392 w/ 37 queries
00:18:00 - process[8]: evaluating epoch 10 on test ...
00:18:19 - test set during evaluation: 11210/11201
00:18:19 - process[8] - test - epoch 10 - mAP: 0.431 w/ 37 queries
00:18:19 - process[8]: training epoch 11 ...
00:18:28 - process[8] - epoch 11 - train iter 240 - 21534.9 words/s - loss: 0.4600
00:18:28 - process[8]: evaluating epoch 11 on dev ...
00:18:46 - process[8] - dev - epoch 11 - mAP: 0.373 w/ 37 queries
00:18:46 - process[8]: training epoch 12 ...
00:18:55 - process[8] - epoch 12 - train iter 240 - 20889.5 words/s - loss: 0.4462
00:18:55 - process[8]: evaluating epoch 12 on dev ...
00:19:13 - process[8] - dev - epoch 12 - mAP: 0.377 w/ 37 queries
00:19:13 - process[8]: training epoch 13 ...
00:19:21 - process[8] - epoch 13 - train iter 240 - 22243.7 words/s - loss: 0.4429
00:19:21 - process[8]: evaluating epoch 13 on dev ...
00:19:40 - process[8] - dev - epoch 13 - mAP: 0.396 w/ 37 queries
00:19:40 - process[8]: evaluating epoch 13 on test ...
00:20:00 - test set during evaluation: 11210/11201
00:20:00 - process[8] - test - epoch 13 - mAP: 0.421 w/ 37 queries
00:20:00 - process[8]: training epoch 14 ...
00:20:09 - process[8] - epoch 14 - train iter 240 - 21589.3 words/s - loss: 0.4360
00:20:09 - process[8]: evaluating epoch 14 on dev ...
00:20:26 - process[8] - dev - epoch 14 - mAP: 0.382 w/ 37 queries
00:20:26 - process[8]: training epoch 15 ...
00:20:35 - process[8] - epoch 15 - train iter 240 - 22098.4 words/s - loss: 0.4240
00:20:35 - process[8]: evaluating epoch 15 on dev ...
00:20:53 - process[8] - dev - epoch 15 - mAP: 0.368 w/ 37 queries
00:20:53 - process[8]: training epoch 16 ...
00:21:02 - process[8] - epoch 16 - train iter 240 - 20586.9 words/s - loss: 0.4542
00:21:02 - process[8]: evaluating epoch 16 on dev ...
00:21:19 - process[8] - dev - epoch 16 - mAP: 0.387 w/ 37 queries
00:21:19 - process[8]: training epoch 17 ...
00:21:28 - process[8] - epoch 17 - train iter 240 - 21571.1 words/s - loss: 0.3975
00:21:28 - process[8]: evaluating epoch 17 on dev ...
00:21:46 - process[8] - dev - epoch 17 - mAP: 0.400 w/ 37 queries
00:21:46 - process[8]: evaluating epoch 17 on test ...
00:22:06 - test set during evaluation: 11210/11201
00:22:06 - process[8] - test - epoch 17 - mAP: 0.427 w/ 37 queries
00:22:06 - process[8]: training epoch 18 ...
00:22:15 - process[8] - epoch 18 - train iter 240 - 21410.2 words/s - loss: 0.3587
00:22:15 - process[8]: evaluating epoch 18 on dev ...
00:22:33 - process[8] - dev - epoch 18 - mAP: 0.404 w/ 37 queries
00:22:33 - process[8]: evaluating epoch 18 on test ...
00:22:53 - test set during evaluation: 11210/11201
00:22:53 - process[8] - test - epoch 18 - mAP: 0.439 w/ 37 queries
00:22:53 - process[8]: training epoch 19 ...
00:23:02 - process[8] - epoch 19 - train iter 240 - 22322.5 words/s - loss: 0.3851
00:23:02 - process[8]: evaluating epoch 19 on dev ...
00:23:19 - process[8] - dev - epoch 19 - mAP: 0.406 w/ 37 queries
00:23:19 - process[8]: evaluating epoch 19 on test ...
00:23:38 - test set during evaluation: 11210/11201
00:23:38 - process[8] - test - epoch 19 - mAP: 0.429 w/ 37 queries
00:23:38 - [fold 3] best test MAP: 0.429 @ epoch 19
00:23:38 - Evaluating every 1 epochs ...
00:23:38 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:23:39 - test has 37 queries ...
00:23:39 - Data reading done ...
00:23:40 - adding 9-th encoder to optimizer...
00:23:40 - adding 10-th encoder to optimizer...
00:23:40 - adding 11-th encoder to optimizer...
00:23:41 - process[8]: training epoch 0 ...
00:23:50 - process[8] - epoch 0 - train iter 231 - 20995.5 words/s - loss: 0.6676
00:23:50 - process[8]: training epoch 1 ...
00:23:58 - process[8] - epoch 1 - train iter 231 - 21993.1 words/s - loss: 0.6261
00:23:58 - process[8]: training epoch 2 ...
00:24:06 - process[8] - epoch 2 - train iter 231 - 21945.3 words/s - loss: 0.5440
00:24:06 - process[8]: training epoch 3 ...
00:24:15 - process[8] - epoch 3 - train iter 231 - 21914.3 words/s - loss: 0.5052
00:24:15 - process[8]: training epoch 4 ...
00:24:23 - process[8] - epoch 4 - train iter 231 - 22337.0 words/s - loss: 0.5443
00:24:23 - process[8]: training epoch 5 ...
00:24:32 - process[8] - epoch 5 - train iter 231 - 20914.4 words/s - loss: 0.5442
00:24:32 - process[8]: training epoch 6 ...
00:24:41 - process[8] - epoch 6 - train iter 231 - 21264.1 words/s - loss: 0.5200
00:24:41 - process[8]: training epoch 7 ...
00:24:49 - process[8] - epoch 7 - train iter 231 - 22969.1 words/s - loss: 0.4448
00:24:49 - process[8]: training epoch 8 ...
00:24:57 - process[8] - epoch 8 - train iter 231 - 21844.1 words/s - loss: 0.4721
00:24:57 - process[8]: training epoch 9 ...
00:25:06 - process[8] - epoch 9 - train iter 231 - 21004.8 words/s - loss: 0.4132
00:25:06 - process[8]: training epoch 10 ...
00:25:14 - process[8] - epoch 10 - train iter 231 - 22604.0 words/s - loss: 0.4628
00:25:14 - process[8]: evaluating epoch 10 on dev ...
00:25:40 - dev set during evaluation: 11210/11201
00:25:40 - process[8] - dev - epoch 10 - mAP: 0.410 w/ 37 queries
00:25:40 - process[8]: evaluating epoch 10 on test ...
00:25:58 - test set during evaluation: 10640/10633
00:25:58 - process[8] - test - epoch 10 - mAP: 0.307 w/ 37 queries
00:25:58 - process[8]: training epoch 11 ...
00:26:07 - process[8] - epoch 11 - train iter 231 - 21440.2 words/s - loss: 0.4894
00:26:07 - process[8]: evaluating epoch 11 on dev ...
00:26:26 - dev set during evaluation: 11210/11201
00:26:26 - process[8] - dev - epoch 11 - mAP: 0.428 w/ 37 queries
00:26:26 - process[8]: evaluating epoch 11 on test ...
00:26:44 - test set during evaluation: 10640/10633
00:26:44 - process[8] - test - epoch 11 - mAP: 0.324 w/ 37 queries
00:26:44 - process[8]: training epoch 12 ...
00:26:52 - process[8] - epoch 12 - train iter 231 - 21902.6 words/s - loss: 0.4612
00:26:52 - process[8]: evaluating epoch 12 on dev ...
00:27:12 - dev set during evaluation: 11210/11201
00:27:12 - process[8] - dev - epoch 12 - mAP: 0.426 w/ 37 queries
00:27:12 - process[8]: training epoch 13 ...
00:27:20 - process[8] - epoch 13 - train iter 231 - 23074.9 words/s - loss: 0.5121
00:27:20 - process[8]: evaluating epoch 13 on dev ...
00:27:41 - dev set during evaluation: 11210/11201
00:27:41 - process[8] - dev - epoch 13 - mAP: 0.398 w/ 37 queries
00:27:41 - process[8]: training epoch 14 ...
00:27:49 - process[8] - epoch 14 - train iter 231 - 21083.6 words/s - loss: 0.4183
00:27:49 - process[8]: evaluating epoch 14 on dev ...
00:28:09 - dev set during evaluation: 11210/11201
00:28:09 - process[8] - dev - epoch 14 - mAP: 0.431 w/ 37 queries
00:28:09 - process[8]: evaluating epoch 14 on test ...
00:28:27 - test set during evaluation: 10640/10633
00:28:27 - process[8] - test - epoch 14 - mAP: 0.301 w/ 37 queries
00:28:27 - process[8]: training epoch 15 ...
00:28:36 - process[8] - epoch 15 - train iter 231 - 19854.2 words/s - loss: 0.4457
00:28:36 - process[8]: evaluating epoch 15 on dev ...
00:28:56 - dev set during evaluation: 11210/11201
00:28:56 - process[8] - dev - epoch 15 - mAP: 0.404 w/ 37 queries
00:28:56 - process[8]: training epoch 16 ...
00:29:04 - process[8] - epoch 16 - train iter 231 - 22450.1 words/s - loss: 0.4085
00:29:04 - process[8]: evaluating epoch 16 on dev ...
00:29:24 - dev set during evaluation: 11210/11201
00:29:24 - process[8] - dev - epoch 16 - mAP: 0.423 w/ 37 queries
00:29:24 - process[8]: training epoch 17 ...
00:29:33 - process[8] - epoch 17 - train iter 231 - 20833.9 words/s - loss: 0.4186
00:29:33 - process[8]: evaluating epoch 17 on dev ...
00:29:52 - dev set during evaluation: 11210/11201
00:29:52 - process[8] - dev - epoch 17 - mAP: 0.434 w/ 37 queries
00:29:52 - process[8]: evaluating epoch 17 on test ...
00:30:09 - test set during evaluation: 10640/10633
00:30:09 - process[8] - test - epoch 17 - mAP: 0.329 w/ 37 queries
00:30:09 - process[8]: training epoch 18 ...
00:30:19 - process[8] - epoch 18 - train iter 231 - 20115.7 words/s - loss: 0.3669
00:30:19 - process[8]: evaluating epoch 18 on dev ...
00:30:39 - dev set during evaluation: 11210/11201
00:30:39 - process[8] - dev - epoch 18 - mAP: 0.433 w/ 37 queries
00:30:39 - process[8]: training epoch 19 ...
00:30:48 - process[8] - epoch 19 - train iter 231 - 22481.4 words/s - loss: 0.3980
00:30:48 - process[8]: evaluating epoch 19 on dev ...
00:31:08 - dev set during evaluation: 11210/11201
00:31:08 - process[8] - dev - epoch 19 - mAP: 0.393 w/ 37 queries
00:31:08 - [fold 4] best test MAP: 0.329 @ epoch 17
00:31:08 - Evaluating every 1 epochs ...
00:31:08 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:31:08 - test has 37 queries ...
00:31:08 - Data reading done ...
00:31:09 - adding 9-th encoder to optimizer...
00:31:09 - adding 10-th encoder to optimizer...
00:31:09 - adding 11-th encoder to optimizer...
00:31:10 - process[8]: training epoch 0 ...
00:31:19 - process[8] - epoch 0 - train iter 235 - 22400.0 words/s - loss: 0.6492
00:31:19 - process[8]: training epoch 1 ...
00:31:28 - process[8] - epoch 1 - train iter 235 - 21731.7 words/s - loss: 0.5747
00:31:28 - process[8]: training epoch 2 ...
00:31:36 - process[8] - epoch 2 - train iter 235 - 21992.3 words/s - loss: 0.5829
00:31:36 - process[8]: training epoch 3 ...
00:31:45 - process[8] - epoch 3 - train iter 235 - 21913.4 words/s - loss: 0.5515
00:31:45 - process[8]: training epoch 4 ...
00:31:54 - process[8] - epoch 4 - train iter 235 - 22103.3 words/s - loss: 0.4954
00:31:54 - process[8]: training epoch 5 ...
00:32:03 - process[8] - epoch 5 - train iter 235 - 21317.4 words/s - loss: 0.5548
00:32:03 - process[8]: training epoch 6 ...
00:32:13 - process[8] - epoch 6 - train iter 235 - 20493.3 words/s - loss: 0.5134
00:32:13 - process[8]: training epoch 7 ...
00:32:21 - process[8] - epoch 7 - train iter 235 - 22124.9 words/s - loss: 0.4989
00:32:21 - process[8]: training epoch 8 ...
00:32:30 - process[8] - epoch 8 - train iter 235 - 21861.9 words/s - loss: 0.5113
00:32:30 - process[8]: training epoch 9 ...
00:32:39 - process[8] - epoch 9 - train iter 235 - 21985.5 words/s - loss: 0.4740
00:32:39 - process[8]: training epoch 10 ...
00:32:47 - process[8] - epoch 10 - train iter 235 - 22268.8 words/s - loss: 0.4639
00:32:47 - process[8]: evaluating epoch 10 on dev ...
00:33:07 - dev set during evaluation: 10640/10633
00:33:08 - process[8] - dev - epoch 10 - mAP: 0.327 w/ 37 queries
00:33:08 - process[8]: evaluating epoch 10 on test ...
00:33:26 - process[8] - test - epoch 10 - mAP: 0.386 w/ 37 queries
00:33:26 - process[8]: training epoch 11 ...
00:33:35 - process[8] - epoch 11 - train iter 235 - 22135.5 words/s - loss: 0.4608
00:33:35 - process[8]: evaluating epoch 11 on dev ...
00:33:54 - dev set during evaluation: 10640/10633
00:33:54 - process[8] - dev - epoch 11 - mAP: 0.332 w/ 37 queries
00:33:54 - process[8]: evaluating epoch 11 on test ...
00:34:12 - process[8] - test - epoch 11 - mAP: 0.386 w/ 37 queries
00:34:12 - process[8]: training epoch 12 ...
00:34:21 - process[8] - epoch 12 - train iter 235 - 22104.5 words/s - loss: 0.4273
00:34:21 - process[8]: evaluating epoch 12 on dev ...
00:34:39 - dev set during evaluation: 10640/10633
00:34:39 - process[8] - dev - epoch 12 - mAP: 0.316 w/ 37 queries
00:34:39 - process[8]: training epoch 13 ...
00:34:48 - process[8] - epoch 13 - train iter 235 - 20927.2 words/s - loss: 0.4885
00:34:48 - process[8]: evaluating epoch 13 on dev ...
00:35:06 - dev set during evaluation: 10640/10633
00:35:06 - process[8] - dev - epoch 13 - mAP: 0.297 w/ 37 queries
00:35:06 - process[8]: training epoch 14 ...
00:35:15 - process[8] - epoch 14 - train iter 235 - 21516.0 words/s - loss: 0.4579
00:35:15 - process[8]: evaluating epoch 14 on dev ...
00:35:32 - dev set during evaluation: 10640/10633
00:35:32 - process[8] - dev - epoch 14 - mAP: 0.340 w/ 37 queries
00:35:32 - process[8]: evaluating epoch 14 on test ...
00:35:51 - process[8] - test - epoch 14 - mAP: 0.398 w/ 37 queries
00:35:51 - process[8]: training epoch 15 ...
00:36:00 - process[8] - epoch 15 - train iter 235 - 21276.3 words/s - loss: 0.4330
00:36:00 - process[8]: evaluating epoch 15 on dev ...
00:36:18 - dev set during evaluation: 10640/10633
00:36:18 - process[8] - dev - epoch 15 - mAP: 0.352 w/ 37 queries
00:36:18 - process[8]: evaluating epoch 15 on test ...
00:36:37 - process[8] - test - epoch 15 - mAP: 0.387 w/ 37 queries
00:36:37 - process[8]: training epoch 16 ...
00:36:46 - process[8] - epoch 16 - train iter 235 - 21621.3 words/s - loss: 0.4056
00:36:46 - process[8]: evaluating epoch 16 on dev ...
00:37:04 - dev set during evaluation: 10640/10633
00:37:04 - process[8] - dev - epoch 16 - mAP: 0.317 w/ 37 queries
00:37:04 - process[8]: training epoch 17 ...
00:37:12 - process[8] - epoch 17 - train iter 235 - 21974.6 words/s - loss: 0.4440
00:37:12 - process[8]: evaluating epoch 17 on dev ...
00:37:32 - dev set during evaluation: 10640/10633
00:37:32 - process[8] - dev - epoch 17 - mAP: 0.331 w/ 37 queries
00:37:32 - process[8]: training epoch 18 ...
00:37:40 - process[8] - epoch 18 - train iter 235 - 22735.6 words/s - loss: 0.4057
00:37:40 - process[8]: evaluating epoch 18 on dev ...
00:37:59 - dev set during evaluation: 10640/10633
00:37:59 - process[8] - dev - epoch 18 - mAP: 0.354 w/ 37 queries
00:37:59 - process[8]: evaluating epoch 18 on test ...
00:38:20 - process[8] - test - epoch 18 - mAP: 0.371 w/ 37 queries
00:38:20 - process[8]: training epoch 19 ...
00:38:29 - process[8] - epoch 19 - train iter 235 - 20752.2 words/s - loss: 0.4066
00:38:29 - process[8]: evaluating epoch 19 on dev ...
00:38:47 - dev set during evaluation: 10640/10633
00:38:47 - process[8] - dev - epoch 19 - mAP: 0.341 w/ 37 queries
00:38:47 - [fold 5] best test MAP: 0.371 @ epoch 18
00:38:47 - [0.5295391634869694, 0.39620442277311707, 0.4291130668613744, 0.3291683649468855, 0.3710066231708611]
00:38:47 - [37, 37, 37, 37, 37]
00:38:47 - final MAP: 0.411
