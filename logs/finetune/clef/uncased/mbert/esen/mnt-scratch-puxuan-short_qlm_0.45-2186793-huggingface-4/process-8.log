00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='en')
00:00:16 - Evaluating every 1 epochs ...
00:00:16 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:17 - test has 35 queries ...
00:00:17 - Data reading done ...
00:00:24 - adding 9-th encoder to optimizer...
00:00:24 - adding 10-th encoder to optimizer...
00:00:24 - adding 11-th encoder to optimizer...
00:00:25 - process[8]: training epoch 0 ...
00:00:37 - process[8] - epoch 0 - train iter 197 - 15212.0 words/s - loss: 0.5962
00:00:37 - process[8]: training epoch 1 ...
00:00:47 - process[8] - epoch 1 - train iter 197 - 17618.4 words/s - loss: 0.5135
00:00:47 - process[8]: training epoch 2 ...
00:00:58 - process[8] - epoch 2 - train iter 197 - 16025.9 words/s - loss: 0.5186
00:00:58 - process[8]: training epoch 3 ...
00:01:09 - process[8] - epoch 3 - train iter 197 - 15831.1 words/s - loss: 0.5308
00:01:09 - process[8]: training epoch 4 ...
00:01:21 - process[8] - epoch 4 - train iter 197 - 15082.4 words/s - loss: 0.4634
00:01:21 - process[8]: training epoch 5 ...
00:01:31 - process[8] - epoch 5 - train iter 197 - 17274.6 words/s - loss: 0.4835
00:01:31 - process[8]: training epoch 6 ...
00:01:43 - process[8] - epoch 6 - train iter 197 - 15030.4 words/s - loss: 0.4844
00:01:43 - process[8]: training epoch 7 ...
00:01:53 - process[8] - epoch 7 - train iter 197 - 16987.9 words/s - loss: 0.3865
00:01:53 - process[8]: training epoch 8 ...
00:02:06 - process[8] - epoch 8 - train iter 197 - 13913.5 words/s - loss: 0.4640
00:02:06 - process[8]: training epoch 9 ...
00:02:17 - process[8] - epoch 9 - train iter 197 - 16261.1 words/s - loss: 0.4475
00:02:17 - process[8]: training epoch 10 ...
00:02:27 - process[8] - epoch 10 - train iter 197 - 17623.9 words/s - loss: 0.4569
00:02:27 - process[8]: evaluating epoch 10 on dev ...
00:03:14 - dev set during evaluation: 14160/14157
00:03:14 - process[8] - dev - epoch 10 - mAP: 0.442 w/ 35 queries
00:03:14 - process[8]: evaluating epoch 10 on test ...
00:03:55 - test set during evaluation: 14980/14975
00:03:55 - process[8] - test - epoch 10 - mAP: 0.433 w/ 35 queries
00:03:55 - process[8]: training epoch 11 ...
00:04:05 - process[8] - epoch 11 - train iter 197 - 17171.0 words/s - loss: 0.4040
00:04:05 - process[8]: evaluating epoch 11 on dev ...
00:04:51 - dev set during evaluation: 14160/14157
00:04:51 - process[8] - dev - epoch 11 - mAP: 0.434 w/ 35 queries
00:04:51 - process[8]: training epoch 12 ...
00:05:04 - process[8] - epoch 12 - train iter 197 - 14583.4 words/s - loss: 0.3770
00:05:04 - process[8]: evaluating epoch 12 on dev ...
00:05:45 - dev set during evaluation: 14160/14157
00:05:45 - process[8] - dev - epoch 12 - mAP: 0.438 w/ 35 queries
00:05:45 - process[8]: training epoch 13 ...
00:05:56 - process[8] - epoch 13 - train iter 197 - 16841.0 words/s - loss: 0.4054
00:05:56 - process[8]: evaluating epoch 13 on dev ...
00:06:41 - dev set during evaluation: 14160/14157
00:06:41 - process[8] - dev - epoch 13 - mAP: 0.441 w/ 35 queries
00:06:41 - process[8]: training epoch 14 ...
00:06:53 - process[8] - epoch 14 - train iter 197 - 15020.2 words/s - loss: 0.3594
00:06:53 - process[8]: evaluating epoch 14 on dev ...
00:07:37 - dev set during evaluation: 14160/14157
00:07:37 - process[8] - dev - epoch 14 - mAP: 0.439 w/ 35 queries
00:07:37 - process[8]: training epoch 15 ...
00:07:48 - process[8] - epoch 15 - train iter 197 - 16360.6 words/s - loss: 0.3663
00:07:48 - process[8]: evaluating epoch 15 on dev ...
00:08:31 - dev set during evaluation: 14160/14157
00:08:31 - process[8] - dev - epoch 15 - mAP: 0.423 w/ 35 queries
00:08:32 - process[8]: training epoch 16 ...
00:08:44 - process[8] - epoch 16 - train iter 197 - 15178.4 words/s - loss: 0.3671
00:08:44 - process[8]: evaluating epoch 16 on dev ...
00:09:27 - dev set during evaluation: 14160/14157
00:09:27 - process[8] - dev - epoch 16 - mAP: 0.437 w/ 35 queries
00:09:27 - process[8]: training epoch 17 ...
00:09:38 - process[8] - epoch 17 - train iter 197 - 16737.0 words/s - loss: 0.4189
00:09:38 - process[8]: evaluating epoch 17 on dev ...
00:10:22 - dev set during evaluation: 14160/14157
00:10:22 - process[8] - dev - epoch 17 - mAP: 0.435 w/ 35 queries
00:10:22 - process[8]: training epoch 18 ...
00:10:33 - process[8] - epoch 18 - train iter 197 - 16735.2 words/s - loss: 0.4123
00:10:33 - process[8]: evaluating epoch 18 on dev ...
00:11:18 - dev set during evaluation: 14160/14157
00:11:18 - process[8] - dev - epoch 18 - mAP: 0.435 w/ 35 queries
00:11:18 - process[8]: training epoch 19 ...
00:11:29 - process[8] - epoch 19 - train iter 197 - 16969.9 words/s - loss: 0.3736
00:11:29 - process[8]: evaluating epoch 19 on dev ...
00:12:14 - dev set during evaluation: 14160/14157
00:12:14 - process[8] - dev - epoch 19 - mAP: 0.428 w/ 35 queries
00:12:14 - [fold 1] best test MAP: 0.433 @ epoch 10
00:12:14 - Evaluating every 1 epochs ...
00:12:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:15 - test has 36 queries ...
00:12:15 - Data reading done ...
00:12:16 - adding 9-th encoder to optimizer...
00:12:16 - adding 10-th encoder to optimizer...
00:12:16 - adding 11-th encoder to optimizer...
00:12:17 - process[8]: training epoch 0 ...
00:12:26 - process[8] - epoch 0 - train iter 187 - 17478.1 words/s - loss: 0.6223
00:12:26 - process[8]: training epoch 1 ...
00:12:37 - process[8] - epoch 1 - train iter 187 - 16801.2 words/s - loss: 0.5278
00:12:37 - process[8]: training epoch 2 ...
00:12:46 - process[8] - epoch 2 - train iter 187 - 17919.6 words/s - loss: 0.5708
00:12:46 - process[8]: training epoch 3 ...
00:12:55 - process[8] - epoch 3 - train iter 187 - 18132.2 words/s - loss: 0.4885
00:12:55 - process[8]: training epoch 4 ...
00:13:06 - process[8] - epoch 4 - train iter 187 - 16951.7 words/s - loss: 0.4729
00:13:06 - process[8]: training epoch 5 ...
00:13:16 - process[8] - epoch 5 - train iter 187 - 16149.3 words/s - loss: 0.5058
00:13:16 - process[8]: training epoch 6 ...
00:13:25 - process[8] - epoch 6 - train iter 187 - 18280.7 words/s - loss: 0.4268
00:13:25 - process[8]: training epoch 7 ...
00:13:36 - process[8] - epoch 7 - train iter 187 - 16715.1 words/s - loss: 0.4539
00:13:36 - process[8]: training epoch 8 ...
00:13:45 - process[8] - epoch 8 - train iter 187 - 17721.4 words/s - loss: 0.4618
00:13:45 - process[8]: training epoch 9 ...
00:13:55 - process[8] - epoch 9 - train iter 187 - 16944.2 words/s - loss: 0.4307
00:13:55 - process[8]: training epoch 10 ...
00:14:06 - process[8] - epoch 10 - train iter 187 - 14882.8 words/s - loss: 0.3641
00:14:06 - process[8]: evaluating epoch 10 on dev ...
00:14:50 - dev set during evaluation: 14980/14975
00:14:50 - process[8] - dev - epoch 10 - mAP: 0.428 w/ 35 queries
00:14:50 - process[8]: evaluating epoch 10 on test ...
00:15:34 - test set during evaluation: 15300/15294
00:15:34 - process[8] - test - epoch 10 - mAP: 0.405 w/ 36 queries
00:15:34 - process[8]: training epoch 11 ...
00:15:44 - process[8] - epoch 11 - train iter 187 - 16629.8 words/s - loss: 0.3643
00:15:44 - process[8]: evaluating epoch 11 on dev ...
00:16:25 - dev set during evaluation: 14980/14975
00:16:25 - process[8] - dev - epoch 11 - mAP: 0.420 w/ 35 queries
00:16:25 - process[8]: training epoch 12 ...
00:16:35 - process[8] - epoch 12 - train iter 187 - 16204.6 words/s - loss: 0.4065
00:16:35 - process[8]: evaluating epoch 12 on dev ...
00:17:16 - dev set during evaluation: 14980/14975
00:17:16 - process[8] - dev - epoch 12 - mAP: 0.423 w/ 35 queries
00:17:16 - process[8]: training epoch 13 ...
00:17:26 - process[8] - epoch 13 - train iter 187 - 16758.4 words/s - loss: 0.3946
00:17:26 - process[8]: evaluating epoch 13 on dev ...
00:18:07 - dev set during evaluation: 14980/14975
00:18:07 - process[8] - dev - epoch 13 - mAP: 0.405 w/ 35 queries
00:18:07 - process[8]: training epoch 14 ...
00:18:17 - process[8] - epoch 14 - train iter 187 - 16149.4 words/s - loss: 0.4303
00:18:17 - process[8]: evaluating epoch 14 on dev ...
00:18:59 - dev set during evaluation: 14980/14975
00:18:59 - process[8] - dev - epoch 14 - mAP: 0.439 w/ 35 queries
00:18:59 - process[8]: evaluating epoch 14 on test ...
00:19:43 - test set during evaluation: 15300/15294
00:19:43 - process[8] - test - epoch 14 - mAP: 0.426 w/ 36 queries
00:19:43 - process[8]: training epoch 15 ...
00:19:53 - process[8] - epoch 15 - train iter 187 - 17450.2 words/s - loss: 0.3770
00:19:53 - process[8]: evaluating epoch 15 on dev ...
00:20:34 - dev set during evaluation: 14980/14975
00:20:34 - process[8] - dev - epoch 15 - mAP: 0.400 w/ 35 queries
00:20:34 - process[8]: training epoch 16 ...
00:20:45 - process[8] - epoch 16 - train iter 187 - 16567.2 words/s - loss: 0.3811
00:20:45 - process[8]: evaluating epoch 16 on dev ...
00:21:25 - dev set during evaluation: 14980/14975
00:21:25 - process[8] - dev - epoch 16 - mAP: 0.396 w/ 35 queries
00:21:25 - process[8]: training epoch 17 ...
00:21:35 - process[8] - epoch 17 - train iter 187 - 17367.1 words/s - loss: 0.3629
00:21:35 - process[8]: evaluating epoch 17 on dev ...
00:22:16 - dev set during evaluation: 14980/14975
00:22:16 - process[8] - dev - epoch 17 - mAP: 0.412 w/ 35 queries
00:22:16 - process[8]: training epoch 18 ...
00:22:27 - process[8] - epoch 18 - train iter 187 - 15255.5 words/s - loss: 0.3768
00:22:27 - process[8]: evaluating epoch 18 on dev ...
00:23:07 - dev set during evaluation: 14980/14975
00:23:07 - process[8] - dev - epoch 18 - mAP: 0.397 w/ 35 queries
00:23:07 - process[8]: training epoch 19 ...
00:23:16 - process[8] - epoch 19 - train iter 187 - 18126.4 words/s - loss: 0.3726
00:23:16 - process[8]: evaluating epoch 19 on dev ...
00:23:58 - dev set during evaluation: 14980/14975
00:23:58 - process[8] - dev - epoch 19 - mAP: 0.419 w/ 35 queries
00:23:58 - [fold 2] best test MAP: 0.426 @ epoch 14
00:23:58 - Evaluating every 1 epochs ...
00:23:58 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:23:58 - test has 35 queries ...
00:23:58 - Data reading done ...
00:24:00 - adding 9-th encoder to optimizer...
00:24:00 - adding 10-th encoder to optimizer...
00:24:00 - adding 11-th encoder to optimizer...
00:24:00 - process[8]: training epoch 0 ...
00:24:11 - process[8] - epoch 0 - train iter 196 - 16399.9 words/s - loss: 0.5847
00:24:11 - process[8]: training epoch 1 ...
00:24:22 - process[8] - epoch 1 - train iter 196 - 16165.5 words/s - loss: 0.5376
00:24:22 - process[8]: training epoch 2 ...
00:24:32 - process[8] - epoch 2 - train iter 196 - 17694.1 words/s - loss: 0.5096
00:24:32 - process[8]: training epoch 3 ...
00:24:41 - process[8] - epoch 3 - train iter 196 - 18917.8 words/s - loss: 0.5041
00:24:41 - process[8]: training epoch 4 ...
00:24:52 - process[8] - epoch 4 - train iter 196 - 15668.8 words/s - loss: 0.5129
00:24:52 - process[8]: training epoch 5 ...
00:25:03 - process[8] - epoch 5 - train iter 196 - 16782.4 words/s - loss: 0.4707
00:25:03 - process[8]: training epoch 6 ...
00:25:14 - process[8] - epoch 6 - train iter 196 - 15744.0 words/s - loss: 0.4866
00:25:14 - process[8]: training epoch 7 ...
00:25:24 - process[8] - epoch 7 - train iter 196 - 17096.8 words/s - loss: 0.4184
00:25:24 - process[8]: training epoch 8 ...
00:25:35 - process[8] - epoch 8 - train iter 196 - 17000.5 words/s - loss: 0.3809
00:25:35 - process[8]: training epoch 9 ...
00:25:46 - process[8] - epoch 9 - train iter 196 - 16199.0 words/s - loss: 0.4678
00:25:46 - process[8]: training epoch 10 ...
00:25:57 - process[8] - epoch 10 - train iter 196 - 16254.0 words/s - loss: 0.3897
00:25:57 - process[8]: evaluating epoch 10 on dev ...
00:26:39 - dev set during evaluation: 15300/15294
00:26:39 - process[8] - dev - epoch 10 - mAP: 0.425 w/ 36 queries
00:26:39 - process[8]: evaluating epoch 10 on test ...
00:27:22 - test set during evaluation: 15480/15477
00:27:22 - process[8] - test - epoch 10 - mAP: 0.360 w/ 35 queries
00:27:22 - process[8]: training epoch 11 ...
00:27:32 - process[8] - epoch 11 - train iter 196 - 16501.0 words/s - loss: 0.3920
00:27:32 - process[8]: evaluating epoch 11 on dev ...
00:28:15 - dev set during evaluation: 15300/15294
00:28:15 - process[8] - dev - epoch 11 - mAP: 0.434 w/ 36 queries
00:28:15 - process[8]: evaluating epoch 11 on test ...
00:28:57 - test set during evaluation: 15480/15477
00:28:57 - process[8] - test - epoch 11 - mAP: 0.378 w/ 35 queries
00:28:57 - process[8]: training epoch 12 ...
00:29:09 - process[8] - epoch 12 - train iter 196 - 15590.5 words/s - loss: 0.4229
00:29:09 - process[8]: evaluating epoch 12 on dev ...
00:29:50 - dev set during evaluation: 15300/15294
00:29:50 - process[8] - dev - epoch 12 - mAP: 0.443 w/ 36 queries
00:29:51 - process[8]: evaluating epoch 12 on test ...
00:30:33 - test set during evaluation: 15480/15477
00:30:33 - process[8] - test - epoch 12 - mAP: 0.370 w/ 35 queries
00:30:33 - process[8]: training epoch 13 ...
00:30:42 - process[8] - epoch 13 - train iter 196 - 19035.5 words/s - loss: 0.3908
00:30:42 - process[8]: evaluating epoch 13 on dev ...
00:31:26 - dev set during evaluation: 15300/15294
00:31:26 - process[8] - dev - epoch 13 - mAP: 0.449 w/ 36 queries
00:31:26 - process[8]: evaluating epoch 13 on test ...
00:32:10 - test set during evaluation: 15480/15477
00:32:10 - process[8] - test - epoch 13 - mAP: 0.345 w/ 35 queries
00:32:10 - process[8]: training epoch 14 ...
00:32:20 - process[8] - epoch 14 - train iter 196 - 17940.1 words/s - loss: 0.3917
00:32:20 - process[8]: evaluating epoch 14 on dev ...
00:33:02 - dev set during evaluation: 15300/15294
00:33:02 - process[8] - dev - epoch 14 - mAP: 0.455 w/ 36 queries
00:33:02 - process[8]: evaluating epoch 14 on test ...
00:33:47 - test set during evaluation: 15480/15477
00:33:47 - process[8] - test - epoch 14 - mAP: 0.360 w/ 35 queries
00:33:47 - process[8]: training epoch 15 ...
00:33:57 - process[8] - epoch 15 - train iter 196 - 17567.7 words/s - loss: 0.3628
00:33:57 - process[8]: evaluating epoch 15 on dev ...
00:34:39 - dev set during evaluation: 15300/15294
00:34:39 - process[8] - dev - epoch 15 - mAP: 0.448 w/ 36 queries
00:34:39 - process[8]: training epoch 16 ...
00:34:50 - process[8] - epoch 16 - train iter 196 - 16169.3 words/s - loss: 0.3664
00:34:50 - process[8]: evaluating epoch 16 on dev ...
00:35:31 - dev set during evaluation: 15300/15294
00:35:31 - process[8] - dev - epoch 16 - mAP: 0.455 w/ 36 queries
00:35:31 - process[8]: evaluating epoch 16 on test ...
00:36:13 - test set during evaluation: 15480/15477
00:36:13 - process[8] - test - epoch 16 - mAP: 0.378 w/ 35 queries
00:36:13 - process[8]: training epoch 17 ...
00:36:23 - process[8] - epoch 17 - train iter 196 - 18895.2 words/s - loss: 0.3611
00:36:23 - process[8]: evaluating epoch 17 on dev ...
00:37:06 - dev set during evaluation: 15300/15294
00:37:06 - process[8] - dev - epoch 17 - mAP: 0.414 w/ 36 queries
00:37:06 - process[8]: training epoch 18 ...
00:37:16 - process[8] - epoch 18 - train iter 196 - 17949.7 words/s - loss: 0.3885
00:37:16 - process[8]: evaluating epoch 18 on dev ...
00:38:00 - dev set during evaluation: 15300/15294
00:38:00 - process[8] - dev - epoch 18 - mAP: 0.410 w/ 36 queries
00:38:00 - process[8]: training epoch 19 ...
00:38:10 - process[8] - epoch 19 - train iter 196 - 17874.8 words/s - loss: 0.3927
00:38:10 - process[8]: evaluating epoch 19 on dev ...
00:38:54 - dev set during evaluation: 15300/15294
00:38:54 - process[8] - dev - epoch 19 - mAP: 0.434 w/ 36 queries
00:38:54 - [fold 3] best test MAP: 0.378 @ epoch 16
00:38:54 - Evaluating every 1 epochs ...
00:38:54 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:54 - test has 35 queries ...
00:38:54 - Data reading done ...
00:38:56 - adding 9-th encoder to optimizer...
00:38:56 - adding 10-th encoder to optimizer...
00:38:56 - adding 11-th encoder to optimizer...
00:38:56 - process[8]: training epoch 0 ...
00:39:08 - process[8] - epoch 0 - train iter 207 - 16395.5 words/s - loss: 0.5815
00:39:08 - process[8]: training epoch 1 ...
00:39:18 - process[8] - epoch 1 - train iter 207 - 17630.3 words/s - loss: 0.6069
00:39:18 - process[8]: training epoch 2 ...
00:39:30 - process[8] - epoch 2 - train iter 207 - 16910.0 words/s - loss: 0.5264
00:39:30 - process[8]: training epoch 3 ...
00:39:43 - process[8] - epoch 3 - train iter 207 - 14331.6 words/s - loss: 0.5206
00:39:43 - process[8]: training epoch 4 ...
00:39:55 - process[8] - epoch 4 - train iter 207 - 15518.6 words/s - loss: 0.4855
00:39:55 - process[8]: training epoch 5 ...
00:40:06 - process[8] - epoch 5 - train iter 207 - 17940.7 words/s - loss: 0.4584
00:40:06 - process[8]: training epoch 6 ...
00:40:17 - process[8] - epoch 6 - train iter 207 - 16974.7 words/s - loss: 0.4185
00:40:17 - process[8]: training epoch 7 ...
00:40:27 - process[8] - epoch 7 - train iter 207 - 18537.0 words/s - loss: 0.4274
00:40:27 - process[8]: training epoch 8 ...
00:40:38 - process[8] - epoch 8 - train iter 207 - 16873.0 words/s - loss: 0.3956
00:40:38 - process[8]: training epoch 9 ...
00:40:49 - process[8] - epoch 9 - train iter 207 - 17028.9 words/s - loss: 0.3969
00:40:49 - process[8]: training epoch 10 ...
00:41:00 - process[8] - epoch 10 - train iter 207 - 16400.5 words/s - loss: 0.4024
00:41:00 - process[8]: evaluating epoch 10 on dev ...
00:41:46 - dev set during evaluation: 15480/15477
00:41:46 - process[8] - dev - epoch 10 - mAP: 0.360 w/ 35 queries
00:41:46 - process[8]: evaluating epoch 10 on test ...
00:42:28 - test set during evaluation: 14470/14463
00:42:28 - process[8] - test - epoch 10 - mAP: 0.405 w/ 35 queries
00:42:28 - process[8]: training epoch 11 ...
00:42:39 - process[8] - epoch 11 - train iter 207 - 18047.0 words/s - loss: 0.3943
00:42:39 - process[8]: evaluating epoch 11 on dev ...
00:43:21 - dev set during evaluation: 15480/15477
00:43:21 - process[8] - dev - epoch 11 - mAP: 0.353 w/ 35 queries
00:43:21 - process[8]: training epoch 12 ...
00:43:33 - process[8] - epoch 12 - train iter 207 - 15878.3 words/s - loss: 0.3836
00:43:33 - process[8]: evaluating epoch 12 on dev ...
00:44:15 - dev set during evaluation: 15480/15477
00:44:15 - process[8] - dev - epoch 12 - mAP: 0.370 w/ 35 queries
00:44:15 - process[8]: evaluating epoch 12 on test ...
00:44:58 - test set during evaluation: 14470/14463
00:44:58 - process[8] - test - epoch 12 - mAP: 0.376 w/ 35 queries
00:44:58 - process[8]: training epoch 13 ...
00:45:10 - process[8] - epoch 13 - train iter 207 - 16533.9 words/s - loss: 0.3506
00:45:10 - process[8]: evaluating epoch 13 on dev ...
00:45:52 - dev set during evaluation: 15480/15477
00:45:52 - process[8] - dev - epoch 13 - mAP: 0.355 w/ 35 queries
00:45:52 - process[8]: training epoch 14 ...
00:46:03 - process[8] - epoch 14 - train iter 207 - 17067.3 words/s - loss: 0.3841
00:46:03 - process[8]: evaluating epoch 14 on dev ...
00:46:47 - dev set during evaluation: 15480/15477
00:46:47 - process[8] - dev - epoch 14 - mAP: 0.384 w/ 35 queries
00:46:47 - process[8]: evaluating epoch 14 on test ...
00:47:30 - test set during evaluation: 14470/14463
00:47:30 - process[8] - test - epoch 14 - mAP: 0.404 w/ 35 queries
00:47:30 - process[8]: training epoch 15 ...
00:47:42 - process[8] - epoch 15 - train iter 207 - 16956.0 words/s - loss: 0.3202
00:47:42 - process[8]: evaluating epoch 15 on dev ...
00:48:23 - dev set during evaluation: 15480/15477
00:48:23 - process[8] - dev - epoch 15 - mAP: 0.364 w/ 35 queries
00:48:23 - process[8]: training epoch 16 ...
00:48:35 - process[8] - epoch 16 - train iter 207 - 15753.1 words/s - loss: 0.3579
00:48:35 - process[8]: evaluating epoch 16 on dev ...
00:49:17 - dev set during evaluation: 15480/15477
00:49:17 - process[8] - dev - epoch 16 - mAP: 0.388 w/ 35 queries
00:49:17 - process[8]: evaluating epoch 16 on test ...
00:50:01 - test set during evaluation: 14470/14463
00:50:01 - process[8] - test - epoch 16 - mAP: 0.395 w/ 35 queries
00:50:01 - process[8]: training epoch 17 ...
00:50:13 - process[8] - epoch 17 - train iter 207 - 15793.5 words/s - loss: 0.3437
00:50:13 - process[8]: evaluating epoch 17 on dev ...
00:50:55 - dev set during evaluation: 15480/15477
00:50:55 - process[8] - dev - epoch 17 - mAP: 0.382 w/ 35 queries
00:50:55 - process[8]: training epoch 18 ...
00:51:06 - process[8] - epoch 18 - train iter 207 - 17276.8 words/s - loss: 0.3957
00:51:06 - process[8]: evaluating epoch 18 on dev ...
00:51:49 - dev set during evaluation: 15480/15477
00:51:49 - process[8] - dev - epoch 18 - mAP: 0.399 w/ 35 queries
00:51:49 - process[8]: evaluating epoch 18 on test ...
00:52:32 - test set during evaluation: 14470/14463
00:52:32 - process[8] - test - epoch 18 - mAP: 0.402 w/ 35 queries
00:52:32 - process[8]: training epoch 19 ...
00:52:41 - process[8] - epoch 19 - train iter 207 - 18697.8 words/s - loss: 0.3284
00:52:41 - process[8]: evaluating epoch 19 on dev ...
00:53:25 - dev set during evaluation: 15480/15477
00:53:25 - process[8] - dev - epoch 19 - mAP: 0.388 w/ 35 queries
00:53:25 - [fold 4] best test MAP: 0.402 @ epoch 18
00:53:25 - Evaluating every 1 epochs ...
00:53:25 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:53:26 - test has 35 queries ...
00:53:26 - Data reading done ...
00:53:27 - adding 9-th encoder to optimizer...
00:53:27 - adding 10-th encoder to optimizer...
00:53:27 - adding 11-th encoder to optimizer...
00:53:28 - process[8]: training epoch 0 ...
00:53:39 - process[8] - epoch 0 - train iter 195 - 15917.5 words/s - loss: 0.5664
00:53:39 - process[8]: training epoch 1 ...
00:53:50 - process[8] - epoch 1 - train iter 195 - 15214.6 words/s - loss: 0.5406
00:53:50 - process[8]: training epoch 2 ...
00:54:02 - process[8] - epoch 2 - train iter 195 - 15645.3 words/s - loss: 0.5108
00:54:02 - process[8]: training epoch 3 ...
00:54:13 - process[8] - epoch 3 - train iter 195 - 15614.0 words/s - loss: 0.4922
00:54:13 - process[8]: training epoch 4 ...
00:54:24 - process[8] - epoch 4 - train iter 195 - 15300.3 words/s - loss: 0.4518
00:54:24 - process[8]: training epoch 5 ...
00:54:37 - process[8] - epoch 5 - train iter 195 - 14410.8 words/s - loss: 0.4280
00:54:37 - process[8]: training epoch 6 ...
00:54:48 - process[8] - epoch 6 - train iter 195 - 15681.4 words/s - loss: 0.4224
00:54:48 - process[8]: training epoch 7 ...
00:54:59 - process[8] - epoch 7 - train iter 195 - 15925.9 words/s - loss: 0.4711
00:54:59 - process[8]: training epoch 8 ...
00:55:10 - process[8] - epoch 8 - train iter 195 - 15317.2 words/s - loss: 0.3805
00:55:10 - process[8]: training epoch 9 ...
00:55:20 - process[8] - epoch 9 - train iter 195 - 18093.5 words/s - loss: 0.4163
00:55:20 - process[8]: training epoch 10 ...
00:55:31 - process[8] - epoch 10 - train iter 195 - 15798.5 words/s - loss: 0.3768
00:55:31 - process[8]: evaluating epoch 10 on dev ...
00:56:12 - dev set during evaluation: 14470/14463
00:56:12 - process[8] - dev - epoch 10 - mAP: 0.352 w/ 35 queries
00:56:12 - process[8]: evaluating epoch 10 on test ...
00:56:57 - test set during evaluation: 14160/14157
00:56:57 - process[8] - test - epoch 10 - mAP: 0.427 w/ 35 queries
00:56:57 - process[8]: training epoch 11 ...
00:57:08 - process[8] - epoch 11 - train iter 195 - 16417.4 words/s - loss: 0.3885
00:57:08 - process[8]: evaluating epoch 11 on dev ...
00:57:52 - dev set during evaluation: 14470/14463
00:57:52 - process[8] - dev - epoch 11 - mAP: 0.404 w/ 35 queries
00:57:52 - process[8]: evaluating epoch 11 on test ...
00:58:37 - test set during evaluation: 14160/14157
00:58:37 - process[8] - test - epoch 11 - mAP: 0.527 w/ 35 queries
00:58:37 - process[8]: training epoch 12 ...
00:58:48 - process[8] - epoch 12 - train iter 195 - 16038.8 words/s - loss: 0.3857
00:58:48 - process[8]: evaluating epoch 12 on dev ...
00:59:30 - dev set during evaluation: 14470/14463
00:59:30 - process[8] - dev - epoch 12 - mAP: 0.387 w/ 35 queries
00:59:30 - process[8]: training epoch 13 ...
00:59:41 - process[8] - epoch 13 - train iter 195 - 15915.2 words/s - loss: 0.3938
00:59:41 - process[8]: evaluating epoch 13 on dev ...
01:00:24 - dev set during evaluation: 14470/14463
01:00:24 - process[8] - dev - epoch 13 - mAP: 0.413 w/ 35 queries
01:00:24 - process[8]: evaluating epoch 13 on test ...
01:01:09 - test set during evaluation: 14160/14157
01:01:09 - process[8] - test - epoch 13 - mAP: 0.487 w/ 35 queries
01:01:09 - process[8]: training epoch 14 ...
01:01:21 - process[8] - epoch 14 - train iter 195 - 15363.8 words/s - loss: 0.3884
01:01:21 - process[8]: evaluating epoch 14 on dev ...
01:02:03 - dev set during evaluation: 14470/14463
01:02:03 - process[8] - dev - epoch 14 - mAP: 0.405 w/ 35 queries
01:02:03 - process[8]: training epoch 15 ...
01:02:14 - process[8] - epoch 15 - train iter 195 - 16487.2 words/s - loss: 0.3976
01:02:14 - process[8]: evaluating epoch 15 on dev ...
01:02:58 - dev set during evaluation: 14470/14463
01:02:58 - process[8] - dev - epoch 15 - mAP: 0.389 w/ 35 queries
01:02:58 - process[8]: training epoch 16 ...
01:03:09 - process[8] - epoch 16 - train iter 195 - 16157.8 words/s - loss: 0.3266
01:03:09 - process[8]: evaluating epoch 16 on dev ...
01:03:52 - dev set during evaluation: 14470/14463
01:03:52 - process[8] - dev - epoch 16 - mAP: 0.391 w/ 35 queries
01:03:52 - process[8]: training epoch 17 ...
01:04:02 - process[8] - epoch 17 - train iter 195 - 16774.1 words/s - loss: 0.3558
01:04:02 - process[8]: evaluating epoch 17 on dev ...
01:04:45 - dev set during evaluation: 14470/14463
01:04:45 - process[8] - dev - epoch 17 - mAP: 0.414 w/ 35 queries
01:04:45 - process[8]: evaluating epoch 17 on test ...
01:05:30 - test set during evaluation: 14160/14157
01:05:30 - process[8] - test - epoch 17 - mAP: 0.489 w/ 35 queries
01:05:30 - process[8]: training epoch 18 ...
01:05:42 - process[8] - epoch 18 - train iter 195 - 14627.4 words/s - loss: 0.3617
01:05:42 - process[8]: evaluating epoch 18 on dev ...
01:06:23 - dev set during evaluation: 14470/14463
01:06:23 - process[8] - dev - epoch 18 - mAP: 0.400 w/ 35 queries
01:06:23 - process[8]: training epoch 19 ...
01:06:33 - process[8] - epoch 19 - train iter 195 - 18158.4 words/s - loss: 0.3495
01:06:33 - process[8]: evaluating epoch 19 on dev ...
01:07:17 - dev set during evaluation: 14470/14463
01:07:17 - process[8] - dev - epoch 19 - mAP: 0.402 w/ 35 queries
01:07:17 - [fold 5] best test MAP: 0.489 @ epoch 17
01:07:17 - [0.4331619556868221, 0.42564176134819887, 0.3781552867401998, 0.40186922123287555, 0.48904121617055285]
01:07:17 - [35, 36, 35, 35, 35]
01:07:17 - final MAP: 0.426
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=8, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='en')
00:00:15 - Evaluating every 1 epochs ...
00:00:15 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:15 - test has 35 queries ...
00:00:15 - Data reading done ...
00:00:21 - adding 9-th encoder to optimizer...
00:00:21 - adding 10-th encoder to optimizer...
00:00:21 - adding 11-th encoder to optimizer...
00:00:21 - process[8]: training epoch 0 ...
00:00:33 - process[8] - epoch 0 - train iter 197 - 15514.1 words/s - loss: 0.5962
00:00:33 - process[8]: training epoch 1 ...
00:00:43 - process[8] - epoch 1 - train iter 197 - 17767.8 words/s - loss: 0.5135
00:00:43 - process[8]: training epoch 2 ...
00:00:54 - process[8] - epoch 2 - train iter 197 - 16087.5 words/s - loss: 0.5186
00:00:54 - process[8]: training epoch 3 ...
00:01:05 - process[8] - epoch 3 - train iter 197 - 16487.2 words/s - loss: 0.5308
00:01:05 - process[8]: training epoch 4 ...
00:01:16 - process[8] - epoch 4 - train iter 197 - 15237.4 words/s - loss: 0.4634
00:01:16 - process[8]: training epoch 5 ...
00:01:26 - process[8] - epoch 5 - train iter 197 - 17403.0 words/s - loss: 0.4835
00:01:26 - process[8]: training epoch 6 ...
00:01:38 - process[8] - epoch 6 - train iter 197 - 15496.6 words/s - loss: 0.4844
00:01:38 - process[8]: training epoch 7 ...
00:01:48 - process[8] - epoch 7 - train iter 197 - 17469.1 words/s - loss: 0.3865
00:01:48 - process[8]: training epoch 8 ...
00:02:01 - process[8] - epoch 8 - train iter 197 - 14064.3 words/s - loss: 0.4640
00:02:01 - process[8]: training epoch 9 ...
00:02:12 - process[8] - epoch 9 - train iter 197 - 16426.3 words/s - loss: 0.4475
00:02:12 - process[8]: training epoch 10 ...
00:02:22 - process[8] - epoch 10 - train iter 197 - 18147.8 words/s - loss: 0.4569
00:02:22 - process[8]: evaluating epoch 10 on dev ...
00:03:11 - dev set during evaluation: 14160/14157
00:03:11 - process[8] - dev - epoch 10 - mAP: 0.442 w/ 35 queries
00:03:11 - process[8]: evaluating epoch 10 on test ...
00:03:52 - test set during evaluation: 14980/14975
00:03:52 - process[8] - test - epoch 10 - mAP: 0.433 w/ 35 queries
00:03:52 - process[8]: training epoch 11 ...
00:04:02 - process[8] - epoch 11 - train iter 197 - 17357.5 words/s - loss: 0.4040
00:04:02 - process[8]: evaluating epoch 11 on dev ...
00:04:48 - dev set during evaluation: 14160/14157
00:04:48 - process[8] - dev - epoch 11 - mAP: 0.434 w/ 35 queries
00:04:48 - process[8]: training epoch 12 ...
00:05:00 - process[8] - epoch 12 - train iter 197 - 14706.5 words/s - loss: 0.3770
00:05:00 - process[8]: evaluating epoch 12 on dev ...
00:05:43 - dev set during evaluation: 14160/14157
00:05:43 - process[8] - dev - epoch 12 - mAP: 0.438 w/ 35 queries
00:05:43 - process[8]: training epoch 13 ...
00:05:53 - process[8] - epoch 13 - train iter 197 - 17075.0 words/s - loss: 0.4054
00:05:53 - process[8]: evaluating epoch 13 on dev ...
00:06:39 - dev set during evaluation: 14160/14157
00:06:39 - process[8] - dev - epoch 13 - mAP: 0.441 w/ 35 queries
00:06:39 - process[8]: training epoch 14 ...
00:06:51 - process[8] - epoch 14 - train iter 197 - 15198.0 words/s - loss: 0.3594
00:06:51 - process[8]: evaluating epoch 14 on dev ...
00:07:34 - dev set during evaluation: 14160/14157
00:07:34 - process[8] - dev - epoch 14 - mAP: 0.439 w/ 35 queries
00:07:34 - process[8]: training epoch 15 ...
00:07:45 - process[8] - epoch 15 - train iter 197 - 16638.6 words/s - loss: 0.3663
00:07:45 - process[8]: evaluating epoch 15 on dev ...
00:08:29 - dev set during evaluation: 14160/14157
00:08:29 - process[8] - dev - epoch 15 - mAP: 0.423 w/ 35 queries
00:08:29 - process[8]: training epoch 16 ...
00:08:41 - process[8] - epoch 16 - train iter 197 - 15473.0 words/s - loss: 0.3671
00:08:41 - process[8]: evaluating epoch 16 on dev ...
00:09:25 - dev set during evaluation: 14160/14157
00:09:25 - process[8] - dev - epoch 16 - mAP: 0.437 w/ 35 queries
00:09:25 - process[8]: training epoch 17 ...
00:09:35 - process[8] - epoch 17 - train iter 197 - 16921.2 words/s - loss: 0.4189
00:09:35 - process[8]: evaluating epoch 17 on dev ...
00:10:20 - dev set during evaluation: 14160/14157
00:10:20 - process[8] - dev - epoch 17 - mAP: 0.435 w/ 35 queries
00:10:20 - process[8]: training epoch 18 ...
00:10:31 - process[8] - epoch 18 - train iter 197 - 16661.6 words/s - loss: 0.4123
00:10:31 - process[8]: evaluating epoch 18 on dev ...
00:11:15 - dev set during evaluation: 14160/14157
00:11:15 - process[8] - dev - epoch 18 - mAP: 0.435 w/ 35 queries
00:11:15 - process[8]: training epoch 19 ...
00:11:25 - process[8] - epoch 19 - train iter 197 - 17057.8 words/s - loss: 0.3736
00:11:25 - process[8]: evaluating epoch 19 on dev ...
00:12:11 - dev set during evaluation: 14160/14157
00:12:11 - process[8] - dev - epoch 19 - mAP: 0.428 w/ 35 queries
00:12:11 - [fold 1] best test MAP: 0.433 @ epoch 10
00:12:11 - Evaluating every 1 epochs ...
00:12:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:12 - test has 36 queries ...
00:12:12 - Data reading done ...
00:12:13 - adding 9-th encoder to optimizer...
00:12:13 - adding 10-th encoder to optimizer...
00:12:13 - adding 11-th encoder to optimizer...
00:12:14 - process[8]: training epoch 0 ...
00:12:23 - process[8] - epoch 0 - train iter 187 - 17751.6 words/s - loss: 0.6223
00:12:23 - process[8]: training epoch 1 ...
00:12:33 - process[8] - epoch 1 - train iter 187 - 16821.2 words/s - loss: 0.5278
00:12:33 - process[8]: training epoch 2 ...
00:12:43 - process[8] - epoch 2 - train iter 187 - 17939.4 words/s - loss: 0.5708
00:12:43 - process[8]: training epoch 3 ...
00:12:52 - process[8] - epoch 3 - train iter 187 - 18146.2 words/s - loss: 0.4885
00:12:52 - process[8]: training epoch 4 ...
00:13:03 - process[8] - epoch 4 - train iter 187 - 16902.3 words/s - loss: 0.4729
00:13:03 - process[8]: training epoch 5 ...
00:13:13 - process[8] - epoch 5 - train iter 187 - 16058.3 words/s - loss: 0.5058
00:13:13 - process[8]: training epoch 6 ...
00:13:23 - process[8] - epoch 6 - train iter 187 - 18231.6 words/s - loss: 0.4268
00:13:23 - process[8]: training epoch 7 ...
00:13:33 - process[8] - epoch 7 - train iter 187 - 16720.1 words/s - loss: 0.4539
00:13:33 - process[8]: training epoch 8 ...
00:13:42 - process[8] - epoch 8 - train iter 187 - 17748.3 words/s - loss: 0.4618
00:13:42 - process[8]: training epoch 9 ...
00:13:52 - process[8] - epoch 9 - train iter 187 - 16933.5 words/s - loss: 0.4307
00:13:52 - process[8]: training epoch 10 ...
00:14:03 - process[8] - epoch 10 - train iter 187 - 14858.8 words/s - loss: 0.3641
00:14:03 - process[8]: evaluating epoch 10 on dev ...
00:14:47 - dev set during evaluation: 14980/14975
00:14:47 - process[8] - dev - epoch 10 - mAP: 0.428 w/ 35 queries
00:14:47 - process[8]: evaluating epoch 10 on test ...
00:15:30 - test set during evaluation: 15300/15294
00:15:30 - process[8] - test - epoch 10 - mAP: 0.405 w/ 36 queries
00:15:30 - process[8]: training epoch 11 ...
00:15:40 - process[8] - epoch 11 - train iter 187 - 16811.5 words/s - loss: 0.3643
00:15:40 - process[8]: evaluating epoch 11 on dev ...
00:16:21 - dev set during evaluation: 14980/14975
00:16:21 - process[8] - dev - epoch 11 - mAP: 0.420 w/ 35 queries
00:16:21 - process[8]: training epoch 12 ...
00:16:32 - process[8] - epoch 12 - train iter 187 - 16346.3 words/s - loss: 0.4065
00:16:32 - process[8]: evaluating epoch 12 on dev ...
00:17:12 - dev set during evaluation: 14980/14975
00:17:12 - process[8] - dev - epoch 12 - mAP: 0.423 w/ 35 queries
00:17:12 - process[8]: training epoch 13 ...
00:17:22 - process[8] - epoch 13 - train iter 187 - 16810.7 words/s - loss: 0.3946
00:17:22 - process[8]: evaluating epoch 13 on dev ...
00:18:03 - dev set during evaluation: 14980/14975
00:18:03 - process[8] - dev - epoch 13 - mAP: 0.405 w/ 35 queries
00:18:03 - process[8]: training epoch 14 ...
00:18:14 - process[8] - epoch 14 - train iter 187 - 16323.5 words/s - loss: 0.4303
00:18:14 - process[8]: evaluating epoch 14 on dev ...
00:18:54 - dev set during evaluation: 14980/14975
00:18:54 - process[8] - dev - epoch 14 - mAP: 0.439 w/ 35 queries
00:18:54 - process[8]: evaluating epoch 14 on test ...
00:19:37 - test set during evaluation: 15300/15294
00:19:37 - process[8] - test - epoch 14 - mAP: 0.426 w/ 36 queries
00:19:37 - process[8]: training epoch 15 ...
00:19:47 - process[8] - epoch 15 - train iter 187 - 17568.2 words/s - loss: 0.3770
00:19:47 - process[8]: evaluating epoch 15 on dev ...
00:20:28 - dev set during evaluation: 14980/14975
00:20:28 - process[8] - dev - epoch 15 - mAP: 0.400 w/ 35 queries
00:20:28 - process[8]: training epoch 16 ...
00:20:39 - process[8] - epoch 16 - train iter 187 - 16559.8 words/s - loss: 0.3811
00:20:39 - process[8]: evaluating epoch 16 on dev ...
00:21:18 - dev set during evaluation: 14980/14975
00:21:18 - process[8] - dev - epoch 16 - mAP: 0.396 w/ 35 queries
00:21:18 - process[8]: training epoch 17 ...
00:21:28 - process[8] - epoch 17 - train iter 187 - 17520.5 words/s - loss: 0.3629
00:21:28 - process[8]: evaluating epoch 17 on dev ...
00:22:09 - dev set during evaluation: 14980/14975
00:22:09 - process[8] - dev - epoch 17 - mAP: 0.412 w/ 35 queries
00:22:09 - process[8]: training epoch 18 ...
00:22:20 - process[8] - epoch 18 - train iter 187 - 15468.8 words/s - loss: 0.3768
00:22:20 - process[8]: evaluating epoch 18 on dev ...
00:23:01 - dev set during evaluation: 14980/14975
00:23:01 - process[8] - dev - epoch 18 - mAP: 0.397 w/ 35 queries
00:23:01 - process[8]: training epoch 19 ...
00:23:10 - process[8] - epoch 19 - train iter 187 - 18290.7 words/s - loss: 0.3726
00:23:10 - process[8]: evaluating epoch 19 on dev ...
00:23:51 - dev set during evaluation: 14980/14975
00:23:51 - process[8] - dev - epoch 19 - mAP: 0.419 w/ 35 queries
00:23:51 - [fold 2] best test MAP: 0.426 @ epoch 14
00:23:51 - Evaluating every 1 epochs ...
00:23:51 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:23:52 - test has 35 queries ...
00:23:52 - Data reading done ...
00:23:54 - adding 9-th encoder to optimizer...
00:23:54 - adding 10-th encoder to optimizer...
00:23:54 - adding 11-th encoder to optimizer...
00:23:54 - process[8]: training epoch 0 ...
00:24:05 - process[8] - epoch 0 - train iter 196 - 16705.6 words/s - loss: 0.5847
00:24:05 - process[8]: training epoch 1 ...
00:24:15 - process[8] - epoch 1 - train iter 196 - 16326.1 words/s - loss: 0.5376
00:24:15 - process[8]: training epoch 2 ...
00:24:25 - process[8] - epoch 2 - train iter 196 - 18033.8 words/s - loss: 0.5096
00:24:25 - process[8]: training epoch 3 ...
00:24:34 - process[8] - epoch 3 - train iter 196 - 19329.1 words/s - loss: 0.5041
00:24:34 - process[8]: training epoch 4 ...
00:24:45 - process[8] - epoch 4 - train iter 196 - 16032.7 words/s - loss: 0.5129
00:24:45 - process[8]: training epoch 5 ...
00:24:55 - process[8] - epoch 5 - train iter 196 - 17176.0 words/s - loss: 0.4707
00:24:55 - process[8]: training epoch 6 ...
00:25:07 - process[8] - epoch 6 - train iter 196 - 16099.5 words/s - loss: 0.4866
00:25:07 - process[8]: training epoch 7 ...
00:25:17 - process[8] - epoch 7 - train iter 196 - 17528.2 words/s - loss: 0.4184
00:25:17 - process[8]: training epoch 8 ...
00:25:27 - process[8] - epoch 8 - train iter 196 - 17421.8 words/s - loss: 0.3809
00:25:27 - process[8]: training epoch 9 ...
00:25:38 - process[8] - epoch 9 - train iter 196 - 16561.9 words/s - loss: 0.4678
00:25:38 - process[8]: training epoch 10 ...
00:25:48 - process[8] - epoch 10 - train iter 196 - 16641.8 words/s - loss: 0.3897
00:25:48 - process[8]: evaluating epoch 10 on dev ...
00:26:35 - dev set during evaluation: 15300/15294
00:26:35 - process[8] - dev - epoch 10 - mAP: 0.425 w/ 36 queries
00:26:35 - process[8]: evaluating epoch 10 on test ...
00:27:17 - test set during evaluation: 15480/15477
00:27:17 - process[8] - test - epoch 10 - mAP: 0.360 w/ 35 queries
00:27:17 - process[8]: training epoch 11 ...
00:27:28 - process[8] - epoch 11 - train iter 196 - 16541.6 words/s - loss: 0.3920
00:27:28 - process[8]: evaluating epoch 11 on dev ...
00:28:10 - dev set during evaluation: 15300/15294
00:28:10 - process[8] - dev - epoch 11 - mAP: 0.434 w/ 36 queries
00:28:10 - process[8]: evaluating epoch 11 on test ...
00:28:52 - test set during evaluation: 15480/15477
00:28:52 - process[8] - test - epoch 11 - mAP: 0.378 w/ 35 queries
00:28:52 - process[8]: training epoch 12 ...
00:29:03 - process[8] - epoch 12 - train iter 196 - 15842.6 words/s - loss: 0.4229
00:29:03 - process[8]: evaluating epoch 12 on dev ...
00:29:45 - dev set during evaluation: 15300/15294
00:29:45 - process[8] - dev - epoch 12 - mAP: 0.443 w/ 36 queries
00:29:45 - process[8]: evaluating epoch 12 on test ...
00:30:27 - test set during evaluation: 15480/15477
00:30:27 - process[8] - test - epoch 12 - mAP: 0.370 w/ 35 queries
00:30:27 - process[8]: training epoch 13 ...
00:30:36 - process[8] - epoch 13 - train iter 196 - 19209.0 words/s - loss: 0.3908
00:30:36 - process[8]: evaluating epoch 13 on dev ...
00:31:20 - dev set during evaluation: 15300/15294
00:31:20 - process[8] - dev - epoch 13 - mAP: 0.449 w/ 36 queries
00:31:20 - process[8]: evaluating epoch 13 on test ...
00:32:02 - test set during evaluation: 15480/15477
00:32:02 - process[8] - test - epoch 13 - mAP: 0.345 w/ 35 queries
00:32:02 - process[8]: training epoch 14 ...
00:32:12 - process[8] - epoch 14 - train iter 196 - 17948.0 words/s - loss: 0.3917
00:32:12 - process[8]: evaluating epoch 14 on dev ...
00:32:55 - dev set during evaluation: 15300/15294
00:32:55 - process[8] - dev - epoch 14 - mAP: 0.455 w/ 36 queries
00:32:55 - process[8]: evaluating epoch 14 on test ...
00:33:36 - test set during evaluation: 15480/15477
00:33:36 - process[8] - test - epoch 14 - mAP: 0.360 w/ 35 queries
00:33:36 - process[8]: training epoch 15 ...
00:33:46 - process[8] - epoch 15 - train iter 196 - 17765.8 words/s - loss: 0.3628
00:33:46 - process[8]: evaluating epoch 15 on dev ...
00:34:29 - dev set during evaluation: 15300/15294
00:34:29 - process[8] - dev - epoch 15 - mAP: 0.448 w/ 36 queries
00:34:29 - process[8]: training epoch 16 ...
00:34:40 - process[8] - epoch 16 - train iter 196 - 16365.1 words/s - loss: 0.3664
00:34:40 - process[8]: evaluating epoch 16 on dev ...
00:35:21 - dev set during evaluation: 15300/15294
00:35:21 - process[8] - dev - epoch 16 - mAP: 0.455 w/ 36 queries
00:35:21 - process[8]: evaluating epoch 16 on test ...
00:36:03 - test set during evaluation: 15480/15477
00:36:03 - process[8] - test - epoch 16 - mAP: 0.378 w/ 35 queries
00:36:03 - process[8]: training epoch 17 ...
00:36:12 - process[8] - epoch 17 - train iter 196 - 19064.6 words/s - loss: 0.3611
00:36:12 - process[8]: evaluating epoch 17 on dev ...
00:36:55 - dev set during evaluation: 15300/15294
00:36:55 - process[8] - dev - epoch 17 - mAP: 0.414 w/ 36 queries
00:36:55 - process[8]: training epoch 18 ...
00:37:05 - process[8] - epoch 18 - train iter 196 - 18150.1 words/s - loss: 0.3885
00:37:05 - process[8]: evaluating epoch 18 on dev ...
00:37:48 - dev set during evaluation: 15300/15294
00:37:48 - process[8] - dev - epoch 18 - mAP: 0.410 w/ 36 queries
00:37:48 - process[8]: training epoch 19 ...
00:37:58 - process[8] - epoch 19 - train iter 196 - 17984.7 words/s - loss: 0.3927
00:37:58 - process[8]: evaluating epoch 19 on dev ...
00:38:41 - dev set during evaluation: 15300/15294
00:38:41 - process[8] - dev - epoch 19 - mAP: 0.434 w/ 36 queries
00:38:41 - [fold 3] best test MAP: 0.378 @ epoch 16
00:38:41 - Evaluating every 1 epochs ...
00:38:41 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:42 - test has 35 queries ...
00:38:42 - Data reading done ...
00:38:43 - adding 9-th encoder to optimizer...
00:38:43 - adding 10-th encoder to optimizer...
00:38:43 - adding 11-th encoder to optimizer...
00:38:44 - process[8]: training epoch 0 ...
00:38:55 - process[8] - epoch 0 - train iter 207 - 16398.2 words/s - loss: 0.5815
00:38:55 - process[8]: training epoch 1 ...
00:39:06 - process[8] - epoch 1 - train iter 207 - 17766.2 words/s - loss: 0.6069
00:39:06 - process[8]: training epoch 2 ...
00:39:17 - process[8] - epoch 2 - train iter 207 - 16991.9 words/s - loss: 0.5264
00:39:17 - process[8]: training epoch 3 ...
00:39:30 - process[8] - epoch 3 - train iter 207 - 14526.0 words/s - loss: 0.5206
00:39:30 - process[8]: training epoch 4 ...
00:39:42 - process[8] - epoch 4 - train iter 207 - 15622.3 words/s - loss: 0.4855
00:39:42 - process[8]: training epoch 5 ...
00:39:53 - process[8] - epoch 5 - train iter 207 - 18139.5 words/s - loss: 0.4584
00:39:53 - process[8]: training epoch 6 ...
00:40:04 - process[8] - epoch 6 - train iter 207 - 17117.4 words/s - loss: 0.4185
00:40:04 - process[8]: training epoch 7 ...
00:40:14 - process[8] - epoch 7 - train iter 207 - 18688.9 words/s - loss: 0.4274
00:40:14 - process[8]: training epoch 8 ...
00:40:25 - process[8] - epoch 8 - train iter 207 - 17096.1 words/s - loss: 0.3956
00:40:25 - process[8]: training epoch 9 ...
00:40:36 - process[8] - epoch 9 - train iter 207 - 17207.5 words/s - loss: 0.3969
00:40:36 - process[8]: training epoch 10 ...
00:40:47 - process[8] - epoch 10 - train iter 207 - 16557.8 words/s - loss: 0.4024
00:40:47 - process[8]: evaluating epoch 10 on dev ...
00:41:31 - dev set during evaluation: 15480/15477
00:41:31 - process[8] - dev - epoch 10 - mAP: 0.360 w/ 35 queries
00:41:31 - process[8]: evaluating epoch 10 on test ...
00:42:14 - test set during evaluation: 14470/14463
00:42:14 - process[8] - test - epoch 10 - mAP: 0.405 w/ 35 queries
00:42:14 - process[8]: training epoch 11 ...
00:42:24 - process[8] - epoch 11 - train iter 207 - 18058.5 words/s - loss: 0.3943
00:42:24 - process[8]: evaluating epoch 11 on dev ...
00:43:06 - dev set during evaluation: 15480/15477
00:43:06 - process[8] - dev - epoch 11 - mAP: 0.353 w/ 35 queries
00:43:06 - process[8]: training epoch 12 ...
00:43:18 - process[8] - epoch 12 - train iter 207 - 16020.1 words/s - loss: 0.3836
00:43:18 - process[8]: evaluating epoch 12 on dev ...
00:44:00 - dev set during evaluation: 15480/15477
00:44:00 - process[8] - dev - epoch 12 - mAP: 0.370 w/ 35 queries
00:44:00 - process[8]: evaluating epoch 12 on test ...
00:44:42 - test set during evaluation: 14470/14463
00:44:42 - process[8] - test - epoch 12 - mAP: 0.376 w/ 35 queries
00:44:42 - process[8]: training epoch 13 ...
00:44:53 - process[8] - epoch 13 - train iter 207 - 16567.7 words/s - loss: 0.3506
00:44:53 - process[8]: evaluating epoch 13 on dev ...
00:45:35 - dev set during evaluation: 15480/15477
00:45:35 - process[8] - dev - epoch 13 - mAP: 0.355 w/ 35 queries
00:45:35 - process[8]: training epoch 14 ...
00:45:46 - process[8] - epoch 14 - train iter 207 - 17412.6 words/s - loss: 0.3841
00:45:46 - process[8]: evaluating epoch 14 on dev ...
00:46:29 - dev set during evaluation: 15480/15477
00:46:29 - process[8] - dev - epoch 14 - mAP: 0.384 w/ 35 queries
00:46:29 - process[8]: evaluating epoch 14 on test ...
00:47:11 - test set during evaluation: 14470/14463
00:47:11 - process[8] - test - epoch 14 - mAP: 0.404 w/ 35 queries
00:47:11 - process[8]: training epoch 15 ...
00:47:22 - process[8] - epoch 15 - train iter 207 - 17030.5 words/s - loss: 0.3202
00:47:22 - process[8]: evaluating epoch 15 on dev ...
00:48:03 - dev set during evaluation: 15480/15477
00:48:03 - process[8] - dev - epoch 15 - mAP: 0.364 w/ 35 queries
00:48:03 - process[8]: training epoch 16 ...
00:48:15 - process[8] - epoch 16 - train iter 207 - 15761.5 words/s - loss: 0.3579
00:48:15 - process[8]: evaluating epoch 16 on dev ...
00:48:57 - dev set during evaluation: 15480/15477
00:48:57 - process[8] - dev - epoch 16 - mAP: 0.388 w/ 35 queries
00:48:57 - process[8]: evaluating epoch 16 on test ...
00:49:39 - test set during evaluation: 14470/14463
00:49:39 - process[8] - test - epoch 16 - mAP: 0.395 w/ 35 queries
00:49:39 - process[8]: training epoch 17 ...
00:49:51 - process[8] - epoch 17 - train iter 207 - 15906.6 words/s - loss: 0.3437
00:49:51 - process[8]: evaluating epoch 17 on dev ...
00:50:33 - dev set during evaluation: 15480/15477
00:50:33 - process[8] - dev - epoch 17 - mAP: 0.382 w/ 35 queries
00:50:33 - process[8]: training epoch 18 ...
00:50:44 - process[8] - epoch 18 - train iter 207 - 17485.7 words/s - loss: 0.3957
00:50:44 - process[8]: evaluating epoch 18 on dev ...
00:51:26 - dev set during evaluation: 15480/15477
00:51:26 - process[8] - dev - epoch 18 - mAP: 0.399 w/ 35 queries
00:51:26 - process[8]: evaluating epoch 18 on test ...
00:52:09 - test set during evaluation: 14470/14463
00:52:09 - process[8] - test - epoch 18 - mAP: 0.402 w/ 35 queries
00:52:09 - process[8]: training epoch 19 ...
00:52:18 - process[8] - epoch 19 - train iter 207 - 18958.8 words/s - loss: 0.3284
00:52:18 - process[8]: evaluating epoch 19 on dev ...
00:53:02 - dev set during evaluation: 15480/15477
00:53:02 - process[8] - dev - epoch 19 - mAP: 0.388 w/ 35 queries
00:53:02 - [fold 4] best test MAP: 0.402 @ epoch 18
00:53:02 - Evaluating every 1 epochs ...
00:53:02 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:53:03 - test has 35 queries ...
00:53:03 - Data reading done ...
00:53:04 - adding 9-th encoder to optimizer...
00:53:04 - adding 10-th encoder to optimizer...
00:53:04 - adding 11-th encoder to optimizer...
00:53:05 - process[8]: training epoch 0 ...
00:53:16 - process[8] - epoch 0 - train iter 195 - 15963.2 words/s - loss: 0.5664
00:53:16 - process[8]: training epoch 1 ...
00:53:27 - process[8] - epoch 1 - train iter 195 - 15162.6 words/s - loss: 0.5406
00:53:27 - process[8]: training epoch 2 ...
00:53:39 - process[8] - epoch 2 - train iter 195 - 15609.3 words/s - loss: 0.5108
00:53:39 - process[8]: training epoch 3 ...
00:53:50 - process[8] - epoch 3 - train iter 195 - 15585.4 words/s - loss: 0.4922
00:53:50 - process[8]: training epoch 4 ...
00:54:01 - process[8] - epoch 4 - train iter 195 - 15230.4 words/s - loss: 0.4518
00:54:01 - process[8]: training epoch 5 ...
00:54:13 - process[8] - epoch 5 - train iter 195 - 14321.5 words/s - loss: 0.4280
00:54:13 - process[8]: training epoch 6 ...
00:54:25 - process[8] - epoch 6 - train iter 195 - 15641.2 words/s - loss: 0.4224
00:54:25 - process[8]: training epoch 7 ...
00:54:36 - process[8] - epoch 7 - train iter 195 - 15827.2 words/s - loss: 0.4711
00:54:36 - process[8]: training epoch 8 ...
00:54:47 - process[8] - epoch 8 - train iter 195 - 15266.6 words/s - loss: 0.3805
00:54:47 - process[8]: training epoch 9 ...
00:54:57 - process[8] - epoch 9 - train iter 195 - 18031.9 words/s - loss: 0.4163
00:54:57 - process[8]: training epoch 10 ...
00:55:08 - process[8] - epoch 10 - train iter 195 - 15702.1 words/s - loss: 0.3768
00:55:08 - process[8]: evaluating epoch 10 on dev ...
00:55:49 - dev set during evaluation: 14470/14463
00:55:49 - process[8] - dev - epoch 10 - mAP: 0.352 w/ 35 queries
00:55:49 - process[8]: evaluating epoch 10 on test ...
00:56:34 - test set during evaluation: 14160/14157
00:56:34 - process[8] - test - epoch 10 - mAP: 0.427 w/ 35 queries
00:56:34 - process[8]: training epoch 11 ...
00:56:45 - process[8] - epoch 11 - train iter 195 - 16421.4 words/s - loss: 0.3885
00:56:45 - process[8]: evaluating epoch 11 on dev ...
00:57:29 - dev set during evaluation: 14470/14463
00:57:29 - process[8] - dev - epoch 11 - mAP: 0.404 w/ 35 queries
00:57:29 - process[8]: evaluating epoch 11 on test ...
00:58:14 - test set during evaluation: 14160/14157
00:58:14 - process[8] - test - epoch 11 - mAP: 0.527 w/ 35 queries
00:58:14 - process[8]: training epoch 12 ...
00:58:25 - process[8] - epoch 12 - train iter 195 - 16173.4 words/s - loss: 0.3857
00:58:25 - process[8]: evaluating epoch 12 on dev ...
00:59:06 - dev set during evaluation: 14470/14463
00:59:06 - process[8] - dev - epoch 12 - mAP: 0.387 w/ 35 queries
00:59:06 - process[8]: training epoch 13 ...
00:59:17 - process[8] - epoch 13 - train iter 195 - 16076.1 words/s - loss: 0.3938
00:59:17 - process[8]: evaluating epoch 13 on dev ...
00:59:59 - dev set during evaluation: 14470/14463
00:59:59 - process[8] - dev - epoch 13 - mAP: 0.413 w/ 35 queries
01:00:00 - process[8]: evaluating epoch 13 on test ...
01:00:45 - test set during evaluation: 14160/14157
01:00:45 - process[8] - test - epoch 13 - mAP: 0.487 w/ 35 queries
01:00:45 - process[8]: training epoch 14 ...
01:00:56 - process[8] - epoch 14 - train iter 195 - 15669.6 words/s - loss: 0.3884
01:00:56 - process[8]: evaluating epoch 14 on dev ...
01:01:38 - dev set during evaluation: 14470/14463
01:01:38 - process[8] - dev - epoch 14 - mAP: 0.405 w/ 35 queries
01:01:38 - process[8]: training epoch 15 ...
01:01:49 - process[8] - epoch 15 - train iter 195 - 16623.1 words/s - loss: 0.3976
01:01:49 - process[8]: evaluating epoch 15 on dev ...
01:02:31 - dev set during evaluation: 14470/14463
01:02:31 - process[8] - dev - epoch 15 - mAP: 0.389 w/ 35 queries
01:02:31 - process[8]: training epoch 16 ...
01:02:42 - process[8] - epoch 16 - train iter 195 - 16092.6 words/s - loss: 0.3266
01:02:42 - process[8]: evaluating epoch 16 on dev ...
01:03:24 - dev set during evaluation: 14470/14463
01:03:24 - process[8] - dev - epoch 16 - mAP: 0.391 w/ 35 queries
01:03:24 - process[8]: training epoch 17 ...
01:03:35 - process[8] - epoch 17 - train iter 195 - 16914.5 words/s - loss: 0.3558
01:03:35 - process[8]: evaluating epoch 17 on dev ...
01:04:17 - dev set during evaluation: 14470/14463
01:04:17 - process[8] - dev - epoch 17 - mAP: 0.414 w/ 35 queries
01:04:17 - process[8]: evaluating epoch 17 on test ...
01:05:02 - test set during evaluation: 14160/14157
01:05:02 - process[8] - test - epoch 17 - mAP: 0.489 w/ 35 queries
01:05:02 - process[8]: training epoch 18 ...
01:05:14 - process[8] - epoch 18 - train iter 195 - 14646.4 words/s - loss: 0.3617
01:05:14 - process[8]: evaluating epoch 18 on dev ...
01:05:55 - dev set during evaluation: 14470/14463
01:05:55 - process[8] - dev - epoch 18 - mAP: 0.400 w/ 35 queries
01:05:55 - process[8]: training epoch 19 ...
01:06:04 - process[8] - epoch 19 - train iter 195 - 18252.1 words/s - loss: 0.3495
01:06:04 - process[8]: evaluating epoch 19 on dev ...
01:06:48 - dev set during evaluation: 14470/14463
01:06:48 - process[8] - dev - epoch 19 - mAP: 0.402 w/ 35 queries
01:06:48 - [fold 5] best test MAP: 0.489 @ epoch 17
01:06:48 - [0.4331619556868221, 0.42564176134819887, 0.3781552867401998, 0.40186922123287555, 0.48904121617055285]
01:06:48 - [35, 36, 35, 35, 35]
01:06:48 - final MAP: 0.426
