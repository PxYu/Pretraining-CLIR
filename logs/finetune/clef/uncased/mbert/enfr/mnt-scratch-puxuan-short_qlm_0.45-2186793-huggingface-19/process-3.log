00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=3, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-19', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='fr')
00:00:20 - Evaluating every 1 epochs ...
00:00:20 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:21 - test has 37 queries ...
00:00:21 - Data reading done ...
00:00:28 - adding 9-th encoder to optimizer...
00:00:28 - adding 10-th encoder to optimizer...
00:00:28 - adding 11-th encoder to optimizer...
00:00:28 - process[3]: training epoch 0 ...
00:00:38 - process[3] - epoch 0 - train iter 241 - 20245.4 words/s - loss: 0.6409
00:00:38 - process[3]: training epoch 1 ...
00:00:47 - process[3] - epoch 1 - train iter 241 - 21974.6 words/s - loss: 0.5713
00:00:47 - process[3]: training epoch 2 ...
00:00:56 - process[3] - epoch 2 - train iter 241 - 21222.9 words/s - loss: 0.4883
00:00:56 - process[3]: training epoch 3 ...
00:01:04 - process[3] - epoch 3 - train iter 241 - 22347.1 words/s - loss: 0.4808
00:01:04 - process[3]: training epoch 4 ...
00:01:13 - process[3] - epoch 4 - train iter 241 - 21914.8 words/s - loss: 0.5009
00:01:13 - process[3]: training epoch 5 ...
00:01:22 - process[3] - epoch 5 - train iter 241 - 22118.8 words/s - loss: 0.4705
00:01:22 - process[3]: training epoch 6 ...
00:01:31 - process[3] - epoch 6 - train iter 241 - 22906.3 words/s - loss: 0.4884
00:01:31 - process[3]: training epoch 7 ...
00:01:39 - process[3] - epoch 7 - train iter 241 - 22769.1 words/s - loss: 0.4975
00:01:39 - process[3]: training epoch 8 ...
00:01:48 - process[3] - epoch 8 - train iter 241 - 22181.9 words/s - loss: 0.4495
00:01:48 - process[3]: training epoch 9 ...
00:01:57 - process[3] - epoch 9 - train iter 241 - 22121.2 words/s - loss: 0.4832
00:01:57 - process[3]: training epoch 10 ...
00:02:06 - process[3] - epoch 10 - train iter 241 - 21824.1 words/s - loss: 0.4404
00:02:06 - process[3]: evaluating epoch 10 on dev ...
00:02:28 - process[3] - dev - epoch 10 - mAP: 0.419 w/ 37 queries
00:02:28 - process[3]: evaluating epoch 10 on test ...
00:02:47 - test set during evaluation: 11380/11372
00:02:47 - process[3] - test - epoch 10 - mAP: 0.617 w/ 37 queries
00:02:47 - process[3]: training epoch 11 ...
00:02:56 - process[3] - epoch 11 - train iter 241 - 21954.4 words/s - loss: 0.4351
00:02:56 - process[3]: evaluating epoch 11 on dev ...
00:03:14 - process[3] - dev - epoch 11 - mAP: 0.393 w/ 37 queries
00:03:14 - process[3]: training epoch 12 ...
00:03:23 - process[3] - epoch 12 - train iter 241 - 22996.0 words/s - loss: 0.4076
00:03:23 - process[3]: evaluating epoch 12 on dev ...
00:03:42 - process[3] - dev - epoch 12 - mAP: 0.413 w/ 37 queries
00:03:42 - process[3]: training epoch 13 ...
00:03:51 - process[3] - epoch 13 - train iter 241 - 21773.7 words/s - loss: 0.4003
00:03:51 - process[3]: evaluating epoch 13 on dev ...
00:04:09 - process[3] - dev - epoch 13 - mAP: 0.419 w/ 37 queries
00:04:09 - process[3]: evaluating epoch 13 on test ...
00:04:28 - test set during evaluation: 11380/11372
00:04:28 - process[3] - test - epoch 13 - mAP: 0.614 w/ 37 queries
00:04:28 - process[3]: training epoch 14 ...
00:04:36 - process[3] - epoch 14 - train iter 241 - 22207.7 words/s - loss: 0.4887
00:04:36 - process[3]: evaluating epoch 14 on dev ...
00:04:55 - process[3] - dev - epoch 14 - mAP: 0.395 w/ 37 queries
00:04:55 - process[3]: training epoch 15 ...
00:05:04 - process[3] - epoch 15 - train iter 241 - 22060.9 words/s - loss: 0.4384
00:05:04 - process[3]: evaluating epoch 15 on dev ...
00:05:22 - process[3] - dev - epoch 15 - mAP: 0.408 w/ 37 queries
00:05:22 - process[3]: training epoch 16 ...
00:05:31 - process[3] - epoch 16 - train iter 241 - 20937.0 words/s - loss: 0.4249
00:05:31 - process[3]: evaluating epoch 16 on dev ...
00:05:50 - process[3] - dev - epoch 16 - mAP: 0.416 w/ 37 queries
00:05:50 - process[3]: training epoch 17 ...
00:05:59 - process[3] - epoch 17 - train iter 241 - 22093.8 words/s - loss: 0.4241
00:05:59 - process[3]: evaluating epoch 17 on dev ...
00:06:17 - process[3] - dev - epoch 17 - mAP: 0.403 w/ 37 queries
00:06:17 - process[3]: training epoch 18 ...
00:06:25 - process[3] - epoch 18 - train iter 241 - 22381.3 words/s - loss: 0.4171
00:06:25 - process[3]: evaluating epoch 18 on dev ...
00:06:44 - process[3] - dev - epoch 18 - mAP: 0.407 w/ 37 queries
00:06:44 - process[3]: training epoch 19 ...
00:06:52 - process[3] - epoch 19 - train iter 241 - 22873.0 words/s - loss: 0.4178
00:06:52 - process[3]: evaluating epoch 19 on dev ...
00:07:11 - process[3] - dev - epoch 19 - mAP: 0.402 w/ 37 queries
00:07:11 - [fold 1] best test MAP: 0.614 @ epoch 13
00:07:11 - Evaluating every 1 epochs ...
00:07:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:07:11 - test has 37 queries ...
00:07:11 - Data reading done ...
00:07:13 - adding 9-th encoder to optimizer...
00:07:13 - adding 10-th encoder to optimizer...
00:07:13 - adding 11-th encoder to optimizer...
00:07:13 - process[3]: training epoch 0 ...
00:07:23 - process[3] - epoch 0 - train iter 276 - 22060.6 words/s - loss: 0.6225
00:07:23 - process[3]: training epoch 1 ...
00:07:35 - process[3] - epoch 1 - train iter 276 - 19652.4 words/s - loss: 0.5744
00:07:35 - process[3]: training epoch 2 ...
00:07:46 - process[3] - epoch 2 - train iter 276 - 21063.0 words/s - loss: 0.5362
00:07:46 - process[3]: training epoch 3 ...
00:07:56 - process[3] - epoch 3 - train iter 276 - 21357.3 words/s - loss: 0.5203
00:07:56 - process[3]: training epoch 4 ...
00:08:07 - process[3] - epoch 4 - train iter 276 - 21303.6 words/s - loss: 0.4999
00:08:07 - process[3]: training epoch 5 ...
00:08:17 - process[3] - epoch 5 - train iter 276 - 20693.2 words/s - loss: 0.5042
00:08:17 - process[3]: training epoch 6 ...
00:08:28 - process[3] - epoch 6 - train iter 276 - 21027.7 words/s - loss: 0.4615
00:08:28 - process[3]: training epoch 7 ...
00:08:38 - process[3] - epoch 7 - train iter 276 - 22337.8 words/s - loss: 0.4315
00:08:38 - process[3]: training epoch 8 ...
00:08:49 - process[3] - epoch 8 - train iter 276 - 22176.9 words/s - loss: 0.4227
00:08:49 - process[3]: training epoch 9 ...
00:08:59 - process[3] - epoch 9 - train iter 276 - 21393.4 words/s - loss: 0.4415
00:08:59 - process[3]: training epoch 10 ...
00:09:10 - process[3] - epoch 10 - train iter 276 - 21180.3 words/s - loss: 0.4398
00:09:10 - process[3]: evaluating epoch 10 on dev ...
00:09:32 - dev set during evaluation: 11380/11372
00:09:32 - process[3] - dev - epoch 10 - mAP: 0.592 w/ 37 queries
00:09:32 - process[3]: evaluating epoch 10 on test ...
00:09:50 - process[3] - test - epoch 10 - mAP: 0.448 w/ 37 queries
00:09:50 - process[3]: training epoch 11 ...
00:10:01 - process[3] - epoch 11 - train iter 276 - 20633.2 words/s - loss: 0.4367
00:10:01 - process[3]: evaluating epoch 11 on dev ...
00:10:19 - dev set during evaluation: 11380/11372
00:10:19 - process[3] - dev - epoch 11 - mAP: 0.529 w/ 37 queries
00:10:19 - process[3]: training epoch 12 ...
00:10:30 - process[3] - epoch 12 - train iter 276 - 20571.4 words/s - loss: 0.4250
00:10:30 - process[3]: evaluating epoch 12 on dev ...
00:10:48 - dev set during evaluation: 11380/11372
00:10:48 - process[3] - dev - epoch 12 - mAP: 0.584 w/ 37 queries
00:10:48 - process[3]: training epoch 13 ...
00:10:59 - process[3] - epoch 13 - train iter 276 - 20764.5 words/s - loss: 0.4474
00:10:59 - process[3]: evaluating epoch 13 on dev ...
00:11:18 - dev set during evaluation: 11380/11372
00:11:18 - process[3] - dev - epoch 13 - mAP: 0.578 w/ 37 queries
00:11:18 - process[3]: training epoch 14 ...
00:11:29 - process[3] - epoch 14 - train iter 276 - 20662.4 words/s - loss: 0.4067
00:11:29 - process[3]: evaluating epoch 14 on dev ...
00:11:47 - dev set during evaluation: 11380/11372
00:11:47 - process[3] - dev - epoch 14 - mAP: 0.601 w/ 37 queries
00:11:47 - process[3]: evaluating epoch 14 on test ...
00:12:04 - process[3] - test - epoch 14 - mAP: 0.500 w/ 37 queries
00:12:04 - process[3]: training epoch 15 ...
00:12:15 - process[3] - epoch 15 - train iter 276 - 20270.6 words/s - loss: 0.3998
00:12:15 - process[3]: evaluating epoch 15 on dev ...
00:12:33 - dev set during evaluation: 11380/11372
00:12:33 - process[3] - dev - epoch 15 - mAP: 0.594 w/ 37 queries
00:12:33 - process[3]: training epoch 16 ...
00:12:43 - process[3] - epoch 16 - train iter 276 - 22388.5 words/s - loss: 0.4010
00:12:43 - process[3]: evaluating epoch 16 on dev ...
00:13:02 - dev set during evaluation: 11380/11372
00:13:02 - process[3] - dev - epoch 16 - mAP: 0.555 w/ 37 queries
00:13:02 - process[3]: training epoch 17 ...
00:13:12 - process[3] - epoch 17 - train iter 276 - 21748.7 words/s - loss: 0.4422
00:13:12 - process[3]: evaluating epoch 17 on dev ...
00:13:31 - dev set during evaluation: 11380/11372
00:13:31 - process[3] - dev - epoch 17 - mAP: 0.565 w/ 37 queries
00:13:31 - process[3]: training epoch 18 ...
00:13:42 - process[3] - epoch 18 - train iter 276 - 20558.1 words/s - loss: 0.4083
00:13:42 - process[3]: evaluating epoch 18 on dev ...
00:14:01 - dev set during evaluation: 11380/11372
00:14:01 - process[3] - dev - epoch 18 - mAP: 0.580 w/ 37 queries
00:14:01 - process[3]: training epoch 19 ...
00:14:12 - process[3] - epoch 19 - train iter 276 - 20662.2 words/s - loss: 0.4457
00:14:12 - process[3]: evaluating epoch 19 on dev ...
00:14:31 - dev set during evaluation: 11380/11372
00:14:31 - process[3] - dev - epoch 19 - mAP: 0.576 w/ 37 queries
00:14:31 - [fold 2] best test MAP: 0.500 @ epoch 14
00:14:31 - Evaluating every 1 epochs ...
00:14:31 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:14:31 - test has 37 queries ...
00:14:31 - Data reading done ...
00:14:32 - adding 9-th encoder to optimizer...
00:14:32 - adding 10-th encoder to optimizer...
00:14:32 - adding 11-th encoder to optimizer...
00:14:33 - process[3]: training epoch 0 ...
00:14:42 - process[3] - epoch 0 - train iter 240 - 21116.1 words/s - loss: 0.6246
00:14:42 - process[3]: training epoch 1 ...
00:14:51 - process[3] - epoch 1 - train iter 240 - 21308.3 words/s - loss: 0.5445
00:14:51 - process[3]: training epoch 2 ...
00:15:00 - process[3] - epoch 2 - train iter 240 - 21175.3 words/s - loss: 0.5362
00:15:00 - process[3]: training epoch 3 ...
00:15:09 - process[3] - epoch 3 - train iter 240 - 21856.4 words/s - loss: 0.5177
00:15:09 - process[3]: training epoch 4 ...
00:15:18 - process[3] - epoch 4 - train iter 240 - 21031.8 words/s - loss: 0.4670
00:15:18 - process[3]: training epoch 5 ...
00:15:27 - process[3] - epoch 5 - train iter 240 - 21841.2 words/s - loss: 0.4967
00:15:27 - process[3]: training epoch 6 ...
00:15:36 - process[3] - epoch 6 - train iter 240 - 21006.9 words/s - loss: 0.4934
00:15:36 - process[3]: training epoch 7 ...
00:15:45 - process[3] - epoch 7 - train iter 240 - 21118.3 words/s - loss: 0.4260
00:15:45 - process[3]: training epoch 8 ...
00:15:54 - process[3] - epoch 8 - train iter 240 - 21357.8 words/s - loss: 0.4955
00:15:54 - process[3]: training epoch 9 ...
00:16:02 - process[3] - epoch 9 - train iter 240 - 22502.1 words/s - loss: 0.4535
00:16:02 - process[3]: training epoch 10 ...
00:16:11 - process[3] - epoch 10 - train iter 240 - 21456.2 words/s - loss: 0.4744
00:16:11 - process[3]: evaluating epoch 10 on dev ...
00:16:30 - process[3] - dev - epoch 10 - mAP: 0.439 w/ 37 queries
00:16:30 - process[3]: evaluating epoch 10 on test ...
00:16:50 - test set during evaluation: 11210/11201
00:16:50 - process[3] - test - epoch 10 - mAP: 0.465 w/ 37 queries
00:16:50 - process[3]: training epoch 11 ...
00:16:59 - process[3] - epoch 11 - train iter 240 - 20321.1 words/s - loss: 0.4224
00:16:59 - process[3]: evaluating epoch 11 on dev ...
00:17:16 - process[3] - dev - epoch 11 - mAP: 0.474 w/ 37 queries
00:17:16 - process[3]: evaluating epoch 11 on test ...
00:17:35 - test set during evaluation: 11210/11201
00:17:35 - process[3] - test - epoch 11 - mAP: 0.462 w/ 37 queries
00:17:35 - process[3]: training epoch 12 ...
00:17:44 - process[3] - epoch 12 - train iter 240 - 21819.5 words/s - loss: 0.4574
00:17:44 - process[3]: evaluating epoch 12 on dev ...
00:18:02 - process[3] - dev - epoch 12 - mAP: 0.453 w/ 37 queries
00:18:02 - process[3]: training epoch 13 ...
00:18:11 - process[3] - epoch 13 - train iter 240 - 20476.7 words/s - loss: 0.4135
00:18:11 - process[3]: evaluating epoch 13 on dev ...
00:18:28 - process[3] - dev - epoch 13 - mAP: 0.494 w/ 37 queries
00:18:28 - process[3]: evaluating epoch 13 on test ...
00:18:47 - test set during evaluation: 11210/11201
00:18:47 - process[3] - test - epoch 13 - mAP: 0.488 w/ 37 queries
00:18:47 - process[3]: training epoch 14 ...
00:18:57 - process[3] - epoch 14 - train iter 240 - 20769.6 words/s - loss: 0.4549
00:18:57 - process[3]: evaluating epoch 14 on dev ...
00:19:14 - process[3] - dev - epoch 14 - mAP: 0.476 w/ 37 queries
00:19:14 - process[3]: training epoch 15 ...
00:19:23 - process[3] - epoch 15 - train iter 240 - 20945.4 words/s - loss: 0.3697
00:19:23 - process[3]: evaluating epoch 15 on dev ...
00:19:40 - process[3] - dev - epoch 15 - mAP: 0.479 w/ 37 queries
00:19:40 - process[3]: training epoch 16 ...
00:19:49 - process[3] - epoch 16 - train iter 240 - 22282.7 words/s - loss: 0.4393
00:19:49 - process[3]: evaluating epoch 16 on dev ...
00:20:06 - process[3] - dev - epoch 16 - mAP: 0.446 w/ 37 queries
00:20:06 - process[3]: training epoch 17 ...
00:20:15 - process[3] - epoch 17 - train iter 240 - 21936.1 words/s - loss: 0.4330
00:20:15 - process[3]: evaluating epoch 17 on dev ...
00:20:32 - process[3] - dev - epoch 17 - mAP: 0.459 w/ 37 queries
00:20:32 - process[3]: training epoch 18 ...
00:20:41 - process[3] - epoch 18 - train iter 240 - 20793.2 words/s - loss: 0.4071
00:20:41 - process[3]: evaluating epoch 18 on dev ...
00:20:58 - process[3] - dev - epoch 18 - mAP: 0.454 w/ 37 queries
00:20:58 - process[3]: training epoch 19 ...
00:21:07 - process[3] - epoch 19 - train iter 240 - 20927.3 words/s - loss: 0.3539
00:21:07 - process[3]: evaluating epoch 19 on dev ...
00:21:24 - process[3] - dev - epoch 19 - mAP: 0.480 w/ 37 queries
00:21:24 - [fold 3] best test MAP: 0.488 @ epoch 13
00:21:24 - Evaluating every 1 epochs ...
00:21:24 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:21:25 - test has 37 queries ...
00:21:25 - Data reading done ...
00:21:26 - adding 9-th encoder to optimizer...
00:21:26 - adding 10-th encoder to optimizer...
00:21:26 - adding 11-th encoder to optimizer...
00:21:26 - process[3]: training epoch 0 ...
00:21:35 - process[3] - epoch 0 - train iter 231 - 22295.4 words/s - loss: 0.6435
00:21:35 - process[3]: training epoch 1 ...
00:21:43 - process[3] - epoch 1 - train iter 231 - 22395.1 words/s - loss: 0.5498
00:21:43 - process[3]: training epoch 2 ...
00:21:51 - process[3] - epoch 2 - train iter 231 - 21530.0 words/s - loss: 0.5293
00:21:51 - process[3]: training epoch 3 ...
00:21:59 - process[3] - epoch 3 - train iter 231 - 21898.2 words/s - loss: 0.5281
00:21:59 - process[3]: training epoch 4 ...
00:22:08 - process[3] - epoch 4 - train iter 231 - 21774.9 words/s - loss: 0.4949
00:22:08 - process[3]: training epoch 5 ...
00:22:16 - process[3] - epoch 5 - train iter 231 - 22493.0 words/s - loss: 0.4614
00:22:16 - process[3]: training epoch 6 ...
00:22:25 - process[3] - epoch 6 - train iter 231 - 21272.1 words/s - loss: 0.4390
00:22:25 - process[3]: training epoch 7 ...
00:22:34 - process[3] - epoch 7 - train iter 231 - 20460.5 words/s - loss: 0.4657
00:22:34 - process[3]: training epoch 8 ...
00:22:43 - process[3] - epoch 8 - train iter 231 - 20173.5 words/s - loss: 0.4758
00:22:43 - process[3]: training epoch 9 ...
00:22:51 - process[3] - epoch 9 - train iter 231 - 22353.3 words/s - loss: 0.4328
00:22:51 - process[3]: training epoch 10 ...
00:22:59 - process[3] - epoch 10 - train iter 231 - 21282.4 words/s - loss: 0.4687
00:22:59 - process[3]: evaluating epoch 10 on dev ...
00:23:21 - dev set during evaluation: 11210/11201
00:23:21 - process[3] - dev - epoch 10 - mAP: 0.453 w/ 37 queries
00:23:21 - process[3]: evaluating epoch 10 on test ...
00:23:39 - test set during evaluation: 10640/10633
00:23:39 - process[3] - test - epoch 10 - mAP: 0.389 w/ 37 queries
00:23:39 - process[3]: training epoch 11 ...
00:23:48 - process[3] - epoch 11 - train iter 231 - 21512.8 words/s - loss: 0.3915
00:23:48 - process[3]: evaluating epoch 11 on dev ...
00:24:07 - dev set during evaluation: 11210/11201
00:24:07 - process[3] - dev - epoch 11 - mAP: 0.475 w/ 37 queries
00:24:07 - process[3]: evaluating epoch 11 on test ...
00:24:25 - test set during evaluation: 10640/10633
00:24:25 - process[3] - test - epoch 11 - mAP: 0.411 w/ 37 queries
00:24:25 - process[3]: training epoch 12 ...
00:24:33 - process[3] - epoch 12 - train iter 231 - 21837.4 words/s - loss: 0.3841
00:24:33 - process[3]: evaluating epoch 12 on dev ...
00:24:53 - dev set during evaluation: 11210/11201
00:24:53 - process[3] - dev - epoch 12 - mAP: 0.463 w/ 37 queries
00:24:53 - process[3]: training epoch 13 ...
00:25:01 - process[3] - epoch 13 - train iter 231 - 22741.3 words/s - loss: 0.4418
00:25:01 - process[3]: evaluating epoch 13 on dev ...
00:25:21 - dev set during evaluation: 11210/11201
00:25:21 - process[3] - dev - epoch 13 - mAP: 0.443 w/ 37 queries
00:25:21 - process[3]: training epoch 14 ...
00:25:30 - process[3] - epoch 14 - train iter 231 - 21410.5 words/s - loss: 0.4470
00:25:30 - process[3]: evaluating epoch 14 on dev ...
00:25:49 - dev set during evaluation: 11210/11201
00:25:49 - process[3] - dev - epoch 14 - mAP: 0.480 w/ 37 queries
00:25:49 - process[3]: evaluating epoch 14 on test ...
00:26:07 - test set during evaluation: 10640/10633
00:26:07 - process[3] - test - epoch 14 - mAP: 0.414 w/ 37 queries
00:26:07 - process[3]: training epoch 15 ...
00:26:16 - process[3] - epoch 15 - train iter 231 - 21296.9 words/s - loss: 0.3684
00:26:16 - process[3]: evaluating epoch 15 on dev ...
00:26:36 - dev set during evaluation: 11210/11201
00:26:36 - process[3] - dev - epoch 15 - mAP: 0.459 w/ 37 queries
00:26:36 - process[3]: training epoch 16 ...
00:26:44 - process[3] - epoch 16 - train iter 231 - 21416.4 words/s - loss: 0.4300
00:26:44 - process[3]: evaluating epoch 16 on dev ...
00:27:03 - dev set during evaluation: 11210/11201
00:27:03 - process[3] - dev - epoch 16 - mAP: 0.450 w/ 37 queries
00:27:03 - process[3]: training epoch 17 ...
00:27:12 - process[3] - epoch 17 - train iter 231 - 21404.3 words/s - loss: 0.3808
00:27:12 - process[3]: evaluating epoch 17 on dev ...
00:27:32 - dev set during evaluation: 11210/11201
00:27:32 - process[3] - dev - epoch 17 - mAP: 0.487 w/ 37 queries
00:27:32 - process[3]: evaluating epoch 17 on test ...
00:27:49 - test set during evaluation: 10640/10633
00:27:49 - process[3] - test - epoch 17 - mAP: 0.425 w/ 37 queries
00:27:49 - process[3]: training epoch 18 ...
00:27:58 - process[3] - epoch 18 - train iter 231 - 21524.1 words/s - loss: 0.3718
00:27:58 - process[3]: evaluating epoch 18 on dev ...
00:28:17 - dev set during evaluation: 11210/11201
00:28:17 - process[3] - dev - epoch 18 - mAP: 0.477 w/ 37 queries
00:28:17 - process[3]: training epoch 19 ...
00:28:25 - process[3] - epoch 19 - train iter 231 - 22906.4 words/s - loss: 0.4218
00:28:25 - process[3]: evaluating epoch 19 on dev ...
00:28:46 - dev set during evaluation: 11210/11201
00:28:46 - process[3] - dev - epoch 19 - mAP: 0.487 w/ 37 queries
00:28:46 - process[3]: evaluating epoch 19 on test ...
00:29:04 - test set during evaluation: 10640/10633
00:29:04 - process[3] - test - epoch 19 - mAP: 0.403 w/ 37 queries
00:29:04 - [fold 4] best test MAP: 0.403 @ epoch 19
00:29:04 - Evaluating every 1 epochs ...
00:29:04 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:29:04 - test has 37 queries ...
00:29:04 - Data reading done ...
00:29:06 - adding 9-th encoder to optimizer...
00:29:06 - adding 10-th encoder to optimizer...
00:29:06 - adding 11-th encoder to optimizer...
00:29:06 - process[3]: training epoch 0 ...
00:29:15 - process[3] - epoch 0 - train iter 235 - 20795.0 words/s - loss: 0.6243
00:29:15 - process[3]: training epoch 1 ...
00:29:24 - process[3] - epoch 1 - train iter 235 - 21008.3 words/s - loss: 0.5276
00:29:24 - process[3]: training epoch 2 ...
00:29:33 - process[3] - epoch 2 - train iter 235 - 21524.1 words/s - loss: 0.5617
00:29:33 - process[3]: training epoch 3 ...
00:29:43 - process[3] - epoch 3 - train iter 235 - 19927.6 words/s - loss: 0.5218
00:29:43 - process[3]: training epoch 4 ...
00:29:52 - process[3] - epoch 4 - train iter 235 - 21998.9 words/s - loss: 0.4785
00:29:52 - process[3]: training epoch 5 ...
00:30:00 - process[3] - epoch 5 - train iter 235 - 22468.6 words/s - loss: 0.4486
00:30:00 - process[3]: training epoch 6 ...
00:30:09 - process[3] - epoch 6 - train iter 235 - 20542.6 words/s - loss: 0.4404
00:30:09 - process[3]: training epoch 7 ...
00:30:19 - process[3] - epoch 7 - train iter 235 - 20202.6 words/s - loss: 0.5059
00:30:19 - process[3]: training epoch 8 ...
00:30:27 - process[3] - epoch 8 - train iter 235 - 22796.3 words/s - loss: 0.4445
00:30:27 - process[3]: training epoch 9 ...
00:30:37 - process[3] - epoch 9 - train iter 235 - 20354.7 words/s - loss: 0.4335
00:30:37 - process[3]: training epoch 10 ...
00:30:46 - process[3] - epoch 10 - train iter 235 - 20917.3 words/s - loss: 0.4468
00:30:46 - process[3]: evaluating epoch 10 on dev ...
00:31:03 - dev set during evaluation: 10640/10633
00:31:03 - process[3] - dev - epoch 10 - mAP: 0.438 w/ 37 queries
00:31:03 - process[3]: evaluating epoch 10 on test ...
00:31:21 - process[3] - test - epoch 10 - mAP: 0.408 w/ 37 queries
00:31:21 - process[3]: training epoch 11 ...
00:31:30 - process[3] - epoch 11 - train iter 235 - 21272.3 words/s - loss: 0.4973
00:31:30 - process[3]: evaluating epoch 11 on dev ...
00:31:48 - dev set during evaluation: 10640/10633
00:31:48 - process[3] - dev - epoch 11 - mAP: 0.382 w/ 37 queries
00:31:48 - process[3]: training epoch 12 ...
00:31:57 - process[3] - epoch 12 - train iter 235 - 21317.1 words/s - loss: 0.4351
00:31:57 - process[3]: evaluating epoch 12 on dev ...
00:32:15 - dev set during evaluation: 10640/10633
00:32:15 - process[3] - dev - epoch 12 - mAP: 0.432 w/ 37 queries
00:32:15 - process[3]: training epoch 13 ...
00:32:23 - process[3] - epoch 13 - train iter 235 - 21624.6 words/s - loss: 0.4329
00:32:23 - process[3]: evaluating epoch 13 on dev ...
00:32:42 - dev set during evaluation: 10640/10633
00:32:42 - process[3] - dev - epoch 13 - mAP: 0.414 w/ 37 queries
00:32:42 - process[3]: training epoch 14 ...
00:32:51 - process[3] - epoch 14 - train iter 235 - 21960.4 words/s - loss: 0.4382
00:32:51 - process[3]: evaluating epoch 14 on dev ...
00:33:08 - dev set during evaluation: 10640/10633
00:33:08 - process[3] - dev - epoch 14 - mAP: 0.412 w/ 37 queries
00:33:08 - process[3]: training epoch 15 ...
00:33:17 - process[3] - epoch 15 - train iter 235 - 22219.1 words/s - loss: 0.3822
00:33:17 - process[3]: evaluating epoch 15 on dev ...
00:33:35 - dev set during evaluation: 10640/10633
00:33:35 - process[3] - dev - epoch 15 - mAP: 0.424 w/ 37 queries
00:33:35 - process[3]: training epoch 16 ...
00:33:44 - process[3] - epoch 16 - train iter 235 - 21372.5 words/s - loss: 0.4372
00:33:44 - process[3]: evaluating epoch 16 on dev ...
00:34:01 - dev set during evaluation: 10640/10633
00:34:01 - process[3] - dev - epoch 16 - mAP: 0.426 w/ 37 queries
00:34:01 - process[3]: training epoch 17 ...
00:34:10 - process[3] - epoch 17 - train iter 235 - 21902.0 words/s - loss: 0.4031
00:34:10 - process[3]: evaluating epoch 17 on dev ...
00:34:28 - dev set during evaluation: 10640/10633
00:34:28 - process[3] - dev - epoch 17 - mAP: 0.410 w/ 37 queries
00:34:28 - process[3]: training epoch 18 ...
00:34:37 - process[3] - epoch 18 - train iter 235 - 21034.1 words/s - loss: 0.3607
00:34:37 - process[3]: evaluating epoch 18 on dev ...
00:34:54 - dev set during evaluation: 10640/10633
00:34:54 - process[3] - dev - epoch 18 - mAP: 0.401 w/ 37 queries
00:34:54 - process[3]: training epoch 19 ...
00:35:03 - process[3] - epoch 19 - train iter 235 - 22097.8 words/s - loss: 0.3419
00:35:03 - process[3]: evaluating epoch 19 on dev ...
00:35:21 - dev set during evaluation: 10640/10633
00:35:21 - process[3] - dev - epoch 19 - mAP: 0.401 w/ 37 queries
00:35:21 - [fold 5] best test MAP: 0.408 @ epoch 10
00:35:21 - [0.614158760919246, 0.5004912374637972, 0.48768245045532266, 0.40281552470482834, 0.40769062658682403]
00:35:21 - [37, 37, 37, 37, 37]
00:35:21 - final MAP: 0.483
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=3, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-19', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='en', target_lang='fr')
00:00:21 - Evaluating every 1 epochs ...
00:00:21 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:21 - test has 37 queries ...
00:00:21 - Data reading done ...
00:00:28 - adding 9-th encoder to optimizer...
00:00:28 - adding 10-th encoder to optimizer...
00:00:28 - adding 11-th encoder to optimizer...
00:00:28 - process[3]: training epoch 0 ...
00:00:38 - process[3] - epoch 0 - train iter 241 - 20341.5 words/s - loss: 0.6409
00:00:38 - process[3]: training epoch 1 ...
00:00:47 - process[3] - epoch 1 - train iter 241 - 21958.5 words/s - loss: 0.5713
00:00:47 - process[3]: training epoch 2 ...
00:00:56 - process[3] - epoch 2 - train iter 241 - 21086.7 words/s - loss: 0.4883
00:00:56 - process[3]: training epoch 3 ...
00:01:05 - process[3] - epoch 3 - train iter 241 - 22248.8 words/s - loss: 0.4808
00:01:05 - process[3]: training epoch 4 ...
00:01:14 - process[3] - epoch 4 - train iter 241 - 21820.5 words/s - loss: 0.5009
00:01:14 - process[3]: training epoch 5 ...
00:01:23 - process[3] - epoch 5 - train iter 241 - 22009.1 words/s - loss: 0.4705
00:01:23 - process[3]: training epoch 6 ...
00:01:31 - process[3] - epoch 6 - train iter 241 - 22873.8 words/s - loss: 0.4884
00:01:31 - process[3]: training epoch 7 ...
00:01:40 - process[3] - epoch 7 - train iter 241 - 22693.5 words/s - loss: 0.4975
00:01:40 - process[3]: training epoch 8 ...
00:01:48 - process[3] - epoch 8 - train iter 241 - 22034.7 words/s - loss: 0.4495
00:01:48 - process[3]: training epoch 9 ...
00:01:57 - process[3] - epoch 9 - train iter 241 - 22026.0 words/s - loss: 0.4832
00:01:57 - process[3]: training epoch 10 ...
00:02:06 - process[3] - epoch 10 - train iter 241 - 21787.4 words/s - loss: 0.4404
00:02:06 - process[3]: evaluating epoch 10 on dev ...
00:02:29 - process[3] - dev - epoch 10 - mAP: 0.419 w/ 37 queries
00:02:29 - process[3]: evaluating epoch 10 on test ...
00:02:48 - test set during evaluation: 11380/11372
00:02:48 - process[3] - test - epoch 10 - mAP: 0.617 w/ 37 queries
00:02:48 - process[3]: training epoch 11 ...
00:02:57 - process[3] - epoch 11 - train iter 241 - 21877.4 words/s - loss: 0.4351
00:02:57 - process[3]: evaluating epoch 11 on dev ...
00:03:16 - process[3] - dev - epoch 11 - mAP: 0.393 w/ 37 queries
00:03:16 - process[3]: training epoch 12 ...
00:03:25 - process[3] - epoch 12 - train iter 241 - 22784.9 words/s - loss: 0.4076
00:03:25 - process[3]: evaluating epoch 12 on dev ...
00:03:43 - process[3] - dev - epoch 12 - mAP: 0.413 w/ 37 queries
00:03:43 - process[3]: training epoch 13 ...
00:03:53 - process[3] - epoch 13 - train iter 241 - 21666.8 words/s - loss: 0.4003
00:03:53 - process[3]: evaluating epoch 13 on dev ...
00:04:11 - process[3] - dev - epoch 13 - mAP: 0.419 w/ 37 queries
00:04:11 - process[3]: evaluating epoch 13 on test ...
00:04:30 - test set during evaluation: 11380/11372
00:04:30 - process[3] - test - epoch 13 - mAP: 0.614 w/ 37 queries
00:04:30 - process[3]: training epoch 14 ...
00:04:39 - process[3] - epoch 14 - train iter 241 - 22068.6 words/s - loss: 0.4887
00:04:39 - process[3]: evaluating epoch 14 on dev ...
00:04:58 - process[3] - dev - epoch 14 - mAP: 0.395 w/ 37 queries
00:04:58 - process[3]: training epoch 15 ...
00:05:06 - process[3] - epoch 15 - train iter 241 - 21842.4 words/s - loss: 0.4384
00:05:06 - process[3]: evaluating epoch 15 on dev ...
00:05:25 - process[3] - dev - epoch 15 - mAP: 0.408 w/ 37 queries
00:05:25 - process[3]: training epoch 16 ...
00:05:34 - process[3] - epoch 16 - train iter 241 - 20973.4 words/s - loss: 0.4249
00:05:34 - process[3]: evaluating epoch 16 on dev ...
00:05:54 - process[3] - dev - epoch 16 - mAP: 0.416 w/ 37 queries
00:05:54 - process[3]: training epoch 17 ...
00:06:03 - process[3] - epoch 17 - train iter 241 - 22108.8 words/s - loss: 0.4241
00:06:03 - process[3]: evaluating epoch 17 on dev ...
00:06:21 - process[3] - dev - epoch 17 - mAP: 0.403 w/ 37 queries
00:06:21 - process[3]: training epoch 18 ...
00:06:30 - process[3] - epoch 18 - train iter 241 - 22286.2 words/s - loss: 0.4171
00:06:30 - process[3]: evaluating epoch 18 on dev ...
00:06:49 - process[3] - dev - epoch 18 - mAP: 0.407 w/ 37 queries
00:06:49 - process[3]: training epoch 19 ...
00:06:57 - process[3] - epoch 19 - train iter 241 - 22781.9 words/s - loss: 0.4178
00:06:57 - process[3]: evaluating epoch 19 on dev ...
00:07:16 - process[3] - dev - epoch 19 - mAP: 0.402 w/ 37 queries
00:07:16 - [fold 1] best test MAP: 0.614 @ epoch 13
00:07:16 - Evaluating every 1 epochs ...
00:07:16 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:07:16 - test has 37 queries ...
00:07:16 - Data reading done ...
00:07:18 - adding 9-th encoder to optimizer...
00:07:18 - adding 10-th encoder to optimizer...
00:07:18 - adding 11-th encoder to optimizer...
00:07:18 - process[3]: training epoch 0 ...
00:07:29 - process[3] - epoch 0 - train iter 276 - 21860.6 words/s - loss: 0.6225
00:07:29 - process[3]: training epoch 1 ...
00:07:40 - process[3] - epoch 1 - train iter 276 - 19508.0 words/s - loss: 0.5744
00:07:40 - process[3]: training epoch 2 ...
00:07:51 - process[3] - epoch 2 - train iter 276 - 20864.3 words/s - loss: 0.5362
00:07:51 - process[3]: training epoch 3 ...
00:08:01 - process[3] - epoch 3 - train iter 276 - 21066.6 words/s - loss: 0.5203
00:08:01 - process[3]: training epoch 4 ...
00:08:12 - process[3] - epoch 4 - train iter 276 - 21165.2 words/s - loss: 0.4999
00:08:12 - process[3]: training epoch 5 ...
00:08:23 - process[3] - epoch 5 - train iter 276 - 20630.4 words/s - loss: 0.5042
00:08:23 - process[3]: training epoch 6 ...
00:08:34 - process[3] - epoch 6 - train iter 276 - 20919.7 words/s - loss: 0.4615
00:08:34 - process[3]: training epoch 7 ...
00:08:44 - process[3] - epoch 7 - train iter 276 - 22313.5 words/s - loss: 0.4315
00:08:44 - process[3]: training epoch 8 ...
00:08:54 - process[3] - epoch 8 - train iter 276 - 22125.9 words/s - loss: 0.4227
00:08:54 - process[3]: training epoch 9 ...
00:09:05 - process[3] - epoch 9 - train iter 276 - 21375.8 words/s - loss: 0.4415
00:09:05 - process[3]: training epoch 10 ...
00:09:16 - process[3] - epoch 10 - train iter 276 - 21179.1 words/s - loss: 0.4398
00:09:16 - process[3]: evaluating epoch 10 on dev ...
00:09:39 - dev set during evaluation: 11380/11372
00:09:39 - process[3] - dev - epoch 10 - mAP: 0.592 w/ 37 queries
00:09:39 - process[3]: evaluating epoch 10 on test ...
00:09:56 - process[3] - test - epoch 10 - mAP: 0.448 w/ 37 queries
00:09:56 - process[3]: training epoch 11 ...
00:10:07 - process[3] - epoch 11 - train iter 276 - 20398.2 words/s - loss: 0.4367
00:10:07 - process[3]: evaluating epoch 11 on dev ...
00:10:26 - dev set during evaluation: 11380/11372
00:10:26 - process[3] - dev - epoch 11 - mAP: 0.529 w/ 37 queries
00:10:26 - process[3]: training epoch 12 ...
00:10:37 - process[3] - epoch 12 - train iter 276 - 20430.2 words/s - loss: 0.4250
00:10:37 - process[3]: evaluating epoch 12 on dev ...
00:10:55 - dev set during evaluation: 11380/11372
00:10:55 - process[3] - dev - epoch 12 - mAP: 0.584 w/ 37 queries
00:10:55 - process[3]: training epoch 13 ...
00:11:06 - process[3] - epoch 13 - train iter 276 - 20515.9 words/s - loss: 0.4474
00:11:06 - process[3]: evaluating epoch 13 on dev ...
00:11:25 - dev set during evaluation: 11380/11372
00:11:25 - process[3] - dev - epoch 13 - mAP: 0.578 w/ 37 queries
00:11:25 - process[3]: training epoch 14 ...
00:11:36 - process[3] - epoch 14 - train iter 276 - 20425.6 words/s - loss: 0.4067
00:11:36 - process[3]: evaluating epoch 14 on dev ...
00:11:55 - dev set during evaluation: 11380/11372
00:11:55 - process[3] - dev - epoch 14 - mAP: 0.601 w/ 37 queries
00:11:55 - process[3]: evaluating epoch 14 on test ...
00:12:12 - process[3] - test - epoch 14 - mAP: 0.500 w/ 37 queries
00:12:12 - process[3]: training epoch 15 ...
00:12:23 - process[3] - epoch 15 - train iter 276 - 20242.7 words/s - loss: 0.3998
00:12:23 - process[3]: evaluating epoch 15 on dev ...
00:12:41 - dev set during evaluation: 11380/11372
00:12:41 - process[3] - dev - epoch 15 - mAP: 0.594 w/ 37 queries
00:12:41 - process[3]: training epoch 16 ...
00:12:51 - process[3] - epoch 16 - train iter 276 - 22121.9 words/s - loss: 0.4010
00:12:51 - process[3]: evaluating epoch 16 on dev ...
00:13:10 - dev set during evaluation: 11380/11372
00:13:10 - process[3] - dev - epoch 16 - mAP: 0.555 w/ 37 queries
00:13:10 - process[3]: training epoch 17 ...
00:13:20 - process[3] - epoch 17 - train iter 276 - 21659.7 words/s - loss: 0.4422
00:13:20 - process[3]: evaluating epoch 17 on dev ...
00:13:40 - dev set during evaluation: 11380/11372
00:13:40 - process[3] - dev - epoch 17 - mAP: 0.565 w/ 37 queries
00:13:40 - process[3]: training epoch 18 ...
00:13:50 - process[3] - epoch 18 - train iter 276 - 20441.6 words/s - loss: 0.4083
00:13:50 - process[3]: evaluating epoch 18 on dev ...
00:14:09 - dev set during evaluation: 11380/11372
00:14:09 - process[3] - dev - epoch 18 - mAP: 0.580 w/ 37 queries
00:14:09 - process[3]: training epoch 19 ...
00:14:20 - process[3] - epoch 19 - train iter 276 - 20480.9 words/s - loss: 0.4457
00:14:20 - process[3]: evaluating epoch 19 on dev ...
00:14:39 - dev set during evaluation: 11380/11372
00:14:39 - process[3] - dev - epoch 19 - mAP: 0.576 w/ 37 queries
00:14:39 - [fold 2] best test MAP: 0.500 @ epoch 14
00:14:39 - Evaluating every 1 epochs ...
00:14:39 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:14:39 - test has 37 queries ...
00:14:39 - Data reading done ...
00:14:41 - adding 9-th encoder to optimizer...
00:14:41 - adding 10-th encoder to optimizer...
00:14:41 - adding 11-th encoder to optimizer...
00:14:41 - process[3]: training epoch 0 ...
00:14:50 - process[3] - epoch 0 - train iter 240 - 21018.9 words/s - loss: 0.6246
00:14:50 - process[3]: training epoch 1 ...
00:14:59 - process[3] - epoch 1 - train iter 240 - 21197.0 words/s - loss: 0.5445
00:14:59 - process[3]: training epoch 2 ...
00:15:08 - process[3] - epoch 2 - train iter 240 - 21077.3 words/s - loss: 0.5362
00:15:08 - process[3]: training epoch 3 ...
00:15:17 - process[3] - epoch 3 - train iter 240 - 21741.8 words/s - loss: 0.5177
00:15:17 - process[3]: training epoch 4 ...
00:15:26 - process[3] - epoch 4 - train iter 240 - 20955.9 words/s - loss: 0.4670
00:15:26 - process[3]: training epoch 5 ...
00:15:35 - process[3] - epoch 5 - train iter 240 - 21748.8 words/s - loss: 0.4967
00:15:35 - process[3]: training epoch 6 ...
00:15:44 - process[3] - epoch 6 - train iter 240 - 20897.3 words/s - loss: 0.4934
00:15:44 - process[3]: training epoch 7 ...
00:15:53 - process[3] - epoch 7 - train iter 240 - 20972.4 words/s - loss: 0.4260
00:15:53 - process[3]: training epoch 8 ...
00:16:02 - process[3] - epoch 8 - train iter 240 - 21270.5 words/s - loss: 0.4955
00:16:02 - process[3]: training epoch 9 ...
00:16:11 - process[3] - epoch 9 - train iter 240 - 22414.6 words/s - loss: 0.4535
00:16:11 - process[3]: training epoch 10 ...
00:16:19 - process[3] - epoch 10 - train iter 240 - 21373.1 words/s - loss: 0.4744
00:16:19 - process[3]: evaluating epoch 10 on dev ...
00:16:43 - process[3] - dev - epoch 10 - mAP: 0.439 w/ 37 queries
00:16:43 - process[3]: evaluating epoch 10 on test ...
00:17:02 - test set during evaluation: 11210/11201
00:17:02 - process[3] - test - epoch 10 - mAP: 0.465 w/ 37 queries
00:17:02 - process[3]: training epoch 11 ...
00:17:11 - process[3] - epoch 11 - train iter 240 - 20269.3 words/s - loss: 0.4224
00:17:11 - process[3]: evaluating epoch 11 on dev ...
00:17:28 - process[3] - dev - epoch 11 - mAP: 0.474 w/ 37 queries
00:17:28 - process[3]: evaluating epoch 11 on test ...
00:17:47 - test set during evaluation: 11210/11201
00:17:47 - process[3] - test - epoch 11 - mAP: 0.462 w/ 37 queries
00:17:47 - process[3]: training epoch 12 ...
00:17:56 - process[3] - epoch 12 - train iter 240 - 21702.9 words/s - loss: 0.4574
00:17:56 - process[3]: evaluating epoch 12 on dev ...
00:18:14 - process[3] - dev - epoch 12 - mAP: 0.453 w/ 37 queries
00:18:14 - process[3]: training epoch 13 ...
00:18:23 - process[3] - epoch 13 - train iter 240 - 20444.9 words/s - loss: 0.4135
00:18:23 - process[3]: evaluating epoch 13 on dev ...
00:18:40 - process[3] - dev - epoch 13 - mAP: 0.494 w/ 37 queries
00:18:40 - process[3]: evaluating epoch 13 on test ...
00:18:59 - test set during evaluation: 11210/11201
00:18:59 - process[3] - test - epoch 13 - mAP: 0.488 w/ 37 queries
00:18:59 - process[3]: training epoch 14 ...
00:19:09 - process[3] - epoch 14 - train iter 240 - 20640.5 words/s - loss: 0.4549
00:19:09 - process[3]: evaluating epoch 14 on dev ...
00:19:25 - process[3] - dev - epoch 14 - mAP: 0.476 w/ 37 queries
00:19:25 - process[3]: training epoch 15 ...
00:19:35 - process[3] - epoch 15 - train iter 240 - 20803.1 words/s - loss: 0.3697
00:19:35 - process[3]: evaluating epoch 15 on dev ...
00:19:51 - process[3] - dev - epoch 15 - mAP: 0.479 w/ 37 queries
00:19:51 - process[3]: training epoch 16 ...
00:20:00 - process[3] - epoch 16 - train iter 240 - 22245.2 words/s - loss: 0.4393
00:20:00 - process[3]: evaluating epoch 16 on dev ...
00:20:17 - process[3] - dev - epoch 16 - mAP: 0.446 w/ 37 queries
00:20:17 - process[3]: training epoch 17 ...
00:20:26 - process[3] - epoch 17 - train iter 240 - 22059.0 words/s - loss: 0.4330
00:20:26 - process[3]: evaluating epoch 17 on dev ...
00:20:43 - process[3] - dev - epoch 17 - mAP: 0.459 w/ 37 queries
00:20:43 - process[3]: training epoch 18 ...
00:20:52 - process[3] - epoch 18 - train iter 240 - 20502.7 words/s - loss: 0.4071
00:20:52 - process[3]: evaluating epoch 18 on dev ...
00:21:09 - process[3] - dev - epoch 18 - mAP: 0.454 w/ 37 queries
00:21:09 - process[3]: training epoch 19 ...
00:21:19 - process[3] - epoch 19 - train iter 240 - 20780.9 words/s - loss: 0.3539
00:21:19 - process[3]: evaluating epoch 19 on dev ...
00:21:36 - process[3] - dev - epoch 19 - mAP: 0.480 w/ 37 queries
00:21:36 - [fold 3] best test MAP: 0.488 @ epoch 13
00:21:36 - Evaluating every 1 epochs ...
00:21:36 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:21:37 - test has 37 queries ...
00:21:37 - Data reading done ...
00:21:38 - adding 9-th encoder to optimizer...
00:21:38 - adding 10-th encoder to optimizer...
00:21:38 - adding 11-th encoder to optimizer...
00:21:39 - process[3]: training epoch 0 ...
00:21:47 - process[3] - epoch 0 - train iter 231 - 22184.3 words/s - loss: 0.6435
00:21:47 - process[3]: training epoch 1 ...
00:21:55 - process[3] - epoch 1 - train iter 231 - 22234.5 words/s - loss: 0.5498
00:21:55 - process[3]: training epoch 2 ...
00:22:03 - process[3] - epoch 2 - train iter 231 - 21402.0 words/s - loss: 0.5293
00:22:03 - process[3]: training epoch 3 ...
00:22:12 - process[3] - epoch 3 - train iter 231 - 21658.8 words/s - loss: 0.5281
00:22:12 - process[3]: training epoch 4 ...
00:22:20 - process[3] - epoch 4 - train iter 231 - 21429.0 words/s - loss: 0.4949
00:22:20 - process[3]: training epoch 5 ...
00:22:29 - process[3] - epoch 5 - train iter 231 - 22198.5 words/s - loss: 0.4614
00:22:29 - process[3]: training epoch 6 ...
00:22:37 - process[3] - epoch 6 - train iter 231 - 20977.2 words/s - loss: 0.4390
00:22:37 - process[3]: training epoch 7 ...
00:22:46 - process[3] - epoch 7 - train iter 231 - 20182.2 words/s - loss: 0.4657
00:22:46 - process[3]: training epoch 8 ...
00:22:56 - process[3] - epoch 8 - train iter 231 - 19949.7 words/s - loss: 0.4758
00:22:56 - process[3]: training epoch 9 ...
00:23:04 - process[3] - epoch 9 - train iter 231 - 22023.8 words/s - loss: 0.4328
00:23:04 - process[3]: training epoch 10 ...
00:23:13 - process[3] - epoch 10 - train iter 231 - 21015.0 words/s - loss: 0.4687
00:23:13 - process[3]: evaluating epoch 10 on dev ...
00:23:34 - dev set during evaluation: 11210/11201
00:23:34 - process[3] - dev - epoch 10 - mAP: 0.453 w/ 37 queries
00:23:34 - process[3]: evaluating epoch 10 on test ...
00:23:52 - test set during evaluation: 10640/10633
00:23:52 - process[3] - test - epoch 10 - mAP: 0.389 w/ 37 queries
00:23:52 - process[3]: training epoch 11 ...
00:24:01 - process[3] - epoch 11 - train iter 231 - 21497.0 words/s - loss: 0.3915
00:24:01 - process[3]: evaluating epoch 11 on dev ...
00:24:20 - dev set during evaluation: 11210/11201
00:24:20 - process[3] - dev - epoch 11 - mAP: 0.475 w/ 37 queries
00:24:20 - process[3]: evaluating epoch 11 on test ...
00:24:38 - test set during evaluation: 10640/10633
00:24:38 - process[3] - test - epoch 11 - mAP: 0.411 w/ 37 queries
00:24:38 - process[3]: training epoch 12 ...
00:24:47 - process[3] - epoch 12 - train iter 231 - 21796.4 words/s - loss: 0.3841
00:24:47 - process[3]: evaluating epoch 12 on dev ...
00:25:06 - dev set during evaluation: 11210/11201
00:25:06 - process[3] - dev - epoch 12 - mAP: 0.463 w/ 37 queries
00:25:06 - process[3]: training epoch 13 ...
00:25:15 - process[3] - epoch 13 - train iter 231 - 22682.5 words/s - loss: 0.4418
00:25:15 - process[3]: evaluating epoch 13 on dev ...
00:25:35 - dev set during evaluation: 11210/11201
00:25:35 - process[3] - dev - epoch 13 - mAP: 0.443 w/ 37 queries
00:25:35 - process[3]: training epoch 14 ...
00:25:44 - process[3] - epoch 14 - train iter 231 - 21221.1 words/s - loss: 0.4470
00:25:44 - process[3]: evaluating epoch 14 on dev ...
00:26:04 - dev set during evaluation: 11210/11201
00:26:04 - process[3] - dev - epoch 14 - mAP: 0.480 w/ 37 queries
00:26:04 - process[3]: evaluating epoch 14 on test ...
00:26:22 - test set during evaluation: 10640/10633
00:26:22 - process[3] - test - epoch 14 - mAP: 0.414 w/ 37 queries
00:26:22 - process[3]: training epoch 15 ...
00:26:30 - process[3] - epoch 15 - train iter 231 - 21178.8 words/s - loss: 0.3684
00:26:30 - process[3]: evaluating epoch 15 on dev ...
00:26:50 - dev set during evaluation: 11210/11201
00:26:50 - process[3] - dev - epoch 15 - mAP: 0.459 w/ 37 queries
00:26:50 - process[3]: training epoch 16 ...
00:26:59 - process[3] - epoch 16 - train iter 231 - 21123.6 words/s - loss: 0.4300
00:26:59 - process[3]: evaluating epoch 16 on dev ...
00:27:18 - dev set during evaluation: 11210/11201
00:27:18 - process[3] - dev - epoch 16 - mAP: 0.450 w/ 37 queries
00:27:18 - process[3]: training epoch 17 ...
00:27:27 - process[3] - epoch 17 - train iter 231 - 21397.8 words/s - loss: 0.3808
00:27:27 - process[3]: evaluating epoch 17 on dev ...
00:27:47 - dev set during evaluation: 11210/11201
00:27:47 - process[3] - dev - epoch 17 - mAP: 0.487 w/ 37 queries
00:27:47 - process[3]: evaluating epoch 17 on test ...
00:28:04 - test set during evaluation: 10640/10633
00:28:04 - process[3] - test - epoch 17 - mAP: 0.425 w/ 37 queries
00:28:04 - process[3]: training epoch 18 ...
00:28:12 - process[3] - epoch 18 - train iter 231 - 21444.0 words/s - loss: 0.3718
00:28:12 - process[3]: evaluating epoch 18 on dev ...
00:28:33 - dev set during evaluation: 11210/11201
00:28:33 - process[3] - dev - epoch 18 - mAP: 0.477 w/ 37 queries
00:28:33 - process[3]: training epoch 19 ...
00:28:41 - process[3] - epoch 19 - train iter 231 - 22766.0 words/s - loss: 0.4218
00:28:41 - process[3]: evaluating epoch 19 on dev ...
00:29:01 - dev set during evaluation: 11210/11201
00:29:01 - process[3] - dev - epoch 19 - mAP: 0.487 w/ 37 queries
00:29:01 - process[3]: evaluating epoch 19 on test ...
00:29:20 - test set during evaluation: 10640/10633
00:29:20 - process[3] - test - epoch 19 - mAP: 0.403 w/ 37 queries
00:29:20 - [fold 4] best test MAP: 0.403 @ epoch 19
00:29:20 - Evaluating every 1 epochs ...
00:29:20 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:29:20 - test has 37 queries ...
00:29:20 - Data reading done ...
00:29:22 - adding 9-th encoder to optimizer...
00:29:22 - adding 10-th encoder to optimizer...
00:29:22 - adding 11-th encoder to optimizer...
00:29:22 - process[3]: training epoch 0 ...
00:29:31 - process[3] - epoch 0 - train iter 235 - 20727.3 words/s - loss: 0.6243
00:29:31 - process[3]: training epoch 1 ...
00:29:41 - process[3] - epoch 1 - train iter 235 - 20891.2 words/s - loss: 0.5276
00:29:41 - process[3]: training epoch 2 ...
00:29:49 - process[3] - epoch 2 - train iter 235 - 21443.4 words/s - loss: 0.5617
00:29:49 - process[3]: training epoch 3 ...
00:29:59 - process[3] - epoch 3 - train iter 235 - 19849.3 words/s - loss: 0.5218
00:29:59 - process[3]: training epoch 4 ...
00:30:08 - process[3] - epoch 4 - train iter 235 - 21920.3 words/s - loss: 0.4785
00:30:08 - process[3]: training epoch 5 ...
00:30:16 - process[3] - epoch 5 - train iter 235 - 22329.6 words/s - loss: 0.4486
00:30:16 - process[3]: training epoch 6 ...
00:30:26 - process[3] - epoch 6 - train iter 235 - 20427.2 words/s - loss: 0.4404
00:30:26 - process[3]: training epoch 7 ...
00:30:36 - process[3] - epoch 7 - train iter 235 - 19930.5 words/s - loss: 0.5059
00:30:36 - process[3]: training epoch 8 ...
00:30:44 - process[3] - epoch 8 - train iter 235 - 22495.9 words/s - loss: 0.4445
00:30:44 - process[3]: training epoch 9 ...
00:30:54 - process[3] - epoch 9 - train iter 235 - 20104.1 words/s - loss: 0.4335
00:30:54 - process[3]: training epoch 10 ...
00:31:03 - process[3] - epoch 10 - train iter 235 - 20701.8 words/s - loss: 0.4468
00:31:03 - process[3]: evaluating epoch 10 on dev ...
00:31:22 - dev set during evaluation: 10640/10633
00:31:22 - process[3] - dev - epoch 10 - mAP: 0.438 w/ 37 queries
00:31:22 - process[3]: evaluating epoch 10 on test ...
00:31:41 - process[3] - test - epoch 10 - mAP: 0.408 w/ 37 queries
00:31:41 - process[3]: training epoch 11 ...
00:31:50 - process[3] - epoch 11 - train iter 235 - 21276.9 words/s - loss: 0.4973
00:31:50 - process[3]: evaluating epoch 11 on dev ...
00:32:08 - dev set during evaluation: 10640/10633
00:32:08 - process[3] - dev - epoch 11 - mAP: 0.382 w/ 37 queries
00:32:08 - process[3]: training epoch 12 ...
00:32:17 - process[3] - epoch 12 - train iter 235 - 21194.2 words/s - loss: 0.4351
00:32:17 - process[3]: evaluating epoch 12 on dev ...
00:32:34 - dev set during evaluation: 10640/10633
00:32:34 - process[3] - dev - epoch 12 - mAP: 0.432 w/ 37 queries
00:32:34 - process[3]: training epoch 13 ...
00:32:43 - process[3] - epoch 13 - train iter 235 - 21437.2 words/s - loss: 0.4329
00:32:43 - process[3]: evaluating epoch 13 on dev ...
00:33:01 - dev set during evaluation: 10640/10633
00:33:01 - process[3] - dev - epoch 13 - mAP: 0.414 w/ 37 queries
00:33:01 - process[3]: training epoch 14 ...
00:33:10 - process[3] - epoch 14 - train iter 235 - 21947.7 words/s - loss: 0.4382
00:33:10 - process[3]: evaluating epoch 14 on dev ...
00:33:28 - dev set during evaluation: 10640/10633
00:33:28 - process[3] - dev - epoch 14 - mAP: 0.412 w/ 37 queries
00:33:28 - process[3]: training epoch 15 ...
00:33:36 - process[3] - epoch 15 - train iter 235 - 22159.6 words/s - loss: 0.3822
00:33:36 - process[3]: evaluating epoch 15 on dev ...
00:33:54 - dev set during evaluation: 10640/10633
00:33:54 - process[3] - dev - epoch 15 - mAP: 0.424 w/ 37 queries
00:33:54 - process[3]: training epoch 16 ...
00:34:03 - process[3] - epoch 16 - train iter 235 - 21212.6 words/s - loss: 0.4372
00:34:03 - process[3]: evaluating epoch 16 on dev ...
00:34:21 - dev set during evaluation: 10640/10633
00:34:21 - process[3] - dev - epoch 16 - mAP: 0.426 w/ 37 queries
00:34:21 - process[3]: training epoch 17 ...
00:34:30 - process[3] - epoch 17 - train iter 235 - 21829.1 words/s - loss: 0.4031
00:34:30 - process[3]: evaluating epoch 17 on dev ...
00:34:47 - dev set during evaluation: 10640/10633
00:34:47 - process[3] - dev - epoch 17 - mAP: 0.410 w/ 37 queries
00:34:47 - process[3]: training epoch 18 ...
00:34:57 - process[3] - epoch 18 - train iter 235 - 20986.7 words/s - loss: 0.3607
00:34:57 - process[3]: evaluating epoch 18 on dev ...
00:35:15 - dev set during evaluation: 10640/10633
00:35:15 - process[3] - dev - epoch 18 - mAP: 0.401 w/ 37 queries
00:35:15 - process[3]: training epoch 19 ...
00:35:24 - process[3] - epoch 19 - train iter 235 - 22221.4 words/s - loss: 0.3419
00:35:24 - process[3]: evaluating epoch 19 on dev ...
00:35:43 - dev set during evaluation: 10640/10633
00:35:43 - process[3] - dev - epoch 19 - mAP: 0.401 w/ 37 queries
00:35:43 - [fold 5] best test MAP: 0.408 @ epoch 10
00:35:43 - [0.614158760919246, 0.5004912374637972, 0.48768245045532266, 0.40281552470482834, 0.40769062658682403]
00:35:43 - [37, 37, 37, 37, 37]
00:35:43 - final MAP: 0.483
