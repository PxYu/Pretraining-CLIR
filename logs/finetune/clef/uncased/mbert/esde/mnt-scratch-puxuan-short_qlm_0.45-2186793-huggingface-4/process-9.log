00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=9, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='de')
00:00:17 - Evaluating every 1 epochs ...
00:00:17 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:18 - test has 38 queries ...
00:00:18 - Data reading done ...
00:00:25 - adding 9-th encoder to optimizer...
00:00:25 - adding 10-th encoder to optimizer...
00:00:25 - adding 11-th encoder to optimizer...
00:00:26 - process[9]: training epoch 0 ...
00:00:43 - process[9] - epoch 0 - train iter 423 - 19476.9 words/s - loss: 0.5930
00:00:43 - process[9]: training epoch 1 ...
00:00:59 - process[9] - epoch 1 - train iter 423 - 21071.3 words/s - loss: 0.5641
00:00:59 - process[9]: training epoch 2 ...
00:01:15 - process[9] - epoch 2 - train iter 423 - 21045.9 words/s - loss: 0.5308
00:01:15 - process[9]: training epoch 3 ...
00:01:30 - process[9] - epoch 3 - train iter 423 - 21753.3 words/s - loss: 0.5318
00:01:30 - process[9]: training epoch 4 ...
00:01:47 - process[9] - epoch 4 - train iter 423 - 20506.6 words/s - loss: 0.5031
00:01:47 - process[9]: training epoch 5 ...
00:02:04 - process[9] - epoch 5 - train iter 423 - 19810.9 words/s - loss: 0.4813
00:02:04 - process[9]: training epoch 6 ...
00:02:20 - process[9] - epoch 6 - train iter 423 - 20623.0 words/s - loss: 0.4948
00:02:20 - process[9]: training epoch 7 ...
00:02:36 - process[9] - epoch 7 - train iter 423 - 21101.6 words/s - loss: 0.4674
00:02:36 - process[9]: training epoch 8 ...
00:02:52 - process[9] - epoch 8 - train iter 423 - 20832.2 words/s - loss: 0.4457
00:02:52 - process[9]: training epoch 9 ...
00:03:08 - process[9] - epoch 9 - train iter 423 - 20855.2 words/s - loss: 0.4221
00:03:08 - process[9]: training epoch 10 ...
00:03:23 - process[9] - epoch 10 - train iter 423 - 21640.7 words/s - loss: 0.3952
00:03:23 - process[9]: evaluating epoch 10 on dev ...
00:03:57 - dev set during evaluation: 13890/13887
00:03:57 - process[9] - dev - epoch 10 - mAP: 0.460 w/ 38 queries
00:03:57 - process[9]: evaluating epoch 10 on test ...
00:04:26 - test set during evaluation: 15580/15574
00:04:27 - process[9] - test - epoch 10 - mAP: 0.431 w/ 38 queries
00:04:27 - process[9]: training epoch 11 ...
00:04:43 - process[9] - epoch 11 - train iter 423 - 20528.1 words/s - loss: 0.4305
00:04:43 - process[9]: evaluating epoch 11 on dev ...
00:05:12 - dev set during evaluation: 13890/13887
00:05:12 - process[9] - dev - epoch 11 - mAP: 0.483 w/ 38 queries
00:05:12 - process[9]: evaluating epoch 11 on test ...
00:05:42 - test set during evaluation: 15580/15574
00:05:42 - process[9] - test - epoch 11 - mAP: 0.417 w/ 38 queries
00:05:42 - process[9]: training epoch 12 ...
00:05:59 - process[9] - epoch 12 - train iter 423 - 18813.8 words/s - loss: 0.4344
00:05:59 - process[9]: evaluating epoch 12 on dev ...
00:06:29 - dev set during evaluation: 13890/13887
00:06:29 - process[9] - dev - epoch 12 - mAP: 0.471 w/ 38 queries
00:06:29 - process[9]: training epoch 13 ...
00:06:46 - process[9] - epoch 13 - train iter 423 - 20966.2 words/s - loss: 0.4007
00:06:46 - process[9]: evaluating epoch 13 on dev ...
00:07:15 - dev set during evaluation: 13890/13887
00:07:15 - process[9] - dev - epoch 13 - mAP: 0.495 w/ 38 queries
00:07:15 - process[9]: evaluating epoch 13 on test ...
00:07:45 - test set during evaluation: 15580/15574
00:07:45 - process[9] - test - epoch 13 - mAP: 0.417 w/ 38 queries
00:07:45 - process[9]: training epoch 14 ...
00:08:00 - process[9] - epoch 14 - train iter 423 - 21844.3 words/s - loss: 0.4059
00:08:00 - process[9]: evaluating epoch 14 on dev ...
00:08:31 - dev set during evaluation: 13890/13887
00:08:31 - process[9] - dev - epoch 14 - mAP: 0.481 w/ 38 queries
00:08:31 - process[9]: training epoch 15 ...
00:08:47 - process[9] - epoch 15 - train iter 423 - 20341.1 words/s - loss: 0.3882
00:08:47 - process[9]: evaluating epoch 15 on dev ...
00:09:17 - dev set during evaluation: 13890/13887
00:09:17 - process[9] - dev - epoch 15 - mAP: 0.489 w/ 38 queries
00:09:17 - process[9]: training epoch 16 ...
00:09:34 - process[9] - epoch 16 - train iter 423 - 20186.7 words/s - loss: 0.3903
00:09:34 - process[9]: evaluating epoch 16 on dev ...
00:10:02 - dev set during evaluation: 13890/13887
00:10:02 - process[9] - dev - epoch 16 - mAP: 0.483 w/ 38 queries
00:10:02 - process[9]: training epoch 17 ...
00:10:18 - process[9] - epoch 17 - train iter 423 - 20537.9 words/s - loss: 0.3610
00:10:18 - process[9]: evaluating epoch 17 on dev ...
00:10:47 - dev set during evaluation: 13890/13887
00:10:47 - process[9] - dev - epoch 17 - mAP: 0.492 w/ 38 queries
00:10:47 - process[9]: training epoch 18 ...
00:11:04 - process[9] - epoch 18 - train iter 423 - 20084.2 words/s - loss: 0.4111
00:11:04 - process[9]: evaluating epoch 18 on dev ...
00:11:32 - dev set during evaluation: 13890/13887
00:11:32 - process[9] - dev - epoch 18 - mAP: 0.484 w/ 38 queries
00:11:32 - process[9]: training epoch 19 ...
00:11:48 - process[9] - epoch 19 - train iter 423 - 20888.1 words/s - loss: 0.4240
00:11:48 - process[9]: evaluating epoch 19 on dev ...
00:12:17 - dev set during evaluation: 13890/13887
00:12:17 - process[9] - dev - epoch 19 - mAP: 0.486 w/ 38 queries
00:12:17 - [fold 1] best test MAP: 0.417 @ epoch 13
00:12:17 - Evaluating every 1 epochs ...
00:12:17 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:18 - test has 39 queries ...
00:12:18 - Data reading done ...
00:12:20 - adding 9-th encoder to optimizer...
00:12:20 - adding 10-th encoder to optimizer...
00:12:20 - adding 11-th encoder to optimizer...
00:12:20 - process[9]: training epoch 0 ...
00:12:38 - process[9] - epoch 0 - train iter 386 - 17236.3 words/s - loss: 0.6230
00:12:38 - process[9]: training epoch 1 ...
00:12:55 - process[9] - epoch 1 - train iter 386 - 18034.1 words/s - loss: 0.5634
00:12:55 - process[9]: training epoch 2 ...
00:13:13 - process[9] - epoch 2 - train iter 386 - 16506.3 words/s - loss: 0.5109
00:13:13 - process[9]: training epoch 3 ...
00:13:32 - process[9] - epoch 3 - train iter 386 - 16552.6 words/s - loss: 0.5014
00:13:32 - process[9]: training epoch 4 ...
00:13:49 - process[9] - epoch 4 - train iter 386 - 17715.7 words/s - loss: 0.4751
00:13:49 - process[9]: training epoch 5 ...
00:14:07 - process[9] - epoch 5 - train iter 386 - 16429.6 words/s - loss: 0.4748
00:14:07 - process[9]: training epoch 6 ...
00:14:27 - process[9] - epoch 6 - train iter 386 - 15284.3 words/s - loss: 0.4093
00:14:27 - process[9]: training epoch 7 ...
00:14:44 - process[9] - epoch 7 - train iter 386 - 17623.8 words/s - loss: 0.4507
00:14:44 - process[9]: training epoch 8 ...
00:15:01 - process[9] - epoch 8 - train iter 386 - 17954.6 words/s - loss: 0.4398
00:15:01 - process[9]: training epoch 9 ...
00:15:17 - process[9] - epoch 9 - train iter 386 - 19049.1 words/s - loss: 0.4241
00:15:17 - process[9]: training epoch 10 ...
00:15:35 - process[9] - epoch 10 - train iter 386 - 16952.9 words/s - loss: 0.4063
00:15:35 - process[9]: evaluating epoch 10 on dev ...
00:16:15 - dev set during evaluation: 15580/15574
00:16:15 - process[9] - dev - epoch 10 - mAP: 0.424 w/ 38 queries
00:16:15 - process[9]: evaluating epoch 10 on test ...
00:16:47 - test set during evaluation: 14340/14338
00:16:47 - process[9] - test - epoch 10 - mAP: 0.502 w/ 39 queries
00:16:47 - process[9]: training epoch 11 ...
00:17:04 - process[9] - epoch 11 - train iter 386 - 17950.2 words/s - loss: 0.3978
00:17:04 - process[9]: evaluating epoch 11 on dev ...
00:17:46 - dev set during evaluation: 15580/15574
00:17:46 - process[9] - dev - epoch 11 - mAP: 0.431 w/ 38 queries
00:17:46 - process[9]: evaluating epoch 11 on test ...
00:18:19 - test set during evaluation: 14340/14338
00:18:19 - process[9] - test - epoch 11 - mAP: 0.498 w/ 39 queries
00:18:19 - process[9]: training epoch 12 ...
00:18:36 - process[9] - epoch 12 - train iter 386 - 18061.5 words/s - loss: 0.3968
00:18:36 - process[9]: evaluating epoch 12 on dev ...
00:19:12 - dev set during evaluation: 15580/15574
00:19:12 - process[9] - dev - epoch 12 - mAP: 0.409 w/ 38 queries
00:19:12 - process[9]: training epoch 13 ...
00:19:32 - process[9] - epoch 13 - train iter 386 - 15562.3 words/s - loss: 0.4252
00:19:32 - process[9]: evaluating epoch 13 on dev ...
00:20:07 - dev set during evaluation: 15580/15574
00:20:07 - process[9] - dev - epoch 13 - mAP: 0.401 w/ 38 queries
00:20:07 - process[9]: training epoch 14 ...
00:20:24 - process[9] - epoch 14 - train iter 386 - 17250.4 words/s - loss: 0.3876
00:20:24 - process[9]: evaluating epoch 14 on dev ...
00:21:01 - dev set during evaluation: 15580/15574
00:21:01 - process[9] - dev - epoch 14 - mAP: 0.393 w/ 38 queries
00:21:01 - process[9]: training epoch 15 ...
00:21:20 - process[9] - epoch 15 - train iter 386 - 16329.2 words/s - loss: 0.3939
00:21:20 - process[9]: evaluating epoch 15 on dev ...
00:21:55 - dev set during evaluation: 15580/15574
00:21:55 - process[9] - dev - epoch 15 - mAP: 0.409 w/ 38 queries
00:21:55 - process[9]: training epoch 16 ...
00:22:13 - process[9] - epoch 16 - train iter 386 - 17045.0 words/s - loss: 0.3500
00:22:13 - process[9]: evaluating epoch 16 on dev ...
00:22:50 - dev set during evaluation: 15580/15574
00:22:50 - process[9] - dev - epoch 16 - mAP: 0.374 w/ 38 queries
00:22:50 - process[9]: training epoch 17 ...
00:23:09 - process[9] - epoch 17 - train iter 386 - 15623.4 words/s - loss: 0.3748
00:23:09 - process[9]: evaluating epoch 17 on dev ...
00:23:43 - dev set during evaluation: 15580/15574
00:23:43 - process[9] - dev - epoch 17 - mAP: 0.390 w/ 38 queries
00:23:43 - process[9]: training epoch 18 ...
00:24:01 - process[9] - epoch 18 - train iter 386 - 16694.3 words/s - loss: 0.4078
00:24:01 - process[9]: evaluating epoch 18 on dev ...
00:24:38 - dev set during evaluation: 15580/15574
00:24:38 - process[9] - dev - epoch 18 - mAP: 0.400 w/ 38 queries
00:24:38 - process[9]: training epoch 19 ...
00:24:57 - process[9] - epoch 19 - train iter 386 - 16484.9 words/s - loss: 0.3498
00:24:57 - process[9]: evaluating epoch 19 on dev ...
00:25:32 - dev set during evaluation: 15580/15574
00:25:32 - process[9] - dev - epoch 19 - mAP: 0.401 w/ 38 queries
00:25:32 - [fold 2] best test MAP: 0.498 @ epoch 11
00:25:32 - Evaluating every 1 epochs ...
00:25:32 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:33 - test has 39 queries ...
00:25:33 - Data reading done ...
00:25:35 - adding 9-th encoder to optimizer...
00:25:35 - adding 10-th encoder to optimizer...
00:25:35 - adding 11-th encoder to optimizer...
00:25:35 - process[9]: training epoch 0 ...
00:25:53 - process[9] - epoch 0 - train iter 360 - 15864.6 words/s - loss: 0.6405
00:25:53 - process[9]: training epoch 1 ...
00:26:11 - process[9] - epoch 1 - train iter 360 - 16673.2 words/s - loss: 0.5714
00:26:11 - process[9]: training epoch 2 ...
00:26:27 - process[9] - epoch 2 - train iter 360 - 17812.0 words/s - loss: 0.5526
00:26:27 - process[9]: training epoch 3 ...
00:26:43 - process[9] - epoch 3 - train iter 360 - 16907.0 words/s - loss: 0.5197
00:26:43 - process[9]: training epoch 4 ...
00:27:01 - process[9] - epoch 4 - train iter 360 - 16259.6 words/s - loss: 0.5097
00:27:01 - process[9]: training epoch 5 ...
00:27:21 - process[9] - epoch 5 - train iter 360 - 14856.1 words/s - loss: 0.4811
00:27:21 - process[9]: training epoch 6 ...
00:27:37 - process[9] - epoch 6 - train iter 360 - 17532.2 words/s - loss: 0.4742
00:27:37 - process[9]: training epoch 7 ...
00:27:54 - process[9] - epoch 7 - train iter 360 - 16924.6 words/s - loss: 0.4603
00:27:54 - process[9]: training epoch 8 ...
00:28:11 - process[9] - epoch 8 - train iter 360 - 16864.0 words/s - loss: 0.4477
00:28:11 - process[9]: training epoch 9 ...
00:28:28 - process[9] - epoch 9 - train iter 360 - 16618.4 words/s - loss: 0.3955
00:28:28 - process[9]: training epoch 10 ...
00:28:46 - process[9] - epoch 10 - train iter 360 - 15965.0 words/s - loss: 0.4446
00:28:46 - process[9]: evaluating epoch 10 on dev ...
00:29:26 - dev set during evaluation: 14340/14338
00:29:26 - process[9] - dev - epoch 10 - mAP: 0.481 w/ 39 queries
00:29:26 - process[9]: evaluating epoch 10 on test ...
00:29:55 - test set during evaluation: 11710/11707
00:29:55 - process[9] - test - epoch 10 - mAP: 0.499 w/ 39 queries
00:29:55 - process[9]: training epoch 11 ...
00:30:14 - process[9] - epoch 11 - train iter 360 - 14662.9 words/s - loss: 0.4355
00:30:14 - process[9]: evaluating epoch 11 on dev ...
00:30:46 - dev set during evaluation: 14340/14338
00:30:46 - process[9] - dev - epoch 11 - mAP: 0.483 w/ 39 queries
00:30:46 - process[9]: evaluating epoch 11 on test ...
00:31:15 - test set during evaluation: 11710/11707
00:31:15 - process[9] - test - epoch 11 - mAP: 0.513 w/ 39 queries
00:31:15 - process[9]: training epoch 12 ...
00:31:33 - process[9] - epoch 12 - train iter 360 - 16681.7 words/s - loss: 0.4224
00:31:33 - process[9]: evaluating epoch 12 on dev ...
00:32:05 - dev set during evaluation: 14340/14338
00:32:05 - process[9] - dev - epoch 12 - mAP: 0.493 w/ 39 queries
00:32:05 - process[9]: evaluating epoch 12 on test ...
00:32:34 - test set during evaluation: 11710/11707
00:32:34 - process[9] - test - epoch 12 - mAP: 0.525 w/ 39 queries
00:32:34 - process[9]: training epoch 13 ...
00:32:52 - process[9] - epoch 13 - train iter 360 - 15983.5 words/s - loss: 0.3847
00:32:52 - process[9]: evaluating epoch 13 on dev ...
00:33:28 - dev set during evaluation: 14340/14338
00:33:28 - process[9] - dev - epoch 13 - mAP: 0.491 w/ 39 queries
00:33:28 - process[9]: training epoch 14 ...
00:33:45 - process[9] - epoch 14 - train iter 360 - 17225.7 words/s - loss: 0.4170
00:33:45 - process[9]: evaluating epoch 14 on dev ...
00:34:19 - dev set during evaluation: 14340/14338
00:34:19 - process[9] - dev - epoch 14 - mAP: 0.474 w/ 39 queries
00:34:19 - process[9]: training epoch 15 ...
00:34:36 - process[9] - epoch 15 - train iter 360 - 17004.4 words/s - loss: 0.4170
00:34:36 - process[9]: evaluating epoch 15 on dev ...
00:35:09 - dev set during evaluation: 14340/14338
00:35:09 - process[9] - dev - epoch 15 - mAP: 0.488 w/ 39 queries
00:35:09 - process[9]: training epoch 16 ...
00:35:27 - process[9] - epoch 16 - train iter 360 - 16251.7 words/s - loss: 0.3655
00:35:27 - process[9]: evaluating epoch 16 on dev ...
00:36:00 - dev set during evaluation: 14340/14338
00:36:00 - process[9] - dev - epoch 16 - mAP: 0.492 w/ 39 queries
00:36:00 - process[9]: training epoch 17 ...
00:36:17 - process[9] - epoch 17 - train iter 360 - 16495.0 words/s - loss: 0.3758
00:36:17 - process[9]: evaluating epoch 17 on dev ...
00:36:51 - dev set during evaluation: 14340/14338
00:36:51 - process[9] - dev - epoch 17 - mAP: 0.489 w/ 39 queries
00:36:51 - process[9]: training epoch 18 ...
00:37:08 - process[9] - epoch 18 - train iter 360 - 15965.7 words/s - loss: 0.3339
00:37:08 - process[9]: evaluating epoch 18 on dev ...
00:37:43 - dev set during evaluation: 14340/14338
00:37:43 - process[9] - dev - epoch 18 - mAP: 0.491 w/ 39 queries
00:37:43 - process[9]: training epoch 19 ...
00:38:02 - process[9] - epoch 19 - train iter 360 - 15245.8 words/s - loss: 0.3734
00:38:02 - process[9]: evaluating epoch 19 on dev ...
00:38:34 - dev set during evaluation: 14340/14338
00:38:34 - process[9] - dev - epoch 19 - mAP: 0.487 w/ 39 queries
00:38:34 - [fold 3] best test MAP: 0.525 @ epoch 12
00:38:34 - Evaluating every 1 epochs ...
00:38:34 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:35 - test has 38 queries ...
00:38:35 - Data reading done ...
00:38:37 - adding 9-th encoder to optimizer...
00:38:37 - adding 10-th encoder to optimizer...
00:38:37 - adding 11-th encoder to optimizer...
00:38:37 - process[9]: training epoch 0 ...
00:38:55 - process[9] - epoch 0 - train iter 404 - 17811.0 words/s - loss: 0.6184
00:38:55 - process[9]: training epoch 1 ...
00:39:14 - process[9] - epoch 1 - train iter 404 - 17366.8 words/s - loss: 0.5550
00:39:14 - process[9]: training epoch 2 ...
00:39:32 - process[9] - epoch 2 - train iter 404 - 17828.2 words/s - loss: 0.5464
00:39:32 - process[9]: training epoch 3 ...
00:39:50 - process[9] - epoch 3 - train iter 404 - 17474.7 words/s - loss: 0.4943
00:39:50 - process[9]: training epoch 4 ...
00:40:09 - process[9] - epoch 4 - train iter 404 - 17360.6 words/s - loss: 0.4870
00:40:09 - process[9]: training epoch 5 ...
00:40:26 - process[9] - epoch 5 - train iter 404 - 18375.5 words/s - loss: 0.4648
00:40:26 - process[9]: training epoch 6 ...
00:40:44 - process[9] - epoch 6 - train iter 404 - 17872.2 words/s - loss: 0.4525
00:40:44 - process[9]: training epoch 7 ...
00:41:03 - process[9] - epoch 7 - train iter 404 - 17223.0 words/s - loss: 0.4410
00:41:03 - process[9]: training epoch 8 ...
00:41:21 - process[9] - epoch 8 - train iter 404 - 18297.1 words/s - loss: 0.4126
00:41:21 - process[9]: training epoch 9 ...
00:41:38 - process[9] - epoch 9 - train iter 404 - 18048.2 words/s - loss: 0.4127
00:41:38 - process[9]: training epoch 10 ...
00:41:57 - process[9] - epoch 10 - train iter 404 - 17275.0 words/s - loss: 0.4469
00:41:57 - process[9]: evaluating epoch 10 on dev ...
00:42:24 - dev set during evaluation: 11710/11707
00:42:24 - process[9] - dev - epoch 10 - mAP: 0.506 w/ 39 queries
00:42:25 - process[9]: evaluating epoch 10 on test ...
00:42:52 - test set during evaluation: 13490/13483
00:42:52 - process[9] - test - epoch 10 - mAP: 0.476 w/ 38 queries
00:42:52 - process[9]: training epoch 11 ...
00:43:10 - process[9] - epoch 11 - train iter 404 - 18304.9 words/s - loss: 0.4295
00:43:10 - process[9]: evaluating epoch 11 on dev ...
00:43:38 - dev set during evaluation: 11710/11707
00:43:38 - process[9] - dev - epoch 11 - mAP: 0.499 w/ 39 queries
00:43:39 - process[9]: training epoch 12 ...
00:43:58 - process[9] - epoch 12 - train iter 404 - 16670.6 words/s - loss: 0.4273
00:43:58 - process[9]: evaluating epoch 12 on dev ...
00:44:24 - dev set during evaluation: 11710/11707
00:44:24 - process[9] - dev - epoch 12 - mAP: 0.505 w/ 39 queries
00:44:24 - process[9]: training epoch 13 ...
00:44:41 - process[9] - epoch 13 - train iter 404 - 18340.8 words/s - loss: 0.4026
00:44:41 - process[9]: evaluating epoch 13 on dev ...
00:45:09 - dev set during evaluation: 11710/11707
00:45:09 - process[9] - dev - epoch 13 - mAP: 0.513 w/ 39 queries
00:45:09 - process[9]: evaluating epoch 13 on test ...
00:45:36 - test set during evaluation: 13490/13483
00:45:36 - process[9] - test - epoch 13 - mAP: 0.483 w/ 38 queries
00:45:36 - process[9]: training epoch 14 ...
00:45:56 - process[9] - epoch 14 - train iter 404 - 16475.1 words/s - loss: 0.4080
00:45:56 - process[9]: evaluating epoch 14 on dev ...
00:46:22 - dev set during evaluation: 11710/11707
00:46:22 - process[9] - dev - epoch 14 - mAP: 0.491 w/ 39 queries
00:46:22 - process[9]: training epoch 15 ...
00:46:41 - process[9] - epoch 15 - train iter 404 - 16921.2 words/s - loss: 0.3821
00:46:41 - process[9]: evaluating epoch 15 on dev ...
00:47:07 - dev set during evaluation: 11710/11707
00:47:07 - process[9] - dev - epoch 15 - mAP: 0.512 w/ 39 queries
00:47:07 - process[9]: training epoch 16 ...
00:47:24 - process[9] - epoch 16 - train iter 404 - 18747.1 words/s - loss: 0.3777
00:47:24 - process[9]: evaluating epoch 16 on dev ...
00:47:52 - dev set during evaluation: 11710/11707
00:47:52 - process[9] - dev - epoch 16 - mAP: 0.510 w/ 39 queries
00:47:52 - process[9]: training epoch 17 ...
00:48:11 - process[9] - epoch 17 - train iter 404 - 16519.6 words/s - loss: 0.3661
00:48:11 - process[9]: evaluating epoch 17 on dev ...
00:48:37 - dev set during evaluation: 11710/11707
00:48:37 - process[9] - dev - epoch 17 - mAP: 0.496 w/ 39 queries
00:48:37 - process[9]: training epoch 18 ...
00:48:56 - process[9] - epoch 18 - train iter 404 - 17037.9 words/s - loss: 0.3645
00:48:56 - process[9]: evaluating epoch 18 on dev ...
00:49:23 - dev set during evaluation: 11710/11707
00:49:23 - process[9] - dev - epoch 18 - mAP: 0.515 w/ 39 queries
00:49:23 - process[9]: evaluating epoch 18 on test ...
00:49:50 - test set during evaluation: 13490/13483
00:49:50 - process[9] - test - epoch 18 - mAP: 0.491 w/ 38 queries
00:49:50 - process[9]: training epoch 19 ...
00:50:08 - process[9] - epoch 19 - train iter 404 - 18270.6 words/s - loss: 0.3858
00:50:08 - process[9]: evaluating epoch 19 on dev ...
00:50:34 - dev set during evaluation: 11710/11707
00:50:34 - process[9] - dev - epoch 19 - mAP: 0.521 w/ 39 queries
00:50:35 - process[9]: evaluating epoch 19 on test ...
00:51:02 - test set during evaluation: 13490/13483
00:51:02 - process[9] - test - epoch 19 - mAP: 0.478 w/ 38 queries
00:51:02 - [fold 4] best test MAP: 0.478 @ epoch 19
00:51:02 - Evaluating every 1 epochs ...
00:51:02 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:51:03 - test has 38 queries ...
00:51:03 - Data reading done ...
00:51:05 - adding 9-th encoder to optimizer...
00:51:05 - adding 10-th encoder to optimizer...
00:51:05 - adding 11-th encoder to optimizer...
00:51:05 - process[9]: training epoch 0 ...
00:51:25 - process[9] - epoch 0 - train iter 444 - 18320.6 words/s - loss: 0.6244
00:51:25 - process[9]: training epoch 1 ...
00:51:42 - process[9] - epoch 1 - train iter 444 - 19650.9 words/s - loss: 0.5574
00:51:42 - process[9]: training epoch 2 ...
00:52:01 - process[9] - epoch 2 - train iter 444 - 19544.8 words/s - loss: 0.5297
00:52:01 - process[9]: training epoch 3 ...
00:52:20 - process[9] - epoch 3 - train iter 444 - 18707.0 words/s - loss: 0.5270
00:52:20 - process[9]: training epoch 4 ...
00:52:38 - process[9] - epoch 4 - train iter 444 - 19154.7 words/s - loss: 0.5104
00:52:38 - process[9]: training epoch 5 ...
00:52:56 - process[9] - epoch 5 - train iter 444 - 19926.2 words/s - loss: 0.5103
00:52:56 - process[9]: training epoch 6 ...
00:53:15 - process[9] - epoch 6 - train iter 444 - 18760.8 words/s - loss: 0.4808
00:53:15 - process[9]: training epoch 7 ...
00:53:34 - process[9] - epoch 7 - train iter 444 - 18183.6 words/s - loss: 0.4578
00:53:34 - process[9]: training epoch 8 ...
00:53:53 - process[9] - epoch 8 - train iter 444 - 18672.5 words/s - loss: 0.4581
00:53:53 - process[9]: training epoch 9 ...
00:54:12 - process[9] - epoch 9 - train iter 444 - 18864.9 words/s - loss: 0.4396
00:54:12 - process[9]: training epoch 10 ...
00:54:29 - process[9] - epoch 10 - train iter 444 - 19969.1 words/s - loss: 0.4385
00:54:29 - process[9]: evaluating epoch 10 on dev ...
00:55:01 - dev set during evaluation: 13490/13483
00:55:01 - process[9] - dev - epoch 10 - mAP: 0.461 w/ 38 queries
00:55:01 - process[9]: evaluating epoch 10 on test ...
00:55:33 - test set during evaluation: 13890/13887
00:55:33 - process[9] - test - epoch 10 - mAP: 0.502 w/ 38 queries
00:55:33 - process[9]: training epoch 11 ...
00:55:51 - process[9] - epoch 11 - train iter 444 - 19522.0 words/s - loss: 0.4368
00:55:51 - process[9]: evaluating epoch 11 on dev ...
00:56:21 - dev set during evaluation: 13490/13483
00:56:21 - process[9] - dev - epoch 11 - mAP: 0.480 w/ 38 queries
00:56:21 - process[9]: evaluating epoch 11 on test ...
00:56:53 - test set during evaluation: 13890/13887
00:56:53 - process[9] - test - epoch 11 - mAP: 0.481 w/ 38 queries
00:56:53 - process[9]: training epoch 12 ...
00:57:13 - process[9] - epoch 12 - train iter 444 - 17878.4 words/s - loss: 0.4067
00:57:13 - process[9]: evaluating epoch 12 on dev ...
00:57:39 - dev set during evaluation: 13490/13483
00:57:39 - process[9] - dev - epoch 12 - mAP: 0.467 w/ 38 queries
00:57:39 - process[9]: training epoch 13 ...
00:57:58 - process[9] - epoch 13 - train iter 444 - 18196.0 words/s - loss: 0.3997
00:57:58 - process[9]: evaluating epoch 13 on dev ...
00:58:25 - dev set during evaluation: 13490/13483
00:58:25 - process[9] - dev - epoch 13 - mAP: 0.470 w/ 38 queries
00:58:25 - process[9]: training epoch 14 ...
00:58:45 - process[9] - epoch 14 - train iter 444 - 17947.7 words/s - loss: 0.4066
00:58:45 - process[9]: evaluating epoch 14 on dev ...
00:59:13 - dev set during evaluation: 13490/13483
00:59:13 - process[9] - dev - epoch 14 - mAP: 0.466 w/ 38 queries
00:59:13 - process[9]: training epoch 15 ...
00:59:32 - process[9] - epoch 15 - train iter 444 - 18753.0 words/s - loss: 0.4110
00:59:32 - process[9]: evaluating epoch 15 on dev ...
00:59:59 - dev set during evaluation: 13490/13483
00:59:59 - process[9] - dev - epoch 15 - mAP: 0.479 w/ 38 queries
00:59:59 - process[9]: training epoch 16 ...
01:00:17 - process[9] - epoch 16 - train iter 444 - 19704.2 words/s - loss: 0.3893
01:00:17 - process[9]: evaluating epoch 16 on dev ...
01:00:46 - dev set during evaluation: 13490/13483
01:00:46 - process[9] - dev - epoch 16 - mAP: 0.464 w/ 38 queries
01:00:46 - process[9]: training epoch 17 ...
01:01:05 - process[9] - epoch 17 - train iter 444 - 18208.3 words/s - loss: 0.3907
01:01:05 - process[9]: evaluating epoch 17 on dev ...
01:01:32 - dev set during evaluation: 13490/13483
01:01:32 - process[9] - dev - epoch 17 - mAP: 0.468 w/ 38 queries
01:01:32 - process[9]: training epoch 18 ...
01:01:51 - process[9] - epoch 18 - train iter 444 - 18770.5 words/s - loss: 0.3895
01:01:51 - process[9]: evaluating epoch 18 on dev ...
01:02:19 - dev set during evaluation: 13490/13483
01:02:19 - process[9] - dev - epoch 18 - mAP: 0.457 w/ 38 queries
01:02:19 - process[9]: training epoch 19 ...
01:02:38 - process[9] - epoch 19 - train iter 444 - 19278.3 words/s - loss: 0.3638
01:02:38 - process[9]: evaluating epoch 19 on dev ...
01:03:06 - dev set during evaluation: 13490/13483
01:03:06 - process[9] - dev - epoch 19 - mAP: 0.459 w/ 38 queries
01:03:06 - [fold 5] best test MAP: 0.481 @ epoch 11
01:03:06 - [0.4168774676412307, 0.49832937526660626, 0.5253163732612337, 0.478317699139435, 0.4808441250324664]
01:03:06 - [38, 39, 39, 38, 38]
01:03:06 - final MAP: 0.480
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=9, model_path='/mnt/scratch/puxuan/short_qlm_0.45/2186793/huggingface-4', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='de')
00:00:15 - Evaluating every 1 epochs ...
00:00:15 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:16 - test has 38 queries ...
00:00:16 - Data reading done ...
00:00:22 - adding 9-th encoder to optimizer...
00:00:22 - adding 10-th encoder to optimizer...
00:00:22 - adding 11-th encoder to optimizer...
00:00:23 - process[9]: training epoch 0 ...
00:00:40 - process[9] - epoch 0 - train iter 423 - 19281.1 words/s - loss: 0.5930
00:00:40 - process[9]: training epoch 1 ...
00:00:56 - process[9] - epoch 1 - train iter 423 - 20953.2 words/s - loss: 0.5641
00:00:56 - process[9]: training epoch 2 ...
00:01:13 - process[9] - epoch 2 - train iter 423 - 20896.7 words/s - loss: 0.5308
00:01:13 - process[9]: training epoch 3 ...
00:01:28 - process[9] - epoch 3 - train iter 423 - 21677.6 words/s - loss: 0.5318
00:01:28 - process[9]: training epoch 4 ...
00:01:45 - process[9] - epoch 4 - train iter 423 - 20592.3 words/s - loss: 0.5031
00:01:45 - process[9]: training epoch 5 ...
00:02:02 - process[9] - epoch 5 - train iter 423 - 19914.8 words/s - loss: 0.4813
00:02:02 - process[9]: training epoch 6 ...
00:02:18 - process[9] - epoch 6 - train iter 423 - 20789.4 words/s - loss: 0.4948
00:02:18 - process[9]: training epoch 7 ...
00:02:33 - process[9] - epoch 7 - train iter 423 - 21208.1 words/s - loss: 0.4674
00:02:33 - process[9]: training epoch 8 ...
00:02:49 - process[9] - epoch 8 - train iter 423 - 20980.2 words/s - loss: 0.4457
00:02:49 - process[9]: training epoch 9 ...
00:03:05 - process[9] - epoch 9 - train iter 423 - 21023.6 words/s - loss: 0.4221
00:03:05 - process[9]: training epoch 10 ...
00:03:21 - process[9] - epoch 10 - train iter 423 - 21801.2 words/s - loss: 0.3952
00:03:21 - process[9]: evaluating epoch 10 on dev ...
00:03:54 - dev set during evaluation: 13890/13887
00:03:54 - process[9] - dev - epoch 10 - mAP: 0.460 w/ 38 queries
00:03:54 - process[9]: evaluating epoch 10 on test ...
00:04:24 - test set during evaluation: 15580/15574
00:04:24 - process[9] - test - epoch 10 - mAP: 0.431 w/ 38 queries
00:04:24 - process[9]: training epoch 11 ...
00:04:40 - process[9] - epoch 11 - train iter 423 - 20703.8 words/s - loss: 0.4305
00:04:40 - process[9]: evaluating epoch 11 on dev ...
00:05:09 - dev set during evaluation: 13890/13887
00:05:09 - process[9] - dev - epoch 11 - mAP: 0.483 w/ 38 queries
00:05:09 - process[9]: evaluating epoch 11 on test ...
00:05:39 - test set during evaluation: 15580/15574
00:05:39 - process[9] - test - epoch 11 - mAP: 0.417 w/ 38 queries
00:05:39 - process[9]: training epoch 12 ...
00:05:56 - process[9] - epoch 12 - train iter 423 - 18942.2 words/s - loss: 0.4344
00:05:56 - process[9]: evaluating epoch 12 on dev ...
00:06:24 - dev set during evaluation: 13890/13887
00:06:24 - process[9] - dev - epoch 12 - mAP: 0.471 w/ 38 queries
00:06:24 - process[9]: training epoch 13 ...
00:06:40 - process[9] - epoch 13 - train iter 423 - 21203.8 words/s - loss: 0.4007
00:06:40 - process[9]: evaluating epoch 13 on dev ...
00:07:09 - dev set during evaluation: 13890/13887
00:07:09 - process[9] - dev - epoch 13 - mAP: 0.495 w/ 38 queries
00:07:09 - process[9]: evaluating epoch 13 on test ...
00:07:39 - test set during evaluation: 15580/15574
00:07:39 - process[9] - test - epoch 13 - mAP: 0.417 w/ 38 queries
00:07:39 - process[9]: training epoch 14 ...
00:07:54 - process[9] - epoch 14 - train iter 423 - 21997.1 words/s - loss: 0.4059
00:07:54 - process[9]: evaluating epoch 14 on dev ...
00:08:24 - dev set during evaluation: 13890/13887
00:08:24 - process[9] - dev - epoch 14 - mAP: 0.481 w/ 38 queries
00:08:24 - process[9]: training epoch 15 ...
00:08:41 - process[9] - epoch 15 - train iter 423 - 20434.4 words/s - loss: 0.3882
00:08:41 - process[9]: evaluating epoch 15 on dev ...
00:09:10 - dev set during evaluation: 13890/13887
00:09:10 - process[9] - dev - epoch 15 - mAP: 0.489 w/ 38 queries
00:09:10 - process[9]: training epoch 16 ...
00:09:26 - process[9] - epoch 16 - train iter 423 - 20409.3 words/s - loss: 0.3903
00:09:26 - process[9]: evaluating epoch 16 on dev ...
00:09:55 - dev set during evaluation: 13890/13887
00:09:55 - process[9] - dev - epoch 16 - mAP: 0.483 w/ 38 queries
00:09:55 - process[9]: training epoch 17 ...
00:10:11 - process[9] - epoch 17 - train iter 423 - 20602.4 words/s - loss: 0.3610
00:10:11 - process[9]: evaluating epoch 17 on dev ...
00:10:40 - dev set during evaluation: 13890/13887
00:10:40 - process[9] - dev - epoch 17 - mAP: 0.492 w/ 38 queries
00:10:40 - process[9]: training epoch 18 ...
00:10:57 - process[9] - epoch 18 - train iter 423 - 20231.0 words/s - loss: 0.4111
00:10:57 - process[9]: evaluating epoch 18 on dev ...
00:11:25 - dev set during evaluation: 13890/13887
00:11:25 - process[9] - dev - epoch 18 - mAP: 0.484 w/ 38 queries
00:11:25 - process[9]: training epoch 19 ...
00:11:40 - process[9] - epoch 19 - train iter 423 - 21112.1 words/s - loss: 0.4240
00:11:40 - process[9]: evaluating epoch 19 on dev ...
00:12:09 - dev set during evaluation: 13890/13887
00:12:09 - process[9] - dev - epoch 19 - mAP: 0.486 w/ 38 queries
00:12:09 - [fold 1] best test MAP: 0.417 @ epoch 13
00:12:09 - Evaluating every 1 epochs ...
00:12:09 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:10 - test has 39 queries ...
00:12:10 - Data reading done ...
00:12:12 - adding 9-th encoder to optimizer...
00:12:12 - adding 10-th encoder to optimizer...
00:12:12 - adding 11-th encoder to optimizer...
00:12:12 - process[9]: training epoch 0 ...
00:12:30 - process[9] - epoch 0 - train iter 386 - 17414.2 words/s - loss: 0.6230
00:12:30 - process[9]: training epoch 1 ...
00:12:46 - process[9] - epoch 1 - train iter 386 - 18250.4 words/s - loss: 0.5634
00:12:46 - process[9]: training epoch 2 ...
00:13:05 - process[9] - epoch 2 - train iter 386 - 16665.8 words/s - loss: 0.5109
00:13:05 - process[9]: training epoch 3 ...
00:13:23 - process[9] - epoch 3 - train iter 386 - 16755.8 words/s - loss: 0.5014
00:13:23 - process[9]: training epoch 4 ...
00:13:40 - process[9] - epoch 4 - train iter 386 - 17921.0 words/s - loss: 0.4751
00:13:40 - process[9]: training epoch 5 ...
00:13:58 - process[9] - epoch 5 - train iter 386 - 16623.7 words/s - loss: 0.4748
00:13:58 - process[9]: training epoch 6 ...
00:14:18 - process[9] - epoch 6 - train iter 386 - 15458.8 words/s - loss: 0.4093
00:14:18 - process[9]: training epoch 7 ...
00:14:35 - process[9] - epoch 7 - train iter 386 - 17790.7 words/s - loss: 0.4507
00:14:35 - process[9]: training epoch 8 ...
00:14:51 - process[9] - epoch 8 - train iter 386 - 18232.5 words/s - loss: 0.4398
00:14:51 - process[9]: training epoch 9 ...
00:15:07 - process[9] - epoch 9 - train iter 386 - 19237.0 words/s - loss: 0.4241
00:15:07 - process[9]: training epoch 10 ...
00:15:25 - process[9] - epoch 10 - train iter 386 - 17091.5 words/s - loss: 0.4063
00:15:25 - process[9]: evaluating epoch 10 on dev ...
00:16:07 - dev set during evaluation: 15580/15574
00:16:07 - process[9] - dev - epoch 10 - mAP: 0.424 w/ 38 queries
00:16:07 - process[9]: evaluating epoch 10 on test ...
00:16:39 - test set during evaluation: 14340/14338
00:16:39 - process[9] - test - epoch 10 - mAP: 0.502 w/ 39 queries
00:16:39 - process[9]: training epoch 11 ...
00:16:56 - process[9] - epoch 11 - train iter 386 - 18118.0 words/s - loss: 0.3978
00:16:56 - process[9]: evaluating epoch 11 on dev ...
00:17:33 - dev set during evaluation: 15580/15574
00:17:33 - process[9] - dev - epoch 11 - mAP: 0.431 w/ 38 queries
00:17:33 - process[9]: evaluating epoch 11 on test ...
00:18:06 - test set during evaluation: 14340/14338
00:18:06 - process[9] - test - epoch 11 - mAP: 0.498 w/ 39 queries
00:18:06 - process[9]: training epoch 12 ...
00:18:24 - process[9] - epoch 12 - train iter 386 - 16874.7 words/s - loss: 0.3968
00:18:24 - process[9]: evaluating epoch 12 on dev ...
00:19:00 - dev set during evaluation: 15580/15574
00:19:00 - process[9] - dev - epoch 12 - mAP: 0.409 w/ 38 queries
00:19:00 - process[9]: training epoch 13 ...
00:19:20 - process[9] - epoch 13 - train iter 386 - 15749.0 words/s - loss: 0.4252
00:19:20 - process[9]: evaluating epoch 13 on dev ...
00:19:55 - dev set during evaluation: 15580/15574
00:19:55 - process[9] - dev - epoch 13 - mAP: 0.401 w/ 38 queries
00:19:55 - process[9]: training epoch 14 ...
00:20:12 - process[9] - epoch 14 - train iter 386 - 17347.5 words/s - loss: 0.3876
00:20:12 - process[9]: evaluating epoch 14 on dev ...
00:20:49 - dev set during evaluation: 15580/15574
00:20:49 - process[9] - dev - epoch 14 - mAP: 0.393 w/ 38 queries
00:20:49 - process[9]: training epoch 15 ...
00:21:07 - process[9] - epoch 15 - train iter 386 - 16382.7 words/s - loss: 0.3939
00:21:07 - process[9]: evaluating epoch 15 on dev ...
00:21:43 - dev set during evaluation: 15580/15574
00:21:43 - process[9] - dev - epoch 15 - mAP: 0.409 w/ 38 queries
00:21:43 - process[9]: training epoch 16 ...
00:22:01 - process[9] - epoch 16 - train iter 386 - 17028.3 words/s - loss: 0.3500
00:22:01 - process[9]: evaluating epoch 16 on dev ...
00:22:38 - dev set during evaluation: 15580/15574
00:22:38 - process[9] - dev - epoch 16 - mAP: 0.374 w/ 38 queries
00:22:38 - process[9]: training epoch 17 ...
00:22:57 - process[9] - epoch 17 - train iter 386 - 15691.5 words/s - loss: 0.3748
00:22:57 - process[9]: evaluating epoch 17 on dev ...
00:23:31 - dev set during evaluation: 15580/15574
00:23:31 - process[9] - dev - epoch 17 - mAP: 0.390 w/ 38 queries
00:23:31 - process[9]: training epoch 18 ...
00:23:49 - process[9] - epoch 18 - train iter 386 - 16798.5 words/s - loss: 0.4078
00:23:49 - process[9]: evaluating epoch 18 on dev ...
00:24:25 - dev set during evaluation: 15580/15574
00:24:25 - process[9] - dev - epoch 18 - mAP: 0.400 w/ 38 queries
00:24:25 - process[9]: training epoch 19 ...
00:24:45 - process[9] - epoch 19 - train iter 386 - 16322.7 words/s - loss: 0.3498
00:24:45 - process[9]: evaluating epoch 19 on dev ...
00:25:20 - dev set during evaluation: 15580/15574
00:25:20 - process[9] - dev - epoch 19 - mAP: 0.401 w/ 38 queries
00:25:20 - [fold 2] best test MAP: 0.498 @ epoch 11
00:25:20 - Evaluating every 1 epochs ...
00:25:20 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:21 - test has 39 queries ...
00:25:21 - Data reading done ...
00:25:22 - adding 9-th encoder to optimizer...
00:25:22 - adding 10-th encoder to optimizer...
00:25:22 - adding 11-th encoder to optimizer...
00:25:23 - process[9]: training epoch 0 ...
00:25:41 - process[9] - epoch 0 - train iter 360 - 15853.1 words/s - loss: 0.6405
00:25:41 - process[9]: training epoch 1 ...
00:25:58 - process[9] - epoch 1 - train iter 360 - 16636.2 words/s - loss: 0.5714
00:25:58 - process[9]: training epoch 2 ...
00:26:14 - process[9] - epoch 2 - train iter 360 - 17874.5 words/s - loss: 0.5526
00:26:14 - process[9]: training epoch 3 ...
00:26:31 - process[9] - epoch 3 - train iter 360 - 16894.9 words/s - loss: 0.5197
00:26:31 - process[9]: training epoch 4 ...
00:26:49 - process[9] - epoch 4 - train iter 360 - 16226.1 words/s - loss: 0.5097
00:26:49 - process[9]: training epoch 5 ...
00:27:08 - process[9] - epoch 5 - train iter 360 - 14798.8 words/s - loss: 0.4811
00:27:08 - process[9]: training epoch 6 ...
00:27:25 - process[9] - epoch 6 - train iter 360 - 17523.9 words/s - loss: 0.4742
00:27:25 - process[9]: training epoch 7 ...
00:27:42 - process[9] - epoch 7 - train iter 360 - 16802.5 words/s - loss: 0.4603
00:27:42 - process[9]: training epoch 8 ...
00:27:58 - process[9] - epoch 8 - train iter 360 - 16906.9 words/s - loss: 0.4477
00:27:58 - process[9]: training epoch 9 ...
00:28:15 - process[9] - epoch 9 - train iter 360 - 16733.1 words/s - loss: 0.3955
00:28:15 - process[9]: training epoch 10 ...
00:28:33 - process[9] - epoch 10 - train iter 360 - 15987.0 words/s - loss: 0.4446
00:28:33 - process[9]: evaluating epoch 10 on dev ...
00:29:15 - dev set during evaluation: 14340/14338
00:29:15 - process[9] - dev - epoch 10 - mAP: 0.481 w/ 39 queries
00:29:15 - process[9]: evaluating epoch 10 on test ...
00:29:44 - test set during evaluation: 11710/11707
00:29:44 - process[9] - test - epoch 10 - mAP: 0.499 w/ 39 queries
00:29:44 - process[9]: training epoch 11 ...
00:30:03 - process[9] - epoch 11 - train iter 360 - 14886.7 words/s - loss: 0.4355
00:30:03 - process[9]: evaluating epoch 11 on dev ...
00:30:35 - dev set during evaluation: 14340/14338
00:30:35 - process[9] - dev - epoch 11 - mAP: 0.483 w/ 39 queries
00:30:35 - process[9]: evaluating epoch 11 on test ...
00:31:04 - test set during evaluation: 11710/11707
00:31:04 - process[9] - test - epoch 11 - mAP: 0.513 w/ 39 queries
00:31:04 - process[9]: training epoch 12 ...
00:31:21 - process[9] - epoch 12 - train iter 360 - 16829.6 words/s - loss: 0.4224
00:31:21 - process[9]: evaluating epoch 12 on dev ...
00:31:54 - dev set during evaluation: 14340/14338
00:31:54 - process[9] - dev - epoch 12 - mAP: 0.493 w/ 39 queries
00:31:54 - process[9]: evaluating epoch 12 on test ...
00:32:23 - test set during evaluation: 11710/11707
00:32:23 - process[9] - test - epoch 12 - mAP: 0.525 w/ 39 queries
00:32:23 - process[9]: training epoch 13 ...
00:32:40 - process[9] - epoch 13 - train iter 360 - 17217.7 words/s - loss: 0.3847
00:32:40 - process[9]: evaluating epoch 13 on dev ...
00:33:13 - dev set during evaluation: 14340/14338
00:33:13 - process[9] - dev - epoch 13 - mAP: 0.491 w/ 39 queries
00:33:13 - process[9]: training epoch 14 ...
00:33:29 - process[9] - epoch 14 - train iter 360 - 17289.4 words/s - loss: 0.4170
00:33:29 - process[9]: evaluating epoch 14 on dev ...
00:34:03 - dev set during evaluation: 14340/14338
00:34:03 - process[9] - dev - epoch 14 - mAP: 0.474 w/ 39 queries
00:34:03 - process[9]: training epoch 15 ...
00:34:20 - process[9] - epoch 15 - train iter 360 - 16940.6 words/s - loss: 0.4170
00:34:20 - process[9]: evaluating epoch 15 on dev ...
00:34:53 - dev set during evaluation: 14340/14338
00:34:53 - process[9] - dev - epoch 15 - mAP: 0.488 w/ 39 queries
00:34:53 - process[9]: training epoch 16 ...
00:35:11 - process[9] - epoch 16 - train iter 360 - 16234.7 words/s - loss: 0.3655
00:35:11 - process[9]: evaluating epoch 16 on dev ...
00:35:44 - dev set during evaluation: 14340/14338
00:35:44 - process[9] - dev - epoch 16 - mAP: 0.492 w/ 39 queries
00:35:44 - process[9]: training epoch 17 ...
00:36:01 - process[9] - epoch 17 - train iter 360 - 16452.2 words/s - loss: 0.3758
00:36:01 - process[9]: evaluating epoch 17 on dev ...
00:36:35 - dev set during evaluation: 14340/14338
00:36:35 - process[9] - dev - epoch 17 - mAP: 0.489 w/ 39 queries
00:36:35 - process[9]: training epoch 18 ...
00:36:53 - process[9] - epoch 18 - train iter 360 - 15967.2 words/s - loss: 0.3339
00:36:53 - process[9]: evaluating epoch 18 on dev ...
00:37:27 - dev set during evaluation: 14340/14338
00:37:27 - process[9] - dev - epoch 18 - mAP: 0.491 w/ 39 queries
00:37:27 - process[9]: training epoch 19 ...
00:37:46 - process[9] - epoch 19 - train iter 360 - 15141.5 words/s - loss: 0.3734
00:37:46 - process[9]: evaluating epoch 19 on dev ...
00:38:18 - dev set during evaluation: 14340/14338
00:38:18 - process[9] - dev - epoch 19 - mAP: 0.487 w/ 39 queries
00:38:18 - [fold 3] best test MAP: 0.525 @ epoch 12
00:38:18 - Evaluating every 1 epochs ...
00:38:18 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:38:19 - test has 38 queries ...
00:38:19 - Data reading done ...
00:38:21 - adding 9-th encoder to optimizer...
00:38:21 - adding 10-th encoder to optimizer...
00:38:21 - adding 11-th encoder to optimizer...
00:38:21 - process[9]: training epoch 0 ...
00:38:39 - process[9] - epoch 0 - train iter 404 - 17967.7 words/s - loss: 0.6184
00:38:39 - process[9]: training epoch 1 ...
00:38:58 - process[9] - epoch 1 - train iter 404 - 17590.1 words/s - loss: 0.5550
00:38:58 - process[9]: training epoch 2 ...
00:39:16 - process[9] - epoch 2 - train iter 404 - 18072.9 words/s - loss: 0.5464
00:39:16 - process[9]: training epoch 3 ...
00:39:34 - process[9] - epoch 3 - train iter 404 - 17624.2 words/s - loss: 0.4943
00:39:34 - process[9]: training epoch 4 ...
00:39:52 - process[9] - epoch 4 - train iter 404 - 17399.0 words/s - loss: 0.4870
00:39:52 - process[9]: training epoch 5 ...
00:40:09 - process[9] - epoch 5 - train iter 404 - 18520.5 words/s - loss: 0.4648
00:40:09 - process[9]: training epoch 6 ...
00:40:27 - process[9] - epoch 6 - train iter 404 - 17963.5 words/s - loss: 0.4525
00:40:27 - process[9]: training epoch 7 ...
00:40:46 - process[9] - epoch 7 - train iter 404 - 17289.6 words/s - loss: 0.4410
00:40:46 - process[9]: training epoch 8 ...
00:41:04 - process[9] - epoch 8 - train iter 404 - 18390.9 words/s - loss: 0.4126
00:41:04 - process[9]: training epoch 9 ...
00:41:21 - process[9] - epoch 9 - train iter 404 - 17990.2 words/s - loss: 0.4127
00:41:21 - process[9]: training epoch 10 ...
00:41:40 - process[9] - epoch 10 - train iter 404 - 17267.8 words/s - loss: 0.4469
00:41:40 - process[9]: evaluating epoch 10 on dev ...
00:42:07 - dev set during evaluation: 11710/11707
00:42:07 - process[9] - dev - epoch 10 - mAP: 0.506 w/ 39 queries
00:42:07 - process[9]: evaluating epoch 10 on test ...
00:42:34 - test set during evaluation: 13490/13483
00:42:34 - process[9] - test - epoch 10 - mAP: 0.476 w/ 38 queries
00:42:34 - process[9]: training epoch 11 ...
00:42:52 - process[9] - epoch 11 - train iter 404 - 18384.5 words/s - loss: 0.4295
00:42:52 - process[9]: evaluating epoch 11 on dev ...
00:43:21 - dev set during evaluation: 11710/11707
00:43:21 - process[9] - dev - epoch 11 - mAP: 0.499 w/ 39 queries
00:43:21 - process[9]: training epoch 12 ...
00:43:40 - process[9] - epoch 12 - train iter 404 - 16813.2 words/s - loss: 0.4273
00:43:40 - process[9]: evaluating epoch 12 on dev ...
00:44:07 - dev set during evaluation: 11710/11707
00:44:07 - process[9] - dev - epoch 12 - mAP: 0.505 w/ 39 queries
00:44:07 - process[9]: training epoch 13 ...
00:44:24 - process[9] - epoch 13 - train iter 404 - 18497.9 words/s - loss: 0.4026
00:44:24 - process[9]: evaluating epoch 13 on dev ...
00:44:52 - dev set during evaluation: 11710/11707
00:44:52 - process[9] - dev - epoch 13 - mAP: 0.513 w/ 39 queries
00:44:52 - process[9]: evaluating epoch 13 on test ...
00:45:20 - test set during evaluation: 13490/13483
00:45:20 - process[9] - test - epoch 13 - mAP: 0.483 w/ 38 queries
00:45:20 - process[9]: training epoch 14 ...
00:45:39 - process[9] - epoch 14 - train iter 404 - 16683.1 words/s - loss: 0.4080
00:45:39 - process[9]: evaluating epoch 14 on dev ...
00:46:05 - dev set during evaluation: 11710/11707
00:46:05 - process[9] - dev - epoch 14 - mAP: 0.491 w/ 39 queries
00:46:05 - process[9]: training epoch 15 ...
00:46:24 - process[9] - epoch 15 - train iter 404 - 17068.1 words/s - loss: 0.3821
00:46:24 - process[9]: evaluating epoch 15 on dev ...
00:46:50 - dev set during evaluation: 11710/11707
00:46:50 - process[9] - dev - epoch 15 - mAP: 0.512 w/ 39 queries
00:46:50 - process[9]: training epoch 16 ...
00:47:07 - process[9] - epoch 16 - train iter 404 - 18859.5 words/s - loss: 0.3777
00:47:07 - process[9]: evaluating epoch 16 on dev ...
00:47:36 - dev set during evaluation: 11710/11707
00:47:36 - process[9] - dev - epoch 16 - mAP: 0.510 w/ 39 queries
00:47:36 - process[9]: training epoch 17 ...
00:47:55 - process[9] - epoch 17 - train iter 404 - 16516.3 words/s - loss: 0.3661
00:47:55 - process[9]: evaluating epoch 17 on dev ...
00:48:21 - dev set during evaluation: 11710/11707
00:48:21 - process[9] - dev - epoch 17 - mAP: 0.496 w/ 39 queries
00:48:21 - process[9]: training epoch 18 ...
00:48:40 - process[9] - epoch 18 - train iter 404 - 17043.6 words/s - loss: 0.3645
00:48:40 - process[9]: evaluating epoch 18 on dev ...
00:49:06 - dev set during evaluation: 11710/11707
00:49:06 - process[9] - dev - epoch 18 - mAP: 0.515 w/ 39 queries
00:49:06 - process[9]: evaluating epoch 18 on test ...
00:49:34 - test set during evaluation: 13490/13483
00:49:34 - process[9] - test - epoch 18 - mAP: 0.491 w/ 38 queries
00:49:34 - process[9]: training epoch 19 ...
00:49:51 - process[9] - epoch 19 - train iter 404 - 18459.4 words/s - loss: 0.3858
00:49:51 - process[9]: evaluating epoch 19 on dev ...
00:50:19 - dev set during evaluation: 11710/11707
00:50:19 - process[9] - dev - epoch 19 - mAP: 0.521 w/ 39 queries
00:50:19 - process[9]: evaluating epoch 19 on test ...
00:50:46 - test set during evaluation: 13490/13483
00:50:46 - process[9] - test - epoch 19 - mAP: 0.478 w/ 38 queries
00:50:46 - [fold 4] best test MAP: 0.478 @ epoch 19
00:50:46 - Evaluating every 1 epochs ...
00:50:46 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:50:47 - test has 38 queries ...
00:50:47 - Data reading done ...
00:50:49 - adding 9-th encoder to optimizer...
00:50:49 - adding 10-th encoder to optimizer...
00:50:49 - adding 11-th encoder to optimizer...
00:50:50 - process[9]: training epoch 0 ...
00:51:09 - process[9] - epoch 0 - train iter 444 - 18483.4 words/s - loss: 0.6244
00:51:09 - process[9]: training epoch 1 ...
00:51:27 - process[9] - epoch 1 - train iter 444 - 19869.6 words/s - loss: 0.5574
00:51:27 - process[9]: training epoch 2 ...
00:51:44 - process[9] - epoch 2 - train iter 444 - 19695.6 words/s - loss: 0.5297
00:51:44 - process[9]: training epoch 3 ...
00:52:03 - process[9] - epoch 3 - train iter 444 - 18812.4 words/s - loss: 0.5270
00:52:03 - process[9]: training epoch 4 ...
00:52:22 - process[9] - epoch 4 - train iter 444 - 19287.6 words/s - loss: 0.5104
00:52:22 - process[9]: training epoch 5 ...
00:52:39 - process[9] - epoch 5 - train iter 444 - 20050.2 words/s - loss: 0.5103
00:52:39 - process[9]: training epoch 6 ...
00:52:58 - process[9] - epoch 6 - train iter 444 - 18912.4 words/s - loss: 0.4808
00:52:58 - process[9]: training epoch 7 ...
00:53:17 - process[9] - epoch 7 - train iter 444 - 18307.8 words/s - loss: 0.4578
00:53:17 - process[9]: training epoch 8 ...
00:53:36 - process[9] - epoch 8 - train iter 444 - 18768.3 words/s - loss: 0.4581
00:53:36 - process[9]: training epoch 9 ...
00:53:55 - process[9] - epoch 9 - train iter 444 - 19003.2 words/s - loss: 0.4396
00:53:55 - process[9]: training epoch 10 ...
00:54:12 - process[9] - epoch 10 - train iter 444 - 20071.3 words/s - loss: 0.4385
00:54:12 - process[9]: evaluating epoch 10 on dev ...
00:54:45 - dev set during evaluation: 13490/13483
00:54:45 - process[9] - dev - epoch 10 - mAP: 0.461 w/ 38 queries
00:54:45 - process[9]: evaluating epoch 10 on test ...
00:55:17 - test set during evaluation: 13890/13887
00:55:17 - process[9] - test - epoch 10 - mAP: 0.502 w/ 38 queries
00:55:17 - process[9]: training epoch 11 ...
00:55:35 - process[9] - epoch 11 - train iter 444 - 19457.6 words/s - loss: 0.4368
00:55:35 - process[9]: evaluating epoch 11 on dev ...
00:56:05 - dev set during evaluation: 13490/13483
00:56:05 - process[9] - dev - epoch 11 - mAP: 0.480 w/ 38 queries
00:56:05 - process[9]: evaluating epoch 11 on test ...
00:56:36 - test set during evaluation: 13890/13887
00:56:37 - process[9] - test - epoch 11 - mAP: 0.481 w/ 38 queries
00:56:37 - process[9]: training epoch 12 ...
00:56:56 - process[9] - epoch 12 - train iter 444 - 18336.1 words/s - loss: 0.4067
00:56:56 - process[9]: evaluating epoch 12 on dev ...
00:57:23 - dev set during evaluation: 13490/13483
00:57:23 - process[9] - dev - epoch 12 - mAP: 0.467 w/ 38 queries
00:57:23 - process[9]: training epoch 13 ...
00:57:42 - process[9] - epoch 13 - train iter 444 - 18437.5 words/s - loss: 0.3997
00:57:42 - process[9]: evaluating epoch 13 on dev ...
00:58:10 - dev set during evaluation: 13490/13483
00:58:10 - process[9] - dev - epoch 13 - mAP: 0.470 w/ 38 queries
00:58:10 - process[9]: training epoch 14 ...
00:58:29 - process[9] - epoch 14 - train iter 444 - 18039.5 words/s - loss: 0.4066
00:58:29 - process[9]: evaluating epoch 14 on dev ...
00:58:58 - dev set during evaluation: 13490/13483
00:58:58 - process[9] - dev - epoch 14 - mAP: 0.466 w/ 38 queries
00:58:58 - process[9]: training epoch 15 ...
00:59:17 - process[9] - epoch 15 - train iter 444 - 18807.9 words/s - loss: 0.4110
00:59:17 - process[9]: evaluating epoch 15 on dev ...
00:59:44 - dev set during evaluation: 13490/13483
00:59:44 - process[9] - dev - epoch 15 - mAP: 0.479 w/ 38 queries
00:59:44 - process[9]: training epoch 16 ...
01:00:02 - process[9] - epoch 16 - train iter 444 - 19703.1 words/s - loss: 0.3893
01:00:02 - process[9]: evaluating epoch 16 on dev ...
01:00:31 - dev set during evaluation: 13490/13483
01:00:31 - process[9] - dev - epoch 16 - mAP: 0.464 w/ 38 queries
01:00:31 - process[9]: training epoch 17 ...
01:00:51 - process[9] - epoch 17 - train iter 444 - 18194.8 words/s - loss: 0.3907
01:00:51 - process[9]: evaluating epoch 17 on dev ...
01:01:18 - dev set during evaluation: 13490/13483
01:01:18 - process[9] - dev - epoch 17 - mAP: 0.468 w/ 38 queries
01:01:18 - process[9]: training epoch 18 ...
01:01:37 - process[9] - epoch 18 - train iter 444 - 18898.6 words/s - loss: 0.3895
01:01:37 - process[9]: evaluating epoch 18 on dev ...
01:02:05 - dev set during evaluation: 13490/13483
01:02:05 - process[9] - dev - epoch 18 - mAP: 0.457 w/ 38 queries
01:02:05 - process[9]: training epoch 19 ...
01:02:24 - process[9] - epoch 19 - train iter 444 - 19197.3 words/s - loss: 0.3638
01:02:24 - process[9]: evaluating epoch 19 on dev ...
01:02:52 - dev set during evaluation: 13490/13483
01:02:52 - process[9] - dev - epoch 19 - mAP: 0.459 w/ 38 queries
01:02:52 - [fold 5] best test MAP: 0.481 @ epoch 11
01:02:52 - [0.4168774676412307, 0.49832937526660626, 0.5253163732612337, 0.478317699139435, 0.4808441250324664]
01:02:52 - [38, 39, 39, 38, 38]
01:02:52 - final MAP: 0.480
