00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=1, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-9', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='de')
00:00:14 - Evaluating every 1 epochs ...
00:00:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:15 - test has 38 queries ...
00:00:15 - Data reading done ...
00:00:22 - adding 9-th encoder to optimizer...
00:00:22 - adding 10-th encoder to optimizer...
00:00:22 - adding 11-th encoder to optimizer...
00:00:22 - process[1]: training epoch 0 ...
00:00:40 - process[1] - epoch 0 - train iter 423 - 19156.6 words/s - loss: 0.6861
00:00:40 - process[1]: training epoch 1 ...
00:00:58 - process[1] - epoch 1 - train iter 423 - 18981.6 words/s - loss: 0.6751
00:00:58 - process[1]: training epoch 2 ...
00:01:14 - process[1] - epoch 2 - train iter 423 - 20707.5 words/s - loss: 0.6181
00:01:14 - process[1]: training epoch 3 ...
00:01:32 - process[1] - epoch 3 - train iter 423 - 18734.7 words/s - loss: 0.5952
00:01:32 - process[1]: training epoch 4 ...
00:01:48 - process[1] - epoch 4 - train iter 423 - 20457.0 words/s - loss: 0.5672
00:01:48 - process[1]: training epoch 5 ...
00:02:03 - process[1] - epoch 5 - train iter 423 - 22956.2 words/s - loss: 0.5702
00:02:03 - process[1]: training epoch 6 ...
00:02:19 - process[1] - epoch 6 - train iter 423 - 20279.0 words/s - loss: 0.5282
00:02:19 - process[1]: training epoch 7 ...
00:02:36 - process[1] - epoch 7 - train iter 423 - 20536.4 words/s - loss: 0.5009
00:02:36 - process[1]: training epoch 8 ...
00:02:52 - process[1] - epoch 8 - train iter 423 - 21152.6 words/s - loss: 0.4962
00:02:52 - process[1]: training epoch 9 ...
00:03:08 - process[1] - epoch 9 - train iter 423 - 20549.4 words/s - loss: 0.4686
00:03:08 - process[1]: training epoch 10 ...
00:03:24 - process[1] - epoch 10 - train iter 423 - 20192.6 words/s - loss: 0.4577
00:03:24 - process[1]: evaluating epoch 10 on dev ...
00:03:53 - dev set during evaluation: 13890/13887
00:03:53 - process[1] - dev - epoch 10 - mAP: 0.363 w/ 38 queries
00:03:53 - process[1]: evaluating epoch 10 on test ...
00:04:23 - test set during evaluation: 15580/15574
00:04:23 - process[1] - test - epoch 10 - mAP: 0.320 w/ 38 queries
00:04:23 - process[1]: training epoch 11 ...
00:04:40 - process[1] - epoch 11 - train iter 423 - 20183.5 words/s - loss: 0.4497
00:04:40 - process[1]: evaluating epoch 11 on dev ...
00:05:09 - dev set during evaluation: 13890/13887
00:05:09 - process[1] - dev - epoch 11 - mAP: 0.402 w/ 38 queries
00:05:09 - process[1]: evaluating epoch 11 on test ...
00:05:39 - test set during evaluation: 15580/15574
00:05:39 - process[1] - test - epoch 11 - mAP: 0.329 w/ 38 queries
00:05:39 - process[1]: training epoch 12 ...
00:05:55 - process[1] - epoch 12 - train iter 423 - 21083.4 words/s - loss: 0.4748
00:05:55 - process[1]: evaluating epoch 12 on dev ...
00:06:24 - dev set during evaluation: 13890/13887
00:06:24 - process[1] - dev - epoch 12 - mAP: 0.396 w/ 38 queries
00:06:24 - process[1]: training epoch 13 ...
00:06:40 - process[1] - epoch 13 - train iter 423 - 21707.8 words/s - loss: 0.4503
00:06:40 - process[1]: evaluating epoch 13 on dev ...
00:07:10 - dev set during evaluation: 13890/13887
00:07:10 - process[1] - dev - epoch 13 - mAP: 0.397 w/ 38 queries
00:07:10 - process[1]: training epoch 14 ...
00:07:27 - process[1] - epoch 14 - train iter 423 - 19700.7 words/s - loss: 0.4424
00:07:27 - process[1]: evaluating epoch 14 on dev ...
00:07:55 - dev set during evaluation: 13890/13887
00:07:55 - process[1] - dev - epoch 14 - mAP: 0.413 w/ 38 queries
00:07:55 - process[1]: evaluating epoch 14 on test ...
00:08:25 - test set during evaluation: 15580/15574
00:08:25 - process[1] - test - epoch 14 - mAP: 0.336 w/ 38 queries
00:08:25 - process[1]: training epoch 15 ...
00:08:42 - process[1] - epoch 15 - train iter 423 - 20290.1 words/s - loss: 0.4300
00:08:42 - process[1]: evaluating epoch 15 on dev ...
00:09:11 - dev set during evaluation: 13890/13887
00:09:11 - process[1] - dev - epoch 15 - mAP: 0.396 w/ 38 queries
00:09:11 - process[1]: training epoch 16 ...
00:09:27 - process[1] - epoch 16 - train iter 423 - 21545.4 words/s - loss: 0.3938
00:09:27 - process[1]: evaluating epoch 16 on dev ...
00:09:56 - dev set during evaluation: 13890/13887
00:09:56 - process[1] - dev - epoch 16 - mAP: 0.399 w/ 38 queries
00:09:56 - process[1]: training epoch 17 ...
00:10:13 - process[1] - epoch 17 - train iter 423 - 19977.4 words/s - loss: 0.4176
00:10:13 - process[1]: evaluating epoch 17 on dev ...
00:10:42 - dev set during evaluation: 13890/13887
00:10:42 - process[1] - dev - epoch 17 - mAP: 0.385 w/ 38 queries
00:10:42 - process[1]: training epoch 18 ...
00:10:59 - process[1] - epoch 18 - train iter 423 - 19372.4 words/s - loss: 0.3942
00:10:59 - process[1]: evaluating epoch 18 on dev ...
00:11:27 - dev set during evaluation: 13890/13887
00:11:27 - process[1] - dev - epoch 18 - mAP: 0.408 w/ 38 queries
00:11:27 - process[1]: training epoch 19 ...
00:11:42 - process[1] - epoch 19 - train iter 423 - 21230.2 words/s - loss: 0.3933
00:11:42 - process[1]: evaluating epoch 19 on dev ...
00:12:11 - dev set during evaluation: 13890/13887
00:12:11 - process[1] - dev - epoch 19 - mAP: 0.407 w/ 38 queries
00:12:11 - [fold 1] best test MAP: 0.336 @ epoch 14
00:12:11 - Evaluating every 1 epochs ...
00:12:11 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:12 - test has 39 queries ...
00:12:12 - Data reading done ...
00:12:14 - adding 9-th encoder to optimizer...
00:12:14 - adding 10-th encoder to optimizer...
00:12:14 - adding 11-th encoder to optimizer...
00:12:14 - process[1]: training epoch 0 ...
00:12:33 - process[1] - epoch 0 - train iter 386 - 16692.7 words/s - loss: 0.6905
00:12:33 - process[1]: training epoch 1 ...
00:12:49 - process[1] - epoch 1 - train iter 386 - 18885.1 words/s - loss: 0.6636
00:12:49 - process[1]: training epoch 2 ...
00:13:07 - process[1] - epoch 2 - train iter 386 - 17071.2 words/s - loss: 0.6090
00:13:07 - process[1]: training epoch 3 ...
00:13:24 - process[1] - epoch 3 - train iter 386 - 17525.2 words/s - loss: 0.5820
00:13:24 - process[1]: training epoch 4 ...
00:13:45 - process[1] - epoch 4 - train iter 386 - 15028.1 words/s - loss: 0.5522
00:13:45 - process[1]: training epoch 5 ...
00:14:02 - process[1] - epoch 5 - train iter 386 - 18002.4 words/s - loss: 0.5392
00:14:02 - process[1]: training epoch 6 ...
00:14:21 - process[1] - epoch 6 - train iter 386 - 15731.1 words/s - loss: 0.5197
00:14:21 - process[1]: training epoch 7 ...
00:14:37 - process[1] - epoch 7 - train iter 386 - 18735.4 words/s - loss: 0.5205
00:14:37 - process[1]: training epoch 8 ...
00:14:55 - process[1] - epoch 8 - train iter 386 - 16810.9 words/s - loss: 0.4979
00:14:55 - process[1]: training epoch 9 ...
00:15:13 - process[1] - epoch 9 - train iter 386 - 16935.7 words/s - loss: 0.4727
00:15:13 - process[1]: training epoch 10 ...
00:15:33 - process[1] - epoch 10 - train iter 386 - 15466.8 words/s - loss: 0.5005
00:15:33 - process[1]: evaluating epoch 10 on dev ...
00:16:11 - dev set during evaluation: 15580/15574
00:16:11 - process[1] - dev - epoch 10 - mAP: 0.343 w/ 38 queries
00:16:11 - process[1]: evaluating epoch 10 on test ...
00:16:43 - test set during evaluation: 14340/14338
00:16:43 - process[1] - test - epoch 10 - mAP: 0.394 w/ 39 queries
00:16:43 - process[1]: training epoch 11 ...
00:17:03 - process[1] - epoch 11 - train iter 386 - 15230.1 words/s - loss: 0.4508
00:17:03 - process[1]: evaluating epoch 11 on dev ...
00:17:38 - dev set during evaluation: 15580/15574
00:17:38 - process[1] - dev - epoch 11 - mAP: 0.347 w/ 38 queries
00:17:38 - process[1]: evaluating epoch 11 on test ...
00:18:12 - test set during evaluation: 14340/14338
00:18:12 - process[1] - test - epoch 11 - mAP: 0.433 w/ 39 queries
00:18:12 - process[1]: training epoch 12 ...
00:18:29 - process[1] - epoch 12 - train iter 386 - 17676.5 words/s - loss: 0.4161
00:18:29 - process[1]: evaluating epoch 12 on dev ...
00:19:06 - dev set during evaluation: 15580/15574
00:19:06 - process[1] - dev - epoch 12 - mAP: 0.339 w/ 38 queries
00:19:06 - process[1]: training epoch 13 ...
00:19:25 - process[1] - epoch 13 - train iter 386 - 15707.4 words/s - loss: 0.4426
00:19:25 - process[1]: evaluating epoch 13 on dev ...
00:20:00 - dev set during evaluation: 15580/15574
00:20:00 - process[1] - dev - epoch 13 - mAP: 0.373 w/ 38 queries
00:20:00 - process[1]: evaluating epoch 13 on test ...
00:20:33 - test set during evaluation: 14340/14338
00:20:33 - process[1] - test - epoch 13 - mAP: 0.431 w/ 39 queries
00:20:33 - process[1]: training epoch 14 ...
00:20:51 - process[1] - epoch 14 - train iter 386 - 16756.1 words/s - loss: 0.4437
00:20:51 - process[1]: evaluating epoch 14 on dev ...
00:21:28 - dev set during evaluation: 15580/15574
00:21:28 - process[1] - dev - epoch 14 - mAP: 0.364 w/ 38 queries
00:21:28 - process[1]: training epoch 15 ...
00:21:47 - process[1] - epoch 15 - train iter 386 - 15737.1 words/s - loss: 0.4147
00:21:47 - process[1]: evaluating epoch 15 on dev ...
00:22:22 - dev set during evaluation: 15580/15574
00:22:22 - process[1] - dev - epoch 15 - mAP: 0.349 w/ 38 queries
00:22:22 - process[1]: training epoch 16 ...
00:22:38 - process[1] - epoch 16 - train iter 386 - 18169.9 words/s - loss: 0.4121
00:22:38 - process[1]: evaluating epoch 16 on dev ...
00:23:16 - dev set during evaluation: 15580/15574
00:23:16 - process[1] - dev - epoch 16 - mAP: 0.349 w/ 38 queries
00:23:16 - process[1]: training epoch 17 ...
00:23:34 - process[1] - epoch 17 - train iter 386 - 17248.9 words/s - loss: 0.4373
00:23:34 - process[1]: evaluating epoch 17 on dev ...
00:24:09 - dev set during evaluation: 15580/15574
00:24:09 - process[1] - dev - epoch 17 - mAP: 0.347 w/ 38 queries
00:24:09 - process[1]: training epoch 18 ...
00:24:29 - process[1] - epoch 18 - train iter 386 - 15999.4 words/s - loss: 0.4110
00:24:29 - process[1]: evaluating epoch 18 on dev ...
00:25:04 - dev set during evaluation: 15580/15574
00:25:04 - process[1] - dev - epoch 18 - mAP: 0.345 w/ 38 queries
00:25:04 - process[1]: training epoch 19 ...
00:25:23 - process[1] - epoch 19 - train iter 386 - 15793.0 words/s - loss: 0.4221
00:25:23 - process[1]: evaluating epoch 19 on dev ...
00:25:58 - dev set during evaluation: 15580/15574
00:25:58 - process[1] - dev - epoch 19 - mAP: 0.336 w/ 38 queries
00:25:58 - [fold 2] best test MAP: 0.431 @ epoch 13
00:25:58 - Evaluating every 1 epochs ...
00:25:58 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:59 - test has 39 queries ...
00:25:59 - Data reading done ...
00:26:00 - adding 9-th encoder to optimizer...
00:26:00 - adding 10-th encoder to optimizer...
00:26:00 - adding 11-th encoder to optimizer...
00:26:01 - process[1]: training epoch 0 ...
00:26:19 - process[1] - epoch 0 - train iter 360 - 15906.5 words/s - loss: 0.6913
00:26:19 - process[1]: training epoch 1 ...
00:26:35 - process[1] - epoch 1 - train iter 360 - 17145.2 words/s - loss: 0.6839
00:26:35 - process[1]: training epoch 2 ...
00:26:53 - process[1] - epoch 2 - train iter 360 - 16300.3 words/s - loss: 0.6539
00:26:53 - process[1]: training epoch 3 ...
00:27:12 - process[1] - epoch 3 - train iter 360 - 15455.9 words/s - loss: 0.6347
00:27:12 - process[1]: training epoch 4 ...
00:27:29 - process[1] - epoch 4 - train iter 360 - 16526.5 words/s - loss: 0.6066
00:27:29 - process[1]: training epoch 5 ...
00:27:48 - process[1] - epoch 5 - train iter 360 - 14588.9 words/s - loss: 0.5450
00:27:48 - process[1]: training epoch 6 ...
00:28:05 - process[1] - epoch 6 - train iter 360 - 16861.8 words/s - loss: 0.5883
00:28:05 - process[1]: training epoch 7 ...
00:28:25 - process[1] - epoch 7 - train iter 360 - 14499.1 words/s - loss: 0.5625
00:28:25 - process[1]: training epoch 8 ...
00:28:44 - process[1] - epoch 8 - train iter 360 - 15025.1 words/s - loss: 0.5292
00:28:44 - process[1]: training epoch 9 ...
00:29:02 - process[1] - epoch 9 - train iter 360 - 15919.7 words/s - loss: 0.5160
00:29:02 - process[1]: training epoch 10 ...
00:29:20 - process[1] - epoch 10 - train iter 360 - 15665.6 words/s - loss: 0.5167
00:29:20 - process[1]: evaluating epoch 10 on dev ...
00:29:52 - dev set during evaluation: 14340/14338
00:29:52 - process[1] - dev - epoch 10 - mAP: 0.406 w/ 39 queries
00:29:52 - process[1]: evaluating epoch 10 on test ...
00:30:21 - test set during evaluation: 11710/11707
00:30:21 - process[1] - test - epoch 10 - mAP: 0.448 w/ 39 queries
00:30:21 - process[1]: training epoch 11 ...
00:30:38 - process[1] - epoch 11 - train iter 360 - 16794.6 words/s - loss: 0.5182
00:30:38 - process[1]: evaluating epoch 11 on dev ...
00:31:12 - dev set during evaluation: 14340/14338
00:31:12 - process[1] - dev - epoch 11 - mAP: 0.422 w/ 39 queries
00:31:12 - process[1]: evaluating epoch 11 on test ...
00:31:41 - test set during evaluation: 11710/11707
00:31:41 - process[1] - test - epoch 11 - mAP: 0.435 w/ 39 queries
00:31:41 - process[1]: training epoch 12 ...
00:31:59 - process[1] - epoch 12 - train iter 360 - 16219.9 words/s - loss: 0.4901
00:31:59 - process[1]: evaluating epoch 12 on dev ...
00:32:31 - dev set during evaluation: 14340/14338
00:32:31 - process[1] - dev - epoch 12 - mAP: 0.430 w/ 39 queries
00:32:31 - process[1]: evaluating epoch 12 on test ...
00:32:59 - test set during evaluation: 11710/11707
00:32:59 - process[1] - test - epoch 12 - mAP: 0.456 w/ 39 queries
00:32:59 - process[1]: training epoch 13 ...
00:33:15 - process[1] - epoch 13 - train iter 360 - 17006.0 words/s - loss: 0.4855
00:33:15 - process[1]: evaluating epoch 13 on dev ...
00:33:49 - dev set during evaluation: 14340/14338
00:33:49 - process[1] - dev - epoch 13 - mAP: 0.420 w/ 39 queries
00:33:49 - process[1]: training epoch 14 ...
00:34:07 - process[1] - epoch 14 - train iter 360 - 15735.5 words/s - loss: 0.4646
00:34:07 - process[1]: evaluating epoch 14 on dev ...
00:34:39 - dev set during evaluation: 14340/14338
00:34:39 - process[1] - dev - epoch 14 - mAP: 0.429 w/ 39 queries
00:34:39 - process[1]: training epoch 15 ...
00:34:56 - process[1] - epoch 15 - train iter 360 - 16986.4 words/s - loss: 0.4913
00:34:56 - process[1]: evaluating epoch 15 on dev ...
00:35:29 - dev set during evaluation: 14340/14338
00:35:29 - process[1] - dev - epoch 15 - mAP: 0.431 w/ 39 queries
00:35:29 - process[1]: evaluating epoch 15 on test ...
00:35:58 - test set during evaluation: 11710/11707
00:35:58 - process[1] - test - epoch 15 - mAP: 0.471 w/ 39 queries
00:35:58 - process[1]: training epoch 16 ...
00:36:16 - process[1] - epoch 16 - train iter 360 - 15379.6 words/s - loss: 0.4940
00:36:16 - process[1]: evaluating epoch 16 on dev ...
00:36:49 - dev set during evaluation: 14340/14338
00:36:49 - process[1] - dev - epoch 16 - mAP: 0.415 w/ 39 queries
00:36:49 - process[1]: training epoch 17 ...
00:37:05 - process[1] - epoch 17 - train iter 360 - 17345.6 words/s - loss: 0.4523
00:37:05 - process[1]: evaluating epoch 17 on dev ...
00:37:40 - dev set during evaluation: 14340/14338
00:37:40 - process[1] - dev - epoch 17 - mAP: 0.438 w/ 39 queries
00:37:40 - process[1]: evaluating epoch 17 on test ...
00:38:09 - test set during evaluation: 11710/11707
00:38:09 - process[1] - test - epoch 17 - mAP: 0.465 w/ 39 queries
00:38:09 - process[1]: training epoch 18 ...
00:38:26 - process[1] - epoch 18 - train iter 360 - 16463.6 words/s - loss: 0.4436
00:38:26 - process[1]: evaluating epoch 18 on dev ...
00:39:01 - dev set during evaluation: 14340/14338
00:39:01 - process[1] - dev - epoch 18 - mAP: 0.430 w/ 39 queries
00:39:01 - process[1]: training epoch 19 ...
00:39:19 - process[1] - epoch 19 - train iter 360 - 16280.7 words/s - loss: 0.4374
00:39:19 - process[1]: evaluating epoch 19 on dev ...
00:39:52 - dev set during evaluation: 14340/14338
00:39:52 - process[1] - dev - epoch 19 - mAP: 0.420 w/ 39 queries
00:39:52 - [fold 3] best test MAP: 0.465 @ epoch 17
00:39:52 - Evaluating every 1 epochs ...
00:39:52 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:39:53 - test has 38 queries ...
00:39:53 - Data reading done ...
00:39:55 - adding 9-th encoder to optimizer...
00:39:55 - adding 10-th encoder to optimizer...
00:39:55 - adding 11-th encoder to optimizer...
00:39:55 - process[1]: training epoch 0 ...
00:40:15 - process[1] - epoch 0 - train iter 404 - 16373.6 words/s - loss: 0.6769
00:40:15 - process[1]: training epoch 1 ...
00:40:31 - process[1] - epoch 1 - train iter 404 - 19904.1 words/s - loss: 0.6824
00:40:31 - process[1]: training epoch 2 ...
00:40:50 - process[1] - epoch 2 - train iter 404 - 16963.4 words/s - loss: 0.6480
00:40:50 - process[1]: training epoch 3 ...
00:41:08 - process[1] - epoch 3 - train iter 404 - 17291.8 words/s - loss: 0.6478
00:41:08 - process[1]: training epoch 4 ...
00:41:27 - process[1] - epoch 4 - train iter 404 - 17258.7 words/s - loss: 0.6173
00:41:27 - process[1]: training epoch 5 ...
00:41:44 - process[1] - epoch 5 - train iter 404 - 18522.2 words/s - loss: 0.6084
00:41:44 - process[1]: training epoch 6 ...
00:42:02 - process[1] - epoch 6 - train iter 404 - 17698.1 words/s - loss: 0.5741
00:42:02 - process[1]: training epoch 7 ...
00:42:22 - process[1] - epoch 7 - train iter 404 - 15887.4 words/s - loss: 0.5395
00:42:22 - process[1]: training epoch 8 ...
00:42:38 - process[1] - epoch 8 - train iter 404 - 19866.6 words/s - loss: 0.5547
00:42:38 - process[1]: training epoch 9 ...
00:42:57 - process[1] - epoch 9 - train iter 404 - 16852.9 words/s - loss: 0.5179
00:42:57 - process[1]: training epoch 10 ...
00:43:15 - process[1] - epoch 10 - train iter 404 - 17731.8 words/s - loss: 0.5204
00:43:15 - process[1]: evaluating epoch 10 on dev ...
00:43:41 - dev set during evaluation: 11710/11707
00:43:41 - process[1] - dev - epoch 10 - mAP: 0.443 w/ 39 queries
00:43:41 - process[1]: evaluating epoch 10 on test ...
00:44:08 - test set during evaluation: 13490/13483
00:44:08 - process[1] - test - epoch 10 - mAP: 0.399 w/ 38 queries
00:44:08 - process[1]: training epoch 11 ...
00:44:26 - process[1] - epoch 11 - train iter 404 - 17483.8 words/s - loss: 0.5038
00:44:26 - process[1]: evaluating epoch 11 on dev ...
00:44:54 - dev set during evaluation: 11710/11707
00:44:54 - process[1] - dev - epoch 11 - mAP: 0.430 w/ 39 queries
00:44:54 - process[1]: training epoch 12 ...
00:45:14 - process[1] - epoch 12 - train iter 404 - 16781.9 words/s - loss: 0.4694
00:45:14 - process[1]: evaluating epoch 12 on dev ...
00:45:40 - dev set during evaluation: 11710/11707
00:45:40 - process[1] - dev - epoch 12 - mAP: 0.441 w/ 39 queries
00:45:40 - process[1]: training epoch 13 ...
00:45:57 - process[1] - epoch 13 - train iter 404 - 18664.3 words/s - loss: 0.4850
00:45:57 - process[1]: evaluating epoch 13 on dev ...
00:46:24 - dev set during evaluation: 11710/11707
00:46:24 - process[1] - dev - epoch 13 - mAP: 0.446 w/ 39 queries
00:46:24 - process[1]: evaluating epoch 13 on test ...
00:46:51 - test set during evaluation: 13490/13483
00:46:52 - process[1] - test - epoch 13 - mAP: 0.406 w/ 38 queries
00:46:52 - process[1]: training epoch 14 ...
00:47:10 - process[1] - epoch 14 - train iter 404 - 17036.6 words/s - loss: 0.4634
00:47:10 - process[1]: evaluating epoch 14 on dev ...
00:47:37 - dev set during evaluation: 11710/11707
00:47:37 - process[1] - dev - epoch 14 - mAP: 0.451 w/ 39 queries
00:47:37 - process[1]: evaluating epoch 14 on test ...
00:48:04 - test set during evaluation: 13490/13483
00:48:04 - process[1] - test - epoch 14 - mAP: 0.410 w/ 38 queries
00:48:04 - process[1]: training epoch 15 ...
00:48:22 - process[1] - epoch 15 - train iter 404 - 18024.2 words/s - loss: 0.4603
00:48:22 - process[1]: evaluating epoch 15 on dev ...
00:48:49 - dev set during evaluation: 11710/11707
00:48:49 - process[1] - dev - epoch 15 - mAP: 0.456 w/ 39 queries
00:48:49 - process[1]: evaluating epoch 15 on test ...
00:49:16 - test set during evaluation: 13490/13483
00:49:16 - process[1] - test - epoch 15 - mAP: 0.427 w/ 38 queries
00:49:16 - process[1]: training epoch 16 ...
00:49:34 - process[1] - epoch 16 - train iter 404 - 18315.8 words/s - loss: 0.4734
00:49:34 - process[1]: evaluating epoch 16 on dev ...
00:50:01 - dev set during evaluation: 11710/11707
00:50:01 - process[1] - dev - epoch 16 - mAP: 0.433 w/ 39 queries
00:50:01 - process[1]: training epoch 17 ...
00:50:21 - process[1] - epoch 17 - train iter 404 - 16533.0 words/s - loss: 0.4365
00:50:21 - process[1]: evaluating epoch 17 on dev ...
00:50:47 - dev set during evaluation: 11710/11707
00:50:47 - process[1] - dev - epoch 17 - mAP: 0.456 w/ 39 queries
00:50:47 - process[1]: evaluating epoch 17 on test ...
00:51:14 - test set during evaluation: 13490/13483
00:51:14 - process[1] - test - epoch 17 - mAP: 0.437 w/ 38 queries
00:51:14 - process[1]: training epoch 18 ...
00:51:32 - process[1] - epoch 18 - train iter 404 - 17371.2 words/s - loss: 0.4169
00:51:32 - process[1]: evaluating epoch 18 on dev ...
00:51:59 - dev set during evaluation: 11710/11707
00:51:59 - process[1] - dev - epoch 18 - mAP: 0.455 w/ 39 queries
00:51:59 - process[1]: training epoch 19 ...
00:52:18 - process[1] - epoch 19 - train iter 404 - 16791.8 words/s - loss: 0.4182
00:52:18 - process[1]: evaluating epoch 19 on dev ...
00:52:43 - dev set during evaluation: 11710/11707
00:52:43 - process[1] - dev - epoch 19 - mAP: 0.458 w/ 39 queries
00:52:43 - process[1]: evaluating epoch 19 on test ...
00:53:10 - test set during evaluation: 13490/13483
00:53:10 - process[1] - test - epoch 19 - mAP: 0.406 w/ 38 queries
00:53:10 - [fold 4] best test MAP: 0.406 @ epoch 19
00:53:10 - Evaluating every 1 epochs ...
00:53:10 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:53:11 - test has 38 queries ...
00:53:11 - Data reading done ...
00:53:13 - adding 9-th encoder to optimizer...
00:53:13 - adding 10-th encoder to optimizer...
00:53:13 - adding 11-th encoder to optimizer...
00:53:13 - process[1]: training epoch 0 ...
00:53:31 - process[1] - epoch 0 - train iter 444 - 20204.6 words/s - loss: 0.6871
00:53:31 - process[1]: training epoch 1 ...
00:53:50 - process[1] - epoch 1 - train iter 444 - 19009.7 words/s - loss: 0.6603
00:53:50 - process[1]: training epoch 2 ...
00:54:09 - process[1] - epoch 2 - train iter 444 - 18455.6 words/s - loss: 0.6327
00:54:09 - process[1]: training epoch 3 ...
00:54:27 - process[1] - epoch 3 - train iter 444 - 19507.1 words/s - loss: 0.6322
00:54:27 - process[1]: training epoch 4 ...
00:54:46 - process[1] - epoch 4 - train iter 444 - 18501.1 words/s - loss: 0.6178
00:54:46 - process[1]: training epoch 5 ...
00:55:07 - process[1] - epoch 5 - train iter 444 - 17600.3 words/s - loss: 0.5785
00:55:07 - process[1]: training epoch 6 ...
00:55:26 - process[1] - epoch 6 - train iter 444 - 18391.5 words/s - loss: 0.5753
00:55:26 - process[1]: training epoch 7 ...
00:55:44 - process[1] - epoch 7 - train iter 444 - 19532.4 words/s - loss: 0.5289
00:55:44 - process[1]: training epoch 8 ...
00:56:02 - process[1] - epoch 8 - train iter 444 - 18802.9 words/s - loss: 0.5194
00:56:02 - process[1]: training epoch 9 ...
00:56:22 - process[1] - epoch 9 - train iter 444 - 18565.1 words/s - loss: 0.5106
00:56:22 - process[1]: training epoch 10 ...
00:56:40 - process[1] - epoch 10 - train iter 444 - 18994.3 words/s - loss: 0.4859
00:56:40 - process[1]: evaluating epoch 10 on dev ...
00:57:09 - dev set during evaluation: 13490/13483
00:57:09 - process[1] - dev - epoch 10 - mAP: 0.386 w/ 38 queries
00:57:09 - process[1]: evaluating epoch 10 on test ...
00:57:41 - test set during evaluation: 13890/13887
00:57:41 - process[1] - test - epoch 10 - mAP: 0.364 w/ 38 queries
00:57:41 - process[1]: training epoch 11 ...
00:58:00 - process[1] - epoch 11 - train iter 444 - 19451.2 words/s - loss: 0.4951
00:58:00 - process[1]: evaluating epoch 11 on dev ...
00:58:29 - dev set during evaluation: 13490/13483
00:58:29 - process[1] - dev - epoch 11 - mAP: 0.409 w/ 38 queries
00:58:29 - process[1]: evaluating epoch 11 on test ...
00:59:01 - test set during evaluation: 13890/13887
00:59:01 - process[1] - test - epoch 11 - mAP: 0.382 w/ 38 queries
00:59:01 - process[1]: training epoch 12 ...
00:59:20 - process[1] - epoch 12 - train iter 444 - 18513.2 words/s - loss: 0.4833
00:59:20 - process[1]: evaluating epoch 12 on dev ...
00:59:47 - dev set during evaluation: 13490/13483
00:59:47 - process[1] - dev - epoch 12 - mAP: 0.367 w/ 38 queries
00:59:47 - process[1]: training epoch 13 ...
01:00:07 - process[1] - epoch 13 - train iter 444 - 17750.7 words/s - loss: 0.4786
01:00:07 - process[1]: evaluating epoch 13 on dev ...
01:00:33 - dev set during evaluation: 13490/13483
01:00:33 - process[1] - dev - epoch 13 - mAP: 0.404 w/ 38 queries
01:00:33 - process[1]: training epoch 14 ...
01:00:52 - process[1] - epoch 14 - train iter 444 - 18736.3 words/s - loss: 0.4649
01:00:52 - process[1]: evaluating epoch 14 on dev ...
01:01:21 - dev set during evaluation: 13490/13483
01:01:21 - process[1] - dev - epoch 14 - mAP: 0.402 w/ 38 queries
01:01:21 - process[1]: training epoch 15 ...
01:01:40 - process[1] - epoch 15 - train iter 444 - 19004.6 words/s - loss: 0.4700
01:01:40 - process[1]: evaluating epoch 15 on dev ...
01:02:07 - dev set during evaluation: 13490/13483
01:02:07 - process[1] - dev - epoch 15 - mAP: 0.412 w/ 38 queries
01:02:07 - process[1]: evaluating epoch 15 on test ...
01:02:39 - test set during evaluation: 13890/13887
01:02:39 - process[1] - test - epoch 15 - mAP: 0.397 w/ 38 queries
01:02:39 - process[1]: training epoch 16 ...
01:02:59 - process[1] - epoch 16 - train iter 444 - 17612.8 words/s - loss: 0.4617
01:02:59 - process[1]: evaluating epoch 16 on dev ...
01:03:26 - dev set during evaluation: 13490/13483
01:03:26 - process[1] - dev - epoch 16 - mAP: 0.424 w/ 38 queries
01:03:26 - process[1]: evaluating epoch 16 on test ...
01:03:58 - test set during evaluation: 13890/13887
01:03:58 - process[1] - test - epoch 16 - mAP: 0.422 w/ 38 queries
01:03:58 - process[1]: training epoch 17 ...
01:04:16 - process[1] - epoch 17 - train iter 444 - 19619.2 words/s - loss: 0.4407
01:04:16 - process[1]: evaluating epoch 17 on dev ...
01:04:45 - dev set during evaluation: 13490/13483
01:04:45 - process[1] - dev - epoch 17 - mAP: 0.406 w/ 38 queries
01:04:45 - process[1]: training epoch 18 ...
01:05:05 - process[1] - epoch 18 - train iter 444 - 17931.5 words/s - loss: 0.4537
01:05:05 - process[1]: evaluating epoch 18 on dev ...
01:05:32 - dev set during evaluation: 13490/13483
01:05:32 - process[1] - dev - epoch 18 - mAP: 0.412 w/ 38 queries
01:05:32 - process[1]: training epoch 19 ...
01:05:50 - process[1] - epoch 19 - train iter 444 - 19716.2 words/s - loss: 0.4400
01:05:50 - process[1]: evaluating epoch 19 on dev ...
01:06:18 - dev set during evaluation: 13490/13483
01:06:18 - process[1] - dev - epoch 19 - mAP: 0.412 w/ 38 queries
01:06:18 - [fold 5] best test MAP: 0.422 @ epoch 16
01:06:18 - [0.33565141712411073, 0.43107387838135436, 0.46454584299718515, 0.4058311315838981, 0.42245578033331516]
01:06:18 - [38, 39, 39, 38, 38]
01:06:18 - final MAP: 0.412
00:00:06 - Namespace(apex_level='O2', batch_size=8, cased=False, dataset='clef', debug=False, encoder_lr=2e-05, eval_step=1, full_doc_length=True, local_rank=1, model_path='/mnt/scratch/puxuan/short_qlm_doc/2186796/huggingface-9', model_type='mbert', num_epochs=20, num_ft_encoders=3, num_neg=1, projector_lr=2e-05, seed=611, source_lang='es', target_lang='de')
00:00:14 - Evaluating every 1 epochs ...
00:00:14 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:00:15 - test has 38 queries ...
00:00:15 - Data reading done ...
00:00:20 - adding 9-th encoder to optimizer...
00:00:20 - adding 10-th encoder to optimizer...
00:00:20 - adding 11-th encoder to optimizer...
00:00:21 - process[1]: training epoch 0 ...
00:00:39 - process[1] - epoch 0 - train iter 423 - 18849.6 words/s - loss: 0.6861
00:00:39 - process[1]: training epoch 1 ...
00:00:57 - process[1] - epoch 1 - train iter 423 - 18851.5 words/s - loss: 0.6751
00:00:57 - process[1]: training epoch 2 ...
00:01:13 - process[1] - epoch 2 - train iter 423 - 20629.6 words/s - loss: 0.6181
00:01:13 - process[1]: training epoch 3 ...
00:01:31 - process[1] - epoch 3 - train iter 423 - 18697.9 words/s - loss: 0.5952
00:01:31 - process[1]: training epoch 4 ...
00:01:47 - process[1] - epoch 4 - train iter 423 - 20395.9 words/s - loss: 0.5672
00:01:47 - process[1]: training epoch 5 ...
00:02:02 - process[1] - epoch 5 - train iter 423 - 22897.8 words/s - loss: 0.5702
00:02:02 - process[1]: training epoch 6 ...
00:02:19 - process[1] - epoch 6 - train iter 423 - 20209.7 words/s - loss: 0.5282
00:02:19 - process[1]: training epoch 7 ...
00:02:35 - process[1] - epoch 7 - train iter 423 - 20460.5 words/s - loss: 0.5009
00:02:35 - process[1]: training epoch 8 ...
00:02:51 - process[1] - epoch 8 - train iter 423 - 21098.7 words/s - loss: 0.4962
00:02:51 - process[1]: training epoch 9 ...
00:03:07 - process[1] - epoch 9 - train iter 423 - 20483.8 words/s - loss: 0.4686
00:03:07 - process[1]: training epoch 10 ...
00:03:24 - process[1] - epoch 10 - train iter 423 - 20119.5 words/s - loss: 0.4577
00:03:24 - process[1]: evaluating epoch 10 on dev ...
00:03:51 - dev set during evaluation: 13890/13887
00:03:51 - process[1] - dev - epoch 10 - mAP: 0.363 w/ 38 queries
00:03:51 - process[1]: evaluating epoch 10 on test ...
00:04:21 - test set during evaluation: 15580/15574
00:04:21 - process[1] - test - epoch 10 - mAP: 0.320 w/ 38 queries
00:04:22 - process[1]: training epoch 11 ...
00:04:38 - process[1] - epoch 11 - train iter 423 - 19999.5 words/s - loss: 0.4497
00:04:38 - process[1]: evaluating epoch 11 on dev ...
00:05:07 - dev set during evaluation: 13890/13887
00:05:07 - process[1] - dev - epoch 11 - mAP: 0.402 w/ 38 queries
00:05:07 - process[1]: evaluating epoch 11 on test ...
00:05:37 - test set during evaluation: 15580/15574
00:05:37 - process[1] - test - epoch 11 - mAP: 0.329 w/ 38 queries
00:05:37 - process[1]: training epoch 12 ...
00:05:54 - process[1] - epoch 12 - train iter 423 - 21005.1 words/s - loss: 0.4748
00:05:54 - process[1]: evaluating epoch 12 on dev ...
00:06:23 - dev set during evaluation: 13890/13887
00:06:23 - process[1] - dev - epoch 12 - mAP: 0.396 w/ 38 queries
00:06:23 - process[1]: training epoch 13 ...
00:06:38 - process[1] - epoch 13 - train iter 423 - 21809.4 words/s - loss: 0.4503
00:06:38 - process[1]: evaluating epoch 13 on dev ...
00:07:09 - dev set during evaluation: 13890/13887
00:07:09 - process[1] - dev - epoch 13 - mAP: 0.397 w/ 38 queries
00:07:09 - process[1]: training epoch 14 ...
00:07:26 - process[1] - epoch 14 - train iter 423 - 19914.0 words/s - loss: 0.4424
00:07:26 - process[1]: evaluating epoch 14 on dev ...
00:07:54 - dev set during evaluation: 13890/13887
00:07:54 - process[1] - dev - epoch 14 - mAP: 0.413 w/ 38 queries
00:07:54 - process[1]: evaluating epoch 14 on test ...
00:08:24 - test set during evaluation: 15580/15574
00:08:24 - process[1] - test - epoch 14 - mAP: 0.336 w/ 38 queries
00:08:24 - process[1]: training epoch 15 ...
00:08:41 - process[1] - epoch 15 - train iter 423 - 20309.4 words/s - loss: 0.4300
00:08:41 - process[1]: evaluating epoch 15 on dev ...
00:09:10 - dev set during evaluation: 13890/13887
00:09:10 - process[1] - dev - epoch 15 - mAP: 0.396 w/ 38 queries
00:09:10 - process[1]: training epoch 16 ...
00:09:26 - process[1] - epoch 16 - train iter 423 - 21532.7 words/s - loss: 0.3938
00:09:26 - process[1]: evaluating epoch 16 on dev ...
00:09:56 - dev set during evaluation: 13890/13887
00:09:56 - process[1] - dev - epoch 16 - mAP: 0.399 w/ 38 queries
00:09:56 - process[1]: training epoch 17 ...
00:10:13 - process[1] - epoch 17 - train iter 423 - 20054.1 words/s - loss: 0.4176
00:10:13 - process[1]: evaluating epoch 17 on dev ...
00:10:42 - dev set during evaluation: 13890/13887
00:10:42 - process[1] - dev - epoch 17 - mAP: 0.385 w/ 38 queries
00:10:42 - process[1]: training epoch 18 ...
00:10:59 - process[1] - epoch 18 - train iter 423 - 19236.5 words/s - loss: 0.3942
00:10:59 - process[1]: evaluating epoch 18 on dev ...
00:11:27 - dev set during evaluation: 13890/13887
00:11:27 - process[1] - dev - epoch 18 - mAP: 0.408 w/ 38 queries
00:11:27 - process[1]: training epoch 19 ...
00:11:43 - process[1] - epoch 19 - train iter 423 - 21195.8 words/s - loss: 0.3933
00:11:43 - process[1]: evaluating epoch 19 on dev ...
00:12:13 - dev set during evaluation: 13890/13887
00:12:13 - process[1] - dev - epoch 19 - mAP: 0.407 w/ 38 queries
00:12:13 - [fold 1] best test MAP: 0.336 @ epoch 14
00:12:13 - Evaluating every 1 epochs ...
00:12:13 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:12:14 - test has 39 queries ...
00:12:14 - Data reading done ...
00:12:15 - adding 9-th encoder to optimizer...
00:12:15 - adding 10-th encoder to optimizer...
00:12:15 - adding 11-th encoder to optimizer...
00:12:16 - process[1]: training epoch 0 ...
00:12:34 - process[1] - epoch 0 - train iter 386 - 16637.3 words/s - loss: 0.6905
00:12:34 - process[1]: training epoch 1 ...
00:12:50 - process[1] - epoch 1 - train iter 386 - 18860.6 words/s - loss: 0.6636
00:12:50 - process[1]: training epoch 2 ...
00:13:08 - process[1] - epoch 2 - train iter 386 - 17056.5 words/s - loss: 0.6090
00:13:08 - process[1]: training epoch 3 ...
00:13:25 - process[1] - epoch 3 - train iter 386 - 17628.0 words/s - loss: 0.5820
00:13:25 - process[1]: training epoch 4 ...
00:13:46 - process[1] - epoch 4 - train iter 386 - 15123.4 words/s - loss: 0.5522
00:13:46 - process[1]: training epoch 5 ...
00:14:02 - process[1] - epoch 5 - train iter 386 - 17992.1 words/s - loss: 0.5392
00:14:02 - process[1]: training epoch 6 ...
00:14:22 - process[1] - epoch 6 - train iter 386 - 15636.0 words/s - loss: 0.5197
00:14:22 - process[1]: training epoch 7 ...
00:14:38 - process[1] - epoch 7 - train iter 386 - 18730.4 words/s - loss: 0.5205
00:14:38 - process[1]: training epoch 8 ...
00:14:57 - process[1] - epoch 8 - train iter 386 - 16777.0 words/s - loss: 0.4979
00:14:57 - process[1]: training epoch 9 ...
00:15:14 - process[1] - epoch 9 - train iter 386 - 16926.5 words/s - loss: 0.4727
00:15:14 - process[1]: training epoch 10 ...
00:15:34 - process[1] - epoch 10 - train iter 386 - 15383.1 words/s - loss: 0.5005
00:15:34 - process[1]: evaluating epoch 10 on dev ...
00:16:13 - dev set during evaluation: 15580/15574
00:16:13 - process[1] - dev - epoch 10 - mAP: 0.343 w/ 38 queries
00:16:13 - process[1]: evaluating epoch 10 on test ...
00:16:46 - test set during evaluation: 14340/14338
00:16:46 - process[1] - test - epoch 10 - mAP: 0.394 w/ 39 queries
00:16:46 - process[1]: training epoch 11 ...
00:17:05 - process[1] - epoch 11 - train iter 386 - 15489.8 words/s - loss: 0.4508
00:17:05 - process[1]: evaluating epoch 11 on dev ...
00:17:40 - dev set during evaluation: 15580/15574
00:17:40 - process[1] - dev - epoch 11 - mAP: 0.347 w/ 38 queries
00:17:40 - process[1]: evaluating epoch 11 on test ...
00:18:13 - test set during evaluation: 14340/14338
00:18:13 - process[1] - test - epoch 11 - mAP: 0.433 w/ 39 queries
00:18:13 - process[1]: training epoch 12 ...
00:18:30 - process[1] - epoch 12 - train iter 386 - 17636.4 words/s - loss: 0.4161
00:18:30 - process[1]: evaluating epoch 12 on dev ...
00:19:06 - dev set during evaluation: 15580/15574
00:19:06 - process[1] - dev - epoch 12 - mAP: 0.339 w/ 38 queries
00:19:06 - process[1]: training epoch 13 ...
00:19:25 - process[1] - epoch 13 - train iter 386 - 15674.0 words/s - loss: 0.4426
00:19:25 - process[1]: evaluating epoch 13 on dev ...
00:20:00 - dev set during evaluation: 15580/15574
00:20:00 - process[1] - dev - epoch 13 - mAP: 0.373 w/ 38 queries
00:20:00 - process[1]: evaluating epoch 13 on test ...
00:20:33 - test set during evaluation: 14340/14338
00:20:33 - process[1] - test - epoch 13 - mAP: 0.431 w/ 39 queries
00:20:33 - process[1]: training epoch 14 ...
00:20:52 - process[1] - epoch 14 - train iter 386 - 16698.0 words/s - loss: 0.4437
00:20:52 - process[1]: evaluating epoch 14 on dev ...
00:21:28 - dev set during evaluation: 15580/15574
00:21:28 - process[1] - dev - epoch 14 - mAP: 0.364 w/ 38 queries
00:21:28 - process[1]: training epoch 15 ...
00:21:47 - process[1] - epoch 15 - train iter 386 - 15772.7 words/s - loss: 0.4147
00:21:47 - process[1]: evaluating epoch 15 on dev ...
00:22:22 - dev set during evaluation: 15580/15574
00:22:22 - process[1] - dev - epoch 15 - mAP: 0.349 w/ 38 queries
00:22:22 - process[1]: training epoch 16 ...
00:22:38 - process[1] - epoch 16 - train iter 386 - 18277.8 words/s - loss: 0.4121
00:22:38 - process[1]: evaluating epoch 16 on dev ...
00:23:16 - dev set during evaluation: 15580/15574
00:23:16 - process[1] - dev - epoch 16 - mAP: 0.349 w/ 38 queries
00:23:16 - process[1]: training epoch 17 ...
00:23:34 - process[1] - epoch 17 - train iter 386 - 17268.7 words/s - loss: 0.4373
00:23:34 - process[1]: evaluating epoch 17 on dev ...
00:24:10 - dev set during evaluation: 15580/15574
00:24:10 - process[1] - dev - epoch 17 - mAP: 0.347 w/ 38 queries
00:24:10 - process[1]: training epoch 18 ...
00:24:29 - process[1] - epoch 18 - train iter 386 - 15833.4 words/s - loss: 0.4110
00:24:29 - process[1]: evaluating epoch 18 on dev ...
00:25:05 - dev set during evaluation: 15580/15574
00:25:05 - process[1] - dev - epoch 18 - mAP: 0.345 w/ 38 queries
00:25:05 - process[1]: training epoch 19 ...
00:25:24 - process[1] - epoch 19 - train iter 386 - 15659.4 words/s - loss: 0.4221
00:25:24 - process[1]: evaluating epoch 19 on dev ...
00:25:58 - dev set during evaluation: 15580/15574
00:25:58 - process[1] - dev - epoch 19 - mAP: 0.336 w/ 38 queries
00:25:58 - [fold 2] best test MAP: 0.431 @ epoch 13
00:25:58 - Evaluating every 1 epochs ...
00:25:58 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:25:59 - test has 39 queries ...
00:25:59 - Data reading done ...
00:26:01 - adding 9-th encoder to optimizer...
00:26:01 - adding 10-th encoder to optimizer...
00:26:01 - adding 11-th encoder to optimizer...
00:26:01 - process[1]: training epoch 0 ...
00:26:20 - process[1] - epoch 0 - train iter 360 - 15796.0 words/s - loss: 0.6913
00:26:20 - process[1]: training epoch 1 ...
00:26:36 - process[1] - epoch 1 - train iter 360 - 17069.5 words/s - loss: 0.6839
00:26:36 - process[1]: training epoch 2 ...
00:26:54 - process[1] - epoch 2 - train iter 360 - 16183.8 words/s - loss: 0.6539
00:26:54 - process[1]: training epoch 3 ...
00:27:13 - process[1] - epoch 3 - train iter 360 - 15388.2 words/s - loss: 0.6347
00:27:13 - process[1]: training epoch 4 ...
00:27:30 - process[1] - epoch 4 - train iter 360 - 16446.2 words/s - loss: 0.6066
00:27:30 - process[1]: training epoch 5 ...
00:27:49 - process[1] - epoch 5 - train iter 360 - 14552.9 words/s - loss: 0.5450
00:27:49 - process[1]: training epoch 6 ...
00:28:06 - process[1] - epoch 6 - train iter 360 - 16791.7 words/s - loss: 0.5883
00:28:06 - process[1]: training epoch 7 ...
00:28:26 - process[1] - epoch 7 - train iter 360 - 14411.8 words/s - loss: 0.5625
00:28:26 - process[1]: training epoch 8 ...
00:28:46 - process[1] - epoch 8 - train iter 360 - 14955.2 words/s - loss: 0.5292
00:28:46 - process[1]: training epoch 9 ...
00:29:04 - process[1] - epoch 9 - train iter 360 - 15839.9 words/s - loss: 0.5160
00:29:04 - process[1]: training epoch 10 ...
00:29:22 - process[1] - epoch 10 - train iter 360 - 15625.4 words/s - loss: 0.5167
00:29:22 - process[1]: evaluating epoch 10 on dev ...
00:29:54 - dev set during evaluation: 14340/14338
00:29:54 - process[1] - dev - epoch 10 - mAP: 0.406 w/ 39 queries
00:29:54 - process[1]: evaluating epoch 10 on test ...
00:30:23 - test set during evaluation: 11710/11707
00:30:23 - process[1] - test - epoch 10 - mAP: 0.448 w/ 39 queries
00:30:23 - process[1]: training epoch 11 ...
00:30:40 - process[1] - epoch 11 - train iter 360 - 16645.6 words/s - loss: 0.5182
00:30:40 - process[1]: evaluating epoch 11 on dev ...
00:31:14 - dev set during evaluation: 14340/14338
00:31:14 - process[1] - dev - epoch 11 - mAP: 0.422 w/ 39 queries
00:31:14 - process[1]: evaluating epoch 11 on test ...
00:31:43 - test set during evaluation: 11710/11707
00:31:43 - process[1] - test - epoch 11 - mAP: 0.435 w/ 39 queries
00:31:43 - process[1]: training epoch 12 ...
00:32:01 - process[1] - epoch 12 - train iter 360 - 16288.1 words/s - loss: 0.4901
00:32:01 - process[1]: evaluating epoch 12 on dev ...
00:32:33 - dev set during evaluation: 14340/14338
00:32:33 - process[1] - dev - epoch 12 - mAP: 0.430 w/ 39 queries
00:32:33 - process[1]: evaluating epoch 12 on test ...
00:33:02 - test set during evaluation: 11710/11707
00:33:02 - process[1] - test - epoch 12 - mAP: 0.456 w/ 39 queries
00:33:02 - process[1]: training epoch 13 ...
00:33:18 - process[1] - epoch 13 - train iter 360 - 16884.1 words/s - loss: 0.4855
00:33:18 - process[1]: evaluating epoch 13 on dev ...
00:33:51 - dev set during evaluation: 14340/14338
00:33:51 - process[1] - dev - epoch 13 - mAP: 0.420 w/ 39 queries
00:33:51 - process[1]: training epoch 14 ...
00:34:09 - process[1] - epoch 14 - train iter 360 - 15823.9 words/s - loss: 0.4646
00:34:09 - process[1]: evaluating epoch 14 on dev ...
00:34:41 - dev set during evaluation: 14340/14338
00:34:41 - process[1] - dev - epoch 14 - mAP: 0.429 w/ 39 queries
00:34:41 - process[1]: training epoch 15 ...
00:34:58 - process[1] - epoch 15 - train iter 360 - 17012.2 words/s - loss: 0.4913
00:34:58 - process[1]: evaluating epoch 15 on dev ...
00:35:31 - dev set during evaluation: 14340/14338
00:35:31 - process[1] - dev - epoch 15 - mAP: 0.431 w/ 39 queries
00:35:31 - process[1]: evaluating epoch 15 on test ...
00:36:00 - test set during evaluation: 11710/11707
00:36:00 - process[1] - test - epoch 15 - mAP: 0.471 w/ 39 queries
00:36:00 - process[1]: training epoch 16 ...
00:36:19 - process[1] - epoch 16 - train iter 360 - 15473.4 words/s - loss: 0.4940
00:36:19 - process[1]: evaluating epoch 16 on dev ...
00:36:51 - dev set during evaluation: 14340/14338
00:36:51 - process[1] - dev - epoch 16 - mAP: 0.415 w/ 39 queries
00:36:51 - process[1]: training epoch 17 ...
00:37:07 - process[1] - epoch 17 - train iter 360 - 17528.8 words/s - loss: 0.4523
00:37:07 - process[1]: evaluating epoch 17 on dev ...
00:37:42 - dev set during evaluation: 14340/14338
00:37:42 - process[1] - dev - epoch 17 - mAP: 0.438 w/ 39 queries
00:37:42 - process[1]: evaluating epoch 17 on test ...
00:38:11 - test set during evaluation: 11710/11707
00:38:11 - process[1] - test - epoch 17 - mAP: 0.465 w/ 39 queries
00:38:11 - process[1]: training epoch 18 ...
00:38:29 - process[1] - epoch 18 - train iter 360 - 16410.4 words/s - loss: 0.4436
00:38:29 - process[1]: evaluating epoch 18 on dev ...
00:39:03 - dev set during evaluation: 14340/14338
00:39:04 - process[1] - dev - epoch 18 - mAP: 0.430 w/ 39 queries
00:39:04 - process[1]: training epoch 19 ...
00:39:21 - process[1] - epoch 19 - train iter 360 - 16244.4 words/s - loss: 0.4374
00:39:21 - process[1]: evaluating epoch 19 on dev ...
00:39:54 - dev set during evaluation: 14340/14338
00:39:54 - process[1] - dev - epoch 19 - mAP: 0.420 w/ 39 queries
00:39:54 - [fold 3] best test MAP: 0.465 @ epoch 17
00:39:54 - Evaluating every 1 epochs ...
00:39:54 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:39:56 - test has 38 queries ...
00:39:56 - Data reading done ...
00:39:57 - adding 9-th encoder to optimizer...
00:39:57 - adding 10-th encoder to optimizer...
00:39:57 - adding 11-th encoder to optimizer...
00:39:57 - process[1]: training epoch 0 ...
00:40:17 - process[1] - epoch 0 - train iter 404 - 16376.3 words/s - loss: 0.6769
00:40:17 - process[1]: training epoch 1 ...
00:40:33 - process[1] - epoch 1 - train iter 404 - 19941.0 words/s - loss: 0.6824
00:40:33 - process[1]: training epoch 2 ...
00:40:52 - process[1] - epoch 2 - train iter 404 - 16984.1 words/s - loss: 0.6480
00:40:52 - process[1]: training epoch 3 ...
00:41:10 - process[1] - epoch 3 - train iter 404 - 17272.4 words/s - loss: 0.6478
00:41:10 - process[1]: training epoch 4 ...
00:41:29 - process[1] - epoch 4 - train iter 404 - 17251.5 words/s - loss: 0.6173
00:41:29 - process[1]: training epoch 5 ...
00:41:46 - process[1] - epoch 5 - train iter 404 - 18594.4 words/s - loss: 0.6084
00:41:46 - process[1]: training epoch 6 ...
00:42:04 - process[1] - epoch 6 - train iter 404 - 17708.3 words/s - loss: 0.5741
00:42:04 - process[1]: training epoch 7 ...
00:42:24 - process[1] - epoch 7 - train iter 404 - 15903.9 words/s - loss: 0.5395
00:42:24 - process[1]: training epoch 8 ...
00:42:40 - process[1] - epoch 8 - train iter 404 - 19860.8 words/s - loss: 0.5547
00:42:40 - process[1]: training epoch 9 ...
00:42:59 - process[1] - epoch 9 - train iter 404 - 16850.2 words/s - loss: 0.5179
00:42:59 - process[1]: training epoch 10 ...
00:43:17 - process[1] - epoch 10 - train iter 404 - 17753.9 words/s - loss: 0.5204
00:43:17 - process[1]: evaluating epoch 10 on dev ...
00:43:43 - dev set during evaluation: 11710/11707
00:43:43 - process[1] - dev - epoch 10 - mAP: 0.443 w/ 39 queries
00:43:43 - process[1]: evaluating epoch 10 on test ...
00:44:10 - test set during evaluation: 13490/13483
00:44:10 - process[1] - test - epoch 10 - mAP: 0.399 w/ 38 queries
00:44:10 - process[1]: training epoch 11 ...
00:44:28 - process[1] - epoch 11 - train iter 404 - 17820.7 words/s - loss: 0.5038
00:44:28 - process[1]: evaluating epoch 11 on dev ...
00:44:57 - dev set during evaluation: 11710/11707
00:44:57 - process[1] - dev - epoch 11 - mAP: 0.430 w/ 39 queries
00:44:57 - process[1]: training epoch 12 ...
00:45:16 - process[1] - epoch 12 - train iter 404 - 16986.0 words/s - loss: 0.4694
00:45:16 - process[1]: evaluating epoch 12 on dev ...
00:45:42 - dev set during evaluation: 11710/11707
00:45:42 - process[1] - dev - epoch 12 - mAP: 0.441 w/ 39 queries
00:45:42 - process[1]: training epoch 13 ...
00:45:59 - process[1] - epoch 13 - train iter 404 - 18794.4 words/s - loss: 0.4850
00:45:59 - process[1]: evaluating epoch 13 on dev ...
00:46:27 - dev set during evaluation: 11710/11707
00:46:27 - process[1] - dev - epoch 13 - mAP: 0.446 w/ 39 queries
00:46:27 - process[1]: evaluating epoch 13 on test ...
00:46:54 - test set during evaluation: 13490/13483
00:46:55 - process[1] - test - epoch 13 - mAP: 0.406 w/ 38 queries
00:46:55 - process[1]: training epoch 14 ...
00:47:14 - process[1] - epoch 14 - train iter 404 - 16740.9 words/s - loss: 0.4634
00:47:14 - process[1]: evaluating epoch 14 on dev ...
00:47:40 - dev set during evaluation: 11710/11707
00:47:40 - process[1] - dev - epoch 14 - mAP: 0.451 w/ 39 queries
00:47:40 - process[1]: evaluating epoch 14 on test ...
00:48:08 - test set during evaluation: 13490/13483
00:48:08 - process[1] - test - epoch 14 - mAP: 0.410 w/ 38 queries
00:48:08 - process[1]: training epoch 15 ...
00:48:26 - process[1] - epoch 15 - train iter 404 - 17955.5 words/s - loss: 0.4603
00:48:26 - process[1]: evaluating epoch 15 on dev ...
00:48:53 - dev set during evaluation: 11710/11707
00:48:53 - process[1] - dev - epoch 15 - mAP: 0.456 w/ 39 queries
00:48:53 - process[1]: evaluating epoch 15 on test ...
00:49:20 - test set during evaluation: 13490/13483
00:49:20 - process[1] - test - epoch 15 - mAP: 0.427 w/ 38 queries
00:49:20 - process[1]: training epoch 16 ...
00:49:38 - process[1] - epoch 16 - train iter 404 - 18400.7 words/s - loss: 0.4734
00:49:38 - process[1]: evaluating epoch 16 on dev ...
00:50:05 - dev set during evaluation: 11710/11707
00:50:05 - process[1] - dev - epoch 16 - mAP: 0.433 w/ 39 queries
00:50:05 - process[1]: training epoch 17 ...
00:50:25 - process[1] - epoch 17 - train iter 404 - 16533.4 words/s - loss: 0.4365
00:50:25 - process[1]: evaluating epoch 17 on dev ...
00:50:51 - dev set during evaluation: 11710/11707
00:50:51 - process[1] - dev - epoch 17 - mAP: 0.456 w/ 39 queries
00:50:51 - process[1]: evaluating epoch 17 on test ...
00:51:18 - test set during evaluation: 13490/13483
00:51:18 - process[1] - test - epoch 17 - mAP: 0.437 w/ 38 queries
00:51:18 - process[1]: training epoch 18 ...
00:51:37 - process[1] - epoch 18 - train iter 404 - 17416.4 words/s - loss: 0.4169
00:51:37 - process[1]: evaluating epoch 18 on dev ...
00:52:04 - dev set during evaluation: 11710/11707
00:52:04 - process[1] - dev - epoch 18 - mAP: 0.455 w/ 39 queries
00:52:04 - process[1]: training epoch 19 ...
00:52:23 - process[1] - epoch 19 - train iter 404 - 16830.5 words/s - loss: 0.4182
00:52:23 - process[1]: evaluating epoch 19 on dev ...
00:52:48 - dev set during evaluation: 11710/11707
00:52:48 - process[1] - dev - epoch 19 - mAP: 0.458 w/ 39 queries
00:52:48 - process[1]: evaluating epoch 19 on test ...
00:53:15 - test set during evaluation: 13490/13483
00:53:15 - process[1] - test - epoch 19 - mAP: 0.406 w/ 38 queries
00:53:15 - [fold 4] best test MAP: 0.406 @ epoch 19
00:53:15 - Evaluating every 1 epochs ...
00:53:15 - reading data from /mnt/home/puxuan/CLIR-project/Evaluation_data/process-clef/uncased
00:53:16 - test has 38 queries ...
00:53:16 - Data reading done ...
00:53:18 - adding 9-th encoder to optimizer...
00:53:18 - adding 10-th encoder to optimizer...
00:53:18 - adding 11-th encoder to optimizer...
00:53:18 - process[1]: training epoch 0 ...
00:53:36 - process[1] - epoch 0 - train iter 444 - 20495.4 words/s - loss: 0.6871
00:53:36 - process[1]: training epoch 1 ...
00:53:54 - process[1] - epoch 1 - train iter 444 - 19247.6 words/s - loss: 0.6603
00:53:54 - process[1]: training epoch 2 ...
00:54:13 - process[1] - epoch 2 - train iter 444 - 18691.8 words/s - loss: 0.6327
00:54:13 - process[1]: training epoch 3 ...
00:54:31 - process[1] - epoch 3 - train iter 444 - 19747.3 words/s - loss: 0.6322
00:54:31 - process[1]: training epoch 4 ...
00:54:50 - process[1] - epoch 4 - train iter 444 - 18699.5 words/s - loss: 0.6178
00:54:50 - process[1]: training epoch 5 ...
00:55:10 - process[1] - epoch 5 - train iter 444 - 17780.9 words/s - loss: 0.5785
00:55:10 - process[1]: training epoch 6 ...
00:55:29 - process[1] - epoch 6 - train iter 444 - 18589.6 words/s - loss: 0.5753
00:55:29 - process[1]: training epoch 7 ...
00:55:47 - process[1] - epoch 7 - train iter 444 - 19738.5 words/s - loss: 0.5289
00:55:47 - process[1]: training epoch 8 ...
00:56:05 - process[1] - epoch 8 - train iter 444 - 19088.9 words/s - loss: 0.5194
00:56:05 - process[1]: training epoch 9 ...
00:56:24 - process[1] - epoch 9 - train iter 444 - 18850.2 words/s - loss: 0.5106
00:56:24 - process[1]: training epoch 10 ...
00:56:43 - process[1] - epoch 10 - train iter 444 - 19290.6 words/s - loss: 0.4859
00:56:43 - process[1]: evaluating epoch 10 on dev ...
00:57:13 - dev set during evaluation: 13490/13483
00:57:13 - process[1] - dev - epoch 10 - mAP: 0.386 w/ 38 queries
00:57:13 - process[1]: evaluating epoch 10 on test ...
00:57:46 - test set during evaluation: 13890/13887
00:57:46 - process[1] - test - epoch 10 - mAP: 0.364 w/ 38 queries
00:57:46 - process[1]: training epoch 11 ...
00:58:04 - process[1] - epoch 11 - train iter 444 - 19322.0 words/s - loss: 0.4951
00:58:04 - process[1]: evaluating epoch 11 on dev ...
00:58:33 - dev set during evaluation: 13490/13483
00:58:33 - process[1] - dev - epoch 11 - mAP: 0.409 w/ 38 queries
00:58:33 - process[1]: evaluating epoch 11 on test ...
00:59:05 - test set during evaluation: 13890/13887
00:59:05 - process[1] - test - epoch 11 - mAP: 0.382 w/ 38 queries
00:59:05 - process[1]: training epoch 12 ...
00:59:24 - process[1] - epoch 12 - train iter 444 - 18513.9 words/s - loss: 0.4833
00:59:24 - process[1]: evaluating epoch 12 on dev ...
00:59:51 - dev set during evaluation: 13490/13483
00:59:51 - process[1] - dev - epoch 12 - mAP: 0.367 w/ 38 queries
00:59:51 - process[1]: training epoch 13 ...
01:00:11 - process[1] - epoch 13 - train iter 444 - 17800.5 words/s - loss: 0.4786
01:00:11 - process[1]: evaluating epoch 13 on dev ...
01:00:37 - dev set during evaluation: 13490/13483
01:00:37 - process[1] - dev - epoch 13 - mAP: 0.404 w/ 38 queries
01:00:37 - process[1]: training epoch 14 ...
01:00:56 - process[1] - epoch 14 - train iter 444 - 18735.0 words/s - loss: 0.4649
01:00:56 - process[1]: evaluating epoch 14 on dev ...
01:01:25 - dev set during evaluation: 13490/13483
01:01:25 - process[1] - dev - epoch 14 - mAP: 0.402 w/ 38 queries
01:01:25 - process[1]: training epoch 15 ...
01:01:43 - process[1] - epoch 15 - train iter 444 - 18946.1 words/s - loss: 0.4700
01:01:43 - process[1]: evaluating epoch 15 on dev ...
01:02:11 - dev set during evaluation: 13490/13483
01:02:11 - process[1] - dev - epoch 15 - mAP: 0.412 w/ 38 queries
01:02:11 - process[1]: evaluating epoch 15 on test ...
01:02:43 - test set during evaluation: 13890/13887
01:02:43 - process[1] - test - epoch 15 - mAP: 0.397 w/ 38 queries
01:02:43 - process[1]: training epoch 16 ...
01:03:03 - process[1] - epoch 16 - train iter 444 - 17756.8 words/s - loss: 0.4617
01:03:03 - process[1]: evaluating epoch 16 on dev ...
01:03:30 - dev set during evaluation: 13490/13483
01:03:30 - process[1] - dev - epoch 16 - mAP: 0.424 w/ 38 queries
01:03:30 - process[1]: evaluating epoch 16 on test ...
01:04:02 - test set during evaluation: 13890/13887
01:04:02 - process[1] - test - epoch 16 - mAP: 0.422 w/ 38 queries
01:04:02 - process[1]: training epoch 17 ...
01:04:20 - process[1] - epoch 17 - train iter 444 - 19677.5 words/s - loss: 0.4407
01:04:20 - process[1]: evaluating epoch 17 on dev ...
01:04:49 - dev set during evaluation: 13490/13483
01:04:49 - process[1] - dev - epoch 17 - mAP: 0.406 w/ 38 queries
01:04:49 - process[1]: training epoch 18 ...
01:05:09 - process[1] - epoch 18 - train iter 444 - 17893.7 words/s - loss: 0.4537
01:05:09 - process[1]: evaluating epoch 18 on dev ...
01:05:36 - dev set during evaluation: 13490/13483
01:05:36 - process[1] - dev - epoch 18 - mAP: 0.412 w/ 38 queries
01:05:36 - process[1]: training epoch 19 ...
01:05:54 - process[1] - epoch 19 - train iter 444 - 19703.9 words/s - loss: 0.4400
01:05:54 - process[1]: evaluating epoch 19 on dev ...
01:06:22 - dev set during evaluation: 13490/13483
01:06:22 - process[1] - dev - epoch 19 - mAP: 0.412 w/ 38 queries
01:06:22 - [fold 5] best test MAP: 0.422 @ epoch 16
01:06:22 - [0.33565141712411073, 0.43107387838135436, 0.46454584299718515, 0.4058311315838981, 0.42245578033331516]
01:06:22 - [38, 39, 39, 38, 38]
01:06:22 - final MAP: 0.412
